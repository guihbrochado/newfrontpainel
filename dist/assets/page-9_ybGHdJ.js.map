{"version":3,"file":"page-9_ybGHdJ.js","sources":["../../node_modules/react-bootstrap/esm/Image.js","../../src/app/(admin)/usuarios/criar/page.tsx"],"sourcesContent":["\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const propTypes = {\n  /**\n   * @default 'img'\n   */\n  bsPrefix: PropTypes.string,\n  /**\n   * Sets image as fluid image.\n   */\n  fluid: PropTypes.bool,\n  /**\n   * Sets image shape as rounded.\n   */\n  rounded: PropTypes.bool,\n  /**\n   * Sets image shape as circle.\n   */\n  roundedCircle: PropTypes.bool,\n  /**\n   * Sets image shape as thumbnail.\n   */\n  thumbnail: PropTypes.bool\n};\nconst Image = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  fluid = false,\n  rounded = false,\n  roundedCircle = false,\n  thumbnail = false,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'img');\n  return /*#__PURE__*/_jsx(\"img\", {\n    // eslint-disable-line jsx-a11y/alt-text\n    ref: ref,\n    ...props,\n    className: classNames(className, fluid && `${bsPrefix}-fluid`, rounded && `rounded`, roundedCircle && `rounded-circle`, thumbnail && `${bsPrefix}-thumbnail`)\n  });\n});\nImage.displayName = 'Image';\nexport default Image;","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Form, Button, Alert, Image } from \"react-bootstrap\";\nimport axios from \"axios\";\n\n// FunÃ§Ã£o para validar a senha\nconst validarSenha = (password: string): string | null => {\n  const minLength = 8;\n  const hasUpperCase = /[A-Z]/.test(password);\n  const hasLowerCase = /[a-z]/.test(password);\n  const hasNumber = /\\d/.test(password);\n\n  if (password.length < minLength) {\n    return `A senha deve ter pelo menos ${minLength} caracteres.`;\n  }\n  if (!hasUpperCase) {\n    return \"A senha deve conter pelo menos uma letra maiÃºscula.\";\n  }\n  if (!hasLowerCase) {\n    return \"A senha deve conter pelo menos uma letra minÃºscula.\";\n  }\n  if (!hasNumber) {\n    return \"A senha deve conter pelo menos um nÃºmero.\";\n  }\n  return null;\n};\n\nconst CriarUsuario = () => {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"UsuÃ¡rio Restrito\",\n    profile_photo: null,\n  });\n  \n  const API_URL = import.meta.env.VITE_API_URL;\n  const [preview, setPreview] = useState<string | null>(null);\n  const [mensagem, setMensagem] = useState(\"\");\n  const [roleUsuario, setRoleUsuario] = useState(\"\");\n  const [erro, setErro] = useState(\"\");\n\n  useEffect(() => {\n    const verificarPermissao = async () => {\n      const token = localStorage.getItem(\"token\");\n\n      try {\n        const response = await axios.get(`${API_URL}/user`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\tconsole.log(response.data);\n        setRoleUsuario(response.data.role);\n\n        if (response.data.role !== \"Administrador\") {\n          setErro(\"ðŸš« VocÃª nÃ£o tem permissÃ£o para criar usuÃ¡rios!\");\n        }\n      } catch (error) {\n        setErro(\"Erro ao carregar permissÃµes.\");\n      }\n    };\n\n    verificarPermissao();\n  }, []);\n\n  const handleChange = (e) => {\n    if (e.target.name === \"profile_photo\") {\n      const file = e.target.files[0];\n      setFormData({ ...formData, profile_photo: file });\n\n      // Exibir a prÃ©via da imagem\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result as string);\n      reader.readAsDataURL(file);\n    } else {\n      setFormData({ ...formData, [e.target.name]: e.target.value });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const erroSenha = validarSenha(formData.password);\n    if (erroSenha) {\n      setMensagem(`ðŸš« ${erroSenha}`);\n      return;\n    }\n\n    if (roleUsuario !== \"Administrador\") {\n      setMensagem(\"ðŸš« Apenas administradores podem criar usuÃ¡rios.\");\n      return;\n    }\n\n    // Criar FormData para envio do arquivo\n    const formDataObj = new FormData();\n    formDataObj.append(\"name\", formData.name);\n    formDataObj.append(\"email\", formData.email);\n    formDataObj.append(\"password\", formData.password);\n    formDataObj.append(\"role\", formData.role);\n    if (formData.profile_photo) {\n      formDataObj.append(\"profile_photo\", formData.profile_photo);\n    }\n\n    try {\n      const response = await axios.post(`${API_URL}/users`, formDataObj, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n\tconsole.log(response.data);\n      setMensagem(\"âœ… UsuÃ¡rio criado com sucesso!\");\n      setFormData({ name: \"\", email: \"\", password: \"\", role: \"UsuÃ¡rio Restrito\", profile_photo: null });\n      setPreview(null);\n    } catch (error) {\n      setMensagem(\"ðŸš« Erro ao criar usuÃ¡rio.\");\n    }\n  };\n\n  if (erro) {\n    return <Alert variant=\"danger\">{erro}</Alert>;\n  }\n\n  return (\n    <div>\n      <h2>ðŸ†• Criar UsuÃ¡rio</h2>\n      {mensagem && (\n        <Alert variant={mensagem.startsWith(\"âœ…\") ? \"success\" : \"danger\"}>{mensagem}</Alert>\n      )}\n\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"name\">\n          <Form.Label>Nome</Form.Label>\n          <Form.Control type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} required />\n        </Form.Group>\n\n        <Form.Group controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} required />\n        </Form.Group>\n\n        <Form.Group controlId=\"password\">\n          <Form.Label>Senha</Form.Label>\n          <Form.Control\n            type=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={(e) => {\n              setFormData({ ...formData, [e.target.name]: e.target.value });\n              // Limpar mensagem de erro ao alterar a senha\n              if (mensagem.startsWith(\"ðŸš«\") && mensagem !== \"ðŸš« Apenas administradores podem criar usuÃ¡rios.\") {\n                setMensagem(\"\");\n              }\n            }}\n            required\n          />\n          <Form.Text className=\"text-muted\">\n            A senha deve ter pelo menos 8 caracteres, incluindo uma letra maiÃºscula, uma letra minÃºscula e um nÃºmero.\n          </Form.Text>\n        </Form.Group>\n\n        <Form.Group controlId=\"role\">\n          <Form.Label>Tipo de UsuÃ¡rio</Form.Label>\n          <Form.Control as=\"select\" name=\"role\" value={formData.role} onChange={handleChange} required>\n            <option value=\"Administrador\">Administrador</option>\n            <option value=\"Editor\">Editor</option>\n            <option value=\"Colunista\">Colunista</option>\n            <option value=\"UsuÃ¡rio Restrito\">UsuÃ¡rio Restrito</option>\n          </Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId=\"profile_photo\">\n          <Form.Label>Foto de Perfil</Form.Label>\n          <Form.Control type=\"file\" name=\"profile_photo\" onChange={handleChange} accept=\"image/*\" />\n        </Form.Group>\n\n        {preview && (\n          <div className=\"text-center mt-2\">\n            <Image src={preview} alt=\"PrÃ©via da Foto\" roundedCircle width={100} />\n          </div>\n        )}\n\n        <Button variant=\"success\" type=\"submit\" className=\"mt-3\">\n          Criar UsuÃ¡rio\n        </Button>\n      </Form>\n    </div>\n  );\n};\n\nexport default CriarUsuario;\n"],"names":["PropTypes","Image","React.forwardRef","bsPrefix","className","fluid","rounded","roundedCircle","thumbnail","props","ref","useBootstrapPrefix","_jsx","classNames","validarSenha","password","hasUpperCase","hasLowerCase","hasNumber","CriarUsuario","formData","setFormData","useState","API_URL","preview","setPreview","mensagem","setMensagem","roleUsuario","setRoleUsuario","erro","setErro","useEffect","token","response","axios","handleChange","e","file","reader","handleSubmit","erroSenha","formDataObj","Alert","jsx","jsxs","Form","Button"],"mappings":"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","x_google_ignoreList":[0]}