import{u as U,b as Y,c as Z}from"./useWindow-DJtzQdYK.js";import{y as W,r,N as ee,O as te,B,p as ne,i as k,j as v,k as b,D as z,H as $,a2 as M,a3 as se,P as oe}from"./index-UUiNTc0V.js";import{a as re}from"./hook-QqkXmZtl.js";import{a as ae,g as ie,u as le,m as ce}from"./mergeOptionsWithPopperConfig-Cbe8MKVx.js";import{i as ue,u as I,r as de,h as L}from"./hasClass-DCL2hLsE.js";const fe=()=>{};function me(e,n,{disabled:t,clickTrigger:s}={}){const o=n||fe;ae(e,o,{disabled:t,clickTrigger:s});const i=W(l=>{ue(l)&&o(l)});r.useEffect(()=>{if(t||e==null)return;const l=ee(ie(e));let h=(l.defaultView||window).event;const u=te(l,"keyup",f=>{if(f===h){h=void 0;return}i(f)});return()=>{u()}},[e,t,i])}const A=r.forwardRef((e,n)=>{const{flip:t,offset:s,placement:o,containerPadding:i,popperConfig:l={},transition:h,runTransition:u}=e,[f,y]=U(),[O,w]=U(),m=B(y,n),d=I(e.container),T=I(e.target),[a,p]=r.useState(!e.show),c=le(T,f,ce({placement:o,enableEvents:!!e.show,containerPadding:i||5,flip:t,offset:s,arrowElement:O,popperConfig:l}));e.show&&a&&p(!1);const x=(..._)=>{p(!0),e.onExited&&e.onExited(..._)},R=e.show||!a;if(me(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!R)return null;const{onExit:F,onExiting:C,onEnter:E,onEntering:j,onEntered:D}=e;let P=e.children(Object.assign({},c.attributes.popper,{style:c.styles.popper,ref:m}),{popper:c,placement:o,show:!!e.show,arrowProps:Object.assign({},c.attributes.arrow,{style:c.styles.arrow,ref:w})});return P=de(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:P,onExit:F,onExiting:C,onExited:x,onEnter:E,onEntering:j,onEntered:D}),d?ne.createPortal(P,d):null});A.displayName="Overlay";const V=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=k(n,"popover-header"),v.jsx(t,{ref:o,className:b(e,n),...s})));V.displayName="PopoverHeader";const H=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=k(n,"popover-body"),v.jsx(t,{ref:o,className:b(e,n),...s})));H.displayName="PopoverBody";function q(e,n){let t=e;return e==="left"?t=n?"end":"start":e==="right"&&(t=n?"start":"end"),t}function G(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const he=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,body:i,arrowProps:l,hasDoneInitialMeasure:h,popper:u,show:f,...y},O)=>{const w=k(e,"popover"),m=z(),[d]=(n==null?void 0:n.split("-"))||[],T=q(d,m);let a=s;return f&&!h&&(a={...s,...G(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:O,role:"tooltip",style:a,"x-placement":d,className:b(t,w,d&&`bs-popover-${T}`),...y,children:[v.jsx("div",{className:"popover-arrow",...l}),i?v.jsx(H,{children:o}):o]})}),pe=Object.assign(he,{Header:V,Body:H,POPPER_OFFSET:[0,8]}),J=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,arrowProps:i,hasDoneInitialMeasure:l,popper:h,show:u,...f},y)=>{e=k(e,"tooltip");const O=z(),[w]=(n==null?void 0:n.split("-"))||[],m=q(w,O);let d=s;return u&&!l&&(d={...s,...G(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:y,style:d,role:"tooltip","x-placement":w,className:b(t,e,`bs-tooltip-${m}`),...f,children:[v.jsx("div",{className:"tooltip-arrow",...i}),v.jsx("div",{className:`${e}-inner`,children:o})]})});J.displayName="Tooltip";const ve=Object.assign(J,{TOOLTIP_OFFSET:[0,6]});function ge(e){const n=r.useRef(null),t=k(void 0,"popover"),s=k(void 0,"tooltip"),o=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if(L(n.current,t))return pe.POPPER_OFFSET;if(L(n.current,s))return ve.TOOLTIP_OFFSET}return[0,0]}}}),[e,t,s]);return[n,[o]]}function ye(e,n){const{ref:t}=e,{ref:s}=n;e.ref=t.__wrapped||(t.__wrapped=o=>t(M(o))),n.ref=s.__wrapped||(s.__wrapped=o=>s(M(o)))}const Q=r.forwardRef(({children:e,transition:n=$,popperConfig:t={},rootClose:s=!1,placement:o="top",show:i=!1,...l},h)=>{const u=r.useRef({}),[f,y]=r.useState(null),[O,w]=ge(l.offset),m=B(h,O),d=n===!0?$:n||void 0,T=W(a=>{y(a),t==null||t.onFirstUpdate==null||t.onFirstUpdate(a)});return Y(()=>{f&&l.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[f,l.target]),r.useEffect(()=>{i||y(null)},[i]),v.jsx(A,{...l,ref:m,popperConfig:{...t,modifiers:w.concat(t.modifiers||[]),onFirstUpdate:T},transition:d,rootClose:s,placement:o,show:i,children:(a,{arrowProps:p,popper:c,show:x})=>{var R;ye(a,p);const F=c==null?void 0:c.placement,C=Object.assign(u.current,{state:c==null?void 0:c.state,scheduleUpdate:c==null?void 0:c.update,placement:F,outOfBoundaries:(c==null||(R=c.state)==null||(R=R.modifiersData.hide)==null?void 0:R.isReferenceHidden)||!1,strategy:t.strategy}),E=!!f;return typeof e=="function"?e({...a,placement:F,show:x,...!n&&x&&{className:"show"},popper:C,arrowProps:p,hasDoneInitialMeasure:E}):r.cloneElement(e,{...a,placement:F,arrowProps:p,popper:C,hasDoneInitialMeasure:E,className:b(e.props.className,!n&&x&&"show"),style:{...e.props.style,...a.style}})}})});Q.displayName="Overlay";function Oe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function K(e,n,t){const[s]=n,o=s.currentTarget,i=s.relatedTarget||s.nativeEvent[t];(!i||i!==o)&&!Z(o,i)&&e(...n)}oe.oneOf(["click","hover","focus"]);const Ce=({trigger:e=["hover","focus"],overlay:n,children:t,popperConfig:s={},show:o,defaultShow:i=!1,onToggle:l,delay:h,placement:u,flip:f=u&&u.indexOf("auto")!==-1,...y})=>{const O=r.useRef(null),w=B(O,t.ref),m=se(),d=r.useRef(""),[T,a]=re(o,i,l),p=Oe(h),{onFocus:c,onBlur:x,onClick:R}=typeof t!="function"?r.Children.only(t).props:{},F=g=>{w(M(g))},C=r.useCallback(()=>{if(m.clear(),d.current="show",!p.show){a(!0);return}m.set(()=>{d.current==="show"&&a(!0)},p.show)},[p.show,a,m]),E=r.useCallback(()=>{if(m.clear(),d.current="hide",!p.hide){a(!1);return}m.set(()=>{d.current==="hide"&&a(!1)},p.hide)},[p.hide,a,m]),j=r.useCallback((...g)=>{C(),c==null||c(...g)},[C,c]),D=r.useCallback((...g)=>{E(),x==null||x(...g)},[E,x]),P=r.useCallback((...g)=>{a(!T),R==null||R(...g)},[R,a,T]),_=r.useCallback((...g)=>{K(C,g,"fromElement")},[C]),X=r.useCallback((...g)=>{K(E,g,"toElement")},[E]),S=e==null?[]:[].concat(e),N={ref:F};return S.indexOf("click")!==-1&&(N.onClick=P),S.indexOf("focus")!==-1&&(N.onFocus=j,N.onBlur=D),S.indexOf("hover")!==-1&&(N.onMouseOver=_,N.onMouseOut=X),v.jsxs(v.Fragment,{children:[typeof t=="function"?t(N):r.cloneElement(t,N),v.jsx(Q,{...y,show:T,onHide:E,flip:f,placement:u,popperConfig:s,target:O.current,children:n})]})};export{Ce as O,pe as P,ve as T,H as a,V as b};
//# sourceMappingURL=OverlayTrigger-DVF2mn2x.js.map
