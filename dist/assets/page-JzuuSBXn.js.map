{"version":3,"file":"page-JzuuSBXn.js","sources":["../../node_modules/tslib/tslib.es6.mjs","../../node_modules/file-selector/dist/es5/file.js","../../node_modules/file-selector/dist/es5/file-selector.js","../../node_modules/attr-accept/dist/es/index.js","../../node_modules/react-dropzone/dist/es/utils/index.js","../../node_modules/react-dropzone/dist/es/index.js","../../src/components/FileUploader/useFileUploader.ts","../../src/components/FileUploader/index.tsx","../../node_modules/filepond/dist/filepond.esm.js","../../node_modules/react-filepond/dist/react-filepond.esm.js","../../node_modules/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.esm.js","../../node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.esm.js","../../node_modules/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.esm.js","../../src/app/(admin)/forms/file-uploads/components/FilePondUploader.tsx","../../src/app/(admin)/forms/file-uploads/components/AllFileUploads.tsx","../../src/app/(admin)/forms/file-uploads/page.tsx"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export var COMMON_MIME_TYPES = new Map([\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n    ['aac', 'audio/aac'],\n    ['abw', 'application/x-abiword'],\n    ['arc', 'application/x-freearc'],\n    ['avif', 'image/avif'],\n    ['avi', 'video/x-msvideo'],\n    ['azw', 'application/vnd.amazon.ebook'],\n    ['bin', 'application/octet-stream'],\n    ['bmp', 'image/bmp'],\n    ['bz', 'application/x-bzip'],\n    ['bz2', 'application/x-bzip2'],\n    ['cda', 'application/x-cdf'],\n    ['csh', 'application/x-csh'],\n    ['css', 'text/css'],\n    ['csv', 'text/csv'],\n    ['doc', 'application/msword'],\n    ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n    ['eot', 'application/vnd.ms-fontobject'],\n    ['epub', 'application/epub+zip'],\n    ['gz', 'application/gzip'],\n    ['gif', 'image/gif'],\n    ['heic', 'image/heic'],\n    ['heif', 'image/heif'],\n    ['htm', 'text/html'],\n    ['html', 'text/html'],\n    ['ico', 'image/vnd.microsoft.icon'],\n    ['ics', 'text/calendar'],\n    ['jar', 'application/java-archive'],\n    ['jpeg', 'image/jpeg'],\n    ['jpg', 'image/jpeg'],\n    ['js', 'text/javascript'],\n    ['json', 'application/json'],\n    ['jsonld', 'application/ld+json'],\n    ['mid', 'audio/midi'],\n    ['midi', 'audio/midi'],\n    ['mjs', 'text/javascript'],\n    ['mp3', 'audio/mpeg'],\n    ['mp4', 'video/mp4'],\n    ['mpeg', 'video/mpeg'],\n    ['mpkg', 'application/vnd.apple.installer+xml'],\n    ['odp', 'application/vnd.oasis.opendocument.presentation'],\n    ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],\n    ['odt', 'application/vnd.oasis.opendocument.text'],\n    ['oga', 'audio/ogg'],\n    ['ogv', 'video/ogg'],\n    ['ogx', 'application/ogg'],\n    ['opus', 'audio/opus'],\n    ['otf', 'font/otf'],\n    ['png', 'image/png'],\n    ['pdf', 'application/pdf'],\n    ['php', 'application/x-httpd-php'],\n    ['ppt', 'application/vnd.ms-powerpoint'],\n    ['pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation'],\n    ['rar', 'application/vnd.rar'],\n    ['rtf', 'application/rtf'],\n    ['sh', 'application/x-sh'],\n    ['svg', 'image/svg+xml'],\n    ['swf', 'application/x-shockwave-flash'],\n    ['tar', 'application/x-tar'],\n    ['tif', 'image/tiff'],\n    ['tiff', 'image/tiff'],\n    ['ts', 'video/mp2t'],\n    ['ttf', 'font/ttf'],\n    ['txt', 'text/plain'],\n    ['vsd', 'application/vnd.visio'],\n    ['wav', 'audio/wav'],\n    ['weba', 'audio/webm'],\n    ['webm', 'video/webm'],\n    ['webp', 'image/webp'],\n    ['woff', 'font/woff'],\n    ['woff2', 'font/woff2'],\n    ['xhtml', 'application/xhtml+xml'],\n    ['xls', 'application/vnd.ms-excel'],\n    ['xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n    ['xml', 'application/xml'],\n    ['xul', 'application/vnd.mozilla.xul+xml'],\n    ['zip', 'application/zip'],\n    ['7z', 'application/x-7z-compressed'],\n    // Others\n    ['mkv', 'video/x-matroska'],\n    ['mov', 'video/quicktime'],\n    ['msg', 'application/vnd.ms-outlook']\n]);\nexport function toFileWithPath(file, path) {\n    var f = withMimeType(file);\n    if (typeof f.path !== 'string') { // on electron, path is already set to the absolute path\n        var webkitRelativePath = file.webkitRelativePath;\n        Object.defineProperty(f, 'path', {\n            value: typeof path === 'string'\n                ? path\n                // If <input webkitdirectory> is set,\n                // the File will have a {webkitRelativePath} property\n                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\n                : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0\n                    ? webkitRelativePath\n                    : file.name,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    return f;\n}\nfunction withMimeType(file) {\n    var name = file.name;\n    var hasExtension = name && name.lastIndexOf('.') !== -1;\n    if (hasExtension && !file.type) {\n        var ext = name.split('.')\n            .pop().toLowerCase();\n        var type = COMMON_MIME_TYPES.get(ext);\n        if (type) {\n            Object.defineProperty(file, 'type', {\n                value: type,\n                writable: false,\n                configurable: false,\n                enumerable: true\n            });\n        }\n    }\n    return file;\n}\n//# sourceMappingURL=file.js.map","import { __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { toFileWithPath } from './file';\nvar FILES_TO_IGNORE = [\n    // Thumbnail cache files for macOS and Windows\n    '.DS_Store',\n    'Thumbs.db' // Windows\n];\n/**\n * Convert a DragEvent's DataTrasfer object to a list of File objects\n * NOTE: If some of the items are folders,\n * everything will be flattened and placed in the same list but the paths will be kept as a {path} property.\n *\n * EXPERIMENTAL: A list of https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle objects can also be passed as an arg\n * and a list of File objects will be returned.\n *\n * @param evt\n */\nexport function fromEvent(evt) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (isObject(evt) && isDataTransfer(evt.dataTransfer)) {\n                return [2 /*return*/, getDataTransferFiles(evt.dataTransfer, evt.type)];\n            }\n            else if (isChangeEvt(evt)) {\n                return [2 /*return*/, getInputFiles(evt)];\n            }\n            else if (Array.isArray(evt) && evt.every(function (item) { return 'getFile' in item && typeof item.getFile === 'function'; })) {\n                return [2 /*return*/, getFsHandleFiles(evt)];\n            }\n            return [2 /*return*/, []];\n        });\n    });\n}\nfunction isDataTransfer(value) {\n    return isObject(value);\n}\nfunction isChangeEvt(value) {\n    return isObject(value) && isObject(value.target);\n}\nfunction isObject(v) {\n    return typeof v === 'object' && v !== null;\n}\nfunction getInputFiles(evt) {\n    return fromList(evt.target.files).map(function (file) { return toFileWithPath(file); });\n}\n// Ee expect each handle to be https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle\nfunction getFsHandleFiles(handles) {\n    return __awaiter(this, void 0, void 0, function () {\n        var files;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Promise.all(handles.map(function (h) { return h.getFile(); }))];\n                case 1:\n                    files = _a.sent();\n                    return [2 /*return*/, files.map(function (file) { return toFileWithPath(file); })];\n            }\n        });\n    });\n}\nfunction getDataTransferFiles(dt, type) {\n    return __awaiter(this, void 0, void 0, function () {\n        var items, files;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!dt.items) return [3 /*break*/, 2];\n                    items = fromList(dt.items)\n                        .filter(function (item) { return item.kind === 'file'; });\n                    // According to https://html.spec.whatwg.org/multipage/dnd.html#dndevents,\n                    // only 'dragstart' and 'drop' has access to the data (source node)\n                    if (type !== 'drop') {\n                        return [2 /*return*/, items];\n                    }\n                    return [4 /*yield*/, Promise.all(items.map(toFilePromises))];\n                case 1:\n                    files = _a.sent();\n                    return [2 /*return*/, noIgnoredFiles(flatten(files))];\n                case 2: return [2 /*return*/, noIgnoredFiles(fromList(dt.files)\n                        .map(function (file) { return toFileWithPath(file); }))];\n            }\n        });\n    });\n}\nfunction noIgnoredFiles(files) {\n    return files.filter(function (file) { return FILES_TO_IGNORE.indexOf(file.name) === -1; });\n}\n// IE11 does not support Array.from()\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility\n// https://developer.mozilla.org/en-US/docs/Web/API/FileList\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItemList\nfunction fromList(items) {\n    if (items === null) {\n        return [];\n    }\n    var files = [];\n    // tslint:disable: prefer-for-of\n    for (var i = 0; i < items.length; i++) {\n        var file = items[i];\n        files.push(file);\n    }\n    return files;\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem\nfunction toFilePromises(item) {\n    if (typeof item.webkitGetAsEntry !== 'function') {\n        return fromDataTransferItem(item);\n    }\n    var entry = item.webkitGetAsEntry();\n    // Safari supports dropping an image node from a different window and can be retrieved using\n    // the DataTransferItem.getAsFile() API\n    // NOTE: FileSystemEntry.file() throws if trying to get the file\n    if (entry && entry.isDirectory) {\n        return fromDirEntry(entry);\n    }\n    return fromDataTransferItem(item);\n}\nfunction flatten(items) {\n    return items.reduce(function (acc, files) { return __spreadArray(__spreadArray([], __read(acc), false), __read((Array.isArray(files) ? flatten(files) : [files])), false); }, []);\n}\nfunction fromDataTransferItem(item) {\n    var file = item.getAsFile();\n    if (!file) {\n        return Promise.reject(\"\".concat(item, \" is not a File\"));\n    }\n    var fwp = toFileWithPath(file);\n    return Promise.resolve(fwp);\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemEntry\nfunction fromEntry(entry) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, entry.isDirectory ? fromDirEntry(entry) : fromFileEntry(entry)];\n        });\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry\nfunction fromDirEntry(entry) {\n    var reader = entry.createReader();\n    return new Promise(function (resolve, reject) {\n        var entries = [];\n        function readEntries() {\n            var _this = this;\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry/createReader\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryReader/readEntries\n            reader.readEntries(function (batch) { return __awaiter(_this, void 0, void 0, function () {\n                var files, err_1, items;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!!batch.length) return [3 /*break*/, 5];\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, Promise.all(entries)];\n                        case 2:\n                            files = _a.sent();\n                            resolve(files);\n                            return [3 /*break*/, 4];\n                        case 3:\n                            err_1 = _a.sent();\n                            reject(err_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [3 /*break*/, 6];\n                        case 5:\n                            items = Promise.all(batch.map(fromEntry));\n                            entries.push(items);\n                            // Continue reading\n                            readEntries();\n                            _a.label = 6;\n                        case 6: return [2 /*return*/];\n                    }\n                });\n            }); }, function (err) {\n                reject(err);\n            });\n        }\n        readEntries();\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileEntry\nfunction fromFileEntry(entry) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    entry.file(function (file) {\n                        var fwp = toFileWithPath(file, entry.fullPath);\n                        resolve(fwp);\n                    }, function (err) {\n                        reject(err);\n                    });\n                })];\n        });\n    });\n}\n//# sourceMappingURL=file-selector.js.map","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (file, acceptedFiles) {\n  if (file && acceptedFiles) {\n    var acceptedFilesArray = Array.isArray(acceptedFiles) ? acceptedFiles : acceptedFiles.split(',');\n    var fileName = file.name || '';\n    var mimeType = (file.type || '').toLowerCase();\n    var baseMimeType = mimeType.replace(/\\/.*$/, '');\n    return acceptedFilesArray.some(function (type) {\n      var validType = type.trim().toLowerCase();\n\n      if (validType.charAt(0) === '.') {\n        return fileName.toLowerCase().endsWith(validType);\n      } else if (validType.endsWith('/*')) {\n        // This is something like a image/* mime type\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      }\n\n      return mimeType === validType;\n    });\n  }\n\n  return true;\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport accepts from \"attr-accept\"; // Error codes\n\nexport var FILE_INVALID_TYPE = \"file-invalid-type\";\nexport var FILE_TOO_LARGE = \"file-too-large\";\nexport var FILE_TOO_SMALL = \"file-too-small\";\nexport var TOO_MANY_FILES = \"too-many-files\";\nexport var ErrorCode = {\n  FileInvalidType: FILE_INVALID_TYPE,\n  FileTooLarge: FILE_TOO_LARGE,\n  FileTooSmall: FILE_TOO_SMALL,\n  TooManyFiles: TOO_MANY_FILES\n}; // File Errors\n\nexport var getInvalidTypeRejectionErr = function getInvalidTypeRejectionErr(accept) {\n  accept = Array.isArray(accept) && accept.length === 1 ? accept[0] : accept;\n  var messageSuffix = Array.isArray(accept) ? \"one of \".concat(accept.join(\", \")) : accept;\n  return {\n    code: FILE_INVALID_TYPE,\n    message: \"File type must be \".concat(messageSuffix)\n  };\n};\nexport var getTooLargeRejectionErr = function getTooLargeRejectionErr(maxSize) {\n  return {\n    code: FILE_TOO_LARGE,\n    message: \"File is larger than \".concat(maxSize, \" \").concat(maxSize === 1 ? \"byte\" : \"bytes\")\n  };\n};\nexport var getTooSmallRejectionErr = function getTooSmallRejectionErr(minSize) {\n  return {\n    code: FILE_TOO_SMALL,\n    message: \"File is smaller than \".concat(minSize, \" \").concat(minSize === 1 ? \"byte\" : \"bytes\")\n  };\n};\nexport var TOO_MANY_FILES_REJECTION = {\n  code: TOO_MANY_FILES,\n  message: \"Too many files\"\n}; // Firefox versions prior to 53 return a bogus MIME type for every file drag, so dragovers with\n// that MIME type will always be accepted\n\nexport function fileAccepted(file, accept) {\n  var isAcceptable = file.type === \"application/x-moz-file\" || accepts(file, accept);\n  return [isAcceptable, isAcceptable ? null : getInvalidTypeRejectionErr(accept)];\n}\nexport function fileMatchSize(file, minSize, maxSize) {\n  if (isDefined(file.size)) {\n    if (isDefined(minSize) && isDefined(maxSize)) {\n      if (file.size > maxSize) return [false, getTooLargeRejectionErr(maxSize)];\n      if (file.size < minSize) return [false, getTooSmallRejectionErr(minSize)];\n    } else if (isDefined(minSize) && file.size < minSize) return [false, getTooSmallRejectionErr(minSize)];else if (isDefined(maxSize) && file.size > maxSize) return [false, getTooLargeRejectionErr(maxSize)];\n  }\n\n  return [true, null];\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\n/**\n *\n * @param {object} options\n * @param {File[]} options.files\n * @param {string|string[]} [options.accept]\n * @param {number} [options.minSize]\n * @param {number} [options.maxSize]\n * @param {boolean} [options.multiple]\n * @param {number} [options.maxFiles]\n * @param {(f: File) => FileError|FileError[]|null} [options.validator]\n * @returns\n */\n\n\nexport function allFilesAccepted(_ref) {\n  var files = _ref.files,\n      accept = _ref.accept,\n      minSize = _ref.minSize,\n      maxSize = _ref.maxSize,\n      multiple = _ref.multiple,\n      maxFiles = _ref.maxFiles,\n      validator = _ref.validator;\n\n  if (!multiple && files.length > 1 || multiple && maxFiles >= 1 && files.length > maxFiles) {\n    return false;\n  }\n\n  return files.every(function (file) {\n    var _fileAccepted = fileAccepted(file, accept),\n        _fileAccepted2 = _slicedToArray(_fileAccepted, 1),\n        accepted = _fileAccepted2[0];\n\n    var _fileMatchSize = fileMatchSize(file, minSize, maxSize),\n        _fileMatchSize2 = _slicedToArray(_fileMatchSize, 1),\n        sizeMatch = _fileMatchSize2[0];\n\n    var customErrors = validator ? validator(file) : null;\n    return accepted && sizeMatch && !customErrors;\n  });\n} // React's synthetic events has event.isPropagationStopped,\n// but to remain compatibility with other libs (Preact) fall back\n// to check event.cancelBubble\n\nexport function isPropagationStopped(event) {\n  if (typeof event.isPropagationStopped === \"function\") {\n    return event.isPropagationStopped();\n  } else if (typeof event.cancelBubble !== \"undefined\") {\n    return event.cancelBubble;\n  }\n\n  return false;\n}\nexport function isEvtWithFiles(event) {\n  if (!event.dataTransfer) {\n    return !!event.target && !!event.target.files;\n  } // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/types\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#file\n\n\n  return Array.prototype.some.call(event.dataTransfer.types, function (type) {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nexport function isKindFile(item) {\n  return _typeof(item) === \"object\" && item !== null && item.kind === \"file\";\n} // allow the entire document to be a drag target\n\nexport function onDocumentDragOver(event) {\n  event.preventDefault();\n}\n\nfunction isIe(userAgent) {\n  return userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident/\") !== -1;\n}\n\nfunction isEdge(userAgent) {\n  return userAgent.indexOf(\"Edge/\") !== -1;\n}\n\nexport function isIeOrEdge() {\n  var userAgent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;\n  return isIe(userAgent) || isEdge(userAgent);\n}\n/**\n * This is intended to be used to compose event handlers\n * They are executed in order until one of them calls `event.isPropagationStopped()`.\n * Note that the check is done on the first invoke too,\n * meaning that if propagation was stopped before invoking the fns,\n * no handlers will be executed.\n *\n * @param {Function} fns the event hanlder functions\n * @return {Function} the event handler to add to an element\n */\n\nexport function composeEventHandlers() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return fns.some(function (fn) {\n      if (!isPropagationStopped(event) && fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return isPropagationStopped(event);\n    });\n  };\n}\n/**\n * canUseFileSystemAccessAPI checks if the [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API)\n * is supported by the browser.\n * @returns {boolean}\n */\n\nexport function canUseFileSystemAccessAPI() {\n  return \"showOpenFilePicker\" in window;\n}\n/**\n * Convert the `{accept}` dropzone prop to the\n * `{types}` option for https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n *\n * @param {AcceptProp} accept\n * @returns {{accept: string[]}[]}\n */\n\nexport function pickerOptionsFromAccept(accept) {\n  if (isDefined(accept)) {\n    var acceptForPicker = Object.entries(accept).filter(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          mimeType = _ref3[0],\n          ext = _ref3[1];\n\n      var ok = true;\n\n      if (!isMIMEType(mimeType)) {\n        console.warn(\"Skipped \\\"\".concat(mimeType, \"\\\" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.\"));\n        ok = false;\n      }\n\n      if (!Array.isArray(ext) || !ext.every(isExt)) {\n        console.warn(\"Skipped \\\"\".concat(mimeType, \"\\\" because an invalid file extension was provided.\"));\n        ok = false;\n      }\n\n      return ok;\n    }).reduce(function (agg, _ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          mimeType = _ref5[0],\n          ext = _ref5[1];\n\n      return _objectSpread(_objectSpread({}, agg), {}, _defineProperty({}, mimeType, ext));\n    }, {});\n    return [{\n      // description is required due to https://crbug.com/1264708\n      description: \"Files\",\n      accept: acceptForPicker\n    }];\n  }\n\n  return accept;\n}\n/**\n * Convert the `{accept}` dropzone prop to an array of MIME types/extensions.\n * @param {AcceptProp} accept\n * @returns {string}\n */\n\nexport function acceptPropAsAcceptAttr(accept) {\n  if (isDefined(accept)) {\n    return Object.entries(accept).reduce(function (a, _ref6) {\n      var _ref7 = _slicedToArray(_ref6, 2),\n          mimeType = _ref7[0],\n          ext = _ref7[1];\n\n      return [].concat(_toConsumableArray(a), [mimeType], _toConsumableArray(ext));\n    }, []) // Silently discard invalid entries as pickerOptionsFromAccept warns about these\n    .filter(function (v) {\n      return isMIMEType(v) || isExt(v);\n    }).join(\",\");\n  }\n\n  return undefined;\n}\n/**\n * Check if v is an exception caused by aborting a request (e.g window.showOpenFilePicker()).\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n * @param {any} v\n * @returns {boolean} True if v is an abort exception.\n */\n\nexport function isAbort(v) {\n  return v instanceof DOMException && (v.name === \"AbortError\" || v.code === v.ABORT_ERR);\n}\n/**\n * Check if v is a security error.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n * @param {any} v\n * @returns {boolean} True if v is a security error.\n */\n\nexport function isSecurityError(v) {\n  return v instanceof DOMException && (v.name === \"SecurityError\" || v.code === v.SECURITY_ERR);\n}\n/**\n * Check if v is a MIME type string.\n *\n * See accepted format: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers.\n *\n * @param {string} v\n */\n\nexport function isMIMEType(v) {\n  return v === \"audio/*\" || v === \"video/*\" || v === \"image/*\" || v === \"text/*\" || /\\w+\\/[-+.\\w]+/g.test(v);\n}\n/**\n * Check if v is a file extension.\n * @param {string} v\n */\n\nexport function isExt(v) {\n  return /^.*\\.[\\w]+$/.test(v);\n}\n/**\n * @typedef {Object.<string, string[]>} AcceptProp\n */\n\n/**\n * @typedef {object} FileError\n * @property {string} message\n * @property {ErrorCode|string} code\n */\n\n/**\n * @typedef {\"file-invalid-type\"|\"file-too-large\"|\"file-too-small\"|\"too-many-files\"} ErrorCode\n */","var _excluded = [\"children\"],\n    _excluded2 = [\"open\"],\n    _excluded3 = [\"refKey\", \"role\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onClick\", \"onDragEnter\", \"onDragOver\", \"onDragLeave\", \"onDrop\"],\n    _excluded4 = [\"refKey\", \"onChange\", \"onClick\"];\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* eslint prefer-template: 0 */\nimport React, { forwardRef, Fragment, useCallback, useEffect, useImperativeHandle, useMemo, useReducer, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { fromEvent } from \"file-selector\";\nimport { acceptPropAsAcceptAttr, allFilesAccepted, composeEventHandlers, fileAccepted, fileMatchSize, canUseFileSystemAccessAPI, isAbort, isEvtWithFiles, isIeOrEdge, isPropagationStopped, isSecurityError, onDocumentDragOver, pickerOptionsFromAccept, TOO_MANY_FILES_REJECTION } from \"./utils/index\";\n/**\n * Convenience wrapper component for the `useDropzone` hook\n *\n * ```jsx\n * <Dropzone>\n *   {({getRootProps, getInputProps}) => (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag 'n' drop some files here, or click to select files</p>\n *     </div>\n *   )}\n * </Dropzone>\n * ```\n */\n\nvar Dropzone = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      params = _objectWithoutProperties(_ref, _excluded);\n\n  var _useDropzone = useDropzone(params),\n      open = _useDropzone.open,\n      props = _objectWithoutProperties(_useDropzone, _excluded2);\n\n  useImperativeHandle(ref, function () {\n    return {\n      open: open\n    };\n  }, [open]); // TODO: Figure out why react-styleguidist cannot create docs if we don't return a jsx element\n\n  return /*#__PURE__*/React.createElement(Fragment, null, children(_objectSpread(_objectSpread({}, props), {}, {\n    open: open\n  })));\n});\nDropzone.displayName = \"Dropzone\"; // Add default props for react-docgen\n\nvar defaultProps = {\n  disabled: false,\n  getFilesFromEvent: fromEvent,\n  maxSize: Infinity,\n  minSize: 0,\n  multiple: true,\n  maxFiles: 0,\n  preventDropOnDocument: true,\n  noClick: false,\n  noKeyboard: false,\n  noDrag: false,\n  noDragEventsBubbling: false,\n  validator: null,\n  useFsAccessApi: true,\n  autoFocus: false\n};\nDropzone.defaultProps = defaultProps;\nDropzone.propTypes = {\n  /**\n   * Render function that exposes the dropzone state and prop getter fns\n   *\n   * @param {object} params\n   * @param {Function} params.getRootProps Returns the props you should apply to the root drop container you render\n   * @param {Function} params.getInputProps Returns the props you should apply to hidden file input you render\n   * @param {Function} params.open Open the native file selection dialog\n   * @param {boolean} params.isFocused Dropzone area is in focus\n   * @param {boolean} params.isFileDialogActive File dialog is opened\n   * @param {boolean} params.isDragActive Active drag is in progress\n   * @param {boolean} params.isDragAccept Dragged files are accepted\n   * @param {boolean} params.isDragReject Some dragged files are rejected\n   * @param {File[]} params.acceptedFiles Accepted files\n   * @param {FileRejection[]} params.fileRejections Rejected files and why they were rejected\n   */\n  children: PropTypes.func,\n\n  /**\n   * Set accepted file types.\n   * Checkout https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker types option for more information.\n   * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n   * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n   * Windows. In some cases there might not be a mime type set at all (https://github.com/react-dropzone/react-dropzone/issues/276).\n   */\n  accept: PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),\n\n  /**\n   * Allow drag 'n' drop (or selection from the file dialog) of multiple files\n   */\n  multiple: PropTypes.bool,\n\n  /**\n   * If false, allow dropped items to take over the current browser window\n   */\n  preventDropOnDocument: PropTypes.bool,\n\n  /**\n   * If true, disables click to open the native file selection dialog\n   */\n  noClick: PropTypes.bool,\n\n  /**\n   * If true, disables SPACE/ENTER to open the native file selection dialog.\n   * Note that it also stops tracking the focus state.\n   */\n  noKeyboard: PropTypes.bool,\n\n  /**\n   * If true, disables drag 'n' drop\n   */\n  noDrag: PropTypes.bool,\n\n  /**\n   * If true, stops drag event propagation to parents\n   */\n  noDragEventsBubbling: PropTypes.bool,\n\n  /**\n   * Minimum file size (in bytes)\n   */\n  minSize: PropTypes.number,\n\n  /**\n   * Maximum file size (in bytes)\n   */\n  maxSize: PropTypes.number,\n\n  /**\n   * Maximum accepted number of files\n   * The default value is 0 which means there is no limitation to how many files are accepted.\n   */\n  maxFiles: PropTypes.number,\n\n  /**\n   * Enable/disable the dropzone\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Use this to provide a custom file aggregator\n   *\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  getFilesFromEvent: PropTypes.func,\n\n  /**\n   * Cb for when closing the file dialog with no selection\n   */\n  onFileDialogCancel: PropTypes.func,\n\n  /**\n   * Cb for when opening the file dialog\n   */\n  onFileDialogOpen: PropTypes.func,\n\n  /**\n   * Set to true to use the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API\n   * to open the file picker instead of using an `<input type=\"file\">` click event.\n   */\n  useFsAccessApi: PropTypes.bool,\n\n  /**\n   * Set to true to focus the root element on render\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * Cb for when the `dragenter` event occurs.\n   *\n   * @param {DragEvent} event\n   */\n  onDragEnter: PropTypes.func,\n\n  /**\n   * Cb for when the `dragleave` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragLeave: PropTypes.func,\n\n  /**\n   * Cb for when the `dragover` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragOver: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n   *\n   * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n   * `accept` must be a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) or a valid file extension.\n   * If `multiple` is set to false and additional files are dropped,\n   * all files besides the first will be rejected.\n   * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n   *\n   * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n   * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n   *\n   * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n   * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n   *\n   * ```js\n   * function onDrop(acceptedFiles) {\n   *   const req = request.post('/upload')\n   *   acceptedFiles.forEach(file => {\n   *     req.attach(file.name, file)\n   *   })\n   *   req.end(callback)\n   * }\n   * ```\n   *\n   * @param {File[]} acceptedFiles\n   * @param {FileRejection[]} fileRejections\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  onDrop: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are accepted, this callback is not invoked.\n   *\n   * @param {File[]} files\n   * @param {(DragEvent|Event)} event\n   */\n  onDropAccepted: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are rejected, this callback is not invoked.\n   *\n   * @param {FileRejection[]} fileRejections\n   * @param {(DragEvent|Event)} event\n   */\n  onDropRejected: PropTypes.func,\n\n  /**\n   * Cb for when there's some error from any of the promises.\n   *\n   * @param {Error} error\n   */\n  onError: PropTypes.func,\n\n  /**\n   * Custom validation function. It must return null if there's no errors.\n   * @param {File} file\n   * @returns {FileError|FileError[]|null}\n   */\n  validator: PropTypes.func\n};\nexport default Dropzone;\n/**\n * A function that is invoked for the `dragenter`,\n * `dragover` and `dragleave` events.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dragCb\n * @param {DragEvent} event\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dropCb\n * @param {File[]} acceptedFiles List of accepted files\n * @param {FileRejection[]} fileRejections List of rejected files and why they were rejected\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are files (such as link, text, etc.).\n *\n * @callback dropAcceptedCb\n * @param {File[]} files List of accepted files that meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n *\n * @callback dropRejectedCb\n * @param {File[]} files List of rejected files that do not meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is used aggregate files,\n * in a asynchronous fashion, from drag or input change events.\n *\n * @callback getFilesFromEvent\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n * @returns {(File[]|Promise<File[]>)}\n */\n\n/**\n * An object with the current dropzone state.\n *\n * @typedef {object} DropzoneState\n * @property {boolean} isFocused Dropzone area is in focus\n * @property {boolean} isFileDialogActive File dialog is opened\n * @property {boolean} isDragActive Active drag is in progress\n * @property {boolean} isDragAccept Dragged files are accepted\n * @property {boolean} isDragReject Some dragged files are rejected\n * @property {File[]} acceptedFiles Accepted files\n * @property {FileRejection[]} fileRejections Rejected files and why they were rejected\n */\n\n/**\n * An object with the dropzone methods.\n *\n * @typedef {object} DropzoneMethods\n * @property {Function} getRootProps Returns the props you should apply to the root drop container you render\n * @property {Function} getInputProps Returns the props you should apply to hidden file input you render\n * @property {Function} open Open the native file selection dialog\n */\n\nvar initialState = {\n  isFocused: false,\n  isFileDialogActive: false,\n  isDragActive: false,\n  isDragAccept: false,\n  isDragReject: false,\n  acceptedFiles: [],\n  fileRejections: []\n};\n/**\n * A React hook that creates a drag 'n' drop area.\n *\n * ```jsx\n * function MyDropzone(props) {\n *   const {getRootProps, getInputProps} = useDropzone({\n *     onDrop: acceptedFiles => {\n *       // do something with the File objects, e.g. upload to some server\n *     }\n *   });\n *   return (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag and drop some files here, or click to select files</p>\n *     </div>\n *   )\n * }\n * ```\n *\n * @function useDropzone\n *\n * @param {object} props\n * @param {import(\"./utils\").AcceptProp} [props.accept] Set accepted file types.\n * Checkout https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker types option for more information.\n * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n * Windows. In some cases there might not be a mime type set at all (https://github.com/react-dropzone/react-dropzone/issues/276).\n * @param {boolean} [props.multiple=true] Allow drag 'n' drop (or selection from the file dialog) of multiple files\n * @param {boolean} [props.preventDropOnDocument=true] If false, allow dropped items to take over the current browser window\n * @param {boolean} [props.noClick=false] If true, disables click to open the native file selection dialog\n * @param {boolean} [props.noKeyboard=false] If true, disables SPACE/ENTER to open the native file selection dialog.\n * Note that it also stops tracking the focus state.\n * @param {boolean} [props.noDrag=false] If true, disables drag 'n' drop\n * @param {boolean} [props.noDragEventsBubbling=false] If true, stops drag event propagation to parents\n * @param {number} [props.minSize=0] Minimum file size (in bytes)\n * @param {number} [props.maxSize=Infinity] Maximum file size (in bytes)\n * @param {boolean} [props.disabled=false] Enable/disable the dropzone\n * @param {getFilesFromEvent} [props.getFilesFromEvent] Use this to provide a custom file aggregator\n * @param {Function} [props.onFileDialogCancel] Cb for when closing the file dialog with no selection\n * @param {boolean} [props.useFsAccessApi] Set to true to use the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API\n * to open the file picker instead of using an `<input type=\"file\">` click event.\n * @param {boolean} autoFocus Set to true to auto focus the root element.\n * @param {Function} [props.onFileDialogOpen] Cb for when opening the file dialog\n * @param {dragCb} [props.onDragEnter] Cb for when the `dragenter` event occurs.\n * @param {dragCb} [props.onDragLeave] Cb for when the `dragleave` event occurs\n * @param {dragCb} [props.onDragOver] Cb for when the `dragover` event occurs\n * @param {dropCb} [props.onDrop] Cb for when the `drop` event occurs.\n * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n *\n * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n * `accept` must be an object with keys as a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) and the value an array of file extensions (optional).\n * If `multiple` is set to false and additional files are dropped,\n * all files besides the first will be rejected.\n * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n *\n * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n *\n * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n *\n * ```js\n * function onDrop(acceptedFiles) {\n *   const req = request.post('/upload')\n *   acceptedFiles.forEach(file => {\n *     req.attach(file.name, file)\n *   })\n *   req.end(callback)\n * }\n * ```\n * @param {dropAcceptedCb} [props.onDropAccepted]\n * @param {dropRejectedCb} [props.onDropRejected]\n * @param {(error: Error) => void} [props.onError]\n *\n * @returns {DropzoneState & DropzoneMethods}\n */\n\nexport function useDropzone() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _defaultProps$props = _objectSpread(_objectSpread({}, defaultProps), props),\n      accept = _defaultProps$props.accept,\n      disabled = _defaultProps$props.disabled,\n      getFilesFromEvent = _defaultProps$props.getFilesFromEvent,\n      maxSize = _defaultProps$props.maxSize,\n      minSize = _defaultProps$props.minSize,\n      multiple = _defaultProps$props.multiple,\n      maxFiles = _defaultProps$props.maxFiles,\n      onDragEnter = _defaultProps$props.onDragEnter,\n      onDragLeave = _defaultProps$props.onDragLeave,\n      onDragOver = _defaultProps$props.onDragOver,\n      onDrop = _defaultProps$props.onDrop,\n      onDropAccepted = _defaultProps$props.onDropAccepted,\n      onDropRejected = _defaultProps$props.onDropRejected,\n      onFileDialogCancel = _defaultProps$props.onFileDialogCancel,\n      onFileDialogOpen = _defaultProps$props.onFileDialogOpen,\n      useFsAccessApi = _defaultProps$props.useFsAccessApi,\n      autoFocus = _defaultProps$props.autoFocus,\n      preventDropOnDocument = _defaultProps$props.preventDropOnDocument,\n      noClick = _defaultProps$props.noClick,\n      noKeyboard = _defaultProps$props.noKeyboard,\n      noDrag = _defaultProps$props.noDrag,\n      noDragEventsBubbling = _defaultProps$props.noDragEventsBubbling,\n      onError = _defaultProps$props.onError,\n      validator = _defaultProps$props.validator;\n\n  var acceptAttr = useMemo(function () {\n    return acceptPropAsAcceptAttr(accept);\n  }, [accept]);\n  var pickerTypes = useMemo(function () {\n    return pickerOptionsFromAccept(accept);\n  }, [accept]);\n  var onFileDialogOpenCb = useMemo(function () {\n    return typeof onFileDialogOpen === \"function\" ? onFileDialogOpen : noop;\n  }, [onFileDialogOpen]);\n  var onFileDialogCancelCb = useMemo(function () {\n    return typeof onFileDialogCancel === \"function\" ? onFileDialogCancel : noop;\n  }, [onFileDialogCancel]);\n  /**\n   * @constant\n   * @type {React.MutableRefObject<HTMLElement>}\n   */\n\n  var rootRef = useRef(null);\n  var inputRef = useRef(null);\n\n  var _useReducer = useReducer(reducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var isFocused = state.isFocused,\n      isFileDialogActive = state.isFileDialogActive;\n  var fsAccessApiWorksRef = useRef(typeof window !== \"undefined\" && window.isSecureContext && useFsAccessApi && canUseFileSystemAccessAPI()); // Update file dialog active state when the window is focused on\n\n  var onWindowFocus = function onWindowFocus() {\n    // Execute the timeout only if the file dialog is opened in the browser\n    if (!fsAccessApiWorksRef.current && isFileDialogActive) {\n      setTimeout(function () {\n        if (inputRef.current) {\n          var files = inputRef.current.files;\n\n          if (!files.length) {\n            dispatch({\n              type: \"closeDialog\"\n            });\n            onFileDialogCancelCb();\n          }\n        }\n      }, 300);\n    }\n  };\n\n  useEffect(function () {\n    window.addEventListener(\"focus\", onWindowFocus, false);\n    return function () {\n      window.removeEventListener(\"focus\", onWindowFocus, false);\n    };\n  }, [inputRef, isFileDialogActive, onFileDialogCancelCb, fsAccessApiWorksRef]);\n  var dragTargetsRef = useRef([]);\n\n  var onDocumentDrop = function onDocumentDrop(event) {\n    if (rootRef.current && rootRef.current.contains(event.target)) {\n      // If we intercepted an event for our instance, let it propagate down to the instance's onDrop handler\n      return;\n    }\n\n    event.preventDefault();\n    dragTargetsRef.current = [];\n  };\n\n  useEffect(function () {\n    if (preventDropOnDocument) {\n      document.addEventListener(\"dragover\", onDocumentDragOver, false);\n      document.addEventListener(\"drop\", onDocumentDrop, false);\n    }\n\n    return function () {\n      if (preventDropOnDocument) {\n        document.removeEventListener(\"dragover\", onDocumentDragOver);\n        document.removeEventListener(\"drop\", onDocumentDrop);\n      }\n    };\n  }, [rootRef, preventDropOnDocument]); // Auto focus the root when autoFocus is true\n\n  useEffect(function () {\n    if (!disabled && autoFocus && rootRef.current) {\n      rootRef.current.focus();\n    }\n\n    return function () {};\n  }, [rootRef, autoFocus, disabled]);\n  var onErrCb = useCallback(function (e) {\n    if (onError) {\n      onError(e);\n    } else {\n      // Let the user know something's gone wrong if they haven't provided the onError cb.\n      console.error(e);\n    }\n  }, [onError]);\n  var onDragEnterCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event);\n    dragTargetsRef.current = [].concat(_toConsumableArray(dragTargetsRef.current), [event.target]);\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (files) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        var fileCount = files.length;\n        var isDragAccept = fileCount > 0 && allFilesAccepted({\n          files: files,\n          accept: acceptAttr,\n          minSize: minSize,\n          maxSize: maxSize,\n          multiple: multiple,\n          maxFiles: maxFiles,\n          validator: validator\n        });\n        var isDragReject = fileCount > 0 && !isDragAccept;\n        dispatch({\n          isDragAccept: isDragAccept,\n          isDragReject: isDragReject,\n          isDragActive: true,\n          type: \"setDraggedFiles\"\n        });\n\n        if (onDragEnter) {\n          onDragEnter(event);\n        }\n      }).catch(function (e) {\n        return onErrCb(e);\n      });\n    }\n  }, [getFilesFromEvent, onDragEnter, onErrCb, noDragEventsBubbling, acceptAttr, minSize, maxSize, multiple, maxFiles, validator]);\n  var onDragOverCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event);\n    var hasFiles = isEvtWithFiles(event);\n\n    if (hasFiles && event.dataTransfer) {\n      try {\n        event.dataTransfer.dropEffect = \"copy\";\n      } catch (_unused) {}\n      /* eslint-disable-line no-empty */\n\n    }\n\n    if (hasFiles && onDragOver) {\n      onDragOver(event);\n    }\n\n    return false;\n  }, [onDragOver, noDragEventsBubbling]);\n  var onDragLeaveCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event); // Only deactivate once the dropzone and all children have been left\n\n    var targets = dragTargetsRef.current.filter(function (target) {\n      return rootRef.current && rootRef.current.contains(target);\n    }); // Make sure to remove a target present multiple times only once\n    // (Firefox may fire dragenter/dragleave multiple times on the same element)\n\n    var targetIdx = targets.indexOf(event.target);\n\n    if (targetIdx !== -1) {\n      targets.splice(targetIdx, 1);\n    }\n\n    dragTargetsRef.current = targets;\n\n    if (targets.length > 0) {\n      return;\n    }\n\n    dispatch({\n      type: \"setDraggedFiles\",\n      isDragActive: false,\n      isDragAccept: false,\n      isDragReject: false\n    });\n\n    if (isEvtWithFiles(event) && onDragLeave) {\n      onDragLeave(event);\n    }\n  }, [rootRef, onDragLeave, noDragEventsBubbling]);\n  var setFiles = useCallback(function (files, event) {\n    var acceptedFiles = [];\n    var fileRejections = [];\n    files.forEach(function (file) {\n      var _fileAccepted = fileAccepted(file, acceptAttr),\n          _fileAccepted2 = _slicedToArray(_fileAccepted, 2),\n          accepted = _fileAccepted2[0],\n          acceptError = _fileAccepted2[1];\n\n      var _fileMatchSize = fileMatchSize(file, minSize, maxSize),\n          _fileMatchSize2 = _slicedToArray(_fileMatchSize, 2),\n          sizeMatch = _fileMatchSize2[0],\n          sizeError = _fileMatchSize2[1];\n\n      var customErrors = validator ? validator(file) : null;\n\n      if (accepted && sizeMatch && !customErrors) {\n        acceptedFiles.push(file);\n      } else {\n        var errors = [acceptError, sizeError];\n\n        if (customErrors) {\n          errors = errors.concat(customErrors);\n        }\n\n        fileRejections.push({\n          file: file,\n          errors: errors.filter(function (e) {\n            return e;\n          })\n        });\n      }\n    });\n\n    if (!multiple && acceptedFiles.length > 1 || multiple && maxFiles >= 1 && acceptedFiles.length > maxFiles) {\n      // Reject everything and empty accepted files\n      acceptedFiles.forEach(function (file) {\n        fileRejections.push({\n          file: file,\n          errors: [TOO_MANY_FILES_REJECTION]\n        });\n      });\n      acceptedFiles.splice(0);\n    }\n\n    dispatch({\n      acceptedFiles: acceptedFiles,\n      fileRejections: fileRejections,\n      type: \"setFiles\"\n    });\n\n    if (onDrop) {\n      onDrop(acceptedFiles, fileRejections, event);\n    }\n\n    if (fileRejections.length > 0 && onDropRejected) {\n      onDropRejected(fileRejections, event);\n    }\n\n    if (acceptedFiles.length > 0 && onDropAccepted) {\n      onDropAccepted(acceptedFiles, event);\n    }\n  }, [dispatch, multiple, acceptAttr, minSize, maxSize, maxFiles, onDrop, onDropAccepted, onDropRejected, validator]);\n  var onDropCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event);\n    dragTargetsRef.current = [];\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (files) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        setFiles(files, event);\n      }).catch(function (e) {\n        return onErrCb(e);\n      });\n    }\n\n    dispatch({\n      type: \"reset\"\n    });\n  }, [getFilesFromEvent, setFiles, onErrCb, noDragEventsBubbling]); // Fn for opening the file dialog programmatically\n\n  var openFileDialog = useCallback(function () {\n    // No point to use FS access APIs if context is not secure\n    // https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#feature_detection\n    if (fsAccessApiWorksRef.current) {\n      dispatch({\n        type: \"openDialog\"\n      });\n      onFileDialogOpenCb(); // https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n\n      var opts = {\n        multiple: multiple,\n        types: pickerTypes\n      };\n      window.showOpenFilePicker(opts).then(function (handles) {\n        return getFilesFromEvent(handles);\n      }).then(function (files) {\n        setFiles(files, null);\n        dispatch({\n          type: \"closeDialog\"\n        });\n      }).catch(function (e) {\n        // AbortError means the user canceled\n        if (isAbort(e)) {\n          onFileDialogCancelCb(e);\n          dispatch({\n            type: \"closeDialog\"\n          });\n        } else if (isSecurityError(e)) {\n          fsAccessApiWorksRef.current = false; // CORS, so cannot use this API\n          // Try using the input\n\n          if (inputRef.current) {\n            inputRef.current.value = null;\n            inputRef.current.click();\n          } else {\n            onErrCb(new Error(\"Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.\"));\n          }\n        } else {\n          onErrCb(e);\n        }\n      });\n      return;\n    }\n\n    if (inputRef.current) {\n      dispatch({\n        type: \"openDialog\"\n      });\n      onFileDialogOpenCb();\n      inputRef.current.value = null;\n      inputRef.current.click();\n    }\n  }, [dispatch, onFileDialogOpenCb, onFileDialogCancelCb, useFsAccessApi, setFiles, onErrCb, pickerTypes, multiple]); // Cb to open the file dialog when SPACE/ENTER occurs on the dropzone\n\n  var onKeyDownCb = useCallback(function (event) {\n    // Ignore keyboard events bubbling up the DOM tree\n    if (!rootRef.current || !rootRef.current.isEqualNode(event.target)) {\n      return;\n    }\n\n    if (event.key === \" \" || event.key === \"Enter\" || event.keyCode === 32 || event.keyCode === 13) {\n      event.preventDefault();\n      openFileDialog();\n    }\n  }, [rootRef, openFileDialog]); // Update focus state for the dropzone\n\n  var onFocusCb = useCallback(function () {\n    dispatch({\n      type: \"focus\"\n    });\n  }, []);\n  var onBlurCb = useCallback(function () {\n    dispatch({\n      type: \"blur\"\n    });\n  }, []); // Cb to open the file dialog when click occurs on the dropzone\n\n  var onClickCb = useCallback(function () {\n    if (noClick) {\n      return;\n    } // In IE11/Edge the file-browser dialog is blocking, therefore, use setTimeout()\n    // to ensure React can handle state changes\n    // See: https://github.com/react-dropzone/react-dropzone/issues/450\n\n\n    if (isIeOrEdge()) {\n      setTimeout(openFileDialog, 0);\n    } else {\n      openFileDialog();\n    }\n  }, [noClick, openFileDialog]);\n\n  var composeHandler = function composeHandler(fn) {\n    return disabled ? null : fn;\n  };\n\n  var composeKeyboardHandler = function composeKeyboardHandler(fn) {\n    return noKeyboard ? null : composeHandler(fn);\n  };\n\n  var composeDragHandler = function composeDragHandler(fn) {\n    return noDrag ? null : composeHandler(fn);\n  };\n\n  var stopPropagation = function stopPropagation(event) {\n    if (noDragEventsBubbling) {\n      event.stopPropagation();\n    }\n  };\n\n  var getRootProps = useMemo(function () {\n    return function () {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? \"ref\" : _ref2$refKey,\n          role = _ref2.role,\n          onKeyDown = _ref2.onKeyDown,\n          onFocus = _ref2.onFocus,\n          onBlur = _ref2.onBlur,\n          onClick = _ref2.onClick,\n          onDragEnter = _ref2.onDragEnter,\n          onDragOver = _ref2.onDragOver,\n          onDragLeave = _ref2.onDragLeave,\n          onDrop = _ref2.onDrop,\n          rest = _objectWithoutProperties(_ref2, _excluded3);\n\n      return _objectSpread(_objectSpread(_defineProperty({\n        onKeyDown: composeKeyboardHandler(composeEventHandlers(onKeyDown, onKeyDownCb)),\n        onFocus: composeKeyboardHandler(composeEventHandlers(onFocus, onFocusCb)),\n        onBlur: composeKeyboardHandler(composeEventHandlers(onBlur, onBlurCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onClickCb)),\n        onDragEnter: composeDragHandler(composeEventHandlers(onDragEnter, onDragEnterCb)),\n        onDragOver: composeDragHandler(composeEventHandlers(onDragOver, onDragOverCb)),\n        onDragLeave: composeDragHandler(composeEventHandlers(onDragLeave, onDragLeaveCb)),\n        onDrop: composeDragHandler(composeEventHandlers(onDrop, onDropCb)),\n        role: typeof role === \"string\" && role !== \"\" ? role : \"presentation\"\n      }, refKey, rootRef), !disabled && !noKeyboard ? {\n        tabIndex: 0\n      } : {}), rest);\n    };\n  }, [rootRef, onKeyDownCb, onFocusCb, onBlurCb, onClickCb, onDragEnterCb, onDragOverCb, onDragLeaveCb, onDropCb, noKeyboard, noDrag, disabled]);\n  var onInputElementClick = useCallback(function (event) {\n    event.stopPropagation();\n  }, []);\n  var getInputProps = useMemo(function () {\n    return function () {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$refKey = _ref3.refKey,\n          refKey = _ref3$refKey === void 0 ? \"ref\" : _ref3$refKey,\n          onChange = _ref3.onChange,\n          onClick = _ref3.onClick,\n          rest = _objectWithoutProperties(_ref3, _excluded4);\n\n      var inputProps = _defineProperty({\n        accept: acceptAttr,\n        multiple: multiple,\n        type: \"file\",\n        style: {\n          display: \"none\"\n        },\n        onChange: composeHandler(composeEventHandlers(onChange, onDropCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onInputElementClick)),\n        tabIndex: -1\n      }, refKey, inputRef);\n\n      return _objectSpread(_objectSpread({}, inputProps), rest);\n    };\n  }, [inputRef, accept, multiple, onDropCb, disabled]);\n  return _objectSpread(_objectSpread({}, state), {}, {\n    isFocused: isFocused && !disabled,\n    getRootProps: getRootProps,\n    getInputProps: getInputProps,\n    rootRef: rootRef,\n    inputRef: inputRef,\n    open: composeHandler(openFileDialog)\n  });\n}\n/**\n * @param {DropzoneState} state\n * @param {{type: string} & DropzoneState} action\n * @returns {DropzoneState}\n */\n\nfunction reducer(state, action) {\n  /* istanbul ignore next */\n  switch (action.type) {\n    case \"focus\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFocused: true\n      });\n\n    case \"blur\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFocused: false\n      });\n\n    case \"openDialog\":\n      return _objectSpread(_objectSpread({}, initialState), {}, {\n        isFileDialogActive: true\n      });\n\n    case \"closeDialog\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFileDialogActive: false\n      });\n\n    case \"setDraggedFiles\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isDragActive: action.isDragActive,\n        isDragAccept: action.isDragAccept,\n        isDragReject: action.isDragReject\n      });\n\n    case \"setFiles\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        acceptedFiles: action.acceptedFiles,\n        fileRejections: action.fileRejections\n      });\n\n    case \"reset\":\n      return _objectSpread({}, initialState);\n\n    default:\n      return state;\n  }\n}\n\nfunction noop() {}\n\nexport { ErrorCode } from \"./utils\";","import { useState } from 'react'\nimport { FileType } from './index'\n\nexport default function useFileUploader(showPreview: boolean = true) {\n  const [selectedFiles, setSelectedFiles] = useState<FileType[]>([])\n\n  /**\n   * Handled the accepted files and shows the preview\n   */\n  const handleAcceptedFiles = (files: FileType[], callback?: (files: FileType[]) => void) => {\n    let allFiles = files\n\n    if (showPreview) {\n      files.map((file) =>\n        Object.assign(file, {\n          preview: file['type'].split('/')[0] === 'image' ? URL.createObjectURL(file) : null,\n          formattedSize: formatBytes(file.size),\n        }),\n      )\n\n      allFiles = [...selectedFiles]\n      allFiles.push(...files)\n      setSelectedFiles(allFiles)\n    }\n\n    if (callback) callback(allFiles)\n  }\n\n  /**\n   * Formats the size\n   */\n  const formatBytes = (bytes: number, decimals: number = 2) => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const dm = decimals < 0 ? 0 : decimals\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n  }\n\n  /*\n   * Removes the selected file\n   */\n  const removeFile = (file: FileType) => {\n    const newFiles = [...selectedFiles]\n    newFiles.splice(newFiles.indexOf(file), 1)\n    setSelectedFiles(newFiles)\n  }\n\n  return {\n    selectedFiles,\n    handleAcceptedFiles,\n    removeFile,\n  }\n}\n","import { Row, Col, Card } from 'react-bootstrap'\nimport Dropzone from 'react-dropzone'\nimport useFileUploader from './useFileUploader'\nimport IconifyIcon from '../wrappers/IconifyIcon'\nimport { Link } from 'react-router-dom'\n\nexport type FileType = File & {\n  preview?: string\n  formattedSize?: string\n}\n\ntype FileUploaderProps = ChildrenProps & {\n  onFileUpload?: (files: FileType[]) => void\n  showPreview?: boolean\n}\n\ntype ChildrenProps = {\n  icon?: string\n  text?: string\n  textClass?: string\n  extraText?: string\n}\n\nconst FileUploader = ({ showPreview = true, onFileUpload, icon, extraText, text }: FileUploaderProps) => {\n  const { selectedFiles, handleAcceptedFiles, removeFile } = useFileUploader(showPreview)\n  return (\n    <>\n      <Dropzone onDrop={(acceptedFiles) => handleAcceptedFiles(acceptedFiles, onFileUpload)}>\n        {({ getRootProps, getInputProps }) => (\n          <div className=\"dropzone d-flex justify-content-center align-items-center\" style={{ height: '250px' }}>\n            <div className=\"dz-message needsclick\" {...getRootProps()}>\n              <input {...getInputProps()} />\n              {icon && <IconifyIcon icon={icon} className={`text-muted h1`} />}\n              <h3>{text}</h3>\n              <span className=\"text-muted fs-13\">{extraText}</span>\n            </div>\n          </div>\n        )}\n      </Dropzone>\n\n      {/* {showPreview && selectedFiles.length > 0 && ( */}\n      <div className=\"dropzone-previews mt-3\">\n        {(selectedFiles || []).map((file, idx) => {\n          const ext = file.name.substr(file.name.lastIndexOf('.') + 1)\n          return (\n            <Card className=\"mt-1 mb-0 shadow-none border\" key={idx + '-file'}>\n              <div className=\"p-2\">\n                <Row className=\"align-items-center\">\n                  {file.preview && (\n                    <Col xs=\"auto\">\n                      <img data-dz-thumbnail=\"\" className=\"thumb-xl rounded rounded bg-light\" alt={file.name} src={file.preview} />\n                    </Col>\n                  )}\n                  {!file.preview && (\n                    <Col xs=\"auto\">\n                      <div className=\"avatar-sm\">\n                        <span className=\"avatar-title bg-primary rounded\">{ext.toUpperCase()}</span>\n                      </div>\n                    </Col>\n                  )}\n                  <Col className=\"ps-0\">\n                    <Link to=\"\" className=\"text-muted fw-bold\">\n                      {file.name}\n                    </Link>\n                    <p className=\"mb-0\">\n                      <strong>{file.formattedSize}</strong>\n                    </p>\n                  </Col>\n                  <Col className=\"text-end\">\n                    <Link to=\"\" className=\"btn btn-link btn-lg text-muted shadow-none\">\n                      <IconifyIcon icon=\"fa6-solid:x\" className=\"text-danger\" onClick={() => removeFile(file)} />\n                    </Link>\n                  </Col>\n                </Row>\n              </div>\n            </Card>\n          )\n        })}\n      </div>\n      {/* )} */}\n    </>\n  )\n}\n\nexport { FileUploader }\n","/*!\n * FilePond 4.31.1\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst isNode = value => value instanceof HTMLElement;\n\nconst createStore = (initialState, queries = [], actions = []) => {\n    // internal state\n    const state = {\n        ...initialState,\n    };\n\n    // contains all actions for next frame, is clear when actions are requested\n    const actionQueue = [];\n    const dispatchQueue = [];\n\n    // returns a duplicate of the current state\n    const getState = () => ({ ...state });\n\n    // returns a duplicate of the actions array and clears the actions array\n    const processActionQueue = () => {\n        // create copy of actions queue\n        const queue = [...actionQueue];\n\n        // clear actions queue (we don't want no double actions)\n        actionQueue.length = 0;\n\n        return queue;\n    };\n\n    // processes actions that might block the main UI thread\n    const processDispatchQueue = () => {\n        // create copy of actions queue\n        const queue = [...dispatchQueue];\n\n        // clear actions queue (we don't want no double actions)\n        dispatchQueue.length = 0;\n\n        // now dispatch these actions\n        queue.forEach(({ type, data }) => {\n            dispatch(type, data);\n        });\n    };\n\n    // adds a new action, calls its handler and\n    const dispatch = (type, data, isBlocking) => {\n        // is blocking action (should never block if document is hidden)\n        if (isBlocking && !document.hidden) {\n            dispatchQueue.push({ type, data });\n            return;\n        }\n\n        // if this action has a handler, handle the action\n        if (actionHandlers[type]) {\n            actionHandlers[type](data);\n        }\n\n        // now add action\n        actionQueue.push({\n            type,\n            data,\n        });\n    };\n\n    const query = (str, ...args) => (queryHandles[str] ? queryHandles[str](...args) : null);\n\n    const api = {\n        getState,\n        processActionQueue,\n        processDispatchQueue,\n        dispatch,\n        query,\n    };\n\n    let queryHandles = {};\n    queries.forEach(query => {\n        queryHandles = {\n            ...query(state),\n            ...queryHandles,\n        };\n    });\n\n    let actionHandlers = {};\n    actions.forEach(action => {\n        actionHandlers = {\n            ...action(dispatch, query, state),\n            ...actionHandlers,\n        };\n    });\n\n    return api;\n};\n\nconst defineProperty = (obj, property, definition) => {\n    if (typeof definition === 'function') {\n        obj[property] = definition;\n        return;\n    }\n    Object.defineProperty(obj, property, { ...definition });\n};\n\nconst forin = (obj, cb) => {\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key)) {\n            continue;\n        }\n\n        cb(key, obj[key]);\n    }\n};\n\nconst createObject = definition => {\n    const obj = {};\n    forin(definition, property => {\n        defineProperty(obj, property, definition[property]);\n    });\n    return obj;\n};\n\nconst attr = (node, name, value = null) => {\n    if (value === null) {\n        return node.getAttribute(name) || node.hasAttribute(name);\n    }\n    node.setAttribute(name, value);\n};\n\nconst ns = 'http://www.w3.org/2000/svg';\nconst svgElements = ['svg', 'path']; // only svg elements used\n\nconst isSVGElement = tag => svgElements.includes(tag);\n\nconst createElement = (tag, className, attributes = {}) => {\n    if (typeof className === 'object') {\n        attributes = className;\n        className = null;\n    }\n    const element = isSVGElement(tag)\n        ? document.createElementNS(ns, tag)\n        : document.createElement(tag);\n    if (className) {\n        if (isSVGElement(tag)) {\n            attr(element, 'class', className);\n        } else {\n            element.className = className;\n        }\n    }\n    forin(attributes, (name, value) => {\n        attr(element, name, value);\n    });\n    return element;\n};\n\nconst appendChild = parent => (child, index) => {\n    if (typeof index !== 'undefined' && parent.children[index]) {\n        parent.insertBefore(child, parent.children[index]);\n    } else {\n        parent.appendChild(child);\n    }\n};\n\nconst appendChildView = (parent, childViews) => (view, index) => {\n    if (typeof index !== 'undefined') {\n        childViews.splice(index, 0, view);\n    } else {\n        childViews.push(view);\n    }\n\n    return view;\n};\n\nconst removeChildView = (parent, childViews) => view => {\n    // remove from child views\n    childViews.splice(childViews.indexOf(view), 1);\n\n    // remove the element\n    if (view.element.parentNode) {\n        parent.removeChild(view.element);\n    }\n\n    return view;\n};\n\nconst IS_BROWSER = (() =>\n    typeof window !== 'undefined' && typeof window.document !== 'undefined')();\nconst isBrowser = () => IS_BROWSER;\n\nconst testElement = isBrowser() ? createElement('svg') : {};\nconst getChildCount =\n    'children' in testElement ? el => el.children.length : el => el.childNodes.length;\n\nconst getViewRect = (elementRect, childViews, offset, scale) => {\n    const left = offset[0] || elementRect.left;\n    const top = offset[1] || elementRect.top;\n    const right = left + elementRect.width;\n    const bottom = top + elementRect.height * (scale[1] || 1);\n\n    const rect = {\n        // the rectangle of the element itself\n        element: {\n            ...elementRect,\n        },\n\n        // the rectangle of the element expanded to contain its children, does not include any margins\n        inner: {\n            left: elementRect.left,\n            top: elementRect.top,\n            right: elementRect.right,\n            bottom: elementRect.bottom,\n        },\n\n        // the rectangle of the element expanded to contain its children including own margin and child margins\n        // margins will be added after we've recalculated the size\n        outer: {\n            left,\n            top,\n            right,\n            bottom,\n        },\n    };\n\n    // expand rect to fit all child rectangles\n    childViews\n        .filter(childView => !childView.isRectIgnored())\n        .map(childView => childView.rect)\n        .forEach(childViewRect => {\n            expandRect(rect.inner, { ...childViewRect.inner });\n            expandRect(rect.outer, { ...childViewRect.outer });\n        });\n\n    // calculate inner width and height\n    calculateRectSize(rect.inner);\n\n    // append additional margin (top and left margins are included in top and left automatically)\n    rect.outer.bottom += rect.element.marginBottom;\n    rect.outer.right += rect.element.marginRight;\n\n    // calculate outer width and height\n    calculateRectSize(rect.outer);\n\n    return rect;\n};\n\nconst expandRect = (parent, child) => {\n    // adjust for parent offset\n    child.top += parent.top;\n    child.right += parent.left;\n    child.bottom += parent.top;\n    child.left += parent.left;\n\n    if (child.bottom > parent.bottom) {\n        parent.bottom = child.bottom;\n    }\n\n    if (child.right > parent.right) {\n        parent.right = child.right;\n    }\n};\n\nconst calculateRectSize = rect => {\n    rect.width = rect.right - rect.left;\n    rect.height = rect.bottom - rect.top;\n};\n\nconst isNumber = value => typeof value === 'number';\n\n/**\n * Determines if position is at destination\n * @param position\n * @param destination\n * @param velocity\n * @param errorMargin\n * @returns {boolean}\n */\nconst thereYet = (position, destination, velocity, errorMargin = 0.001) => {\n    return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n};\n\n/**\n * Spring animation\n */\nconst spring =\n    // default options\n    ({ stiffness = 0.5, damping = 0.75, mass = 10 } = {}) =>\n        // method definition\n        {\n            let target = null;\n            let position = null;\n            let velocity = 0;\n            let resting = false;\n\n            // updates spring state\n            const interpolate = (ts, skipToEndState) => {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                const f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            const setTarget = value => {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            const api = createObject({\n                interpolate,\n                target: {\n                    set: setTarget,\n                    get: () => target,\n                },\n                resting: {\n                    get: () => resting,\n                },\n                onupdate: value => {},\n                oncomplete: value => {},\n            });\n\n            return api;\n        };\n\nconst easeLinear = t => t;\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\n\nconst tween =\n    // default values\n    ({ duration = 500, easing = easeInOutQuad, delay = 0 } = {}) =>\n        // method definition\n        {\n            let start = null;\n            let t;\n            let p;\n            let resting = true;\n            let reverse = false;\n            let target = null;\n\n            const interpolate = (ts, skipToEndState) => {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            const api = createObject({\n                interpolate,\n                target: {\n                    get: () => (reverse ? 0 : target),\n                    set: value => {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n                resting: {\n                    get: () => resting,\n                },\n                onupdate: value => {},\n                oncomplete: value => {},\n            });\n\n            return api;\n        };\n\nconst animator = {\n    spring,\n    tween,\n};\n\n/*\n { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n { translation: { type: 'spring', ... }, ... }\n { translation: { x: { type: 'spring', ... } } }\n*/\nconst createAnimator = (definition, category, property) => {\n    // default is single definition\n    // we check if transform is set, if so, we check if property is set\n    const def =\n        definition[category] && typeof definition[category][property] === 'object'\n            ? definition[category][property]\n            : definition[category] || definition;\n\n    const type = typeof def === 'string' ? def : def.type;\n    const props = typeof def === 'object' ? { ...def } : {};\n\n    return animator[type] ? animator[type](props) : null;\n};\n\nconst addGetSet = (keys, obj, props, overwrite = false) => {\n    obj = Array.isArray(obj) ? obj : [obj];\n    obj.forEach(o => {\n        keys.forEach(key => {\n            let name = key;\n            let getter = () => props[key];\n            let setter = value => (props[key] = value);\n\n            if (typeof key === 'object') {\n                name = key.key;\n                getter = key.getter || getter;\n                setter = key.setter || setter;\n            }\n\n            if (o[name] && !overwrite) {\n                return;\n            }\n\n            o[name] = {\n                get: getter,\n                set: setter,\n            };\n        });\n    });\n};\n\n// add to state,\n// add getters and setters to internal and external api (if not set)\n// setup animators\n\nconst animations = ({ mixinConfig, viewProps, viewInternalAPI, viewExternalAPI }) => {\n    // initial properties\n    const initialProps = { ...viewProps };\n\n    // list of all active animations\n    const animations = [];\n\n    // setup animators\n    forin(mixinConfig, (property, animation) => {\n        const animator = createAnimator(animation);\n        if (!animator) {\n            return;\n        }\n\n        // when the animator updates, update the view state value\n        animator.onupdate = value => {\n            viewProps[property] = value;\n        };\n\n        // set animator target\n        animator.target = initialProps[property];\n\n        // when value is set, set the animator target value\n        const prop = {\n            key: property,\n            setter: value => {\n                // if already at target, we done!\n                if (animator.target === value) {\n                    return;\n                }\n\n                animator.target = value;\n            },\n            getter: () => viewProps[property],\n        };\n\n        // add getters and setters\n        addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n        // add it to the list for easy updating from the _write method\n        animations.push(animator);\n    });\n\n    // expose internal write api\n    return {\n        write: ts => {\n            let skipToEndState = document.hidden;\n            let resting = true;\n            animations.forEach(animation => {\n                if (!animation.resting) resting = false;\n                animation.interpolate(ts, skipToEndState);\n            });\n            return resting;\n        },\n        destroy: () => {},\n    };\n};\n\nconst addEvent = element => (type, fn) => {\n    element.addEventListener(type, fn);\n};\n\nconst removeEvent = element => (type, fn) => {\n    element.removeEventListener(type, fn);\n};\n\n// mixin\nconst listeners = ({\n    mixinConfig,\n    viewProps,\n    viewInternalAPI,\n    viewExternalAPI,\n    viewState,\n    view,\n}) => {\n    const events = [];\n\n    const add = addEvent(view.element);\n    const remove = removeEvent(view.element);\n\n    viewExternalAPI.on = (type, fn) => {\n        events.push({\n            type,\n            fn,\n        });\n        add(type, fn);\n    };\n\n    viewExternalAPI.off = (type, fn) => {\n        events.splice(events.findIndex(event => event.type === type && event.fn === fn), 1);\n        remove(type, fn);\n    };\n\n    return {\n        write: () => {\n            // not busy\n            return true;\n        },\n        destroy: () => {\n            events.forEach(event => {\n                remove(event.type, event.fn);\n            });\n        },\n    };\n};\n\n// add to external api and link to props\n\nconst apis = ({ mixinConfig, viewProps, viewExternalAPI }) => {\n    addGetSet(mixinConfig, viewExternalAPI, viewProps);\n};\n\nconst isDefined = value => value != null;\n\n// add to state,\n// add getters and setters to internal and external api (if not set)\n// set initial state based on props in viewProps\n// apply as transforms each frame\n\nconst defaults = {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    translateX: 0,\n    translateY: 0,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    originX: 0,\n    originY: 0,\n};\n\nconst styles = ({ mixinConfig, viewProps, viewInternalAPI, viewExternalAPI, view }) => {\n    // initial props\n    const initialProps = { ...viewProps };\n\n    // current props\n    const currentProps = {};\n\n    // we will add those properties to the external API and link them to the viewState\n    addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n    // override rect on internal and external rect getter so it takes in account transforms\n    const getOffset = () => [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n    const getScale = () => [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n    const getRect = () =>\n        view.rect ? getViewRect(view.rect, view.childViews, getOffset(), getScale()) : null;\n    viewInternalAPI.rect = { get: getRect };\n    viewExternalAPI.rect = { get: getRect };\n\n    // apply view props\n    mixinConfig.forEach(key => {\n        viewProps[key] =\n            typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n    });\n\n    // expose api\n    return {\n        write: () => {\n            // see if props have changed\n            if (!propsHaveChanged(currentProps, viewProps)) {\n                return;\n            }\n\n            // moves element to correct position on screen\n            applyStyles(view.element, viewProps);\n\n            // store new transforms\n            Object.assign(currentProps, { ...viewProps });\n\n            // no longer busy\n            return true;\n        },\n        destroy: () => {},\n    };\n};\n\nconst propsHaveChanged = (currentProps, newProps) => {\n    // different amount of keys\n    if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n        return true;\n    }\n\n    // lets analyze the individual props\n    for (const prop in newProps) {\n        if (newProps[prop] !== currentProps[prop]) {\n            return true;\n        }\n    }\n\n    return false;\n};\n\nconst applyStyles = (\n    element,\n    {\n        opacity,\n        perspective,\n        translateX,\n        translateY,\n        scaleX,\n        scaleY,\n        rotateX,\n        rotateY,\n        rotateZ,\n        originX,\n        originY,\n        width,\n        height,\n    }\n) => {\n    let transforms = '';\n    let styles = '';\n\n    // handle transform origin\n    if (isDefined(originX) || isDefined(originY)) {\n        styles += `transform-origin: ${originX || 0}px ${originY || 0}px;`;\n    }\n\n    // transform order is relevant\n    // 0. perspective\n    if (isDefined(perspective)) {\n        transforms += `perspective(${perspective}px) `;\n    }\n\n    // 1. translate\n    if (isDefined(translateX) || isDefined(translateY)) {\n        transforms += `translate3d(${translateX || 0}px, ${translateY || 0}px, 0) `;\n    }\n\n    // 2. scale\n    if (isDefined(scaleX) || isDefined(scaleY)) {\n        transforms += `scale3d(${isDefined(scaleX) ? scaleX : 1}, ${\n            isDefined(scaleY) ? scaleY : 1\n        }, 1) `;\n    }\n\n    // 3. rotate\n    if (isDefined(rotateZ)) {\n        transforms += `rotateZ(${rotateZ}rad) `;\n    }\n\n    if (isDefined(rotateX)) {\n        transforms += `rotateX(${rotateX}rad) `;\n    }\n\n    if (isDefined(rotateY)) {\n        transforms += `rotateY(${rotateY}rad) `;\n    }\n\n    // add transforms\n    if (transforms.length) {\n        styles += `transform:${transforms};`;\n    }\n\n    // add opacity\n    if (isDefined(opacity)) {\n        styles += `opacity:${opacity};`;\n\n        // if we reach zero, we make the element inaccessible\n        if (opacity === 0) {\n            styles += `visibility:hidden;`;\n        }\n\n        // if we're below 100% opacity this element can't be clicked\n        if (opacity < 1) {\n            styles += `pointer-events:none;`;\n        }\n    }\n\n    // add height\n    if (isDefined(height)) {\n        styles += `height:${height}px;`;\n    }\n\n    // add width\n    if (isDefined(width)) {\n        styles += `width:${width}px;`;\n    }\n\n    // apply styles\n    const elementCurrentStyle = element.elementCurrentStyle || '';\n\n    // if new styles does not match current styles, lets update!\n    if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n        element.style.cssText = styles;\n        // store current styles so we can compare them to new styles later on\n        // _not_ getting the style value is faster\n        element.elementCurrentStyle = styles;\n    }\n};\n\nconst Mixins = {\n    styles,\n    listeners,\n    animations,\n    apis,\n};\n\nconst updateRect = (rect = {}, element = {}, style = {}) => {\n    if (!element.layoutCalculated) {\n        rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n        rect.marginTop = parseInt(style.marginTop, 10) || 0;\n        rect.marginRight = parseInt(style.marginRight, 10) || 0;\n        rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n        rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n        element.layoutCalculated = true;\n    }\n\n    rect.left = element.offsetLeft || 0;\n    rect.top = element.offsetTop || 0;\n    rect.width = element.offsetWidth || 0;\n    rect.height = element.offsetHeight || 0;\n\n    rect.right = rect.left + rect.width;\n    rect.bottom = rect.top + rect.height;\n\n    rect.scrollTop = element.scrollTop;\n\n    rect.hidden = element.offsetParent === null;\n\n    return rect;\n};\n\nconst createView =\n    // default view definition\n    ({\n        // element definition\n        tag = 'div',\n        name = null,\n        attributes = {},\n\n        // view interaction\n        read = () => {},\n        write = () => {},\n        create = () => {},\n        destroy = () => {},\n\n        // hooks\n        filterFrameActionsForChild = (child, actions) => actions,\n        didCreateView = () => {},\n        didWriteView = () => {},\n\n        // rect related\n        ignoreRect = false,\n        ignoreRectUpdate = false,\n\n        // mixins\n        mixins = [],\n    } = {}) => (\n        // each view requires reference to store\n        store,\n        // specific properties for this view\n        props = {}\n    ) => {\n        // root element should not be changed\n        const element = createElement(tag, `filepond--${name}`, attributes);\n\n        // style reference should also not be changed\n        const style = window.getComputedStyle(element, null);\n\n        // element rectangle\n        const rect = updateRect();\n        let frameRect = null;\n\n        // rest state\n        let isResting = false;\n\n        // pretty self explanatory\n        const childViews = [];\n\n        // loaded mixins\n        const activeMixins = [];\n\n        // references to created children\n        const ref = {};\n\n        // state used for each instance\n        const state = {};\n\n        // list of writers that will be called to update this view\n        const writers = [\n            write, // default writer\n        ];\n\n        const readers = [\n            read, // default reader\n        ];\n\n        const destroyers = [\n            destroy, // default destroy\n        ];\n\n        // core view methods\n        const getElement = () => element;\n        const getChildViews = () => childViews.concat();\n        const getReference = () => ref;\n        const createChildView = store => (view, props) => view(store, props);\n        const getRect = () => {\n            if (frameRect) {\n                return frameRect;\n            }\n            frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n            return frameRect;\n        };\n        const getStyle = () => style;\n\n        /**\n         * Read data from DOM\n         * @private\n         */\n        const _read = () => {\n            frameRect = null;\n\n            // read child views\n            childViews.forEach(child => child._read());\n\n            const shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n            if (shouldUpdate) {\n                updateRect(rect, element, style);\n            }\n\n            // readers\n            const api = { root: internalAPI, props, rect };\n            readers.forEach(reader => reader(api));\n        };\n\n        /**\n         * Write data to DOM\n         * @private\n         */\n        const _write = (ts, frameActions, shouldOptimize) => {\n            // if no actions, we assume that the view is resting\n            let resting = frameActions.length === 0;\n\n            // writers\n            writers.forEach(writer => {\n                const writerResting = writer({\n                    props,\n                    root: internalAPI,\n                    actions: frameActions,\n                    timestamp: ts,\n                    shouldOptimize,\n                });\n                if (writerResting === false) {\n                    resting = false;\n                }\n            });\n\n            // run mixins\n            activeMixins.forEach(mixin => {\n                // if one of the mixins is still busy after write operation, we are not resting\n                const mixinResting = mixin.write(ts);\n                if (mixinResting === false) {\n                    resting = false;\n                }\n            });\n\n            // updates child views that are currently attached to the DOM\n            childViews\n                .filter(child => !!child.element.parentNode)\n                .forEach(child => {\n                    // if a child view is not resting, we are not resting\n                    const childResting = child._write(\n                        ts,\n                        filterFrameActionsForChild(child, frameActions),\n                        shouldOptimize\n                    );\n                    if (!childResting) {\n                        resting = false;\n                    }\n                });\n\n            // append new elements to DOM and update those\n            childViews\n                //.filter(child => !child.element.parentNode)\n                .forEach((child, index) => {\n                    // skip\n                    if (child.element.parentNode) {\n                        return;\n                    }\n\n                    // append to DOM\n                    internalAPI.appendChild(child.element, index);\n\n                    // call read (need to know the size of these elements)\n                    child._read();\n\n                    // re-call write\n                    child._write(\n                        ts,\n                        filterFrameActionsForChild(child, frameActions),\n                        shouldOptimize\n                    );\n\n                    // we just added somthing to the dom, no rest\n                    resting = false;\n                });\n\n            // update resting state\n            isResting = resting;\n\n            didWriteView({\n                props,\n                root: internalAPI,\n                actions: frameActions,\n                timestamp: ts,\n            });\n\n            // let parent know if we are resting\n            return resting;\n        };\n\n        const _destroy = () => {\n            activeMixins.forEach(mixin => mixin.destroy());\n            destroyers.forEach(destroyer => {\n                destroyer({ root: internalAPI, props });\n            });\n            childViews.forEach(child => child._destroy());\n        };\n\n        // sharedAPI\n        const sharedAPIDefinition = {\n            element: {\n                get: getElement,\n            },\n            style: {\n                get: getStyle,\n            },\n            childViews: {\n                get: getChildViews,\n            },\n        };\n\n        // private API definition\n        const internalAPIDefinition = {\n            ...sharedAPIDefinition,\n            rect: {\n                get: getRect,\n            },\n\n            // access to custom children references\n            ref: {\n                get: getReference,\n            },\n\n            // dom modifiers\n            is: needle => name === needle,\n            appendChild: appendChild(element),\n            createChildView: createChildView(store),\n            linkView: view => {\n                childViews.push(view);\n                return view;\n            },\n            unlinkView: view => {\n                childViews.splice(childViews.indexOf(view), 1);\n            },\n            appendChildView: appendChildView(element, childViews),\n            removeChildView: removeChildView(element, childViews),\n            registerWriter: writer => writers.push(writer),\n            registerReader: reader => readers.push(reader),\n            registerDestroyer: destroyer => destroyers.push(destroyer),\n            invalidateLayout: () => (element.layoutCalculated = false),\n\n            // access to data store\n            dispatch: store.dispatch,\n            query: store.query,\n        };\n\n        // public view API methods\n        const externalAPIDefinition = {\n            element: {\n                get: getElement,\n            },\n            childViews: {\n                get: getChildViews,\n            },\n            rect: {\n                get: getRect,\n            },\n            resting: {\n                get: () => isResting,\n            },\n            isRectIgnored: () => ignoreRect,\n            _read,\n            _write,\n            _destroy,\n        };\n\n        // mixin API methods\n        const mixinAPIDefinition = {\n            ...sharedAPIDefinition,\n            rect: {\n                get: () => rect,\n            },\n        };\n\n        // add mixin functionality\n        Object.keys(mixins)\n            .sort((a, b) => {\n                // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                if (a === 'styles') {\n                    return 1;\n                } else if (b === 'styles') {\n                    return -1;\n                }\n                return 0;\n            })\n            .forEach(key => {\n                const mixinAPI = Mixins[key]({\n                    mixinConfig: mixins[key],\n                    viewProps: props,\n                    viewState: state,\n                    viewInternalAPI: internalAPIDefinition,\n                    viewExternalAPI: externalAPIDefinition,\n                    view: createObject(mixinAPIDefinition),\n                });\n\n                if (mixinAPI) {\n                    activeMixins.push(mixinAPI);\n                }\n            });\n\n        // construct private api\n        const internalAPI = createObject(internalAPIDefinition);\n\n        // create the view\n        create({\n            root: internalAPI,\n            props,\n        });\n\n        // append created child views to root node\n        const childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n        childViews.forEach((child, index) => {\n            internalAPI.appendChild(child.element, childCount + index);\n        });\n\n        // call did create\n        didCreateView(internalAPI);\n\n        // expose public api\n        return createObject(externalAPIDefinition);\n    };\n\nconst createPainter = (read, write, fps = 60) => {\n    const name = '__framePainter';\n\n    // set global painter\n    if (window[name]) {\n        window[name].readers.push(read);\n        window[name].writers.push(write);\n        return;\n    }\n\n    window[name] = {\n        readers: [read],\n        writers: [write],\n    };\n\n    const painter = window[name];\n\n    const interval = 1000 / fps;\n    let last = null;\n    let id = null;\n    let requestTick = null;\n    let cancelTick = null;\n\n    const setTimerType = () => {\n        if (document.hidden) {\n            requestTick = () => window.setTimeout(() => tick(performance.now()), interval);\n            cancelTick = () => window.clearTimeout(id);\n        } else {\n            requestTick = () => window.requestAnimationFrame(tick);\n            cancelTick = () => window.cancelAnimationFrame(id);\n        }\n    };\n\n    document.addEventListener('visibilitychange', () => {\n        if (cancelTick) cancelTick();\n        setTimerType();\n        tick(performance.now());\n    });\n\n    const tick = ts => {\n        // queue next tick\n        id = requestTick(tick);\n\n        // limit fps\n        if (!last) {\n            last = ts;\n        }\n\n        const delta = ts - last;\n\n        if (delta <= interval) {\n            // skip frame\n            return;\n        }\n\n        // align next frame\n        last = ts - (delta % interval);\n\n        // update view\n        painter.readers.forEach(read => read());\n        painter.writers.forEach(write => write(ts));\n    };\n\n    setTimerType();\n    tick(performance.now());\n\n    return {\n        pause: () => {\n            cancelTick(id);\n        },\n    };\n};\n\nconst createRoute = (routes, fn) => ({ root, props, actions = [], timestamp, shouldOptimize }) => {\n    actions\n        .filter(action => routes[action.type])\n        .forEach(action =>\n            routes[action.type]({ root, props, action: action.data, timestamp, shouldOptimize })\n        );\n    if (fn) {\n        fn({ root, props, actions, timestamp, shouldOptimize });\n    }\n};\n\nconst insertBefore = (newNode, referenceNode) =>\n    referenceNode.parentNode.insertBefore(newNode, referenceNode);\n\nconst insertAfter = (newNode, referenceNode) => {\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n};\n\nconst isArray = value => Array.isArray(value);\n\nconst isEmpty = value => value == null;\n\nconst trim = str => str.trim();\n\nconst toString = value => '' + value;\n\nconst toArray = (value, splitter = ',') => {\n    if (isEmpty(value)) {\n        return [];\n    }\n    if (isArray(value)) {\n        return value;\n    }\n    return toString(value)\n        .split(splitter)\n        .map(trim)\n        .filter(str => str.length);\n};\n\nconst isBoolean = value => typeof value === 'boolean';\n\nconst toBoolean = value => (isBoolean(value) ? value : value === 'true');\n\nconst isString = value => typeof value === 'string';\n\nconst toNumber = value =>\n    isNumber(value) ? value : isString(value) ? toString(value).replace(/[a-z]+/gi, '') : 0;\n\nconst toInt = value => parseInt(toNumber(value), 10);\n\nconst toFloat = value => parseFloat(toNumber(value));\n\nconst isInt = value => isNumber(value) && isFinite(value) && Math.floor(value) === value;\n\nconst toBytes = (value, base = 1000) => {\n    // is in bytes\n    if (isInt(value)) {\n        return value;\n    }\n\n    // is natural file size\n    let naturalFileSize = toString(value).trim();\n\n    // if is value in megabytes\n    if (/MB$/i.test(naturalFileSize)) {\n        naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n        return toInt(naturalFileSize) * base * base;\n    }\n\n    // if is value in kilobytes\n    if (/KB/i.test(naturalFileSize)) {\n        naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n        return toInt(naturalFileSize) * base;\n    }\n\n    return toInt(naturalFileSize);\n};\n\nconst isFunction = value => typeof value === 'function';\n\nconst toFunctionReference = string => {\n    let ref = self;\n    let levels = string.split('.');\n    let level = null;\n    while ((level = levels.shift())) {\n        ref = ref[level];\n        if (!ref) {\n            return null;\n        }\n    }\n    return ref;\n};\n\nconst methods = {\n    process: 'POST',\n    patch: 'PATCH',\n    revert: 'DELETE',\n    fetch: 'GET',\n    restore: 'GET',\n    load: 'GET',\n};\n\nconst createServerAPI = outline => {\n    const api = {};\n\n    api.url = isString(outline) ? outline : outline.url || '';\n    api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n    api.headers = outline.headers ? outline.headers : {};\n\n    forin(methods, key => {\n        api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n    });\n\n    // remove process if no url or process on outline\n    api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n    // special treatment for remove\n    api.remove = outline.remove || null;\n\n    // remove generic headers from api object\n    delete api.headers;\n\n    return api;\n};\n\nconst createAction = (name, outline, method, timeout, headers) => {\n    // is explicitely set to null so disable\n    if (outline === null) {\n        return null;\n    }\n\n    // if is custom function, done! Dev handles everything.\n    if (typeof outline === 'function') {\n        return outline;\n    }\n\n    // build action object\n    const action = {\n        url: method === 'GET' || method === 'PATCH' ? `?${name}=` : '',\n        method,\n        headers,\n        withCredentials: false,\n        timeout,\n        onload: null,\n        ondata: null,\n        onerror: null,\n    };\n\n    // is a single url\n    if (isString(outline)) {\n        action.url = outline;\n        return action;\n    }\n\n    // overwrite\n    Object.assign(action, outline);\n\n    // see if should reformat headers;\n    if (isString(action.headers)) {\n        const parts = action.headers.split(/:(.+)/);\n        action.headers = {\n            header: parts[0],\n            value: parts[1],\n        };\n    }\n\n    // if is bool withCredentials\n    action.withCredentials = toBoolean(action.withCredentials);\n\n    return action;\n};\n\nconst toServerAPI = value => createServerAPI(value);\n\nconst isNull = value => value === null;\n\nconst isObject = value => typeof value === 'object' && value !== null;\n\nconst isAPI = value => {\n    return (\n        isObject(value) &&\n        isString(value.url) &&\n        isObject(value.process) &&\n        isObject(value.revert) &&\n        isObject(value.restore) &&\n        isObject(value.fetch)\n    );\n};\n\nconst getType = value => {\n    if (isArray(value)) {\n        return 'array';\n    }\n\n    if (isNull(value)) {\n        return 'null';\n    }\n\n    if (isInt(value)) {\n        return 'int';\n    }\n\n    if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n        return 'bytes';\n    }\n\n    if (isAPI(value)) {\n        return 'api';\n    }\n\n    return typeof value;\n};\n\nconst replaceSingleQuotes = str =>\n    str\n        .replace(/{\\s*'/g, '{\"')\n        .replace(/'\\s*}/g, '\"}')\n        .replace(/'\\s*:/g, '\":')\n        .replace(/:\\s*'/g, ':\"')\n        .replace(/,\\s*'/g, ',\"')\n        .replace(/'\\s*,/g, '\",');\n\nconst conversionTable = {\n    array: toArray,\n    boolean: toBoolean,\n    int: value => (getType(value) === 'bytes' ? toBytes(value) : toInt(value)),\n    number: toFloat,\n    float: toFloat,\n    bytes: toBytes,\n    string: value => (isFunction(value) ? value : toString(value)),\n    function: value => toFunctionReference(value),\n    serverapi: toServerAPI,\n    object: value => {\n        try {\n            return JSON.parse(replaceSingleQuotes(value));\n        } catch (e) {\n            return null;\n        }\n    },\n};\n\nconst convertTo = (value, type) => conversionTable[type](value);\n\nconst getValueByType = (newValue, defaultValue, valueType) => {\n    // can always assign default value\n    if (newValue === defaultValue) {\n        return newValue;\n    }\n\n    // get the type of the new value\n    let newValueType = getType(newValue);\n\n    // is valid type?\n    if (newValueType !== valueType) {\n        // is string input, let's attempt to convert\n        const convertedValue = convertTo(newValue, valueType);\n\n        // what is the type now\n        newValueType = getType(convertedValue);\n\n        // no valid conversions found\n        if (convertedValue === null) {\n            throw `Trying to assign value with incorrect type to \"${option}\", allowed type: \"${valueType}\"`;\n        } else {\n            newValue = convertedValue;\n        }\n    }\n\n    // assign new value\n    return newValue;\n};\n\nconst createOption = (defaultValue, valueType) => {\n    let currentValue = defaultValue;\n    return {\n        enumerable: true,\n        get: () => currentValue,\n        set: newValue => {\n            currentValue = getValueByType(newValue, defaultValue, valueType);\n        },\n    };\n};\n\nconst createOptions = options => {\n    const obj = {};\n    forin(options, prop => {\n        const optionDefinition = options[prop];\n        obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n    });\n    return createObject(obj);\n};\n\nconst createInitialState = options => ({\n    // model\n    items: [],\n\n    // timeout used for calling update items\n    listUpdateTimeout: null,\n\n    // timeout used for stacking metadata updates\n    itemUpdateTimeout: null,\n\n    // queue of items waiting to be processed\n    processingQueue: [],\n\n    // options\n    options: createOptions(options),\n});\n\nconst fromCamels = (string, separator = '-') =>\n    string\n        .split(/(?=[A-Z])/)\n        .map(part => part.toLowerCase())\n        .join(separator);\n\nconst createOptionAPI = (store, options) => {\n    const obj = {};\n    forin(options, key => {\n        obj[key] = {\n            get: () => store.getState().options[key],\n            set: value => {\n                store.dispatch(`SET_${fromCamels(key, '_').toUpperCase()}`, {\n                    value,\n                });\n            },\n        };\n    });\n    return obj;\n};\n\nconst createOptionActions = options => (dispatch, query, state) => {\n    const obj = {};\n    forin(options, key => {\n        const name = fromCamels(key, '_').toUpperCase();\n\n        obj[`SET_${name}`] = action => {\n            try {\n                state.options[key] = action.value;\n            } catch (e) {\n                // nope, failed\n            }\n\n            // we successfully set the value of this option\n            dispatch(`DID_SET_${name}`, { value: state.options[key] });\n        };\n    });\n    return obj;\n};\n\nconst createOptionQueries = options => state => {\n    const obj = {};\n    forin(options, key => {\n        obj[`GET_${fromCamels(key, '_').toUpperCase()}`] = action => state.options[key];\n    });\n    return obj;\n};\n\nconst InteractionMethod = {\n    API: 1,\n    DROP: 2,\n    BROWSE: 3,\n    PASTE: 4,\n    NONE: 5,\n};\n\nconst getUniqueId = () =>\n    Math.random()\n        .toString(36)\n        .substring(2, 11);\n\nconst arrayRemove = (arr, index) => arr.splice(index, 1);\n\nconst run = (cb, sync) => {\n    if (sync) {\n        cb();\n    } else if (document.hidden) {\n        Promise.resolve(1).then(cb);\n    } else {\n        setTimeout(cb, 0);\n    }\n};\n\nconst on = () => {\n    const listeners = [];\n    const off = (event, cb) => {\n        arrayRemove(\n            listeners,\n            listeners.findIndex(listener => listener.event === event && (listener.cb === cb || !cb))\n        );\n    };\n    const fire = (event, args, sync) => {\n        listeners\n            .filter(listener => listener.event === event)\n            .map(listener => listener.cb)\n            .forEach(cb => run(() => cb(...args), sync));\n    };\n    return {\n        fireSync: (event, ...args) => {\n            fire(event, args, true);\n        },\n        fire: (event, ...args) => {\n            fire(event, args, false);\n        },\n        on: (event, cb) => {\n            listeners.push({ event, cb });\n        },\n        onOnce: (event, cb) => {\n            listeners.push({\n                event,\n                cb: (...args) => {\n                    off(event, cb);\n                    cb(...args);\n                },\n            });\n        },\n        off,\n    };\n};\n\nconst copyObjectPropertiesToObject = (src, target, excluded) => {\n    Object.getOwnPropertyNames(src)\n        .filter(property => !excluded.includes(property))\n        .forEach(key =>\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(src, key))\n        );\n};\n\nconst PRIVATE = [\n    'fire',\n    'process',\n    'revert',\n    'load',\n    'on',\n    'off',\n    'onOnce',\n    'retryLoad',\n    'extend',\n    'archive',\n    'archived',\n    'release',\n    'released',\n    'requestProcessing',\n    'freeze',\n];\n\nconst createItemAPI = item => {\n    const api = {};\n    copyObjectPropertiesToObject(item, api, PRIVATE);\n    return api;\n};\n\nconst removeReleasedItems = items => {\n    items.forEach((item, index) => {\n        if (item.released) {\n            arrayRemove(items, index);\n        }\n    });\n};\n\nconst ItemStatus = {\n    INIT: 1,\n    IDLE: 2,\n    PROCESSING_QUEUED: 9,\n    PROCESSING: 3,\n    PROCESSING_COMPLETE: 5,\n    PROCESSING_ERROR: 6,\n    PROCESSING_REVERT_ERROR: 10,\n    LOADING: 7,\n    LOAD_ERROR: 8,\n};\n\nconst FileOrigin = {\n    INPUT: 1,\n    LIMBO: 2,\n    LOCAL: 3,\n};\n\nconst getNonNumeric = str => /[^0-9]+/.exec(str);\n\nconst getDecimalSeparator = () => getNonNumeric((1.1).toLocaleString())[0];\n\nconst getThousandsSeparator = () => {\n    // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n    // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n    const decimalSeparator = getDecimalSeparator();\n    const thousandsStringWithSeparator = (1000.0).toLocaleString();\n    const thousandsStringWithoutSeparator = (1000.0).toString();\n    if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n        return getNonNumeric(thousandsStringWithSeparator)[0];\n    }\n    return decimalSeparator === '.' ? ',' : '.';\n};\n\nconst Type = {\n    BOOLEAN: 'boolean',\n    INT: 'int',\n    NUMBER: 'number',\n    STRING: 'string',\n    ARRAY: 'array',\n    OBJECT: 'object',\n    FUNCTION: 'function',\n    ACTION: 'action',\n    SERVER_API: 'serverapi',\n    REGEX: 'regex',\n};\n\n// all registered filters\nconst filters = [];\n\n// loops over matching filters and passes options to each filter, returning the mapped results\nconst applyFilterChain = (key, value, utils) =>\n    new Promise((resolve, reject) => {\n        // find matching filters for this key\n        const matchingFilters = filters.filter(f => f.key === key).map(f => f.cb);\n\n        // resolve now\n        if (matchingFilters.length === 0) {\n            resolve(value);\n            return;\n        }\n\n        // first filter to kick things of\n        const initialFilter = matchingFilters.shift();\n\n        // chain filters\n        matchingFilters\n            .reduce(\n                // loop over promises passing value to next promise\n                (current, next) => current.then(value => next(value, utils)),\n\n                // call initial filter, will return a promise\n                initialFilter(value, utils)\n\n                // all executed\n            )\n            .then(value => resolve(value))\n            .catch(error => reject(error));\n    });\n\nconst applyFilters = (key, value, utils) =>\n    filters.filter(f => f.key === key).map(f => f.cb(value, utils));\n\n// adds a new filter to the list\nconst addFilter = (key, cb) => filters.push({ key, cb });\n\nconst extendDefaultOptions = additionalOptions => Object.assign(defaultOptions, additionalOptions);\n\nconst getOptions = () => ({ ...defaultOptions });\n\nconst setOptions = opts => {\n    forin(opts, (key, value) => {\n        // key does not exist, so this option cannot be set\n        if (!defaultOptions[key]) {\n            return;\n        }\n        defaultOptions[key][0] = getValueByType(\n            value,\n            defaultOptions[key][0],\n            defaultOptions[key][1]\n        );\n    });\n};\n\n// default options on app\nconst defaultOptions = {\n    // the id to add to the root element\n    id: [null, Type.STRING],\n\n    // input field name to use\n    name: ['filepond', Type.STRING],\n\n    // disable the field\n    disabled: [false, Type.BOOLEAN],\n\n    // classname to put on wrapper\n    className: [null, Type.STRING],\n\n    // is the field required\n    required: [false, Type.BOOLEAN],\n\n    // Allow media capture when value is set\n    captureMethod: [null, Type.STRING],\n    // - \"camera\", \"microphone\" or \"camcorder\",\n    // - Does not work with multiple on apple devices\n    // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n    // sync `acceptedFileTypes` property with `accept` attribute\n    allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n    // Feature toggles\n    allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n    allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n    allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n    allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n    allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n    allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n    allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n    allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n    allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n    allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n    // Try store file if `server` not set\n    storeAsFile: [false, Type.BOOLEAN],\n\n    // Revert mode\n    forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n    // Input requirements\n    maxFiles: [null, Type.INT], // Max number of files\n    checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n    // Where to put file\n    itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n    itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n    itemInsertInterval: [75, Type.INT],\n\n    // Drag 'n Drop related\n    dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n    dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n    dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n    ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n    // Upload related\n    instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n    maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n    allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n    // Chunks\n    chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n    chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n    chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n    chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n    // The server api end points to use for uploading (see docs)\n    server: [null, Type.SERVER_API],\n\n    // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n    fileSizeBase: [1000, Type.INT],\n\n    // Labels and status messages\n    labelFileSizeBytes: ['bytes', Type.STRING],\n    labelFileSizeKilobytes: ['KB', Type.STRING],\n    labelFileSizeMegabytes: ['MB', Type.STRING],\n    labelFileSizeGigabytes: ['GB', Type.STRING],\n\n    labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n    labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n    labelIdle: [\n        'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n        Type.STRING,\n    ],\n    labelInvalidField: ['Field contains invalid files', Type.STRING],\n    labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n    labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n    labelFileCountSingular: ['file in list', Type.STRING],\n    labelFileCountPlural: ['files in list', Type.STRING],\n    labelFileLoading: ['Loading', Type.STRING],\n    labelFileAdded: ['Added', Type.STRING], // assistive only\n    labelFileLoadError: ['Error during load', Type.STRING],\n    labelFileRemoved: ['Removed', Type.STRING], // assistive only\n    labelFileRemoveError: ['Error during remove', Type.STRING],\n    labelFileProcessing: ['Uploading', Type.STRING],\n    labelFileProcessingComplete: ['Upload complete', Type.STRING],\n    labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n    labelFileProcessingError: ['Error during upload', Type.STRING],\n    labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n    labelTapToCancel: ['tap to cancel', Type.STRING],\n    labelTapToRetry: ['tap to retry', Type.STRING],\n    labelTapToUndo: ['tap to undo', Type.STRING],\n\n    labelButtonRemoveItem: ['Remove', Type.STRING],\n    labelButtonAbortItemLoad: ['Abort', Type.STRING],\n    labelButtonRetryItemLoad: ['Retry', Type.STRING],\n    labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n    labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n    labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n    labelButtonProcessItem: ['Upload', Type.STRING],\n\n    // make sure width and height plus viewpox are even numbers so icons are nicely centered\n    iconRemove: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconProcess: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n        Type.STRING,\n    ],\n    iconRetry: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconUndo: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconDone: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n\n    // event handlers\n    oninit: [null, Type.FUNCTION],\n    onwarning: [null, Type.FUNCTION],\n    onerror: [null, Type.FUNCTION],\n    onactivatefile: [null, Type.FUNCTION],\n    oninitfile: [null, Type.FUNCTION],\n    onaddfilestart: [null, Type.FUNCTION],\n    onaddfileprogress: [null, Type.FUNCTION],\n    onaddfile: [null, Type.FUNCTION],\n    onprocessfilestart: [null, Type.FUNCTION],\n    onprocessfileprogress: [null, Type.FUNCTION],\n    onprocessfileabort: [null, Type.FUNCTION],\n    onprocessfilerevert: [null, Type.FUNCTION],\n    onprocessfile: [null, Type.FUNCTION],\n    onprocessfiles: [null, Type.FUNCTION],\n    onremovefile: [null, Type.FUNCTION],\n    onpreparefile: [null, Type.FUNCTION],\n    onupdatefiles: [null, Type.FUNCTION],\n    onreorderfiles: [null, Type.FUNCTION],\n\n    // hooks\n    beforeDropFile: [null, Type.FUNCTION],\n    beforeAddFile: [null, Type.FUNCTION],\n    beforeRemoveFile: [null, Type.FUNCTION],\n    beforePrepareFile: [null, Type.FUNCTION],\n\n    // styles\n    stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n    stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n    styleItemPanelAspectRatio: [null, Type.STRING],\n    styleButtonRemoveItemPosition: ['left', Type.STRING],\n    styleButtonProcessItemPosition: ['right', Type.STRING],\n    styleLoadIndicatorPosition: ['right', Type.STRING],\n    styleProgressIndicatorPosition: ['right', Type.STRING],\n    styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n    // custom initial files array\n    files: [[], Type.ARRAY],\n\n    // show support by displaying credits\n    credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n};\n\nconst getItemByQuery = (items, query) => {\n    // just return first index\n    if (isEmpty(query)) {\n        return items[0] || null;\n    }\n\n    // query is index\n    if (isInt(query)) {\n        return items[query] || null;\n    }\n\n    // if query is item, get the id\n    if (typeof query === 'object') {\n        query = query.id;\n    }\n\n    // assume query is a string and return item by id\n    return items.find(item => item.id === query) || null;\n};\n\nconst getNumericAspectRatioFromString = aspectRatio => {\n    if (isEmpty(aspectRatio)) {\n        return aspectRatio;\n    }\n    if (/:/.test(aspectRatio)) {\n        const parts = aspectRatio.split(':');\n        return parts[1] / parts[0];\n    }\n    return parseFloat(aspectRatio);\n};\n\nconst getActiveItems = items => items.filter(item => !item.archived);\n\nconst Status = {\n    EMPTY: 0,\n    IDLE: 1, // waiting\n    ERROR: 2, // a file is in error state\n    BUSY: 3, // busy processing or loading\n    READY: 4, // all files uploaded\n};\n\nlet res = null;\nconst canUpdateFileInput = () => {\n    if (res === null) {\n        try {\n            const dataTransfer = new DataTransfer();\n            dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n            const el = document.createElement('input');\n            el.setAttribute('type', 'file');\n            el.files = dataTransfer.files;\n            res = el.files.length === 1;\n        } catch (err) {\n            res = false;\n        }\n    }\n    return res;\n};\n\nconst ITEM_ERROR = [\n    ItemStatus.LOAD_ERROR,\n    ItemStatus.PROCESSING_ERROR,\n    ItemStatus.PROCESSING_REVERT_ERROR,\n];\nconst ITEM_BUSY = [\n    ItemStatus.LOADING,\n    ItemStatus.PROCESSING,\n    ItemStatus.PROCESSING_QUEUED,\n    ItemStatus.INIT,\n];\nconst ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\nconst isItemInErrorState = item => ITEM_ERROR.includes(item.status);\nconst isItemInBusyState = item => ITEM_BUSY.includes(item.status);\nconst isItemInReadyState = item => ITEM_READY.includes(item.status);\n\nconst isAsync = state =>\n    isObject(state.options.server) &&\n    (isObject(state.options.server.process) || isFunction(state.options.server.process));\n\nconst queries = state => ({\n    GET_STATUS: () => {\n        const items = getActiveItems(state.items);\n\n        const { EMPTY, ERROR, BUSY, IDLE, READY } = Status;\n\n        if (items.length === 0) return EMPTY;\n\n        if (items.some(isItemInErrorState)) return ERROR;\n\n        if (items.some(isItemInBusyState)) return BUSY;\n\n        if (items.some(isItemInReadyState)) return READY;\n\n        return IDLE;\n    },\n\n    GET_ITEM: query => getItemByQuery(state.items, query),\n\n    GET_ACTIVE_ITEM: query => getItemByQuery(getActiveItems(state.items), query),\n\n    GET_ACTIVE_ITEMS: () => getActiveItems(state.items),\n\n    GET_ITEMS: () => state.items,\n\n    GET_ITEM_NAME: query => {\n        const item = getItemByQuery(state.items, query);\n        return item ? item.filename : null;\n    },\n\n    GET_ITEM_SIZE: query => {\n        const item = getItemByQuery(state.items, query);\n        return item ? item.fileSize : null;\n    },\n\n    GET_STYLES: () =>\n        Object.keys(state.options)\n            .filter(key => /^style/.test(key))\n            .map(option => ({\n                name: option,\n                value: state.options[option],\n            })),\n\n    GET_PANEL_ASPECT_RATIO: () => {\n        const isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n        const aspectRatio = isShapeCircle\n            ? 1\n            : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n        return aspectRatio;\n    },\n\n    GET_ITEM_PANEL_ASPECT_RATIO: () => state.options.styleItemPanelAspectRatio,\n\n    GET_ITEMS_BY_STATUS: status =>\n        getActiveItems(state.items).filter(item => item.status === status),\n\n    GET_TOTAL_ITEMS: () => getActiveItems(state.items).length,\n\n    SHOULD_UPDATE_FILE_INPUT: () =>\n        state.options.storeAsFile && canUpdateFileInput() && !isAsync(state),\n\n    IS_ASYNC: () => isAsync(state),\n\n    GET_FILE_SIZE_LABELS: query => ({\n        labelBytes: query('GET_LABEL_FILE_SIZE_BYTES') || undefined,\n        labelKilobytes: query('GET_LABEL_FILE_SIZE_KILOBYTES') || undefined,\n        labelMegabytes: query('GET_LABEL_FILE_SIZE_MEGABYTES') || undefined,\n        labelGigabytes: query('GET_LABEL_FILE_SIZE_GIGABYTES') || undefined,\n    }),\n});\n\nconst hasRoomForItem = state => {\n    const count = getActiveItems(state.items).length;\n\n    // if cannot have multiple items, to add one item it should currently not contain items\n    if (!state.options.allowMultiple) {\n        return count === 0;\n    }\n\n    // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n    const maxFileCount = state.options.maxFiles;\n    if (maxFileCount === null) {\n        return true;\n    }\n\n    // we check if the current count is smaller than the max count, if so, another file can still be added\n    if (count < maxFileCount) {\n        return true;\n    }\n\n    // no more room for another file\n    return false;\n};\n\nconst limit = (value, min, max) => Math.max(Math.min(max, value), min);\n\nconst arrayInsert = (arr, index, item) => arr.splice(index, 0, item);\n\nconst insertItem = (items, item, index) => {\n    if (isEmpty(item)) {\n        return null;\n    }\n\n    // if index is undefined, append\n    if (typeof index === 'undefined') {\n        items.push(item);\n        return item;\n    }\n\n    // limit the index to the size of the items array\n    index = limit(index, 0, items.length);\n\n    // add item to array\n    arrayInsert(items, index, item);\n\n    // expose\n    return item;\n};\n\nconst isBase64DataURI = str =>\n    /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n        str\n    );\n\nconst getFilenameFromURL = url =>\n    `${url}`\n        .split('/')\n        .pop()\n        .split('?')\n        .shift();\n\nconst getExtensionFromFilename = name => name.split('.').pop();\n\nconst guesstimateExtension = type => {\n    // if no extension supplied, exit here\n    if (typeof type !== 'string') {\n        return '';\n    }\n\n    // get subtype\n    const subtype = type.split('/').pop();\n\n    // is svg subtype\n    if (/svg/.test(subtype)) {\n        return 'svg';\n    }\n\n    if (/zip|compressed/.test(subtype)) {\n        return 'zip';\n    }\n\n    if (/plain/.test(subtype)) {\n        return 'txt';\n    }\n\n    if (/msword/.test(subtype)) {\n        return 'doc';\n    }\n\n    // if is valid subtype\n    if (/[a-z]+/.test(subtype)) {\n        // always use jpg extension\n        if (subtype === 'jpeg') {\n            return 'jpg';\n        }\n\n        // return subtype\n        return subtype;\n    }\n\n    return '';\n};\n\nconst leftPad = (value, padding = '') => (padding + value).slice(-padding.length);\n\nconst getDateString = (date = new Date()) =>\n    `${date.getFullYear()}-${leftPad(date.getMonth() + 1, '00')}-${leftPad(\n        date.getDate(),\n        '00'\n    )}_${leftPad(date.getHours(), '00')}-${leftPad(date.getMinutes(), '00')}-${leftPad(\n        date.getSeconds(),\n        '00'\n    )}`;\n\nconst getFileFromBlob = (blob, filename, type = null, extension = null) => {\n    const file =\n        typeof type === 'string'\n            ? blob.slice(0, blob.size, type)\n            : blob.slice(0, blob.size, blob.type);\n    file.lastModifiedDate = new Date();\n\n    // copy relative path\n    if (blob._relativePath) file._relativePath = blob._relativePath;\n\n    // if blob has name property, use as filename if no filename supplied\n    if (!isString(filename)) {\n        filename = getDateString();\n    }\n\n    // if filename supplied but no extension and filename has extension\n    if (filename && extension === null && getExtensionFromFilename(filename)) {\n        file.name = filename;\n    } else {\n        extension = extension || guesstimateExtension(file.type);\n        file.name = filename + (extension ? '.' + extension : '');\n    }\n\n    return file;\n};\n\nconst getBlobBuilder = () => {\n    return (window.BlobBuilder =\n        window.BlobBuilder ||\n        window.WebKitBlobBuilder ||\n        window.MozBlobBuilder ||\n        window.MSBlobBuilder);\n};\n\nconst createBlob = (arrayBuffer, mimeType) => {\n    const BB = getBlobBuilder();\n\n    if (BB) {\n        const bb = new BB();\n        bb.append(arrayBuffer);\n        return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n        type: mimeType,\n    });\n};\n\nconst getBlobFromByteStringWithMimeType = (byteString, mimeType) => {\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n\n    return createBlob(ab, mimeType);\n};\n\nconst getMimeTypeFromBase64DataURI = dataURI => {\n    return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n};\n\nconst getBase64DataFromBase64DataURI = dataURI => {\n    // get data part of string (remove data:image/jpeg...,)\n    const data = dataURI.split(',')[1];\n\n    // remove any whitespace as that causes InvalidCharacterError in IE\n    return data.replace(/\\s/g, '');\n};\n\nconst getByteStringFromBase64DataURI = dataURI => {\n    return atob(getBase64DataFromBase64DataURI(dataURI));\n};\n\nconst getBlobFromBase64DataURI = dataURI => {\n    const mimeType = getMimeTypeFromBase64DataURI(dataURI);\n    const byteString = getByteStringFromBase64DataURI(dataURI);\n\n    return getBlobFromByteStringWithMimeType(byteString, mimeType);\n};\n\nconst getFileFromBase64DataURI = (dataURI, filename, extension) => {\n    return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n};\n\nconst getFileNameFromHeader = header => {\n    // test if is content disposition header, if not exit\n    if (!/^content-disposition:/i.test(header)) return null;\n\n    // get filename parts\n    const matches = header\n        .split(/filename=|filename\\*=.+''/)\n        .splice(1)\n        .map(name => name.trim().replace(/^[\"']|[;\"']{0,2}$/g, ''))\n        .filter(name => name.length);\n\n    return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n};\n\nconst getFileSizeFromHeader = header => {\n    if (/content-length:/i.test(header)) {\n        const size = header.match(/[0-9]+/)[0];\n        return size ? parseInt(size, 10) : null;\n    }\n    return null;\n};\n\nconst getTranfserIdFromHeader = header => {\n    if (/x-content-transfer-id:/i.test(header)) {\n        const id = (header.split(':')[1] || '').trim();\n        return id || null;\n    }\n    return null;\n};\n\nconst getFileInfoFromHeaders = headers => {\n    const info = {\n        source: null,\n        name: null,\n        size: null,\n    };\n\n    const rows = headers.split('\\n');\n    for (let header of rows) {\n        const name = getFileNameFromHeader(header);\n        if (name) {\n            info.name = name;\n            continue;\n        }\n\n        const size = getFileSizeFromHeader(header);\n        if (size) {\n            info.size = size;\n            continue;\n        }\n\n        const source = getTranfserIdFromHeader(header);\n        if (source) {\n            info.source = source;\n            continue;\n        }\n    }\n\n    return info;\n};\n\nconst createFileLoader = fetchFn => {\n    const state = {\n        source: null,\n        complete: false,\n        progress: 0,\n        size: null,\n        timestamp: null,\n        duration: 0,\n        request: null,\n    };\n\n    const getProgress = () => state.progress;\n    const abort = () => {\n        if (state.request && state.request.abort) {\n            state.request.abort();\n        }\n    };\n\n    // load source\n    const load = () => {\n        // get quick reference\n        const source = state.source;\n\n        api.fire('init', source);\n\n        // Load Files\n        if (source instanceof File) {\n            api.fire('load', source);\n        } else if (source instanceof Blob) {\n            // Load blobs, set default name to current date\n            api.fire('load', getFileFromBlob(source, source.name));\n        } else if (isBase64DataURI(source)) {\n            // Load base 64, set default name to current date\n            api.fire('load', getFileFromBase64DataURI(source));\n        } else {\n            // Deal as if is external URL, let's load it!\n            loadURL(source);\n        }\n    };\n\n    // loads a url\n    const loadURL = url => {\n        // is remote url and no fetch method supplied\n        if (!fetchFn) {\n            api.fire('error', {\n                type: 'error',\n                body: \"Can't load URL\",\n                code: 400,\n            });\n            return;\n        }\n\n        // set request start\n        state.timestamp = Date.now();\n\n        // load file\n        state.request = fetchFn(\n            url,\n            response => {\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // done!\n                state.complete = true;\n\n                // turn blob response into a file\n                if (response instanceof Blob) {\n                    response = getFileFromBlob(response, response.name || getFilenameFromURL(url));\n                }\n\n                api.fire(\n                    'load',\n                    // if has received blob, we go with blob, if no response, we return null\n                    response instanceof Blob ? response : response ? response.body : null\n                );\n            },\n            error => {\n                api.fire(\n                    'error',\n                    typeof error === 'string'\n                        ? {\n                              type: 'error',\n                              code: 0,\n                              body: error,\n                          }\n                        : error\n                );\n            },\n            (computable, current, total) => {\n                // collected some meta data already\n                if (total) {\n                    state.size = total;\n                }\n\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // if we can't compute progress, we're not going to fire progress events\n                if (!computable) {\n                    state.progress = null;\n                    return;\n                }\n\n                // update progress percentage\n                state.progress = current / total;\n\n                // expose\n                api.fire('progress', state.progress);\n            },\n            () => {\n                api.fire('abort');\n            },\n            response => {\n                const fileinfo = getFileInfoFromHeaders(\n                    typeof response === 'string' ? response : response.headers\n                );\n                api.fire('meta', {\n                    size: state.size || fileinfo.size,\n                    filename: fileinfo.name,\n                    source: fileinfo.source,\n                });\n            }\n        );\n    };\n\n    const api = {\n        ...on(),\n        setSource: source => (state.source = source),\n        getProgress, // file load progress\n        abort, // abort file load\n        load, // start load\n    };\n\n    return api;\n};\n\nconst isGet = method => /GET|HEAD/.test(method);\n\nconst sendRequest = (data, url, options) => {\n    const api = {\n        onheaders: () => {},\n        onprogress: () => {},\n        onload: () => {},\n        ontimeout: () => {},\n        onerror: () => {},\n        onabort: () => {},\n        abort: () => {\n            aborted = true;\n            xhr.abort();\n        },\n    };\n\n    // timeout identifier, only used when timeout is defined\n    let aborted = false;\n    let headersReceived = false;\n\n    // set default options\n    options = {\n        method: 'POST',\n        headers: {},\n        withCredentials: false,\n        ...options,\n    };\n\n    // encode url\n    url = encodeURI(url);\n\n    // if method is GET, add any received data to url\n\n    if (isGet(options.method) && data) {\n        url = `${url}${encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data))}`;\n    }\n\n    // create request\n    const xhr = new XMLHttpRequest();\n\n    // progress of load\n    const process = isGet(options.method) ? xhr : xhr.upload;\n    process.onprogress = e => {\n        // no progress event when aborted ( onprogress is called once after abort() )\n        if (aborted) {\n            return;\n        }\n\n        api.onprogress(e.lengthComputable, e.loaded, e.total);\n    };\n\n    // tries to get header info to the app as fast as possible\n    xhr.onreadystatechange = () => {\n        // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n        if (xhr.readyState < 2) {\n            return;\n        }\n\n        // no server response\n        if (xhr.readyState === 4 && xhr.status === 0) {\n            return;\n        }\n\n        if (headersReceived) {\n            return;\n        }\n\n        headersReceived = true;\n\n        // we've probably received some useful data in response headers\n        api.onheaders(xhr);\n    };\n\n    // load successful\n    xhr.onload = () => {\n        // is classified as valid response\n        if (xhr.status >= 200 && xhr.status < 300) {\n            api.onload(xhr);\n        } else {\n            api.onerror(xhr);\n        }\n    };\n\n    // error during load\n    xhr.onerror = () => api.onerror(xhr);\n\n    // request aborted\n    xhr.onabort = () => {\n        aborted = true;\n        api.onabort();\n    };\n\n    // request timeout\n    xhr.ontimeout = () => api.ontimeout(xhr);\n\n    // open up open up!\n    xhr.open(options.method, url, true);\n\n    // set timeout if defined (do it after open so IE11 plays ball)\n    if (isInt(options.timeout)) {\n        xhr.timeout = options.timeout;\n    }\n\n    // add headers\n    Object.keys(options.headers).forEach(key => {\n        const value = unescape(encodeURIComponent(options.headers[key]));\n        xhr.setRequestHeader(key, value);\n    });\n\n    // set type of response\n    if (options.responseType) {\n        xhr.responseType = options.responseType;\n    }\n\n    // set credentials\n    if (options.withCredentials) {\n        xhr.withCredentials = true;\n    }\n\n    // let's send our data\n    xhr.send(data);\n\n    return api;\n};\n\nconst createResponse = (type, code, body, headers) => ({\n    type,\n    code,\n    body,\n    headers,\n});\n\nconst createTimeoutResponse = cb => xhr => {\n    cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n};\n\nconst hasQS = str => /\\?/.test(str);\nconst buildURL = (...parts) => {\n    let url = '';\n    parts.forEach(part => {\n        url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n    });\n    return url;\n};\n\nconst createFetchFunction = (apiUrl = '', action) => {\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') {\n        return action;\n    }\n\n    // no action supplied\n    if (!action || !isString(action.url)) {\n        return null;\n    }\n\n    // set onload hanlder\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    // internal handler\n    return (url, load, error, progress, abort, headers) => {\n        // do local or remote request based on if the url is external\n        const request = sendRequest(url, buildURL(apiUrl, action.url), {\n            ...action,\n            responseType: 'blob',\n        });\n\n        request.onload = xhr => {\n            // get headers\n            const headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            const filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse(\n                    'load',\n                    xhr.status,\n                    action.method === 'HEAD'\n                        ? null\n                        : getFileFromBlob(onload(xhr.response), filename),\n                    headers\n                )\n            );\n        };\n\n        request.onerror = xhr => {\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.onheaders = xhr => {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n};\n\nconst ChunkStatus = {\n    QUEUED: 0,\n    COMPLETE: 1,\n    PROCESSING: 2,\n    ERROR: 3,\n    WAITING: 4,\n};\n\n/*\nfunction signature:\n  (file, metadata, load, error, progress, abort, transfer, options) => {\n    return {\n    abort:() => {}\n  }\n}\n*/\n\n// apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\nconst processFileChunked = (\n    apiUrl,\n    action,\n    name,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n) => {\n    // all chunks\n    const chunks = [];\n    const { chunkTransferId, chunkServer, chunkSize, chunkRetryDelays } = options;\n\n    // default state\n    const state = {\n        serverId: chunkTransferId,\n        aborted: false,\n    };\n\n    // set onload handlers\n    const ondata = action.ondata || (fd => fd);\n    const onload =\n        action.onload ||\n        ((xhr, method) =>\n            method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response);\n    const onerror = action.onerror || (res => null);\n\n    // create server hook\n    const requestTransferId = cb => {\n        const formData = new FormData();\n\n        // add metadata under same name\n        if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n        const headers =\n            typeof action.headers === 'function'\n                ? action.headers(file, metadata)\n                : {\n                      ...action.headers,\n                      'Upload-Length': file.size,\n                  };\n\n        const requestParams = {\n            ...action,\n            headers,\n        };\n\n        // send request object\n        const request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n\n        request.onload = xhr => cb(onload(xhr, requestParams.method));\n\n        request.onerror = xhr =>\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n\n        request.ontimeout = createTimeoutResponse(error);\n    };\n\n    const requestTransferOffset = cb => {\n        const requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n        const headers =\n            typeof action.headers === 'function'\n                ? action.headers(state.serverId)\n                : {\n                      ...action.headers,\n                  };\n\n        const requestParams = {\n            headers,\n            method: 'HEAD',\n        };\n\n        const request = sendRequest(null, requestUrl, requestParams);\n\n        request.onload = xhr => cb(onload(xhr, requestParams.method));\n\n        request.onerror = xhr =>\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n\n        request.ontimeout = createTimeoutResponse(error);\n    };\n\n    // create chunks\n    const lastChunkIndex = Math.floor(file.size / chunkSize);\n    for (let i = 0; i <= lastChunkIndex; i++) {\n        const offset = i * chunkSize;\n        const data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n        chunks[i] = {\n            index: i,\n            size: data.size,\n            offset,\n            data,\n            file,\n            progress: 0,\n            retries: [...chunkRetryDelays],\n            status: ChunkStatus.QUEUED,\n            error: null,\n            request: null,\n            timeout: null,\n        };\n    }\n\n    const completeProcessingChunks = () => load(state.serverId);\n\n    const canProcessChunk = chunk =>\n        chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n\n    const processChunk = chunk => {\n        // processing is paused, wait here\n        if (state.aborted) return;\n\n        // get next chunk to process\n        chunk = chunk || chunks.find(canProcessChunk);\n\n        // no more chunks to process\n        if (!chunk) {\n            // all done?\n            if (chunks.every(chunk => chunk.status === ChunkStatus.COMPLETE)) {\n                completeProcessingChunks();\n            }\n\n            // no chunk to handle\n            return;\n        }\n\n        // now processing this chunk\n        chunk.status = ChunkStatus.PROCESSING;\n        chunk.progress = null;\n\n        // allow parsing of formdata\n        const ondata = chunkServer.ondata || (fd => fd);\n        const onerror = chunkServer.onerror || (res => null);\n\n        // send request object\n        const requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n        const headers =\n            typeof chunkServer.headers === 'function'\n                ? chunkServer.headers(chunk)\n                : {\n                      ...chunkServer.headers,\n                      'Content-Type': 'application/offset+octet-stream',\n                      'Upload-Offset': chunk.offset,\n                      'Upload-Length': file.size,\n                      'Upload-Name': file.name,\n                  };\n\n        const request = (chunk.request = sendRequest(ondata(chunk.data), requestUrl, {\n            ...chunkServer,\n            headers,\n        }));\n\n        request.onload = () => {\n            // done!\n            chunk.status = ChunkStatus.COMPLETE;\n\n            // remove request reference\n            chunk.request = null;\n\n            // start processing more chunks\n            processChunks();\n        };\n\n        request.onprogress = (lengthComputable, loaded, total) => {\n            chunk.progress = lengthComputable ? loaded : null;\n            updateTotalProgress();\n        };\n\n        request.onerror = xhr => {\n            chunk.status = ChunkStatus.ERROR;\n            chunk.request = null;\n            chunk.error = onerror(xhr.response) || xhr.statusText;\n            if (!retryProcessChunk(chunk)) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            }\n        };\n\n        request.ontimeout = xhr => {\n            chunk.status = ChunkStatus.ERROR;\n            chunk.request = null;\n            if (!retryProcessChunk(chunk)) {\n                createTimeoutResponse(error)(xhr);\n            }\n        };\n\n        request.onabort = () => {\n            chunk.status = ChunkStatus.QUEUED;\n            chunk.request = null;\n            abort();\n        };\n    };\n\n    const retryProcessChunk = chunk => {\n        // no more retries left\n        if (chunk.retries.length === 0) return false;\n\n        // new retry\n        chunk.status = ChunkStatus.WAITING;\n        clearTimeout(chunk.timeout);\n        chunk.timeout = setTimeout(() => {\n            processChunk(chunk);\n        }, chunk.retries.shift());\n\n        // we're going to retry\n        return true;\n    };\n\n    const updateTotalProgress = () => {\n        // calculate total progress fraction\n        const totalBytesTransfered = chunks.reduce((p, chunk) => {\n            if (p === null || chunk.progress === null) return null;\n            return p + chunk.progress;\n        }, 0);\n\n        // can't compute progress\n        if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n        // calculate progress values\n        const totalSize = chunks.reduce((total, chunk) => total + chunk.size, 0);\n\n        // can update progress indicator\n        progress(true, totalBytesTransfered, totalSize);\n    };\n\n    // process new chunks\n    const processChunks = () => {\n        const totalProcessing = chunks.filter(chunk => chunk.status === ChunkStatus.PROCESSING)\n            .length;\n        if (totalProcessing >= 1) return;\n        processChunk();\n    };\n\n    const abortChunks = () => {\n        chunks.forEach(chunk => {\n            clearTimeout(chunk.timeout);\n            if (chunk.request) {\n                chunk.request.abort();\n            }\n        });\n    };\n\n    // let's go!\n    if (!state.serverId) {\n        requestTransferId(serverId => {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n\n            // pass back to item so we can use it if something goes wrong\n            transfer(serverId);\n\n            // store internally\n            state.serverId = serverId;\n            processChunks();\n        });\n    } else {\n        requestTransferOffset(offset => {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n\n            // mark chunks with lower offset as complete\n            chunks\n                .filter(chunk => chunk.offset < offset)\n                .forEach(chunk => {\n                    chunk.status = ChunkStatus.COMPLETE;\n                    chunk.progress = chunk.size;\n                });\n\n            // continue processing\n            processChunks();\n        });\n    }\n\n    return {\n        abort: () => {\n            state.aborted = true;\n            abortChunks();\n        },\n    };\n};\n\n/*\nfunction signature:\n  (file, metadata, load, error, progress, abort) => {\n    return {\n    abort:() => {}\n  }\n}\n*/\nconst createFileProcessorFunction = (apiUrl, action, name, options) => (\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer\n) => {\n    // no file received\n    if (!file) return;\n\n    // if was passed a file, and we can chunk it, exit here\n    const canChunkUpload = options.chunkUploads;\n    const shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n    const willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n    if (file instanceof Blob && willChunkUpload)\n        return processFileChunked(\n            apiUrl,\n            action,\n            name,\n            file,\n            metadata,\n            load,\n            error,\n            progress,\n            abort,\n            transfer,\n            options\n        );\n\n    // set handlers\n    const ondata = action.ondata || (fd => fd);\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    const headers =\n        typeof action.headers === 'function'\n            ? action.headers(file, metadata) || {}\n            : {\n                  ...action.headers,\n              };\n\n    const requestParams = {\n        ...action,\n        headers,\n    };\n\n    // create formdata object\n    var formData = new FormData();\n\n    // add metadata under same name\n    if (isObject(metadata)) {\n        formData.append(name, JSON.stringify(metadata));\n    }\n\n    // Turn into an array of objects so no matter what the input, we can handle it the same way\n    (file instanceof Blob ? [{ name: null, file }] : file).forEach(item => {\n        formData.append(\n            name,\n            item.file,\n            item.name === null ? item.file.name : `${item.name}${item.file.name}`\n        );\n    });\n\n    // send request object\n    const request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n    request.onload = xhr => {\n        load(createResponse('load', xhr.status, onload(xhr.response), xhr.getAllResponseHeaders()));\n    };\n\n    request.onerror = xhr => {\n        error(\n            createResponse(\n                'error',\n                xhr.status,\n                onerror(xhr.response) || xhr.statusText,\n                xhr.getAllResponseHeaders()\n            )\n        );\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n};\n\nconst createProcessorFunction = (apiUrl = '', action, name, options) => {\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') return (...params) => action(name, ...params, options);\n\n    // no action supplied\n    if (!action || !isString(action.url)) return null;\n\n    // internal handler\n    return createFileProcessorFunction(apiUrl, action, name, options);\n};\n\n/*\n function signature:\n (uniqueFileId, load, error) => { }\n */\nconst createRevertFunction = (apiUrl = '', action) => {\n    // is custom implementation\n    if (typeof action === 'function') {\n        return action;\n    }\n\n    // no action supplied, return stub function, interface will work, but file won't be removed\n    if (!action || !isString(action.url)) {\n        return (uniqueFileId, load) => load();\n    }\n\n    // set onload hanlder\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    // internal implementation\n    return (uniqueFileId, load, error) => {\n        const request = sendRequest(\n            uniqueFileId,\n            apiUrl + action.url,\n            action // contains method, headers and withCredentials properties\n        );\n        request.onload = xhr => {\n            load(\n                createResponse(\n                    'load',\n                    xhr.status,\n                    onload(xhr.response),\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.onerror = xhr => {\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n\n        return request;\n    };\n};\n\nconst getRandomNumber = (min = 0, max = 1) => min + Math.random() * (max - min);\n\nconst createPerceivedPerformanceUpdater = (\n    cb,\n    duration = 1000,\n    offset = 0,\n    tickMin = 25,\n    tickMax = 250\n) => {\n    let timeout = null;\n    const start = Date.now();\n\n    const tick = () => {\n        let runtime = Date.now() - start;\n        let delay = getRandomNumber(tickMin, tickMax);\n\n        if (runtime + delay > duration) {\n            delay = runtime + delay - duration;\n        }\n\n        let progress = runtime / duration;\n        if (progress >= 1 || document.hidden) {\n            cb(1);\n            return;\n        }\n\n        cb(progress);\n\n        timeout = setTimeout(tick, delay);\n    };\n\n    if (duration > 0) tick();\n\n    return {\n        clear: () => {\n            clearTimeout(timeout);\n        },\n    };\n};\n\nconst createFileProcessor = (processFn, options) => {\n    const state = {\n        complete: false,\n        perceivedProgress: 0,\n        perceivedPerformanceUpdater: null,\n        progress: null,\n        timestamp: null,\n        perceivedDuration: 0,\n        duration: 0,\n        request: null,\n        response: null,\n    };\n\n    const { allowMinimumUploadDuration } = options;\n\n    const process = (file, metadata) => {\n        const progressFn = () => {\n            // we've not yet started the real download, stop here\n            // the request might not go through, for instance, there might be some server trouble\n            // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n            if (state.duration === 0 || state.progress === null) return;\n\n            // as we're now processing, fire the progress event\n            api.fire('progress', api.getProgress());\n        };\n\n        const completeFn = () => {\n            state.complete = true;\n            api.fire('load-perceived', state.response.body);\n        };\n\n        // let's start processing\n        api.fire('start');\n\n        // set request start\n        state.timestamp = Date.now();\n\n        // create perceived performance progress indicator\n        state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n            progress => {\n                state.perceivedProgress = progress;\n                state.perceivedDuration = Date.now() - state.timestamp;\n\n                progressFn();\n\n                // if fake progress is done, and a response has been received,\n                // and we've not yet called the complete method\n                if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                    // we done!\n                    completeFn();\n                }\n            },\n            // random delay as in a list of files you start noticing\n            // files uploading at the exact same speed\n            allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n        );\n\n        // remember request so we can abort it later\n        state.request = processFn(\n            // the file to process\n            file,\n\n            // the metadata to send along\n            metadata,\n\n            // callbacks (load, error, progress, abort, transfer)\n            // load expects the body to be a server id if\n            // you want to make use of revert\n            response => {\n                // we put the response in state so we can access\n                // it outside of this method\n                state.response = isObject(response)\n                    ? response\n                    : {\n                          type: 'load',\n                          code: 200,\n                          body: `${response}`,\n                          headers: {},\n                      };\n\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // force progress to 1 as we're now done\n                state.progress = 1;\n\n                // actual load is done let's share results\n                api.fire('load', state.response.body);\n\n                // we are really done\n                // if perceived progress is 1 ( wait for perceived progress to complete )\n                // or if server does not support progress ( null )\n                if (\n                    !allowMinimumUploadDuration ||\n                    (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                ) {\n                    completeFn();\n                }\n            },\n\n            // error is expected to be an object with type, code, body\n            error => {\n                // cancel updater\n                state.perceivedPerformanceUpdater.clear();\n\n                // update others about this error\n                api.fire(\n                    'error',\n                    isObject(error)\n                        ? error\n                        : {\n                              type: 'error',\n                              code: 0,\n                              body: `${error}`,\n                          }\n                );\n            },\n\n            // actual processing progress\n            (computable, current, total) => {\n                // update actual duration\n                state.duration = Date.now() - state.timestamp;\n\n                // update actual progress\n                state.progress = computable ? current / total : null;\n\n                progressFn();\n            },\n\n            // abort does not expect a value\n            () => {\n                // stop updater\n                state.perceivedPerformanceUpdater.clear();\n\n                // fire the abort event so we can switch visuals\n                api.fire('abort', state.response ? state.response.body : null);\n            },\n\n            // register the id for this transfer\n            transferId => {\n                api.fire('transfer', transferId);\n            }\n        );\n    };\n\n    const abort = () => {\n        // no request running, can't abort\n        if (!state.request) return;\n\n        // stop updater\n        state.perceivedPerformanceUpdater.clear();\n\n        // abort actual request\n        if (state.request.abort) state.request.abort();\n\n        // if has response object, we've completed the request\n        state.complete = true;\n    };\n\n    const reset = () => {\n        abort();\n        state.complete = false;\n        state.perceivedProgress = 0;\n        state.progress = 0;\n        state.timestamp = null;\n        state.perceivedDuration = 0;\n        state.duration = 0;\n        state.request = null;\n        state.response = null;\n    };\n\n    const getProgress = allowMinimumUploadDuration\n        ? () => (state.progress ? Math.min(state.progress, state.perceivedProgress) : null)\n        : () => state.progress || null;\n\n    const getDuration = allowMinimumUploadDuration\n        ? () => Math.min(state.duration, state.perceivedDuration)\n        : () => state.duration;\n\n    const api = {\n        ...on(),\n        process, // start processing file\n        abort, // abort active process request\n        getProgress,\n        getDuration,\n        reset,\n    };\n\n    return api;\n};\n\nconst getFilenameWithoutExtension = name => name.substring(0, name.lastIndexOf('.')) || name;\n\nconst createFileStub = source => {\n    let data = [source.name, source.size, source.type];\n\n    // is blob or base64, then we need to set the name\n    if (source instanceof Blob || isBase64DataURI(source)) {\n        data[0] = source.name || getDateString();\n    } else if (isBase64DataURI(source)) {\n        // if is base64 data uri we need to determine the average size and type\n        data[1] = source.length;\n        data[2] = getMimeTypeFromBase64DataURI(source);\n    } else if (isString(source)) {\n        // url\n        data[0] = getFilenameFromURL(source);\n        data[1] = 0;\n        data[2] = 'application/octet-stream';\n    }\n\n    return {\n        name: data[0],\n        size: data[1],\n        type: data[2],\n    };\n};\n\nconst isFile = value => !!(value instanceof File || (value instanceof Blob && value.name));\n\nconst deepCloneObject = src => {\n    if (!isObject(src)) return src;\n    const target = isArray(src) ? [] : {};\n    for (const key in src) {\n        if (!src.hasOwnProperty(key)) continue;\n        const v = src[key];\n        target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n    }\n    return target;\n};\n\nconst createItem = (origin = null, serverFileReference = null, file = null) => {\n    // unique id for this item, is used to identify the item across views\n    const id = getUniqueId();\n\n    /**\n     * Internal item state\n     */\n    const state = {\n        // is archived\n        archived: false,\n\n        // if is frozen, no longer fires events\n        frozen: false,\n\n        // removed from view\n        released: false,\n\n        // original source\n        source: null,\n\n        // file model reference\n        file,\n\n        // id of file on server\n        serverFileReference,\n\n        // id of file transfer on server\n        transferId: null,\n\n        // is aborted\n        processingAborted: false,\n\n        // current item status\n        status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n        // active processes\n        activeLoader: null,\n        activeProcessor: null,\n    };\n\n    // callback used when abort processing is called to link back to the resolve method\n    let abortProcessingRequestComplete = null;\n\n    /**\n     * Externally added item metadata\n     */\n    const metadata = {};\n\n    // item data\n    const setStatus = status => (state.status = status);\n\n    // fire event unless the item has been archived\n    const fire = (event, ...params) => {\n        if (state.released || state.frozen) return;\n        api.fire(event, ...params);\n    };\n\n    // file data\n    const getFileExtension = () => getExtensionFromFilename(state.file.name);\n    const getFileType = () => state.file.type;\n    const getFileSize = () => state.file.size;\n    const getFile = () => state.file;\n\n    //\n    // logic to load a file\n    //\n    const load = (source, loader, onload) => {\n        // remember the original item source\n        state.source = source;\n\n        // source is known\n        api.fireSync('init');\n\n        // file stub is already there\n        if (state.file) {\n            api.fireSync('load-skip');\n            return;\n        }\n\n        // set a stub file object while loading the actual data\n        state.file = createFileStub(source);\n\n        // starts loading\n        loader.on('init', () => {\n            fire('load-init');\n        });\n\n        // we'eve received a size indication, let's update the stub\n        loader.on('meta', meta => {\n            // set size of file stub\n            state.file.size = meta.size;\n\n            // set name of file stub\n            state.file.filename = meta.filename;\n\n            // if has received source, we done\n            if (meta.source) {\n                origin = FileOrigin.LIMBO;\n                state.serverFileReference = meta.source;\n                state.status = ItemStatus.PROCESSING_COMPLETE;\n            }\n\n            // size has been updated\n            fire('load-meta');\n        });\n\n        // the file is now loading we need to update the progress indicators\n        loader.on('progress', progress => {\n            setStatus(ItemStatus.LOADING);\n\n            fire('load-progress', progress);\n        });\n\n        // an error was thrown while loading the file, we need to switch to error state\n        loader.on('error', error => {\n            setStatus(ItemStatus.LOAD_ERROR);\n\n            fire('load-request-error', error);\n        });\n\n        // user or another process aborted the file load (cannot retry)\n        loader.on('abort', () => {\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        });\n\n        // done loading\n        loader.on('load', file => {\n            // as we've now loaded the file the loader is no longer required\n            state.activeLoader = null;\n\n            // called when file has loaded succesfully\n            const success = result => {\n                // set (possibly) transformed file\n                state.file = isFile(result) ? result : state.file;\n\n                // file received\n                if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                    setStatus(ItemStatus.PROCESSING_COMPLETE);\n                } else {\n                    setStatus(ItemStatus.IDLE);\n                }\n\n                fire('load');\n            };\n\n            const error = result => {\n                // set original file\n                state.file = file;\n                fire('load-meta');\n\n                setStatus(ItemStatus.LOAD_ERROR);\n                fire('load-file-error', result);\n            };\n\n            // if we already have a server file reference, we don't need to call the onload method\n            if (state.serverFileReference) {\n                success(file);\n                return;\n            }\n\n            // no server id, let's give this file the full treatment\n            onload(file, success, error);\n        });\n\n        // set loader source data\n        loader.setSource(source);\n\n        // set as active loader\n        state.activeLoader = loader;\n\n        // load the source data\n        loader.load();\n    };\n\n    const retryLoad = () => {\n        if (!state.activeLoader) {\n            return;\n        }\n        state.activeLoader.load();\n    };\n\n    const abortLoad = () => {\n        if (state.activeLoader) {\n            state.activeLoader.abort();\n            return;\n        }\n        setStatus(ItemStatus.INIT);\n        fire('load-abort');\n    };\n\n    //\n    // logic to process a file\n    //\n    const process = (processor, onprocess) => {\n        // processing was aborted\n        if (state.processingAborted) {\n            state.processingAborted = false;\n            return;\n        }\n\n        // now processing\n        setStatus(ItemStatus.PROCESSING);\n\n        // reset abort callback\n        abortProcessingRequestComplete = null;\n\n        // if no file loaded we'll wait for the load event\n        if (!(state.file instanceof Blob)) {\n            api.on('load', () => {\n                process(processor, onprocess);\n            });\n            return;\n        }\n\n        // setup processor\n        processor.on('load', serverFileReference => {\n            // need this id to be able to revert the upload\n            state.transferId = null;\n            state.serverFileReference = serverFileReference;\n        });\n\n        // register transfer id\n        processor.on('transfer', transferId => {\n            // need this id to be able to revert the upload\n            state.transferId = transferId;\n        });\n\n        processor.on('load-perceived', serverFileReference => {\n            // no longer required\n            state.activeProcessor = null;\n\n            // need this id to be able to rever the upload\n            state.transferId = null;\n            state.serverFileReference = serverFileReference;\n\n            setStatus(ItemStatus.PROCESSING_COMPLETE);\n            fire('process-complete', serverFileReference);\n        });\n\n        processor.on('start', () => {\n            fire('process-start');\n        });\n\n        processor.on('error', error => {\n            state.activeProcessor = null;\n            setStatus(ItemStatus.PROCESSING_ERROR);\n            fire('process-error', error);\n        });\n\n        processor.on('abort', serverFileReference => {\n            state.activeProcessor = null;\n\n            // if file was uploaded but processing was cancelled during perceived processor time store file reference\n            state.serverFileReference = serverFileReference;\n\n            setStatus(ItemStatus.IDLE);\n            fire('process-abort');\n\n            // has timeout so doesn't interfere with remove action\n            if (abortProcessingRequestComplete) {\n                abortProcessingRequestComplete();\n            }\n        });\n\n        processor.on('progress', progress => {\n            fire('process-progress', progress);\n        });\n\n        // when successfully transformed\n        const success = file => {\n            // if was archived in the mean time, don't process\n            if (state.archived) return;\n\n            // process file!\n            processor.process(file, { ...metadata });\n        };\n\n        // something went wrong during transform phase\n        const error = console.error;\n\n        // start processing the file\n        onprocess(state.file, success, error);\n\n        // set as active processor\n        state.activeProcessor = processor;\n    };\n\n    const requestProcessing = () => {\n        state.processingAborted = false;\n        setStatus(ItemStatus.PROCESSING_QUEUED);\n    };\n\n    const abortProcessing = () =>\n        new Promise(resolve => {\n            if (!state.activeProcessor) {\n                state.processingAborted = true;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                resolve();\n                return;\n            }\n\n            abortProcessingRequestComplete = () => {\n                resolve();\n            };\n\n            state.activeProcessor.abort();\n        });\n\n    //\n    // logic to revert a processed file\n    //\n    const revert = (revertFileUpload, forceRevert) =>\n        new Promise((resolve, reject) => {\n            // a completed upload will have a serverFileReference, a failed chunked upload where\n            // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n            const serverTransferId =\n                state.serverFileReference !== null ? state.serverFileReference : state.transferId;\n\n            // cannot revert without a server id for this process\n            if (serverTransferId === null) {\n                resolve();\n                return;\n            }\n\n            // revert the upload (fire and forget)\n            revertFileUpload(\n                serverTransferId,\n                () => {\n                    // reset file server id and transfer id as now it's not available on the server\n                    state.serverFileReference = null;\n                    state.transferId = null;\n                    resolve();\n                },\n                error => {\n                    // don't set error state when reverting is optional, it will always resolve\n                    if (!forceRevert) {\n                        resolve();\n                        return;\n                    }\n\n                    // oh no errors\n                    setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                    fire('process-revert-error');\n                    reject(error);\n                }\n            );\n\n            // fire event\n            setStatus(ItemStatus.IDLE);\n            fire('process-revert');\n        });\n\n    // exposed methods\n    const setMetadata = (key, value, silent) => {\n        const keys = key.split('.');\n        const root = keys[0];\n        const last = keys.pop();\n        let data = metadata;\n        keys.forEach(key => (data = data[key]));\n\n        // compare old value against new value, if they're the same, we're not updating\n        if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n        // update value\n        data[last] = value;\n\n        // fire update\n        fire('metadata-update', {\n            key: root,\n            value: metadata[root],\n            silent,\n        });\n    };\n\n    const getMetadata = key => deepCloneObject(key ? metadata[key] : metadata);\n\n    const api = {\n        id: { get: () => id },\n        origin: { get: () => origin, set: value => (origin = value) },\n        serverId: { get: () => state.serverFileReference },\n        transferId: { get: () => state.transferId },\n        status: { get: () => state.status },\n        filename: { get: () => state.file.name },\n        filenameWithoutExtension: { get: () => getFilenameWithoutExtension(state.file.name) },\n        fileExtension: { get: getFileExtension },\n        fileType: { get: getFileType },\n        fileSize: { get: getFileSize },\n        file: { get: getFile },\n        relativePath: { get: () => state.file._relativePath },\n\n        source: { get: () => state.source },\n\n        getMetadata,\n        setMetadata: (key, value, silent) => {\n            if (isObject(key)) {\n                const data = key;\n                Object.keys(data).forEach(key => {\n                    setMetadata(key, data[key], value);\n                });\n                return key;\n            }\n            setMetadata(key, value, silent);\n            return value;\n        },\n\n        extend: (name, handler) => (itemAPI[name] = handler),\n\n        abortLoad,\n        retryLoad,\n        requestProcessing,\n        abortProcessing,\n\n        load,\n        process,\n        revert,\n\n        ...on(),\n\n        freeze: () => (state.frozen = true),\n\n        release: () => (state.released = true),\n        released: { get: () => state.released },\n\n        archive: () => (state.archived = true),\n        archived: { get: () => state.archived },\n\n        // replace source and file object\n        setFile: file => (state.file = file),\n    };\n\n    // create it here instead of returning it instantly so we can extend it later\n    const itemAPI = createObject(api);\n\n    return itemAPI;\n};\n\nconst getItemIndexByQuery = (items, query) => {\n    // just return first index\n    if (isEmpty(query)) {\n        return 0;\n    }\n\n    // invalid queries\n    if (!isString(query)) {\n        return -1;\n    }\n\n    // return item by id (or -1 if not found)\n    return items.findIndex(item => item.id === query);\n};\n\nconst getItemById = (items, itemId) => {\n    const index = getItemIndexByQuery(items, itemId);\n    if (index < 0) {\n        return;\n    }\n    return items[index] || null;\n};\n\nconst fetchBlob = (url, load, error, progress, abort, headers) => {\n    const request = sendRequest(null, url, {\n        method: 'GET',\n        responseType: 'blob',\n    });\n\n    request.onload = xhr => {\n        // get headers\n        const headers = xhr.getAllResponseHeaders();\n\n        // get filename\n        const filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n        // create response\n        load(createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers));\n    };\n\n    request.onerror = xhr => {\n        error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n    };\n\n    request.onheaders = xhr => {\n        headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n};\n\nconst getDomainFromURL = url => {\n    if (url.indexOf('//') === 0) {\n        url = location.protocol + url;\n    }\n    return url\n        .toLowerCase()\n        .replace('blob:', '')\n        .replace(/([a-z])?:\\/\\//, '$1')\n        .split('/')[0];\n};\n\nconst isExternalURL = url =>\n    (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n    getDomainFromURL(location.href) !== getDomainFromURL(url);\n\nconst dynamicLabel = label => (...params) => (isFunction(label) ? label(...params) : label);\n\nconst isMockItem = item => !isFile(item.file);\n\nconst listUpdated = (dispatch, state) => {\n    clearTimeout(state.listUpdateTimeout);\n    state.listUpdateTimeout = setTimeout(() => {\n        dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n    }, 0);\n};\n\nconst optionalPromise = (fn, ...params) =>\n    new Promise(resolve => {\n        if (!fn) {\n            return resolve(true);\n        }\n\n        const result = fn(...params);\n\n        if (result == null) {\n            return resolve(true);\n        }\n\n        if (typeof result === 'boolean') {\n            return resolve(result);\n        }\n\n        if (typeof result.then === 'function') {\n            result.then(resolve);\n        }\n    });\n\nconst sortItems = (state, compare) => {\n    state.items.sort((a, b) => compare(createItemAPI(a), createItemAPI(b)));\n};\n\n// returns item based on state\nconst getItemByQueryFromState = (state, itemHandler) => ({\n    query,\n    success = () => {},\n    failure = () => {},\n    ...options\n} = {}) => {\n    const item = getItemByQuery(state.items, query);\n    if (!item) {\n        failure({\n            error: createResponse('error', 0, 'Item not found'),\n            file: null,\n        });\n        return;\n    }\n    itemHandler(item, success, failure, options || {});\n};\n\nconst actions = (dispatch, query, state) => ({\n    /**\n     * Aborts all ongoing processes\n     */\n    ABORT_ALL: () => {\n        getActiveItems(state.items).forEach(item => {\n            item.freeze();\n            item.abortLoad();\n            item.abortProcessing();\n        });\n    },\n\n    /**\n     * Sets initial files\n     */\n    DID_SET_FILES: ({ value = [] }) => {\n        // map values to file objects\n        const files = value.map(file => ({\n            source: file.source ? file.source : file,\n            options: file.options,\n        }));\n\n        // loop over files, if file is in list, leave it be, if not, remove\n        // test if items should be moved\n        let activeItems = getActiveItems(state.items);\n\n        activeItems.forEach(item => {\n            // if item not is in new value, remove\n            if (!files.find(file => file.source === item.source || file.source === item.file)) {\n                dispatch('REMOVE_ITEM', { query: item, remove: false });\n            }\n        });\n\n        // add new files\n        activeItems = getActiveItems(state.items);\n        files.forEach((file, index) => {\n            // if file is already in list\n            if (activeItems.find(item => item.source === file.source || item.file === file.source))\n                return;\n\n            // not in list, add\n            dispatch('ADD_ITEM', {\n                ...file,\n                interactionMethod: InteractionMethod.NONE,\n                index,\n            });\n        });\n    },\n\n    DID_UPDATE_ITEM_METADATA: ({ id, action, change }) => {\n        // don't do anything\n        if (change.silent) return;\n\n        // if is called multiple times in close succession we combined all calls together to save resources\n        clearTimeout(state.itemUpdateTimeout);\n        state.itemUpdateTimeout = setTimeout(() => {\n            const item = getItemById(state.items, id);\n\n            // only revert and attempt to upload when we're uploading to a server\n            if (!query('IS_ASYNC')) {\n                // should we update the output data\n                applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                    item,\n                    query,\n                    action,\n                    change,\n                }).then(shouldPrepareOutput => {\n                    // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                    const beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                    if (beforePrepareFile)\n                        shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                    if (!shouldPrepareOutput) return;\n\n                    dispatch(\n                        'REQUEST_PREPARE_OUTPUT',\n                        {\n                            query: id,\n                            item,\n                            success: file => {\n                                dispatch('DID_PREPARE_OUTPUT', { id, file });\n                            },\n                        },\n                        true\n                    );\n                });\n\n                return;\n            }\n\n            // if is local item we need to enable upload button so change can be propagated to server\n            if (item.origin === FileOrigin.LOCAL) {\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.source,\n                });\n            }\n\n            // for async scenarios\n            const upload = () => {\n                // we push this forward a bit so the interface is updated correctly\n                setTimeout(() => {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                }, 32);\n            };\n\n            const revert = doUpload => {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(doUpload ? upload : () => {})\n                    .catch(() => {});\n            };\n\n            const abort = doUpload => {\n                item.abortProcessing().then(doUpload ? upload : () => {});\n            };\n\n            // if we should re-upload the file immediately\n            if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                return revert(state.options.instantUpload);\n            }\n\n            // if currently uploading, cancel upload\n            if (item.status === ItemStatus.PROCESSING) {\n                return abort(state.options.instantUpload);\n            }\n\n            if (state.options.instantUpload) {\n                upload();\n            }\n        }, 0);\n    },\n\n    MOVE_ITEM: ({ query, index }) => {\n        const item = getItemByQuery(state.items, query);\n        if (!item) return;\n        const currentIndex = state.items.indexOf(item);\n        index = limit(index, 0, state.items.length - 1);\n        if (currentIndex === index) return;\n        state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n    },\n\n    SORT: ({ compare }) => {\n        sortItems(state, compare);\n        dispatch('DID_SORT_ITEMS', {\n            items: query('GET_ACTIVE_ITEMS'),\n        });\n    },\n\n    ADD_ITEMS: ({ items, index, interactionMethod, success = () => {}, failure = () => {} }) => {\n        let currentIndex = index;\n\n        if (index === -1 || typeof index === 'undefined') {\n            const insertLocation = query('GET_ITEM_INSERT_LOCATION');\n            const totalItems = query('GET_TOTAL_ITEMS');\n            currentIndex = insertLocation === 'before' ? 0 : totalItems;\n        }\n\n        const ignoredFiles = query('GET_IGNORED_FILES');\n        const isValidFile = source =>\n            isFile(source) ? !ignoredFiles.includes(source.name.toLowerCase()) : !isEmpty(source);\n        const validItems = items.filter(isValidFile);\n\n        const promises = validItems.map(\n            source =>\n                new Promise((resolve, reject) => {\n                    dispatch('ADD_ITEM', {\n                        interactionMethod,\n                        source: source.source || source,\n                        success: resolve,\n                        failure: reject,\n                        index: currentIndex++,\n                        options: source.options || {},\n                    });\n                })\n        );\n\n        Promise.all(promises)\n            .then(success)\n            .catch(failure);\n    },\n\n    /**\n     * @param source\n     * @param index\n     * @param interactionMethod\n     */\n    ADD_ITEM: ({\n        source,\n        index = -1,\n        interactionMethod,\n        success = () => {},\n        failure = () => {},\n        options = {},\n    }) => {\n        // if no source supplied\n        if (isEmpty(source)) {\n            failure({\n                error: createResponse('error', 0, 'No source'),\n                file: null,\n            });\n            return;\n        }\n\n        // filter out invalid file items, used to filter dropped directory contents\n        if (isFile(source) && state.options.ignoredFiles.includes(source.name.toLowerCase())) {\n            // fail silently\n            return;\n        }\n\n        // test if there's still room in the list of files\n        if (!hasRoomForItem(state)) {\n            // if multiple allowed, we can't replace\n            // or if only a single item is allowed but we're not allowed to replace it we exit\n            if (\n                state.options.allowMultiple ||\n                (!state.options.allowMultiple && !state.options.allowReplace)\n            ) {\n                const error = createResponse('warning', 0, 'Max files');\n\n                dispatch('DID_THROW_MAX_FILES', {\n                    source,\n                    error,\n                });\n\n                failure({ error, file: null });\n\n                return;\n            }\n\n            // let's replace the item\n            // id of first item we're about to remove\n            const item = getActiveItems(state.items)[0];\n\n            // if has been processed remove it from the server as well\n            if (\n                item.status === ItemStatus.PROCESSING_COMPLETE ||\n                item.status === ItemStatus.PROCESSING_REVERT_ERROR\n            ) {\n                const forceRevert = query('GET_FORCE_REVERT');\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    forceRevert\n                )\n                    .then(() => {\n                        if (!forceRevert) return;\n\n                        // try to add now\n                        dispatch('ADD_ITEM', {\n                            source,\n                            index,\n                            interactionMethod,\n                            success,\n                            failure,\n                            options,\n                        });\n                    })\n                    .catch(() => {}); // no need to handle this catch state for now\n\n                if (forceRevert) return;\n            }\n\n            // remove first item as it will be replaced by this item\n            dispatch('REMOVE_ITEM', { query: item.id });\n        }\n\n        // where did the file originate\n        const origin =\n            options.type === 'local'\n                ? FileOrigin.LOCAL\n                : options.type === 'limbo'\n                ? FileOrigin.LIMBO\n                : FileOrigin.INPUT;\n\n        // create a new blank item\n        const item = createItem(\n            // where did this file come from\n            origin,\n\n            // an input file never has a server file reference\n            origin === FileOrigin.INPUT ? null : source,\n\n            // file mock data, if defined\n            options.file\n        );\n\n        // set initial meta data\n        Object.keys(options.metadata || {}).forEach(key => {\n            item.setMetadata(key, options.metadata[key]);\n        });\n\n        // created the item, let plugins add methods\n        applyFilters('DID_CREATE_ITEM', item, { query, dispatch });\n\n        // where to insert new items\n        const itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n        // adjust index if is not allowed to pick location\n        if (!state.options.itemInsertLocationFreedom) {\n            index = itemInsertLocation === 'before' ? -1 : state.items.length;\n        }\n\n        // add item to list\n        insertItem(state.items, item, index);\n\n        // sort items in list\n        if (isFunction(itemInsertLocation) && source) {\n            sortItems(state, itemInsertLocation);\n        }\n\n        // get a quick reference to the item id\n        const id = item.id;\n\n        // observe item events\n        item.on('init', () => {\n            dispatch('DID_INIT_ITEM', { id });\n        });\n\n        item.on('load-init', () => {\n            dispatch('DID_START_ITEM_LOAD', { id });\n        });\n\n        item.on('load-meta', () => {\n            dispatch('DID_UPDATE_ITEM_META', { id });\n        });\n\n        item.on('load-progress', progress => {\n            dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id, progress });\n        });\n\n        item.on('load-request-error', error => {\n            const mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n            // is client error, no way to recover\n            if (error.code >= 400 && error.code < 500) {\n                dispatch('DID_THROW_ITEM_INVALID', {\n                    id,\n                    error,\n                    status: {\n                        main: mainStatus,\n                        sub: `${error.code} (${error.body})`,\n                    },\n                });\n\n                // reject the file so can be dealt with through API\n                failure({ error, file: createItemAPI(item) });\n                return;\n            }\n\n            // is possible server error, so might be possible to retry\n            dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                id,\n                error,\n                status: {\n                    main: mainStatus,\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('load-file-error', error => {\n            dispatch('DID_THROW_ITEM_INVALID', {\n                id,\n                error: error.status,\n                status: error.status,\n            });\n            failure({ error: error.status, file: createItemAPI(item) });\n        });\n\n        item.on('load-abort', () => {\n            dispatch('REMOVE_ITEM', { query: id });\n        });\n\n        item.on('load-skip', () => {\n            item.on('metadata-update', change => {\n                if (!isFile(item.file)) return;\n                dispatch('DID_UPDATE_ITEM_METADATA', { id, change });\n            });\n\n            dispatch('COMPLETE_LOAD_ITEM', {\n                query: id,\n                item,\n                data: {\n                    source,\n                    success,\n                },\n            });\n        });\n\n        item.on('load', () => {\n            const handleAdd = shouldAdd => {\n                // no should not add this file\n                if (!shouldAdd) {\n                    dispatch('REMOVE_ITEM', {\n                        query: id,\n                    });\n                    return;\n                }\n\n                // now interested in metadata updates\n                item.on('metadata-update', change => {\n                    dispatch('DID_UPDATE_ITEM_METADATA', { id, change });\n                });\n\n                // let plugins decide if the output data should be prepared at this point\n                // means we'll do this and wait for idle state\n                applyFilterChain('SHOULD_PREPARE_OUTPUT', false, { item, query }).then(\n                    shouldPrepareOutput => {\n                        // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                        const beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                        if (beforePrepareFile)\n                            shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                        const loadComplete = () => {\n                            dispatch('COMPLETE_LOAD_ITEM', {\n                                query: id,\n                                item,\n                                data: {\n                                    source,\n                                    success,\n                                },\n                            });\n\n                            listUpdated(dispatch, state);\n                        };\n\n                        // exit\n                        if (shouldPrepareOutput) {\n                            // wait for idle state and then run PREPARE_OUTPUT\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item,\n                                    success: file => {\n                                        dispatch('DID_PREPARE_OUTPUT', { id, file });\n                                        loadComplete();\n                                    },\n                                },\n                                true\n                            );\n\n                            return;\n                        }\n\n                        loadComplete();\n                    }\n                );\n            };\n\n            // item loaded, allow plugins to\n            // - read data (quickly)\n            // - add metadata\n            applyFilterChain('DID_LOAD_ITEM', item, { query, dispatch })\n                .then(() => {\n                    optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                        handleAdd\n                    );\n                })\n                .catch(e => {\n                    if (!e || !e.error || !e.status) return handleAdd(false);\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id,\n                        error: e.error,\n                        status: e.status,\n                    });\n                });\n        });\n\n        item.on('process-start', () => {\n            dispatch('DID_START_ITEM_PROCESSING', { id });\n        });\n\n        item.on('process-progress', progress => {\n            dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id, progress });\n        });\n\n        item.on('process-error', error => {\n            dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                id,\n                error,\n                status: {\n                    main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('process-revert-error', error => {\n            dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                id,\n                error,\n                status: {\n                    main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('process-complete', serverFileReference => {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                id,\n                error: null,\n                serverFileReference,\n            });\n            dispatch('DID_DEFINE_VALUE', { id, value: serverFileReference });\n        });\n\n        item.on('process-abort', () => {\n            dispatch('DID_ABORT_ITEM_PROCESSING', { id });\n        });\n\n        item.on('process-revert', () => {\n            dispatch('DID_REVERT_ITEM_PROCESSING', { id });\n            dispatch('DID_DEFINE_VALUE', { id, value: null });\n        });\n\n        // let view know the item has been inserted\n        dispatch('DID_ADD_ITEM', { id, index, interactionMethod });\n\n        listUpdated(dispatch, state);\n\n        // start loading the source\n        const { url, load, restore, fetch } = state.options.server || {};\n\n        item.load(\n            source,\n\n            // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n            createFileLoader(\n                origin === FileOrigin.INPUT\n                    ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                      isString(source) && isExternalURL(source)\n                        ? fetch\n                            ? createFetchFunction(url, fetch)\n                            : fetchBlob // remote url\n                        : fetchBlob // try to fetch url\n                    : // limbo or local\n                    origin === FileOrigin.LIMBO\n                    ? createFetchFunction(url, restore) // limbo\n                    : createFetchFunction(url, load) // local\n            ),\n\n            // called when the file is loaded so it can be piped through the filters\n            (file, success, error) => {\n                // let's process the file\n                applyFilterChain('LOAD_FILE', file, { query })\n                    .then(success)\n                    .catch(error);\n            }\n        );\n    },\n\n    REQUEST_PREPARE_OUTPUT: ({ item, success, failure = () => {} }) => {\n        // error response if item archived\n        const err = {\n            error: createResponse('error', 0, 'Item not found'),\n            file: null,\n        };\n\n        // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n        if (item.archived) return failure(err);\n\n        // allow plugins to alter the file data\n        applyFilterChain('PREPARE_OUTPUT', item.file, { query, item }).then(result => {\n            applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, { query, item }).then(result => {\n                // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                if (item.archived) return failure(err);\n\n                // we done!\n                success(result);\n            });\n        });\n    },\n\n    COMPLETE_LOAD_ITEM: ({ item, data }) => {\n        const { success, source } = data;\n\n        // sort items in list\n        const itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n        if (isFunction(itemInsertLocation) && source) {\n            sortItems(state, itemInsertLocation);\n        }\n\n        // let interface know the item has loaded\n        dispatch('DID_LOAD_ITEM', {\n            id: item.id,\n            error: null,\n            serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n        });\n\n        // item has been successfully loaded and added to the\n        // list of items so can now be safely returned for use\n        success(createItemAPI(item));\n\n        // if this is a local server file we need to show a different state\n        if (item.origin === FileOrigin.LOCAL) {\n            dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n            return;\n        }\n\n        // if is a temp server file we prevent async upload call here (as the file is already on the server)\n        if (item.origin === FileOrigin.LIMBO) {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                id: item.id,\n                error: null,\n                serverFileReference: source,\n            });\n\n            dispatch('DID_DEFINE_VALUE', {\n                id: item.id,\n                value: item.serverId || source,\n            });\n            return;\n        }\n\n        // id we are allowed to upload the file immediately, lets do it\n        if (query('IS_ASYNC') && state.options.instantUpload) {\n            dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n        }\n    },\n\n    RETRY_ITEM_LOAD: getItemByQueryFromState(state, item => {\n        // try loading the source one more time\n        item.retryLoad();\n    }),\n\n    REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, (item, success, failure) => {\n        dispatch(\n            'REQUEST_PREPARE_OUTPUT',\n            {\n                query: item.id,\n                item,\n                success: file => {\n                    dispatch('DID_PREPARE_OUTPUT', { id: item.id, file });\n                    success({\n                        file: item,\n                        output: file,\n                    });\n                },\n                failure,\n            },\n            true\n        );\n    }),\n\n    REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, (item, success, failure) => {\n        // cannot be queued (or is already queued)\n        const itemCanBeQueuedForProcessing =\n            // waiting for something\n            item.status === ItemStatus.IDLE ||\n            // processing went wrong earlier\n            item.status === ItemStatus.PROCESSING_ERROR;\n\n        // not ready to be processed\n        if (!itemCanBeQueuedForProcessing) {\n            const processNow = () =>\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item, success, failure });\n\n            const process = () => (document.hidden ? processNow() : setTimeout(processNow, 32));\n\n            // if already done processing or tried to revert but didn't work, try again\n            if (\n                item.status === ItemStatus.PROCESSING_COMPLETE ||\n                item.status === ItemStatus.PROCESSING_REVERT_ERROR\n            ) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(process)\n                    .catch(() => {}); // don't continue with processing if something went wrong\n            } else if (item.status === ItemStatus.PROCESSING) {\n                item.abortProcessing().then(process);\n            }\n\n            return;\n        }\n\n        // already queued for processing\n        if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n        item.requestProcessing();\n\n        dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n        dispatch('PROCESS_ITEM', { query: item, success, failure }, true);\n    }),\n\n    PROCESS_ITEM: getItemByQueryFromState(state, (item, success, failure) => {\n        const maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n        const totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING).length;\n\n        // queue and wait till queue is freed up\n        if (totalCurrentUploads === maxParallelUploads) {\n            // queue for later processing\n            state.processingQueue.push({\n                id: item.id,\n                success,\n                failure,\n            });\n\n            // stop it!\n            return;\n        }\n\n        // if was not queued or is already processing exit here\n        if (item.status === ItemStatus.PROCESSING) return;\n\n        const processNext = () => {\n            // process queueud items\n            const queueEntry = state.processingQueue.shift();\n\n            // no items left\n            if (!queueEntry) return;\n\n            // get item reference\n            const { id, success, failure } = queueEntry;\n            const itemReference = getItemByQuery(state.items, id);\n\n            // if item was archived while in queue, jump to next\n            if (!itemReference || itemReference.archived) {\n                processNext();\n                return;\n            }\n\n            // process queued item\n            dispatch('PROCESS_ITEM', { query: id, success, failure }, true);\n        };\n\n        // we done function\n        item.onOnce('process-complete', () => {\n            success(createItemAPI(item));\n            processNext();\n\n            // if origin is local, and we're instant uploading, trigger remove of original\n            // as revert will remove file from list\n            const server = state.options.server;\n            const instantUpload = state.options.instantUpload;\n            if (instantUpload && item.origin === FileOrigin.LOCAL && isFunction(server.remove)) {\n                const noop = () => {};\n                item.origin = FileOrigin.LIMBO;\n                state.options.server.remove(item.source, noop, noop);\n            }\n\n            // All items processed? No errors?\n            const allItemsProcessed =\n                query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                state.items.length;\n            if (allItemsProcessed) {\n                dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n            }\n        });\n\n        // we error function\n        item.onOnce('process-error', error => {\n            failure({ error, file: createItemAPI(item) });\n            processNext();\n        });\n\n        // start file processing\n        const options = state.options;\n        item.process(\n            createFileProcessor(\n                createProcessorFunction(options.server.url, options.server.process, options.name, {\n                    chunkTransferId: item.transferId,\n                    chunkServer: options.server.patch,\n                    chunkUploads: options.chunkUploads,\n                    chunkForce: options.chunkForce,\n                    chunkSize: options.chunkSize,\n                    chunkRetryDelays: options.chunkRetryDelays,\n                }),\n                {\n                    allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                }\n            ),\n            // called when the file is about to be processed so it can be piped through the transform filters\n            (file, success, error) => {\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', file, { query, item })\n                    .then(file => {\n                        dispatch('DID_PREPARE_OUTPUT', { id: item.id, file });\n\n                        success(file);\n                    })\n                    .catch(error);\n            }\n        );\n    }),\n\n    RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n    }),\n\n    REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, item => {\n        optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(shouldRemove => {\n            if (!shouldRemove) {\n                return;\n            }\n            dispatch('REMOVE_ITEM', { query: item });\n        });\n    }),\n\n    RELEASE_ITEM: getItemByQueryFromState(state, item => {\n        item.release();\n    }),\n\n    REMOVE_ITEM: getItemByQueryFromState(state, (item, success, failure, options) => {\n        const removeFromView = () => {\n            // get id reference\n            const id = item.id;\n\n            // archive the item, this does not remove it from the list\n            getItemById(state.items, id).archive();\n\n            // tell the view the item has been removed\n            dispatch('DID_REMOVE_ITEM', { error: null, id, item });\n\n            // now the list has been modified\n            listUpdated(dispatch, state);\n\n            // correctly removed\n            success(createItemAPI(item));\n        };\n\n        // if this is a local file and the `server.remove` function has been configured,\n        // send source there so dev can remove file from server\n        const server = state.options.server;\n        if (\n            item.origin === FileOrigin.LOCAL &&\n            server &&\n            isFunction(server.remove) &&\n            options.remove !== false\n        ) {\n            dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n            server.remove(\n                item.source,\n                () => removeFromView(),\n                status => {\n                    dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                        id: item.id,\n                        error: createResponse('error', 0, status, null),\n                        status: {\n                            main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                }\n            );\n        } else {\n            // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n            if (\n                (options.revert && item.origin !== FileOrigin.LOCAL && item.serverId !== null) ||\n                // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                // revert before removing from the view...\n                (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                (state.options.chunkUploads && state.options.chunkForce)\n            ) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                );\n            }\n\n            // can now safely remove from view\n            removeFromView();\n        }\n    }),\n\n    ABORT_ITEM_LOAD: getItemByQueryFromState(state, item => {\n        item.abortLoad();\n    }),\n\n    ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        // test if is already processed\n        if (item.serverId) {\n            dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n            return;\n        }\n\n        // abort\n        item.abortProcessing().then(() => {\n            const shouldRemove = state.options.instantUpload;\n            if (shouldRemove) {\n                dispatch('REMOVE_ITEM', { query: item.id });\n            }\n        });\n    }),\n\n    REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        // not instant uploading, revert immediately\n        if (!state.options.instantUpload) {\n            dispatch('REVERT_ITEM_PROCESSING', { query: item });\n            return;\n        }\n\n        // if we're instant uploading the file will also be removed if we revert,\n        // so if a before remove file hook is defined we need to run it now\n        const handleRevert = shouldRevert => {\n            if (!shouldRevert) return;\n            dispatch('REVERT_ITEM_PROCESSING', { query: item });\n        };\n\n        const fn = query('GET_BEFORE_REMOVE_FILE');\n        if (!fn) {\n            return handleRevert(true);\n        }\n\n        const requestRemoveResult = fn(createItemAPI(item));\n        if (requestRemoveResult == null) {\n            // undefined or null\n            return handleRevert(true);\n        }\n\n        if (typeof requestRemoveResult === 'boolean') {\n            return handleRevert(requestRemoveResult);\n        }\n\n        if (typeof requestRemoveResult.then === 'function') {\n            requestRemoveResult.then(handleRevert);\n        }\n    }),\n\n    REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        item.revert(\n            createRevertFunction(state.options.server.url, state.options.server.revert),\n            query('GET_FORCE_REVERT')\n        )\n            .then(() => {\n                const shouldRemove = state.options.instantUpload || isMockItem(item);\n                if (shouldRemove) {\n                    dispatch('REMOVE_ITEM', { query: item.id });\n                }\n            })\n            .catch(() => {});\n    }),\n\n    SET_OPTIONS: ({ options }) => {\n        // get all keys passed\n        const optionKeys = Object.keys(options);\n\n        // get prioritized keyed to include (remove once not in options object)\n        const prioritizedOptionKeys = PrioritizedOptions.filter(key => optionKeys.includes(key));\n\n        // order the keys, prioritized first, then rest\n        const orderedOptionKeys = [\n            // add prioritized first if passed to options, else remove\n            ...prioritizedOptionKeys,\n\n            // prevent duplicate keys\n            ...Object.keys(options).filter(key => !prioritizedOptionKeys.includes(key)),\n        ];\n\n        // dispatch set event for each option\n        orderedOptionKeys.forEach(key => {\n            dispatch(`SET_${fromCamels(key, '_').toUpperCase()}`, {\n                value: options[key],\n            });\n        });\n    },\n});\n\nconst PrioritizedOptions = [\n    'server', // must be processed before \"files\"\n];\n\nconst formatFilename = name => name;\n\nconst createElement$1 = tagName => {\n    return document.createElement(tagName);\n};\n\nconst text = (node, value) => {\n    let textNode = node.childNodes[0];\n    if (!textNode) {\n        textNode = document.createTextNode(value);\n        node.appendChild(textNode);\n    } else if (value !== textNode.nodeValue) {\n        textNode.nodeValue = value;\n    }\n};\n\nconst polarToCartesian = (centerX, centerY, radius, angleInDegrees) => {\n    const angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    };\n};\n\nconst describeArc = (x, y, radius, startAngle, endAngle, arcSweep) => {\n    const start = polarToCartesian(x, y, radius, endAngle);\n    const end = polarToCartesian(x, y, radius, startAngle);\n    return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n};\n\nconst percentageArc = (x, y, radius, from, to) => {\n    let arcSweep = 1;\n    if (to > from && to - from <= 0.5) {\n        arcSweep = 0;\n    }\n    if (from > to && from - to >= 0.5) {\n        arcSweep = 0;\n    }\n    return describeArc(\n        x,\n        y,\n        radius,\n        Math.min(0.9999, from) * 360,\n        Math.min(0.9999, to) * 360,\n        arcSweep\n    );\n};\n\nconst create = ({ root, props }) => {\n    // start at 0\n    props.spin = false;\n    props.progress = 0;\n    props.opacity = 0;\n\n    // svg\n    const svg = createElement('svg');\n    root.ref.path = createElement('path', {\n        'stroke-width': 2,\n        'stroke-linecap': 'round',\n    });\n    svg.appendChild(root.ref.path);\n\n    root.ref.svg = svg;\n\n    root.appendChild(svg);\n};\n\nconst write = ({ root, props }) => {\n    if (props.opacity === 0) {\n        return;\n    }\n\n    if (props.align) {\n        root.element.dataset.align = props.align;\n    }\n\n    // get width of stroke\n    const ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n    // calculate size of ring\n    const size = root.rect.element.width * 0.5;\n\n    // ring state\n    let ringFrom = 0;\n    let ringTo = 0;\n\n    // now in busy mode\n    if (props.spin) {\n        ringFrom = 0;\n        ringTo = 0.5;\n    } else {\n        ringFrom = 0;\n        ringTo = props.progress;\n    }\n\n    // get arc path\n    const coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n    // update progress bar\n    attr(root.ref.path, 'd', coordinates);\n\n    // hide while contains 0 value\n    attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n};\n\nconst progressIndicator = createView({\n    tag: 'div',\n    name: 'progress-indicator',\n    ignoreRectUpdate: true,\n    ignoreRect: true,\n    create,\n    write,\n    mixins: {\n        apis: ['progress', 'spin', 'align'],\n        styles: ['opacity'],\n        animations: {\n            opacity: { type: 'tween', duration: 500 },\n            progress: {\n                type: 'spring',\n                stiffness: 0.95,\n                damping: 0.65,\n                mass: 10,\n            },\n        },\n    },\n});\n\nconst create$1 = ({ root, props }) => {\n    root.element.innerHTML = (props.icon || '') + `<span>${props.label}</span>`;\n\n    props.isDisabled = false;\n};\n\nconst write$1 = ({ root, props }) => {\n    const { isDisabled } = props;\n    const shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n    if (shouldDisable && !isDisabled) {\n        props.isDisabled = true;\n        attr(root.element, 'disabled', 'disabled');\n    } else if (!shouldDisable && isDisabled) {\n        props.isDisabled = false;\n        root.element.removeAttribute('disabled');\n    }\n};\n\nconst fileActionButton = createView({\n    tag: 'button',\n    attributes: {\n        type: 'button',\n    },\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'file-action-button',\n    mixins: {\n        apis: ['label'],\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            translateX: 'spring',\n            translateY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n        listeners: true,\n    },\n    create: create$1,\n    write: write$1,\n});\n\nconst toNaturalFileSize = (bytes, decimalSeparator = '.', base = 1000, options = {}) => {\n    const {\n        labelBytes = 'bytes',\n        labelKilobytes = 'KB',\n        labelMegabytes = 'MB',\n        labelGigabytes = 'GB',\n    } = options;\n\n    // no negative byte sizes\n    bytes = Math.round(Math.abs(bytes));\n\n    const KB = base;\n    const MB = base * base;\n    const GB = base * base * base;\n\n    // just bytes\n    if (bytes < KB) {\n        return `${bytes} ${labelBytes}`;\n    }\n\n    // kilobytes\n    if (bytes < MB) {\n        return `${Math.floor(bytes / KB)} ${labelKilobytes}`;\n    }\n\n    // megabytes\n    if (bytes < GB) {\n        return `${removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator)} ${labelMegabytes}`;\n    }\n\n    // gigabytes\n    return `${removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator)} ${labelGigabytes}`;\n};\n\nconst removeDecimalsWhenZero = (value, decimalCount, separator) => {\n    return value\n        .toFixed(decimalCount)\n        .split('.')\n        .filter(part => part !== '0')\n        .join(separator);\n};\n\nconst create$2 = ({ root, props }) => {\n    // filename\n    const fileName = createElement$1('span');\n    fileName.className = 'filepond--file-info-main';\n    // hide for screenreaders\n    // the file is contained in a fieldset with legend that contains the filename\n    // no need to read it twice\n    attr(fileName, 'aria-hidden', 'true');\n    root.appendChild(fileName);\n    root.ref.fileName = fileName;\n\n    // filesize\n    const fileSize = createElement$1('span');\n    fileSize.className = 'filepond--file-info-sub';\n    root.appendChild(fileSize);\n    root.ref.fileSize = fileSize;\n\n    // set initial values\n    text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n    text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst updateFile = ({ root, props }) => {\n    text(\n        root.ref.fileSize,\n        toNaturalFileSize(\n            root.query('GET_ITEM_SIZE', props.id),\n            '.',\n            root.query('GET_FILE_SIZE_BASE'),\n            root.query('GET_FILE_SIZE_LABELS', root.query)\n        )\n    );\n    text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst updateFileSizeOnError = ({ root, props }) => {\n    // if size is available don't fallback to unknown size message\n    if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n        updateFile({ root, props });\n        return;\n    }\n\n    text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n};\n\nconst fileInfo = createView({\n    name: 'file-info',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: updateFile,\n        DID_UPDATE_ITEM_META: updateFile,\n        DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n        DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    create: create$2,\n    mixins: {\n        styles: ['translateX', 'translateY'],\n        animations: {\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\nconst toPercentage = value => Math.round(value * 100);\n\nconst create$3 = ({ root }) => {\n    // main status\n    const main = createElement$1('span');\n    main.className = 'filepond--file-status-main';\n    root.appendChild(main);\n    root.ref.main = main;\n\n    // sub status\n    const sub = createElement$1('span');\n    sub.className = 'filepond--file-status-sub';\n    root.appendChild(sub);\n    root.ref.sub = sub;\n\n    didSetItemLoadProgress({ root, action: { progress: null } });\n};\n\nconst didSetItemLoadProgress = ({ root, action }) => {\n    const title =\n        action.progress === null\n            ? root.query('GET_LABEL_FILE_LOADING')\n            : `${root.query('GET_LABEL_FILE_LOADING')} ${toPercentage(action.progress)}%`;\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didSetItemProcessProgress = ({ root, action }) => {\n    const title =\n        action.progress === null\n            ? root.query('GET_LABEL_FILE_PROCESSING')\n            : `${root.query('GET_LABEL_FILE_PROCESSING')} ${toPercentage(action.progress)}%`;\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didRequestItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didAbortItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n};\n\nconst didCompleteItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n};\n\nconst clear = ({ root }) => {\n    text(root.ref.main, '');\n    text(root.ref.sub, '');\n};\n\nconst error = ({ root, action }) => {\n    text(root.ref.main, action.status.main);\n    text(root.ref.sub, action.status.sub);\n};\n\nconst fileStatus = createView({\n    name: 'file-status',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: clear,\n        DID_REVERT_ITEM_PROCESSING: clear,\n        DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n        DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n        DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n        DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n        DID_THROW_ITEM_LOAD_ERROR: error,\n        DID_THROW_ITEM_INVALID: error,\n        DID_THROW_ITEM_PROCESSING_ERROR: error,\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n        DID_THROW_ITEM_REMOVE_ERROR: error,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    create: create$3,\n    mixins: {\n        styles: ['translateX', 'translateY', 'opacity'],\n        animations: {\n            opacity: { type: 'tween', duration: 250 },\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\n/**\n * Button definitions for the file view\n */\n\nconst Buttons = {\n    AbortItemLoad: {\n        label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n        action: 'ABORT_ITEM_LOAD',\n        className: 'filepond--action-abort-item-load',\n        align: 'LOAD_INDICATOR_POSITION', // right\n    },\n    RetryItemLoad: {\n        label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n        action: 'RETRY_ITEM_LOAD',\n        icon: 'GET_ICON_RETRY',\n        className: 'filepond--action-retry-item-load',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RemoveItem: {\n        label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n        action: 'REQUEST_REMOVE_ITEM',\n        icon: 'GET_ICON_REMOVE',\n        className: 'filepond--action-remove-item',\n        align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n    },\n    ProcessItem: {\n        label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n        action: 'REQUEST_ITEM_PROCESSING',\n        icon: 'GET_ICON_PROCESS',\n        className: 'filepond--action-process-item',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    AbortItemProcessing: {\n        label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n        action: 'ABORT_ITEM_PROCESSING',\n        className: 'filepond--action-abort-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RetryItemProcessing: {\n        label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n        action: 'RETRY_ITEM_PROCESSING',\n        icon: 'GET_ICON_RETRY',\n        className: 'filepond--action-retry-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RevertItemProcessing: {\n        label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n        action: 'REQUEST_REVERT_ITEM_PROCESSING',\n        icon: 'GET_ICON_UNDO',\n        className: 'filepond--action-revert-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n};\n\n// make a list of buttons, we can then remove buttons from this list if they're disabled\nconst ButtonKeys = [];\nforin(Buttons, key => {\n    ButtonKeys.push(key);\n});\n\nconst calculateFileInfoOffset = root => {\n    if (getRemoveIndicatorAligment(root) === 'right') return 0;\n    const buttonRect = root.ref.buttonRemoveItem.rect.element;\n    return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n};\n\nconst calculateButtonWidth = root => {\n    const buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n    return buttonRect.width;\n};\n\n// Force on full pixels so text stays crips\nconst calculateFileVerticalCenterOffset = root =>\n    Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\nconst calculateFileHorizontalCenterOffset = root =>\n    Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n\nconst getLoadIndicatorAlignment = root => root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\nconst getProcessIndicatorAlignment = root => root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\nconst getRemoveIndicatorAligment = root => root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n\nconst DefaultStyle = {\n    buttonAbortItemLoad: { opacity: 0 },\n    buttonRetryItemLoad: { opacity: 0 },\n    buttonRemoveItem: { opacity: 0 },\n    buttonProcessItem: { opacity: 0 },\n    buttonAbortItemProcessing: { opacity: 0 },\n    buttonRetryItemProcessing: { opacity: 0 },\n    buttonRevertItemProcessing: { opacity: 0 },\n    loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n    processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n    processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n    info: { translateX: 0, translateY: 0, opacity: 0 },\n    status: { translateX: 0, translateY: 0, opacity: 0 },\n};\n\nconst IdleStyle = {\n    buttonRemoveItem: { opacity: 1 },\n    buttonProcessItem: { opacity: 1 },\n    info: { translateX: calculateFileInfoOffset },\n    status: { translateX: calculateFileInfoOffset },\n};\n\nconst ProcessingStyle = {\n    buttonAbortItemProcessing: { opacity: 1 },\n    processProgressIndicator: { opacity: 1 },\n    status: { opacity: 1 },\n};\n\nconst StyleMap = {\n    DID_THROW_ITEM_INVALID: {\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset, opacity: 1 },\n    },\n    DID_START_ITEM_LOAD: {\n        buttonAbortItemLoad: { opacity: 1 },\n        loadProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    },\n    DID_THROW_ITEM_LOAD_ERROR: {\n        buttonRetryItemLoad: { opacity: 1 },\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1 },\n    },\n    DID_START_ITEM_REMOVE: {\n        processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 0 },\n    },\n    DID_THROW_ITEM_REMOVE_ERROR: {\n        processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1, translateX: calculateFileInfoOffset },\n    },\n    DID_LOAD_ITEM: IdleStyle,\n    DID_LOAD_LOCAL_ITEM: {\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    },\n    DID_START_ITEM_PROCESSING: ProcessingStyle,\n    DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n    DID_COMPLETE_ITEM_PROCESSING: {\n        buttonRevertItemProcessing: { opacity: 1 },\n        info: { opacity: 1 },\n        status: { opacity: 1 },\n    },\n    DID_THROW_ITEM_PROCESSING_ERROR: {\n        buttonRemoveItem: { opacity: 1 },\n        buttonRetryItemProcessing: { opacity: 1 },\n        status: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n    },\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n        buttonRevertItemProcessing: { opacity: 1 },\n        status: { opacity: 1 },\n        info: { opacity: 1 },\n    },\n    DID_ABORT_ITEM_PROCESSING: {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1 },\n    },\n    DID_REVERT_ITEM_PROCESSING: IdleStyle,\n};\n\n// complete indicator view\nconst processingCompleteIndicatorView = createView({\n    create: ({ root }) => {\n        root.element.innerHTML = root.query('GET_ICON_DONE');\n    },\n    name: 'processing-complete-indicator',\n    ignoreRect: true,\n    mixins: {\n        styles: ['scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n    },\n});\n\n/**\n * Creates the file view\n */\nconst create$4 = ({ root, props }) => {\n    // copy Buttons object\n    const LocalButtons = Object.keys(Buttons).reduce((prev, curr) => {\n        prev[curr] = { ...Buttons[curr] };\n        return prev;\n    }, {});\n\n    const { id } = props;\n\n    // allow reverting upload\n    const allowRevert = root.query('GET_ALLOW_REVERT');\n\n    // allow remove file\n    const allowRemove = root.query('GET_ALLOW_REMOVE');\n\n    // allow processing upload\n    const allowProcess = root.query('GET_ALLOW_PROCESS');\n\n    // is instant uploading, need this to determine the icon of the undo button\n    const instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n    // is async set up\n    const isAsync = root.query('IS_ASYNC');\n\n    // should align remove item buttons\n    const alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n    // enabled buttons array\n    let buttonFilter;\n    if (isAsync) {\n        if (allowProcess && !allowRevert) {\n            // only remove revert button\n            buttonFilter = key => !/RevertItemProcessing/.test(key);\n        } else if (!allowProcess && allowRevert) {\n            // only remove process button\n            buttonFilter = key => !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n        } else if (!allowProcess && !allowRevert) {\n            // remove all process buttons\n            buttonFilter = key => !/Process/.test(key);\n        }\n    } else {\n        // no process controls available\n        buttonFilter = key => !/Process/.test(key);\n    }\n\n    const enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n    // update icon and label for revert button when instant uploading\n    if (instantUpload && allowRevert) {\n        LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n        LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n    }\n\n    // remove last button (revert) if not allowed\n    if (isAsync && !allowRevert) {\n        const map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n        map.info.translateX = calculateFileHorizontalCenterOffset;\n        map.info.translateY = calculateFileVerticalCenterOffset;\n        map.status.translateY = calculateFileVerticalCenterOffset;\n        map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // should align center\n    if (isAsync && !allowProcess) {\n        [\n            'DID_START_ITEM_PROCESSING',\n            'DID_REQUEST_ITEM_PROCESSING',\n            'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n            'DID_THROW_ITEM_PROCESSING_ERROR',\n        ].forEach(key => {\n            StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n        });\n        StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n    }\n\n    // move remove button to right\n    if (alignRemoveItemButton && allowRevert) {\n        LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n        const map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n        map.info.translateX = calculateFileInfoOffset;\n        map.status.translateY = calculateFileVerticalCenterOffset;\n        map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // show/hide RemoveItem button\n    if (!allowRemove) {\n        LocalButtons['RemoveItem'].disabled = true;\n    }\n\n    // create the button views\n    forin(LocalButtons, (key, definition) => {\n        // create button\n        const buttonView = root.createChildView(fileActionButton, {\n            label: root.query(definition.label),\n            icon: root.query(definition.icon),\n            opacity: 0,\n        });\n\n        // should be appended?\n        if (enabledButtons.includes(key)) {\n            root.appendChildView(buttonView);\n        }\n\n        // toggle\n        if (definition.disabled) {\n            buttonView.element.setAttribute('disabled', 'disabled');\n            buttonView.element.setAttribute('hidden', 'hidden');\n        }\n\n        // add position attribute\n        buttonView.element.dataset.align = root.query(`GET_STYLE_${definition.align}`);\n\n        // add class\n        buttonView.element.classList.add(definition.className);\n\n        // handle interactions\n        buttonView.on('click', e => {\n            e.stopPropagation();\n            if (definition.disabled) return;\n            root.dispatch(definition.action, { query: id });\n        });\n\n        // set reference\n        root.ref[`button${key}`] = buttonView;\n    });\n\n    // checkmark\n    root.ref.processingCompleteIndicator = root.appendChildView(\n        root.createChildView(processingCompleteIndicatorView)\n    );\n    root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n        `GET_STYLE_BUTTON_PROCESS_ITEM_POSITION`\n    );\n\n    // create file info view\n    root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id }));\n\n    // create file status view\n    root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id }));\n\n    // add progress indicators\n    const loadIndicatorView = root.appendChildView(\n        root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(`GET_STYLE_LOAD_INDICATOR_POSITION`),\n        })\n    );\n    loadIndicatorView.element.classList.add('filepond--load-indicator');\n    root.ref.loadProgressIndicator = loadIndicatorView;\n\n    const progressIndicatorView = root.appendChildView(\n        root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(`GET_STYLE_PROGRESS_INDICATOR_POSITION`),\n        })\n    );\n    progressIndicatorView.element.classList.add('filepond--process-indicator');\n    root.ref.processProgressIndicator = progressIndicatorView;\n\n    // current active styles\n    root.ref.activeStyles = [];\n};\n\nconst write$2 = ({ root, actions, props }) => {\n    // route actions\n    route({ root, actions, props });\n\n    // select last state change action\n    let action = actions\n        .concat()\n        .filter(action => /^DID_/.test(action.type))\n        .reverse()\n        .find(action => StyleMap[action.type]);\n\n    // a new action happened, let's get the matching styles\n    if (action) {\n        // define new active styles\n        root.ref.activeStyles = [];\n\n        const stylesToApply = StyleMap[action.type];\n        forin(DefaultStyle, (name, defaultStyles) => {\n            // get reference to control\n            const control = root.ref[name];\n\n            // loop over all styles for this control\n            forin(defaultStyles, (key, defaultValue) => {\n                const value =\n                    stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                        ? stylesToApply[name][key]\n                        : defaultValue;\n                root.ref.activeStyles.push({ control, key, value });\n            });\n        });\n    }\n\n    // apply active styles to element\n    root.ref.activeStyles.forEach(({ control, key, value }) => {\n        control[key] = typeof value === 'function' ? value(root) : value;\n    });\n};\n\nconst route = createRoute({\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: ({ root, action }) => {\n        root.ref.buttonAbortItemProcessing.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: ({ root, action }) => {\n        root.ref.buttonAbortItemLoad.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: ({ root, action }) => {\n        root.ref.buttonAbortItemRemoval.label = action.value;\n    },\n    DID_REQUEST_ITEM_PROCESSING: ({ root }) => {\n        root.ref.processProgressIndicator.spin = true;\n        root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_LOAD: ({ root }) => {\n        root.ref.loadProgressIndicator.spin = true;\n        root.ref.loadProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_REMOVE: ({ root }) => {\n        root.ref.processProgressIndicator.spin = true;\n        root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_UPDATE_ITEM_LOAD_PROGRESS: ({ root, action }) => {\n        root.ref.loadProgressIndicator.spin = false;\n        root.ref.loadProgressIndicator.progress = action.progress;\n    },\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ({ root, action }) => {\n        root.ref.processProgressIndicator.spin = false;\n        root.ref.processProgressIndicator.progress = action.progress;\n    },\n});\n\nconst file = createView({\n    create: create$4,\n    write: write$2,\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    name: 'file',\n});\n\n/**\n * Creates the file view\n */\nconst create$5 = ({ root, props }) => {\n    // filename\n    root.ref.fileName = createElement$1('legend');\n    root.appendChild(root.ref.fileName);\n\n    // file appended\n    root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n    // data has moved to data.js\n    root.ref.data = false;\n};\n\n/**\n * Data storage\n */\nconst didLoadItem = ({ root, props }) => {\n    // updates the legend of the fieldset so screenreaders can better group buttons\n    text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst fileWrapper = createView({\n    create: create$5,\n    ignoreRect: true,\n    write: createRoute({\n        DID_LOAD_ITEM: didLoadItem,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    tag: 'fieldset',\n    name: 'file-wrapper',\n});\n\nconst PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\nconst create$6 = ({ root, props }) => {\n    [\n        {\n            name: 'top',\n        },\n        {\n            name: 'center',\n            props: {\n                translateY: null,\n                scaleY: null,\n            },\n            mixins: {\n                animations: {\n                    scaleY: PANEL_SPRING_PROPS,\n                },\n                styles: ['translateY', 'scaleY'],\n            },\n        },\n        {\n            name: 'bottom',\n            props: {\n                translateY: null,\n            },\n            mixins: {\n                animations: {\n                    translateY: PANEL_SPRING_PROPS,\n                },\n                styles: ['translateY'],\n            },\n        },\n    ].forEach(section => {\n        createSection(root, section, props.name);\n    });\n\n    root.element.classList.add(`filepond--${props.name}`);\n\n    root.ref.scalable = null;\n};\n\nconst createSection = (root, section, className) => {\n    const viewConstructor = createView({\n        name: `panel-${section.name} filepond--${className}`,\n        mixins: section.mixins,\n        ignoreRectUpdate: true,\n    });\n\n    const view = root.createChildView(viewConstructor, section.props);\n\n    root.ref[section.name] = root.appendChildView(view);\n};\n\nconst write$3 = ({ root, props }) => {\n    // update scalable state\n    if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n        root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n        root.element.dataset.scalable = root.ref.scalable;\n    }\n\n    // no height, can't set\n    if (!props.height) return;\n\n    // get child rects\n    const topRect = root.ref.top.rect.element;\n    const bottomRect = root.ref.bottom.rect.element;\n\n    // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n    const height = Math.max(topRect.height + bottomRect.height, props.height);\n\n    // offset center part\n    root.ref.center.translateY = topRect.height;\n\n    // scale center part\n    // use math ceil to prevent transparent lines because of rounding errors\n    root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n    // offset bottom part\n    root.ref.bottom.translateY = height - bottomRect.height;\n};\n\nconst panel = createView({\n    name: 'panel',\n    read: ({ root, props }) => (props.heightCurrent = root.ref.bottom.translateY),\n    write: write$3,\n    create: create$6,\n    ignoreRect: true,\n    mixins: {\n        apis: ['height', 'heightCurrent', 'scalable'],\n    },\n});\n\nconst createDragHelper = items => {\n    const itemIds = items.map(item => item.id);\n    let prevIndex = undefined;\n    return {\n        setIndex: index => {\n            prevIndex = index;\n        },\n        getIndex: () => prevIndex,\n        getItemIndex: item => itemIds.indexOf(item.id),\n    };\n};\n\nconst ITEM_TRANSLATE_SPRING = {\n    type: 'spring',\n    stiffness: 0.75,\n    damping: 0.45,\n    mass: 10,\n};\n\nconst ITEM_SCALE_SPRING = 'spring';\n\nconst StateMap = {\n    DID_START_ITEM_LOAD: 'busy',\n    DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n    DID_THROW_ITEM_INVALID: 'load-invalid',\n    DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n    DID_LOAD_ITEM: 'idle',\n    DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n    DID_START_ITEM_REMOVE: 'busy',\n    DID_START_ITEM_PROCESSING: 'busy processing',\n    DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n    DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n    DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n    DID_ABORT_ITEM_PROCESSING: 'cancelled',\n    DID_REVERT_ITEM_PROCESSING: 'idle',\n};\n\n/**\n * Creates the file view\n */\nconst create$7 = ({ root, props }) => {\n    // select\n    root.ref.handleClick = e => root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n\n    // set id\n    root.element.id = `filepond--item-${props.id}`;\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // file view\n    root.ref.container = root.appendChildView(root.createChildView(fileWrapper, { id: props.id }));\n\n    // file panel\n    root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n    // default start height\n    root.ref.panel.height = null;\n\n    // by default not marked for removal\n    props.markedForRemoval = false;\n\n    // if not allowed to reorder file items, exit here\n    if (!root.query('GET_ALLOW_REORDER')) return;\n\n    // set to idle so shows grab cursor\n    root.element.dataset.dragState = 'idle';\n\n    const grab = e => {\n        if (!e.isPrimary) return;\n\n        let removedActivateListener = false;\n\n        const origin = {\n            x: e.pageX,\n            y: e.pageY,\n        };\n\n        props.dragOrigin = {\n            x: root.translateX,\n            y: root.translateY,\n        };\n\n        props.dragCenter = {\n            x: e.offsetX,\n            y: e.offsetY,\n        };\n\n        const dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n        root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState });\n\n        const drag = e => {\n            if (!e.isPrimary) return;\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            props.dragOffset = {\n                x: e.pageX - origin.x,\n                y: e.pageY - origin.y,\n            };\n\n            // if dragged stop listening to clicks, will re-add when done dragging\n            const dist =\n                props.dragOffset.x * props.dragOffset.x + props.dragOffset.y * props.dragOffset.y;\n            if (dist > 16 && !removedActivateListener) {\n                removedActivateListener = true;\n                root.element.removeEventListener('click', root.ref.handleClick);\n            }\n\n            root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState });\n        };\n\n        const drop = e => {\n            if (!e.isPrimary) return;\n\n            props.dragOffset = {\n                x: e.pageX - origin.x,\n                y: e.pageY - origin.y,\n            };\n\n            reset();\n        };\n\n        const cancel = () => {\n            reset();\n        };\n\n        const reset = () => {\n            document.removeEventListener('pointercancel', cancel);\n            document.removeEventListener('pointermove', drag);\n            document.removeEventListener('pointerup', drop);\n\n            root.dispatch('DID_DROP_ITEM', { id: props.id, dragState });\n\n            // start listening to clicks again\n            if (removedActivateListener) {\n                setTimeout(() => root.element.addEventListener('click', root.ref.handleClick), 0);\n            }\n        };\n\n        document.addEventListener('pointercancel', cancel);\n        document.addEventListener('pointermove', drag);\n        document.addEventListener('pointerup', drop);\n    };\n\n    root.element.addEventListener('pointerdown', grab);\n};\n\nconst route$1 = createRoute({\n    DID_UPDATE_PANEL_HEIGHT: ({ root, action }) => {\n        root.height = action.height;\n    },\n});\n\nconst write$4 = createRoute(\n    {\n        DID_GRAB_ITEM: ({ root, props }) => {\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n        },\n        DID_DRAG_ITEM: ({ root }) => {\n            root.element.dataset.dragState = 'drag';\n        },\n        DID_DROP_ITEM: ({ root, props }) => {\n            props.dragOffset = null;\n            props.dragOrigin = null;\n            root.element.dataset.dragState = 'drop';\n        },\n    },\n    ({ root, actions, props, shouldOptimize }) => {\n        if (root.element.dataset.dragState === 'drop') {\n            if (root.scaleX <= 1) {\n                root.element.dataset.dragState = 'idle';\n            }\n        }\n\n        // select last state change action\n        let action = actions\n            .concat()\n            .filter(action => /^DID_/.test(action.type))\n            .reverse()\n            .find(action => StateMap[action.type]);\n\n        // no need to set same state twice\n        if (action && action.type !== props.currentState) {\n            // set current state\n            props.currentState = action.type;\n\n            // set state\n            root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n        }\n\n        // route actions\n        const aspectRatio =\n            root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n        if (!aspectRatio) {\n            route$1({ root, actions, props });\n            if (!root.height && root.ref.container.rect.element.height > 0) {\n                root.height = root.ref.container.rect.element.height;\n            }\n        } else if (!shouldOptimize) {\n            root.height = root.rect.element.width * aspectRatio;\n        }\n\n        // sync panel height with item height\n        if (shouldOptimize) {\n            root.ref.panel.height = null;\n        }\n\n        root.ref.panel.height = root.height;\n    }\n);\n\nconst item = createView({\n    create: create$7,\n    write: write$4,\n    destroy: ({ root, props }) => {\n        root.element.removeEventListener('click', root.ref.handleClick);\n        root.dispatch('RELEASE_ITEM', { query: props.id });\n    },\n    tag: 'li',\n    name: 'item',\n    mixins: {\n        apis: [\n            'id',\n            'interactionMethod',\n            'markedForRemoval',\n            'spawnDate',\n            'dragCenter',\n            'dragOrigin',\n            'dragOffset',\n        ],\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n        animations: {\n            scaleX: ITEM_SCALE_SPRING,\n            scaleY: ITEM_SCALE_SPRING,\n            translateX: ITEM_TRANSLATE_SPRING,\n            translateY: ITEM_TRANSLATE_SPRING,\n            opacity: { type: 'tween', duration: 150 },\n        },\n    },\n});\n\nvar getItemsPerRow = (horizontalSpace, itemWidth) => {\n    // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n    return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n};\n\nconst getItemIndexByPosition = (view, children, positionInView) => {\n    if (!positionInView) return;\n\n    const horizontalSpace = view.rect.element.width;\n    // const children = view.childViews;\n    const l = children.length;\n    let last = null;\n\n    // -1, don't move items to accomodate (either add to top or bottom)\n    if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n    // let's get the item width\n    const item = children[0];\n    const itemRect = item.rect.element;\n    const itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n    const itemWidth = itemRect.width + itemHorizontalMargin;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        for (let index = 0; index < l; index++) {\n            const child = children[index];\n            const childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n            if (positionInView.top < childMid) {\n                return index;\n            }\n        }\n        return l;\n    }\n\n    // grid\n    const itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n    const itemHeight = itemRect.height + itemVerticalMargin;\n    for (let index = 0; index < l; index++) {\n        const indexX = index % itemsPerRow;\n        const indexY = Math.floor(index / itemsPerRow);\n\n        const offsetX = indexX * itemWidth;\n        const offsetY = indexY * itemHeight;\n\n        const itemTop = offsetY - itemRect.marginTop;\n        const itemRight = offsetX + itemWidth;\n        const itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n        if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n            if (positionInView.left < itemRight) {\n                return index;\n            } else if (index !== l - 1) {\n                last = index;\n            } else {\n                last = null;\n            }\n        }\n    }\n\n    if (last !== null) {\n        return last;\n    }\n\n    return l;\n};\n\nconst dropAreaDimensions = {\n    height: 0,\n    width: 0,\n    get getHeight() {\n        return this.height;\n    },\n    set setHeight(val) {\n        if (this.height === 0 || val === 0) this.height = val;\n    },\n    get getWidth() {\n        return this.width;\n    },\n    set setWidth(val) {\n        if (this.width === 0 || val === 0) this.width = val;\n    },\n    setDimensions: function(height, width) {\n        if (this.height === 0 || height === 0) this.height = height;\n        if (this.width === 0 || width === 0) this.width = width;\n    },\n};\n\nconst create$8 = ({ root }) => {\n    // need to set role to list as otherwise it won't be read as a list by VoiceOver\n    attr(root.element, 'role', 'list');\n\n    root.ref.lastItemSpanwDate = Date.now();\n};\n\n/**\n * Inserts a new item\n * @param root\n * @param action\n */\nconst addItemView = ({ root, action }) => {\n    const { id, index, interactionMethod } = action;\n\n    root.ref.addIndex = index;\n\n    const now = Date.now();\n    let spawnDate = now;\n    let opacity = 1;\n\n    if (interactionMethod !== InteractionMethod.NONE) {\n        opacity = 0;\n        const cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n        const dist = now - root.ref.lastItemSpanwDate;\n        spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n    }\n\n    root.ref.lastItemSpanwDate = spawnDate;\n\n    root.appendChildView(\n        root.createChildView(\n            // view type\n            item,\n\n            // props\n            {\n                spawnDate,\n                id,\n                opacity,\n                interactionMethod,\n            }\n        ),\n        index\n    );\n};\n\nconst moveItem = (item, x, y, vx = 0, vy = 1) => {\n    // set to null to remove animation while dragging\n    if (item.dragOffset) {\n        item.translateX = null;\n        item.translateY = null;\n        item.translateX = item.dragOrigin.x + item.dragOffset.x;\n        item.translateY = item.dragOrigin.y + item.dragOffset.y;\n        item.scaleX = 1.025;\n        item.scaleY = 1.025;\n    } else {\n        item.translateX = x;\n        item.translateY = y;\n\n        if (Date.now() > item.spawnDate) {\n            // reveal element\n            if (item.opacity === 0) {\n                introItemView(item, x, y, vx, vy);\n            }\n\n            // make sure is default scale every frame\n            item.scaleX = 1;\n            item.scaleY = 1;\n            item.opacity = 1;\n        }\n    }\n};\n\nconst introItemView = (item, x, y, vx, vy) => {\n    if (item.interactionMethod === InteractionMethod.NONE) {\n        item.translateX = null;\n        item.translateX = x;\n        item.translateY = null;\n        item.translateY = y;\n    } else if (item.interactionMethod === InteractionMethod.DROP) {\n        item.translateX = null;\n        item.translateX = x - vx * 20;\n\n        item.translateY = null;\n        item.translateY = y - vy * 10;\n\n        item.scaleX = 0.8;\n        item.scaleY = 0.8;\n    } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n        item.translateY = null;\n        item.translateY = y - 30;\n    } else if (item.interactionMethod === InteractionMethod.API) {\n        item.translateX = null;\n        item.translateX = x - 30;\n        item.translateY = null;\n    }\n};\n\n/**\n * Removes an existing item\n * @param root\n * @param action\n */\nconst removeItemView = ({ root, action }) => {\n    const { id } = action;\n\n    // get the view matching the given id\n    const view = root.childViews.find(child => child.id === id);\n\n    // if no view found, exit\n    if (!view) {\n        return;\n    }\n\n    // animate view out of view\n    view.scaleX = 0.9;\n    view.scaleY = 0.9;\n    view.opacity = 0;\n\n    // mark for removal\n    view.markedForRemoval = true;\n};\n\nconst getItemHeight = child =>\n    child.rect.element.height +\n    child.rect.element.marginBottom * 0.5 +\n    child.rect.element.marginTop * 0.5;\nconst getItemWidth = child =>\n    child.rect.element.width +\n    child.rect.element.marginLeft * 0.5 +\n    child.rect.element.marginRight * 0.5;\n\nconst dragItem = ({ root, action }) => {\n    const { id, dragState } = action;\n\n    // reference to item\n    const item = root.query('GET_ITEM', { id });\n\n    // get the view matching the given id\n    const view = root.childViews.find(child => child.id === id);\n\n    const numItems = root.childViews.length;\n    const oldIndex = dragState.getItemIndex(item);\n\n    // if no view found, exit\n    if (!view) return;\n\n    const dragPosition = {\n        x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n        y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n    };\n\n    // get drag area dimensions\n    const dragHeight = getItemHeight(view);\n    const dragWidth = getItemWidth(view);\n\n    // get rows and columns (There will always be at least one row and one column if a file is present)\n    let cols = Math.floor(root.rect.outer.width / dragWidth);\n    if (cols > numItems) cols = numItems;\n\n    // rows are used to find when we have left the preview area bounding box\n    const rows = Math.floor(numItems / cols + 1);\n\n    dropAreaDimensions.setHeight = dragHeight * rows;\n    dropAreaDimensions.setWidth = dragWidth * cols;\n\n    // get new index of dragged item\n    var location = {\n        y: Math.floor(dragPosition.y / dragHeight),\n        x: Math.floor(dragPosition.x / dragWidth),\n        getGridIndex: function getGridIndex() {\n            if (\n                dragPosition.y > dropAreaDimensions.getHeight ||\n                dragPosition.y < 0 ||\n                dragPosition.x > dropAreaDimensions.getWidth ||\n                dragPosition.x < 0\n            )\n                return oldIndex;\n            return this.y * cols + this.x;\n        },\n        getColIndex: function getColIndex() {\n            const items = root.query('GET_ACTIVE_ITEMS');\n            const visibleChildren = root.childViews.filter(child => child.rect.element.height);\n            const children = items.map(item =>\n                visibleChildren.find(childView => childView.id === item.id)\n            );\n            const currentIndex = children.findIndex(child => child === view);\n            const dragHeight = getItemHeight(view);\n            const l = children.length;\n            let idx = l;\n            let childHeight = 0;\n            let childBottom = 0;\n            let childTop = 0;\n            for (let i = 0; i < l; i++) {\n                childHeight = getItemHeight(children[i]);\n                childTop = childBottom;\n                childBottom = childTop + childHeight;\n                if (dragPosition.y < childBottom) {\n                    if (currentIndex > i) {\n                        if (dragPosition.y < childTop + dragHeight) {\n                            idx = i;\n                            break;\n                        }\n                        continue;\n                    }\n                    idx = i;\n                    break;\n                }\n            }\n            return idx;\n        },\n    };\n\n    // get new index\n    const index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n    root.dispatch('MOVE_ITEM', { query: view, index });\n\n    // if the index of the item changed, dispatch reorder action\n    const currentIndex = dragState.getIndex();\n\n    if (currentIndex === undefined || currentIndex !== index) {\n        dragState.setIndex(index);\n\n        if (currentIndex === undefined) return;\n\n        root.dispatch('DID_REORDER_ITEMS', {\n            items: root.query('GET_ACTIVE_ITEMS'),\n            origin: oldIndex,\n            target: index,\n        });\n    }\n};\n\n/**\n * Setup action routes\n */\nconst route$2 = createRoute({\n    DID_ADD_ITEM: addItemView,\n    DID_REMOVE_ITEM: removeItemView,\n    DID_DRAG_ITEM: dragItem,\n});\n\n/**\n * Write to view\n * @param root\n * @param actions\n * @param props\n */\nconst write$5 = ({ root, props, actions, shouldOptimize }) => {\n    // route actions\n    route$2({ root, props, actions });\n\n    const { dragCoordinates } = props;\n\n    // available space on horizontal axis\n    const horizontalSpace = root.rect.element.width;\n\n    // only draw children that have dimensions\n    const visibleChildren = root.childViews.filter(child => child.rect.element.height);\n\n    // sort based on current active items\n    const children = root\n        .query('GET_ACTIVE_ITEMS')\n        .map(item => visibleChildren.find(child => child.id === item.id))\n        .filter(item => item);\n\n    // get index\n    const dragIndex = dragCoordinates\n        ? getItemIndexByPosition(root, children, dragCoordinates)\n        : null;\n\n    // add index is used to reserve the dropped/added item index till the actual item is rendered\n    const addIndex = root.ref.addIndex || null;\n\n    // add index no longer needed till possibly next draw\n    root.ref.addIndex = null;\n\n    let dragIndexOffset = 0;\n    let removeIndexOffset = 0;\n    let addIndexOffset = 0;\n\n    if (children.length === 0) return;\n\n    const childRect = children[0].rect.element;\n    const itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    const itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n    const itemWidth = childRect.width + itemHorizontalMargin;\n    const itemHeight = childRect.height + itemVerticalMargin;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        let offsetY = 0;\n        let dragOffset = 0;\n\n        children.forEach((child, index) => {\n            if (dragIndex) {\n                let dist = index - dragIndex;\n                if (dist === -2) {\n                    dragOffset = -itemVerticalMargin * 0.25;\n                } else if (dist === -1) {\n                    dragOffset = -itemVerticalMargin * 0.75;\n                } else if (dist === 0) {\n                    dragOffset = itemVerticalMargin * 0.75;\n                } else if (dist === 1) {\n                    dragOffset = itemVerticalMargin * 0.25;\n                } else {\n                    dragOffset = 0;\n                }\n            }\n\n            if (shouldOptimize) {\n                child.translateX = null;\n                child.translateY = null;\n            }\n\n            if (!child.markedForRemoval) {\n                moveItem(child, 0, offsetY + dragOffset);\n            }\n\n            let itemHeight = child.rect.element.height + itemVerticalMargin;\n\n            let visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n            offsetY += visualHeight;\n        });\n    }\n    // grid\n    else {\n        let prevX = 0;\n        let prevY = 0;\n\n        children.forEach((child, index) => {\n            if (index === dragIndex) {\n                dragIndexOffset = 1;\n            }\n\n            if (index === addIndex) {\n                addIndexOffset += 1;\n            }\n\n            if (child.markedForRemoval && child.opacity < 0.5) {\n                removeIndexOffset -= 1;\n            }\n\n            const visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n            const indexX = visualIndex % itemsPerRow;\n            const indexY = Math.floor(visualIndex / itemsPerRow);\n\n            const offsetX = indexX * itemWidth;\n            const offsetY = indexY * itemHeight;\n\n            const vectorX = Math.sign(offsetX - prevX);\n            const vectorY = Math.sign(offsetY - prevY);\n\n            prevX = offsetX;\n            prevY = offsetY;\n\n            if (child.markedForRemoval) return;\n\n            if (shouldOptimize) {\n                child.translateX = null;\n                child.translateY = null;\n            }\n\n            moveItem(child, offsetX, offsetY, vectorX, vectorY);\n        });\n    }\n};\n\n/**\n * Filters actions that are meant specifically for a certain child of the list\n * @param child\n * @param actions\n */\nconst filterSetItemActions = (child, actions) =>\n    actions.filter(action => {\n        // if action has an id, filter out actions that don't have this child id\n        if (action.data && action.data.id) {\n            return child.id === action.data.id;\n        }\n\n        // allow all other actions\n        return true;\n    });\n\nconst list = createView({\n    create: create$8,\n    write: write$5,\n    tag: 'ul',\n    name: 'list',\n    didWriteView: ({ root }) => {\n        root.childViews\n            .filter(view => view.markedForRemoval && view.opacity === 0 && view.resting)\n            .forEach(view => {\n                view._destroy();\n                root.removeChildView(view);\n            });\n    },\n    filterFrameActionsForChild: filterSetItemActions,\n    mixins: {\n        apis: ['dragCoordinates'],\n    },\n});\n\nconst create$9 = ({ root, props }) => {\n    root.ref.list = root.appendChildView(root.createChildView(list));\n    props.dragCoordinates = null;\n    props.overflowing = false;\n};\n\nconst storeDragCoordinates = ({ root, props, action }) => {\n    if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n    props.dragCoordinates = {\n        left: action.position.scopeLeft - root.ref.list.rect.element.left,\n        top:\n            action.position.scopeTop -\n            (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n    };\n};\n\nconst clearDragCoordinates = ({ props }) => {\n    props.dragCoordinates = null;\n};\n\nconst route$3 = createRoute({\n    DID_DRAG: storeDragCoordinates,\n    DID_END_DRAG: clearDragCoordinates,\n});\n\nconst write$6 = ({ root, props, actions }) => {\n    // route actions\n    route$3({ root, props, actions });\n\n    // current drag position\n    root.ref.list.dragCoordinates = props.dragCoordinates;\n\n    // if currently overflowing but no longer received overflow\n    if (props.overflowing && !props.overflow) {\n        props.overflowing = false;\n\n        // reset overflow state\n        root.element.dataset.state = '';\n        root.height = null;\n    }\n\n    // if is not overflowing currently but does receive overflow value\n    if (props.overflow) {\n        const newHeight = Math.round(props.overflow);\n        if (newHeight !== root.height) {\n            props.overflowing = true;\n            root.element.dataset.state = 'overflow';\n            root.height = newHeight;\n        }\n    }\n};\n\nconst listScroller = createView({\n    create: create$9,\n    write: write$6,\n    name: 'list-scroller',\n    mixins: {\n        apis: ['overflow', 'dragCoordinates'],\n        styles: ['height', 'translateY'],\n        animations: {\n            translateY: 'spring',\n        },\n    },\n});\n\nconst attrToggle = (element, name, state, enabledValue = '') => {\n    if (state) {\n        attr(element, name, enabledValue);\n    } else {\n        element.removeAttribute(name);\n    }\n};\n\nconst resetFileInput = input => {\n    // no value, no need to reset\n    if (!input || input.value === '') {\n        return;\n    }\n\n    try {\n        // for modern browsers\n        input.value = '';\n    } catch (err) {}\n\n    // for IE10\n    if (input.value) {\n        // quickly append input to temp form and reset form\n        const form = createElement$1('form');\n        const parentNode = input.parentNode;\n        const ref = input.nextSibling;\n        form.appendChild(input);\n        form.reset();\n\n        // re-inject input where it originally was\n        if (ref) {\n            parentNode.insertBefore(input, ref);\n        } else {\n            parentNode.appendChild(input);\n        }\n    }\n};\n\nconst create$a = ({ root, props }) => {\n    // set id so can be referenced from outside labels\n    root.element.id = `filepond--browser-${props.id}`;\n\n    // set name of element (is removed when a value is set)\n    attr(root.element, 'name', root.query('GET_NAME'));\n\n    // we have to link this element to the status element\n    attr(root.element, 'aria-controls', `filepond--assistant-${props.id}`);\n\n    // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n    attr(root.element, 'aria-labelledby', `filepond--drop-label-${props.id}`);\n\n    // set configurable props\n    setAcceptedFileTypes({ root, action: { value: root.query('GET_ACCEPTED_FILE_TYPES') } });\n    toggleAllowMultiple({ root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n    toggleDirectoryFilter({ root, action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') } });\n    toggleDisabled({ root });\n    toggleRequired({ root, action: { value: root.query('GET_REQUIRED') } });\n    setCaptureMethod({ root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n    // handle changes to the input field\n    root.ref.handleChange = e => {\n        if (!root.element.value) {\n            return;\n        }\n\n        // extract files and move value of webkitRelativePath path to _relativePath\n        const files = Array.from(root.element.files).map(file => {\n            file._relativePath = file.webkitRelativePath;\n            return file;\n        });\n\n        // we add a little delay so the OS file select window can move out of the way before we add our file\n        setTimeout(() => {\n            // load files\n            props.onload(files);\n\n            // reset input, it's just for exposing a method to drop files, should not retain any state\n            resetFileInput(root.element);\n        }, 250);\n    };\n\n    root.element.addEventListener('change', root.ref.handleChange);\n};\n\nconst setAcceptedFileTypes = ({ root, action }) => {\n    if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n    attrToggle(root.element, 'accept', !!action.value, action.value ? action.value.join(',') : '');\n};\n\nconst toggleAllowMultiple = ({ root, action }) => {\n    attrToggle(root.element, 'multiple', action.value);\n};\n\nconst toggleDirectoryFilter = ({ root, action }) => {\n    attrToggle(root.element, 'webkitdirectory', action.value);\n};\n\nconst toggleDisabled = ({ root }) => {\n    const isDisabled = root.query('GET_DISABLED');\n    const doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n    const disableField = isDisabled || !doesAllowBrowse;\n    attrToggle(root.element, 'disabled', disableField);\n};\n\nconst toggleRequired = ({ root, action }) => {\n    // want to remove required, always possible\n    if (!action.value) {\n        attrToggle(root.element, 'required', false);\n    }\n    // if want to make required, only possible when zero items\n    else if (root.query('GET_TOTAL_ITEMS') === 0) {\n        attrToggle(root.element, 'required', true);\n    }\n};\n\nconst setCaptureMethod = ({ root, action }) => {\n    attrToggle(root.element, 'capture', !!action.value, action.value === true ? '' : action.value);\n};\n\nconst updateRequiredStatus = ({ root }) => {\n    const { element } = root;\n    // always remove the required attribute when more than zero items\n    if (root.query('GET_TOTAL_ITEMS') > 0) {\n        attrToggle(element, 'required', false);\n        attrToggle(element, 'name', false);\n    } else {\n        // add name attribute\n        attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n        // remove any validation messages\n        const shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (shouldCheckValidity) {\n            element.setCustomValidity('');\n        }\n\n        // we only add required if the field has been deemed required\n        if (root.query('GET_REQUIRED')) {\n            attrToggle(element, 'required', true);\n        }\n    }\n};\n\nconst updateFieldValidityStatus = ({ root }) => {\n    const shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n    if (!shouldCheckValidity) return;\n    root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n};\n\nconst browser = createView({\n    tag: 'input',\n    name: 'browser',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    attributes: {\n        type: 'file',\n    },\n    create: create$a,\n    destroy: ({ root }) => {\n        root.element.removeEventListener('change', root.ref.handleChange);\n    },\n    write: createRoute({\n        DID_LOAD_ITEM: updateRequiredStatus,\n        DID_REMOVE_ITEM: updateRequiredStatus,\n        DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n        DID_SET_DISABLED: toggleDisabled,\n        DID_SET_ALLOW_BROWSE: toggleDisabled,\n        DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n        DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n        DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n        DID_SET_CAPTURE_METHOD: setCaptureMethod,\n        DID_SET_REQUIRED: toggleRequired,\n    }),\n});\n\nconst Key = {\n    ENTER: 13,\n    SPACE: 32,\n};\n\nconst create$b = ({ root, props }) => {\n    // create the label and link it to the file browser\n    const label = createElement$1('label');\n    attr(label, 'for', `filepond--browser-${props.id}`);\n\n    // use for labeling file input (aria-labelledby on file input)\n    attr(label, 'id', `filepond--drop-label-${props.id}`);\n\n    // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n    attr(label, 'aria-hidden', 'true');\n\n    // handle keys\n    root.ref.handleKeyDown = e => {\n        const isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n        if (!isActivationKey) return;\n        // stops from triggering the element a second time\n        e.preventDefault();\n\n        // click link (will then in turn activate file input)\n        root.ref.label.click();\n    };\n\n    root.ref.handleClick = e => {\n        const isLabelClick = e.target === label || label.contains(e.target);\n\n        // don't want to click twice\n        if (isLabelClick) return;\n\n        // click link (will then in turn activate file input)\n        root.ref.label.click();\n    };\n\n    // attach events\n    label.addEventListener('keydown', root.ref.handleKeyDown);\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // update\n    updateLabelValue(label, props.caption);\n\n    // add!\n    root.appendChild(label);\n    root.ref.label = label;\n};\n\nconst updateLabelValue = (label, value) => {\n    label.innerHTML = value;\n    const clickable = label.querySelector('.filepond--label-action');\n    if (clickable) {\n        attr(clickable, 'tabindex', '0');\n    }\n    return value;\n};\n\nconst dropLabel = createView({\n    name: 'drop-label',\n    ignoreRect: true,\n    create: create$b,\n    destroy: ({ root }) => {\n        root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.removeEventListener('click', root.ref.handleClick);\n    },\n    write: createRoute({\n        DID_SET_LABEL_IDLE: ({ root, action }) => {\n            updateLabelValue(root.ref.label, action.value);\n        },\n    }),\n    mixins: {\n        styles: ['opacity', 'translateX', 'translateY'],\n        animations: {\n            opacity: { type: 'tween', duration: 150 },\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\nconst blob = createView({\n    name: 'drip-blob',\n    ignoreRect: true,\n    mixins: {\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            translateX: 'spring',\n            translateY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n    },\n});\n\nconst addBlob = ({ root }) => {\n    const centerX = root.rect.element.width * 0.5;\n    const centerY = root.rect.element.height * 0.5;\n\n    root.ref.blob = root.appendChildView(\n        root.createChildView(blob, {\n            opacity: 0,\n            scaleX: 2.5,\n            scaleY: 2.5,\n            translateX: centerX,\n            translateY: centerY,\n        })\n    );\n};\n\nconst moveBlob = ({ root, action }) => {\n    if (!root.ref.blob) {\n        addBlob({ root });\n        return;\n    }\n\n    root.ref.blob.translateX = action.position.scopeLeft;\n    root.ref.blob.translateY = action.position.scopeTop;\n    root.ref.blob.scaleX = 1;\n    root.ref.blob.scaleY = 1;\n    root.ref.blob.opacity = 1;\n};\n\nconst hideBlob = ({ root }) => {\n    if (!root.ref.blob) {\n        return;\n    }\n    root.ref.blob.opacity = 0;\n};\n\nconst explodeBlob = ({ root }) => {\n    if (!root.ref.blob) {\n        return;\n    }\n    root.ref.blob.scaleX = 2.5;\n    root.ref.blob.scaleY = 2.5;\n    root.ref.blob.opacity = 0;\n};\n\nconst write$7 = ({ root, props, actions }) => {\n    route$4({ root, props, actions });\n\n    const { blob } = root.ref;\n\n    if (actions.length === 0 && blob && blob.opacity === 0) {\n        root.removeChildView(blob);\n        root.ref.blob = null;\n    }\n};\n\nconst route$4 = createRoute({\n    DID_DRAG: moveBlob,\n    DID_DROP: explodeBlob,\n    DID_END_DRAG: hideBlob,\n});\n\nconst drip = createView({\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'drip',\n    write: write$7,\n});\n\nconst setInputFiles = (element, files) => {\n    try {\n        // Create a DataTransfer instance and add a newly created file\n        const dataTransfer = new DataTransfer();\n        files.forEach(file => {\n            if (file instanceof File) {\n                dataTransfer.items.add(file);\n            } else {\n                dataTransfer.items.add(\n                    new File([file], file.name, {\n                        type: file.type,\n                    })\n                );\n            }\n        });\n\n        // Assign the DataTransfer files list to the file input\n        element.files = dataTransfer.files;\n    } catch (err) {\n        return false;\n    }\n    return true;\n};\n\nconst create$c = ({ root }) => (root.ref.fields = {});\n\nconst getField = (root, id) => root.ref.fields[id];\n\nconst syncFieldPositionsWithItems = root => {\n    root.query('GET_ACTIVE_ITEMS').forEach(item => {\n        if (!root.ref.fields[item.id]) return;\n        root.element.appendChild(root.ref.fields[item.id]);\n    });\n};\n\nconst didReorderItems = ({ root }) => syncFieldPositionsWithItems(root);\n\nconst didAddItem = ({ root, action }) => {\n    const fileItem = root.query('GET_ITEM', action.id);\n    const isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n    const shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n    const dataContainer = createElement$1('input');\n    dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n    dataContainer.name = root.query('GET_NAME');\n    dataContainer.disabled = root.query('GET_DISABLED');\n    root.ref.fields[action.id] = dataContainer;\n    syncFieldPositionsWithItems(root);\n};\n\nconst didLoadItem$1 = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n\n    // store server ref in hidden input\n    if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n    // store file item in file input\n    if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n    const fileItem = root.query('GET_ITEM', action.id);\n    setInputFiles(field, [fileItem.file]);\n};\n\nconst didPrepareOutput = ({ root, action }) => {\n    // this timeout pushes the handler after 'load'\n    if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n    setTimeout(() => {\n        const field = getField(root, action.id);\n        if (!field) return;\n        setInputFiles(field, [action.file]);\n    }, 0);\n};\n\nconst didSetDisabled = ({ root }) => {\n    root.element.disabled = root.query('GET_DISABLED');\n};\n\nconst didRemoveItem = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n    if (field.parentNode) field.parentNode.removeChild(field);\n    delete root.ref.fields[action.id];\n};\n\n// only runs for server files. will refuse to update the value if the field\n// is a file field\nconst didDefineValue = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n    if (action.value === null) {\n        // clear field value\n        field.removeAttribute('value');\n    } else {\n        // set field value\n        if (field.type != 'file') {\n            field.value = action.value;\n        }\n    }\n    syncFieldPositionsWithItems(root);\n};\n\nconst write$8 = createRoute({\n    DID_SET_DISABLED: didSetDisabled,\n    DID_ADD_ITEM: didAddItem,\n    DID_LOAD_ITEM: didLoadItem$1,\n    DID_REMOVE_ITEM: didRemoveItem,\n    DID_DEFINE_VALUE: didDefineValue,\n    DID_PREPARE_OUTPUT: didPrepareOutput,\n    DID_REORDER_ITEMS: didReorderItems,\n    DID_SORT_ITEMS: didReorderItems,\n});\n\nconst data = createView({\n    tag: 'fieldset',\n    name: 'data',\n    create: create$c,\n    write: write$8,\n    ignoreRect: true,\n});\n\nconst getRootNode = element => ('getRootNode' in element ? element.getRootNode() : document);\n\nconst images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\nconst text$1 = ['css', 'csv', 'html', 'txt'];\nconst map = {\n    zip: 'zip|compressed',\n    epub: 'application/epub+zip',\n};\n\nconst guesstimateMimeType = (extension = '') => {\n    extension = extension.toLowerCase();\n    if (images.includes(extension)) {\n        return (\n            'image/' + (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n        );\n    }\n    if (text$1.includes(extension)) {\n        return 'text/' + extension;\n    }\n\n    return map[extension] || '';\n};\n\nconst requestDataTransferItems = dataTransfer =>\n    new Promise((resolve, reject) => {\n        // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n        const links = getLinks(dataTransfer);\n        if (links.length && !hasFiles(dataTransfer)) {\n            return resolve(links);\n        }\n        // try to get files from the transfer\n        getFiles(dataTransfer).then(resolve);\n    });\n\n/**\n * Test if datatransfer has files\n */\nconst hasFiles = dataTransfer => {\n    if (dataTransfer.files) return dataTransfer.files.length > 0;\n    return false;\n};\n\n/**\n * Extracts files from a DataTransfer object\n */\nconst getFiles = dataTransfer =>\n    new Promise((resolve, reject) => {\n        // get the transfer items as promises\n        const promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n\n            // only keep file system items (files and directories)\n            .filter(item => isFileSystemItem(item))\n\n            // map each item to promise\n            .map(item => getFilesFromItem(item));\n\n        // if is empty, see if we can extract some info from the files property as a fallback\n        if (!promisedFiles.length) {\n            // TODO: test for directories (should not be allowed)\n            // Use FileReader, problem is that the files property gets lost in the process\n            resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n            return;\n        }\n\n        // done!\n        Promise.all(promisedFiles)\n            .then(returnedFileGroups => {\n                // flatten groups\n                const files = [];\n                returnedFileGroups.forEach(group => {\n                    files.push.apply(files, group);\n                });\n\n                // done (filter out empty files)!\n                resolve(\n                    files\n                        .filter(file => file)\n                        .map(file => {\n                            if (!file._relativePath) file._relativePath = file.webkitRelativePath;\n                            return file;\n                        })\n                );\n            })\n            .catch(console.error);\n    });\n\nconst isFileSystemItem = item => {\n    if (isEntry(item)) {\n        const entry = getAsEntry(item);\n        if (entry) {\n            return entry.isFile || entry.isDirectory;\n        }\n    }\n    return item.kind === 'file';\n};\n\nconst getFilesFromItem = item =>\n    new Promise((resolve, reject) => {\n        if (isDirectoryEntry(item)) {\n            getFilesInDirectory(getAsEntry(item))\n                .then(resolve)\n                .catch(reject);\n            return;\n        }\n\n        resolve([item.getAsFile()]);\n    });\n\nconst getFilesInDirectory = entry =>\n    new Promise((resolve, reject) => {\n        const files = [];\n\n        // the total entries to read\n        let dirCounter = 0;\n        let fileCounter = 0;\n\n        const resolveIfDone = () => {\n            if (fileCounter === 0 && dirCounter === 0) {\n                resolve(files);\n            }\n        };\n\n        // the recursive function\n        const readEntries = dirEntry => {\n            dirCounter++;\n\n            const directoryReader = dirEntry.createReader();\n\n            // directories are returned in batches, we need to process all batches before we're done\n            const readBatch = () => {\n                directoryReader.readEntries(entries => {\n                    if (entries.length === 0) {\n                        dirCounter--;\n                        resolveIfDone();\n                        return;\n                    }\n\n                    entries.forEach(entry => {\n                        // recursively read more directories\n                        if (entry.isDirectory) {\n                            readEntries(entry);\n                        } else {\n                            // read as file\n                            fileCounter++;\n\n                            entry.file(file => {\n                                const correctedFile = correctMissingFileType(file);\n                                if (entry.fullPath) correctedFile._relativePath = entry.fullPath;\n                                files.push(correctedFile);\n                                fileCounter--;\n                                resolveIfDone();\n                            });\n                        }\n                    });\n\n                    // try to get next batch of files\n                    readBatch();\n                }, reject);\n            };\n\n            // read first batch of files\n            readBatch();\n        };\n\n        // go!\n        readEntries(entry);\n    });\n\nconst correctMissingFileType = file => {\n    if (file.type.length) return file;\n    const date = file.lastModifiedDate;\n    const name = file.name;\n    const type = guesstimateMimeType(getExtensionFromFilename(file.name));\n    if (!type.length) return file;\n    file = file.slice(0, file.size, type);\n    file.name = name;\n    file.lastModifiedDate = date;\n    return file;\n};\n\nconst isDirectoryEntry = item => isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n\nconst isEntry = item => 'webkitGetAsEntry' in item;\n\nconst getAsEntry = item => item.webkitGetAsEntry();\n\n/**\n * Extracts links from a DataTransfer object\n */\nconst getLinks = dataTransfer => {\n    let links = [];\n    try {\n        // look in meta data property\n        links = getLinksFromTransferMetaData(dataTransfer);\n        if (links.length) {\n            return links;\n        }\n        links = getLinksFromTransferURLData(dataTransfer);\n    } catch (e) {\n        // nope nope nope (probably IE trouble)\n    }\n    return links;\n};\n\nconst getLinksFromTransferURLData = dataTransfer => {\n    let data = dataTransfer.getData('url');\n    if (typeof data === 'string' && data.length) {\n        return [data];\n    }\n    return [];\n};\n\nconst getLinksFromTransferMetaData = dataTransfer => {\n    let data = dataTransfer.getData('text/html');\n    if (typeof data === 'string' && data.length) {\n        const matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n        if (matches) {\n            return [matches[1]];\n        }\n    }\n    return [];\n};\n\nconst dragNDropObservers = [];\n\nconst eventPosition = e => ({\n    pageLeft: e.pageX,\n    pageTop: e.pageY,\n    scopeLeft: e.offsetX || e.layerX,\n    scopeTop: e.offsetY || e.layerY,\n});\n\nconst createDragNDropClient = (element, scopeToObserve, filterElement) => {\n    const observer = getDragNDropObserver(scopeToObserve);\n\n    const client = {\n        element,\n        filterElement,\n        state: null,\n        ondrop: () => {},\n        onenter: () => {},\n        ondrag: () => {},\n        onexit: () => {},\n        onload: () => {},\n        allowdrop: () => {},\n    };\n\n    client.destroy = observer.addListener(client);\n\n    return client;\n};\n\nconst getDragNDropObserver = element => {\n    // see if already exists, if so, return\n    const observer = dragNDropObservers.find(item => item.element === element);\n    if (observer) {\n        return observer;\n    }\n\n    // create new observer, does not yet exist for this element\n    const newObserver = createDragNDropObserver(element);\n    dragNDropObservers.push(newObserver);\n    return newObserver;\n};\n\nconst createDragNDropObserver = element => {\n    const clients = [];\n\n    const routes = {\n        dragenter,\n        dragover,\n        dragleave,\n        drop,\n    };\n\n    const handlers = {};\n\n    forin(routes, (event, createHandler) => {\n        handlers[event] = createHandler(element, clients);\n        element.addEventListener(event, handlers[event], false);\n    });\n\n    const observer = {\n        element,\n        addListener: client => {\n            // add as client\n            clients.push(client);\n\n            // return removeListener function\n            return () => {\n                // remove client\n                clients.splice(clients.indexOf(client), 1);\n\n                // if no more clients, clean up observer\n                if (clients.length === 0) {\n                    dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                    forin(routes, event => {\n                        element.removeEventListener(event, handlers[event], false);\n                    });\n                }\n            };\n        },\n    };\n\n    return observer;\n};\n\nconst elementFromPoint = (root, point) => {\n    if (!('elementFromPoint' in root)) {\n        root = document;\n    }\n    return root.elementFromPoint(point.x, point.y);\n};\n\nconst isEventTarget = (e, target) => {\n    // get root\n    const root = getRootNode(target);\n\n    // get element at position\n    // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n    const elementAtPosition = elementFromPoint(root, {\n        x: e.pageX - window.pageXOffset,\n        y: e.pageY - window.pageYOffset,\n    });\n\n    // test if target is the element or if one of its children is\n    return elementAtPosition === target || target.contains(elementAtPosition);\n};\n\nlet initialTarget = null;\n\nconst setDropEffect = (dataTransfer, effect) => {\n    // is in try catch as IE11 will throw error if not\n    try {\n        dataTransfer.dropEffect = effect;\n    } catch (e) {}\n};\n\nconst dragenter = (root, clients) => e => {\n    e.preventDefault();\n\n    initialTarget = e.target;\n\n    clients.forEach(client => {\n        const { element, onenter } = client;\n\n        if (isEventTarget(e, element)) {\n            client.state = 'enter';\n\n            // fire enter event\n            onenter(eventPosition(e));\n        }\n    });\n};\n\nconst dragover = (root, clients) => e => {\n    e.preventDefault();\n\n    const dataTransfer = e.dataTransfer;\n\n    requestDataTransferItems(dataTransfer).then(items => {\n        let overDropTarget = false;\n\n        clients.some(client => {\n            const { filterElement, element, onenter, onexit, ondrag, allowdrop } = client;\n\n            // by default we can drop\n            setDropEffect(dataTransfer, 'copy');\n\n            // allow transfer of these items\n            const allowsTransfer = allowdrop(items);\n\n            // only used when can be dropped on page\n            if (!allowsTransfer) {\n                setDropEffect(dataTransfer, 'none');\n                return;\n            }\n\n            // targetting this client\n            if (isEventTarget(e, element)) {\n                overDropTarget = true;\n\n                // had no previous state, means we are entering this client\n                if (client.state === null) {\n                    client.state = 'enter';\n                    onenter(eventPosition(e));\n                    return;\n                }\n\n                // now over element (no matter if it allows the drop or not)\n                client.state = 'over';\n\n                // needs to allow transfer\n                if (filterElement && !allowsTransfer) {\n                    setDropEffect(dataTransfer, 'none');\n                    return;\n                }\n\n                // dragging\n                ondrag(eventPosition(e));\n            } else {\n                // should be over an element to drop\n                if (filterElement && !overDropTarget) {\n                    setDropEffect(dataTransfer, 'none');\n                }\n\n                // might have just left this client?\n                if (client.state) {\n                    client.state = null;\n                    onexit(eventPosition(e));\n                }\n            }\n        });\n    });\n};\n\nconst drop = (root, clients) => e => {\n    e.preventDefault();\n\n    const dataTransfer = e.dataTransfer;\n\n    requestDataTransferItems(dataTransfer).then(items => {\n        clients.forEach(client => {\n            const { filterElement, element, ondrop, onexit, allowdrop } = client;\n\n            client.state = null;\n\n            // if we're filtering on element we need to be over the element to drop\n            if (filterElement && !isEventTarget(e, element)) return;\n\n            // no transfer for this client\n            if (!allowdrop(items)) return onexit(eventPosition(e));\n\n            // we can drop these items on this client\n            ondrop(eventPosition(e), items);\n        });\n    });\n};\n\nconst dragleave = (root, clients) => e => {\n    if (initialTarget !== e.target) {\n        return;\n    }\n\n    clients.forEach(client => {\n        const { onexit } = client;\n\n        client.state = null;\n\n        onexit(eventPosition(e));\n    });\n};\n\nconst createHopper = (scope, validateItems, options) => {\n    // is now hopper scope\n    scope.classList.add('filepond--hopper');\n\n    // shortcuts\n    const { catchesDropsOnPage, requiresDropOnElement, filterItems = items => items } = options;\n\n    // create a dnd client\n    const client = createDragNDropClient(\n        scope,\n        catchesDropsOnPage ? document.documentElement : scope,\n        requiresDropOnElement\n    );\n\n    // current client state\n    let lastState = '';\n    let currentState = '';\n\n    // determines if a file may be dropped\n    client.allowdrop = items => {\n        // TODO: if we can, throw error to indicate the items cannot by dropped\n\n        return validateItems(filterItems(items));\n    };\n\n    client.ondrop = (position, items) => {\n        const filteredItems = filterItems(items);\n\n        if (!validateItems(filteredItems)) {\n            api.ondragend(position);\n            return;\n        }\n\n        currentState = 'drag-drop';\n\n        api.onload(filteredItems, position);\n    };\n\n    client.ondrag = position => {\n        api.ondrag(position);\n    };\n\n    client.onenter = position => {\n        currentState = 'drag-over';\n\n        api.ondragstart(position);\n    };\n\n    client.onexit = position => {\n        currentState = 'drag-exit';\n\n        api.ondragend(position);\n    };\n\n    const api = {\n        updateHopperState: () => {\n            if (lastState !== currentState) {\n                scope.dataset.hopperState = currentState;\n                lastState = currentState;\n            }\n        },\n        onload: () => {},\n        ondragstart: () => {},\n        ondrag: () => {},\n        ondragend: () => {},\n        destroy: () => {\n            // destroy client\n            client.destroy();\n        },\n    };\n\n    return api;\n};\n\nlet listening = false;\nconst listeners$1 = [];\n\nconst handlePaste = e => {\n    // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n    const activeEl = document.activeElement;\n    if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n        // test textarea or input is contained in filepond root\n        let inScope = false;\n        let element = activeEl;\n        while (element !== document.body) {\n            if (element.classList.contains('filepond--root')) {\n                inScope = true;\n                break;\n            }\n            element = element.parentNode;\n        }\n\n        if (!inScope) return;\n    }\n\n    requestDataTransferItems(e.clipboardData).then(files => {\n        // no files received\n        if (!files.length) {\n            return;\n        }\n\n        // notify listeners of received files\n        listeners$1.forEach(listener => listener(files));\n    });\n};\n\nconst listen = cb => {\n    // can't add twice\n    if (listeners$1.includes(cb)) {\n        return;\n    }\n\n    // add initial listener\n    listeners$1.push(cb);\n\n    // setup paste listener for entire page\n    if (listening) {\n        return;\n    }\n\n    listening = true;\n    document.addEventListener('paste', handlePaste);\n};\n\nconst unlisten = listener => {\n    arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n    // clean up\n    if (listeners$1.length === 0) {\n        document.removeEventListener('paste', handlePaste);\n        listening = false;\n    }\n};\n\nconst createPaster = () => {\n    const cb = files => {\n        api.onload(files);\n    };\n\n    const api = {\n        destroy: () => {\n            unlisten(cb);\n        },\n        onload: () => {},\n    };\n\n    listen(cb);\n\n    return api;\n};\n\n/**\n * Creates the file view\n */\nconst create$d = ({ root, props }) => {\n    root.element.id = `filepond--assistant-${props.id}`;\n    attr(root.element, 'role', 'status');\n    attr(root.element, 'aria-live', 'polite');\n    attr(root.element, 'aria-relevant', 'additions');\n};\n\nlet addFilesNotificationTimeout = null;\nlet notificationClearTimeout = null;\n\nconst filenames = [];\n\nconst assist = (root, message) => {\n    root.element.textContent = message;\n};\n\nconst clear$1 = root => {\n    root.element.textContent = '';\n};\n\nconst listModified = (root, filename, label) => {\n    const total = root.query('GET_TOTAL_ITEMS');\n    assist(\n        root,\n        `${label} ${filename}, ${total} ${\n            total === 1\n                ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                : root.query('GET_LABEL_FILE_COUNT_PLURAL')\n        }`\n    );\n\n    // clear group after set amount of time so the status is not read twice\n    clearTimeout(notificationClearTimeout);\n    notificationClearTimeout = setTimeout(() => {\n        clear$1(root);\n    }, 1500);\n};\n\nconst isUsingFilePond = root => root.element.parentNode.contains(document.activeElement);\n\nconst itemAdded = ({ root, action }) => {\n    if (!isUsingFilePond(root)) {\n        return;\n    }\n\n    root.element.textContent = '';\n    const item = root.query('GET_ITEM', action.id);\n    filenames.push(item.filename);\n\n    clearTimeout(addFilesNotificationTimeout);\n    addFilesNotificationTimeout = setTimeout(() => {\n        listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n        filenames.length = 0;\n    }, 750);\n};\n\nconst itemRemoved = ({ root, action }) => {\n    if (!isUsingFilePond(root)) {\n        return;\n    }\n\n    const item = action.item;\n    listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n};\n\nconst itemProcessed = ({ root, action }) => {\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n    const label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n    assist(root, `${filename} ${label}`);\n};\n\nconst itemProcessedUndo = ({ root, action }) => {\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n    const label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n    assist(root, `${filename} ${label}`);\n};\n\nconst itemError = ({ root, action }) => {\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    assist(root, `${action.status.main} ${filename} ${action.status.sub}`);\n};\n\nconst assistant = createView({\n    create: create$d,\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: itemAdded,\n        DID_REMOVE_ITEM: itemRemoved,\n        DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n        DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n        DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n        DID_THROW_ITEM_REMOVE_ERROR: itemError,\n        DID_THROW_ITEM_LOAD_ERROR: itemError,\n        DID_THROW_ITEM_INVALID: itemError,\n        DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n    }),\n    tag: 'span',\n    name: 'assistant',\n});\n\nconst toCamels = (string, separator = '-') =>\n    string.replace(new RegExp(`${separator}.`, 'g'), sub => sub.charAt(1).toUpperCase());\n\nconst debounce = (func, interval = 16, immidiateOnly = true) => {\n    let last = Date.now();\n    let timeout = null;\n\n    return (...args) => {\n        clearTimeout(timeout);\n\n        const dist = Date.now() - last;\n\n        const fn = () => {\n            last = Date.now();\n            func(...args);\n        };\n\n        if (dist < interval) {\n            // we need to delay by the difference between interval and dist\n            // for example: if distance is 10 ms and interval is 16 ms,\n            // we need to wait an additional 6ms before calling the function)\n            if (!immidiateOnly) {\n                timeout = setTimeout(fn, interval - dist);\n            }\n        } else {\n            // go!\n            fn();\n        }\n    };\n};\n\nconst MAX_FILES_LIMIT = 1000000;\n\nconst prevent = e => e.preventDefault();\n\nconst create$e = ({ root, props }) => {\n    // Add id\n    const id = root.query('GET_ID');\n    if (id) {\n        root.element.id = id;\n    }\n\n    // Add className\n    const className = root.query('GET_CLASS_NAME');\n    if (className) {\n        className\n            .split(' ')\n            .filter(name => name.length)\n            .forEach(name => {\n                root.element.classList.add(name);\n            });\n    }\n\n    // Field label\n    root.ref.label = root.appendChildView(\n        root.createChildView(dropLabel, {\n            ...props,\n            translateY: null,\n            caption: root.query('GET_LABEL_IDLE'),\n        })\n    );\n\n    // List of items\n    root.ref.list = root.appendChildView(root.createChildView(listScroller, { translateY: null }));\n\n    // Background panel\n    root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n    // Assistant notifies assistive tech when content changes\n    root.ref.assistant = root.appendChildView(root.createChildView(assistant, { ...props }));\n\n    // Data\n    root.ref.data = root.appendChildView(root.createChildView(data, { ...props }));\n\n    // Measure (tests if fixed height was set)\n    // DOCTYPE needs to be set for this to work\n    root.ref.measure = createElement$1('div');\n    root.ref.measure.style.height = '100%';\n    root.element.appendChild(root.ref.measure);\n\n    // information on the root height or fixed height status\n    root.ref.bounds = null;\n\n    // apply initial style properties\n    root.query('GET_STYLES')\n        .filter(style => !isEmpty(style.value))\n        .map(({ name, value }) => {\n            root.element.dataset[name] = value;\n        });\n\n    // determine if width changed\n    root.ref.widthPrevious = null;\n    root.ref.widthUpdated = debounce(() => {\n        root.ref.updateHistory = [];\n        root.dispatch('DID_RESIZE_ROOT');\n    }, 250);\n\n    // history of updates\n    root.ref.previousAspectRatio = null;\n    root.ref.updateHistory = [];\n\n    // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n    const canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n    const hasPointerEvents = 'PointerEvent' in window;\n    if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n        root.element.addEventListener('touchmove', prevent, { passive: false });\n        root.element.addEventListener('gesturestart', prevent);\n    }\n\n    // add credits\n    const credits = root.query('GET_CREDITS');\n    const hasCredits = credits.length === 2;\n    if (hasCredits) {\n        const frag = document.createElement('a');\n        frag.className = 'filepond--credits';\n        frag.setAttribute('aria-hidden', 'true');\n        frag.href = credits[0];\n        frag.tabindex = -1;\n        frag.target = '_blank';\n        frag.rel = 'noopener noreferrer';\n        frag.textContent = credits[1];\n        root.element.appendChild(frag);\n        root.ref.credits = frag;\n    }\n};\n\nconst write$9 = ({ root, props, actions }) => {\n    // route actions\n    route$5({ root, props, actions });\n\n    // apply style properties\n    actions\n        .filter(action => /^DID_SET_STYLE_/.test(action.type))\n        .filter(action => !isEmpty(action.data.value))\n        .map(({ type, data }) => {\n            const name = toCamels(type.substring(8).toLowerCase(), '_');\n            root.element.dataset[name] = data.value;\n            root.invalidateLayout();\n        });\n\n    if (root.rect.element.hidden) return;\n\n    if (root.rect.element.width !== root.ref.widthPrevious) {\n        root.ref.widthPrevious = root.rect.element.width;\n        root.ref.widthUpdated();\n    }\n\n    // get box bounds, we do this only once\n    let bounds = root.ref.bounds;\n    if (!bounds) {\n        bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n        // destroy measure element\n        root.element.removeChild(root.ref.measure);\n        root.ref.measure = null;\n    }\n\n    // get quick references to various high level parts of the upload tool\n    const { hopper, label, list, panel } = root.ref;\n\n    // sets correct state to hopper scope\n    if (hopper) {\n        hopper.updateHopperState();\n    }\n\n    // bool to indicate if we're full or not\n    const aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n    const isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n    const totalItems = root.query('GET_TOTAL_ITEMS');\n    const maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n    const atMaxCapacity = totalItems === maxItems;\n\n    // action used to add item\n    const addAction = actions.find(action => action.type === 'DID_ADD_ITEM');\n\n    // if reached max capacity and we've just reached it\n    if (atMaxCapacity && addAction) {\n        // get interaction type\n        const interactionMethod = addAction.data.interactionMethod;\n\n        // hide label\n        label.opacity = 0;\n\n        if (isMultiItem) {\n            label.translateY = -40;\n        } else {\n            if (interactionMethod === InteractionMethod.API) {\n                label.translateX = 40;\n            } else if (interactionMethod === InteractionMethod.BROWSE) {\n                label.translateY = 40;\n            } else {\n                label.translateY = 30;\n            }\n        }\n    } else if (!atMaxCapacity) {\n        label.opacity = 1;\n        label.translateX = 0;\n        label.translateY = 0;\n    }\n\n    const listItemMargin = calculateListItemMargin(root);\n\n    const listHeight = calculateListHeight(root);\n\n    const labelHeight = label.rect.element.height;\n    const currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n    const listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n    const listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n    const visualHeight = currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n    const boundsHeight = currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n    // link list to label bottom position\n    list.translateY =\n        Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n    if (aspectRatio) {\n        // fixed aspect ratio\n\n        // calculate height based on width\n        const width = root.rect.element.width;\n        const height = width * aspectRatio;\n\n        // clear history if aspect ratio has changed\n        if (aspectRatio !== root.ref.previousAspectRatio) {\n            root.ref.previousAspectRatio = aspectRatio;\n            root.ref.updateHistory = [];\n        }\n\n        // remember this width\n        const history = root.ref.updateHistory;\n        history.push(width);\n\n        const MAX_BOUNCES = 2;\n        if (history.length > MAX_BOUNCES * 2) {\n            const l = history.length;\n            const bottom = l - 10;\n            let bounces = 0;\n            for (let i = l; i >= bottom; i--) {\n                if (history[i] === history[i - 2]) {\n                    bounces++;\n                }\n\n                if (bounces >= MAX_BOUNCES) {\n                    // dont adjust height\n                    return;\n                }\n            }\n        }\n\n        // fix height of panel so it adheres to aspect ratio\n        panel.scalable = false;\n        panel.height = height;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            height -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        if (listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = height;\n    } else if (bounds.fixedHeight) {\n        // fixed height\n\n        // fix height of panel\n        panel.scalable = false;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            bounds.fixedHeight -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        // set list height\n        if (listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // no need to set container bounds as these are handles by CSS fixed height\n    } else if (bounds.cappedHeight) {\n        // max-height\n\n        // not a fixed height panel\n        const isCappedHeight = visualHeight >= bounds.cappedHeight;\n        const panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n        panel.scalable = true;\n        panel.height = isCappedHeight\n            ? panelHeight\n            : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            panelHeight -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        // set list height (if is overflowing)\n        if (visualHeight > bounds.cappedHeight && listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = Math.min(\n            bounds.cappedHeight,\n            boundsHeight - listItemMargin.top - listItemMargin.bottom\n        );\n    } else {\n        // flexible height\n\n        // not a fixed height panel\n        const itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n        panel.scalable = true;\n        panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n    }\n\n    // move credits to bottom\n    if (root.ref.credits && panel.heightCurrent)\n        root.ref.credits.style.transform = `translateY(${panel.heightCurrent}px)`;\n};\n\nconst calculateListItemMargin = root => {\n    const item = root.ref.list.childViews[0].childViews[0];\n    return item\n        ? {\n              top: item.rect.element.marginTop,\n              bottom: item.rect.element.marginBottom,\n          }\n        : {\n              top: 0,\n              bottom: 0,\n          };\n};\n\nconst calculateListHeight = root => {\n    let visual = 0;\n    let bounds = 0;\n\n    // get file list reference\n    const scrollList = root.ref.list;\n    const itemList = scrollList.childViews[0];\n    const visibleChildren = itemList.childViews.filter(child => child.rect.element.height);\n    const children = root\n        .query('GET_ACTIVE_ITEMS')\n        .map(item => visibleChildren.find(child => child.id === item.id))\n        .filter(item => item);\n\n    // no children, done!\n    if (children.length === 0) return { visual, bounds };\n\n    const horizontalSpace = itemList.rect.element.width;\n    const dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n    const childRect = children[0].rect.element;\n\n    const itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    const itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n    const itemWidth = childRect.width + itemHorizontalMargin;\n    const itemHeight = childRect.height + itemVerticalMargin;\n\n    const newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n    const removedItem = children.find(child => child.markedForRemoval && child.opacity < 0.45)\n        ? -1\n        : 0;\n    const verticalItemCount = children.length + newItem + removedItem;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        children.forEach(item => {\n            const height = item.rect.element.height + itemVerticalMargin;\n            bounds += height;\n            visual += height * item.opacity;\n        });\n    }\n    // grid\n    else {\n        bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n        visual = bounds;\n    }\n\n    return { visual, bounds };\n};\n\nconst calculateRootBoundingBoxHeight = root => {\n    const height = root.ref.measureHeight || null;\n    const cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n    const fixedHeight = height === 0 ? null : height;\n\n    return {\n        cappedHeight,\n        fixedHeight,\n    };\n};\n\nconst exceedsMaxFiles = (root, items) => {\n    const allowReplace = root.query('GET_ALLOW_REPLACE');\n    const allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n    const totalItems = root.query('GET_TOTAL_ITEMS');\n    let maxItems = root.query('GET_MAX_FILES');\n\n    // total amount of items being dragged\n    const totalBrowseItems = items.length;\n\n    // if does not allow multiple items and dragging more than one item\n    if (!allowMultiple && totalBrowseItems > 1) {\n        root.dispatch('DID_THROW_MAX_FILES', {\n            source: items,\n            error: createResponse('warning', 0, 'Max files'),\n        });\n        return true;\n    }\n\n    // limit max items to one if not allowed to drop multiple items\n    maxItems = allowMultiple ? maxItems : 1;\n\n    if (!allowMultiple && allowReplace) {\n        // There is only one item, so there is room to replace or add an item\n        return false;\n    }\n\n    // no more room?\n    const hasMaxItems = isInt(maxItems);\n    if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n        root.dispatch('DID_THROW_MAX_FILES', {\n            source: items,\n            error: createResponse('warning', 0, 'Max files'),\n        });\n        return true;\n    }\n\n    return false;\n};\n\nconst getDragIndex = (list, children, position) => {\n    const itemList = list.childViews[0];\n    return getItemIndexByPosition(itemList, children, {\n        left: position.scopeLeft - itemList.rect.element.left,\n        top:\n            position.scopeTop -\n            (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n    });\n};\n\n/**\n * Enable or disable file drop functionality\n */\nconst toggleDrop = root => {\n    const isAllowed = root.query('GET_ALLOW_DROP');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.hopper) {\n        const hopper = createHopper(\n            root.element,\n            items => {\n                // allow quick validation of dropped items\n                const beforeDropFile = root.query('GET_BEFORE_DROP_FILE') || (() => true);\n\n                // all items should be validated by all filters as valid\n                const dropValidation = root.query('GET_DROP_VALIDATION');\n                return dropValidation\n                    ? items.every(\n                          item =>\n                              applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                  query: root.query,\n                              }).every(result => result === true) && beforeDropFile(item)\n                      )\n                    : true;\n            },\n            {\n                filterItems: items => {\n                    const ignoredFiles = root.query('GET_IGNORED_FILES');\n                    return items.filter(item => {\n                        if (isFile(item)) {\n                            return !ignoredFiles.includes(item.name.toLowerCase());\n                        }\n                        return true;\n                    });\n                },\n                catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n            }\n        );\n\n        hopper.onload = (items, position) => {\n            // get item children elements and sort based on list sort\n            const list = root.ref.list.childViews[0];\n            const visibleChildren = list.childViews.filter(child => child.rect.element.height);\n            const children = root\n                .query('GET_ACTIVE_ITEMS')\n                .map(item => visibleChildren.find(child => child.id === item.id))\n                .filter(item => item);\n\n            applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(queue => {\n                // these files don't fit so stop here\n                if (exceedsMaxFiles(root, queue)) return false;\n\n                // go\n                root.dispatch('ADD_ITEMS', {\n                    items: queue,\n                    index: getDragIndex(root.ref.list, children, position),\n                    interactionMethod: InteractionMethod.DROP,\n                });\n            });\n\n            root.dispatch('DID_DROP', { position });\n\n            root.dispatch('DID_END_DRAG', { position });\n        };\n\n        hopper.ondragstart = position => {\n            root.dispatch('DID_START_DRAG', { position });\n        };\n\n        hopper.ondrag = debounce(position => {\n            root.dispatch('DID_DRAG', { position });\n        });\n\n        hopper.ondragend = position => {\n            root.dispatch('DID_END_DRAG', { position });\n        };\n\n        root.ref.hopper = hopper;\n\n        root.ref.drip = root.appendChildView(root.createChildView(drip));\n    } else if (!enabled && root.ref.hopper) {\n        root.ref.hopper.destroy();\n        root.ref.hopper = null;\n        root.removeChildView(root.ref.drip);\n    }\n};\n\n/**\n * Enable or disable browse functionality\n */\nconst toggleBrowse = (root, props) => {\n    const isAllowed = root.query('GET_ALLOW_BROWSE');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.browser) {\n        root.ref.browser = root.appendChildView(\n            root.createChildView(browser, {\n                ...props,\n                onload: items => {\n                    applyFilterChain('ADD_ITEMS', items, {\n                        dispatch: root.dispatch,\n                    }).then(queue => {\n                        // these files don't fit so stop here\n                        if (exceedsMaxFiles(root, queue)) return false;\n\n                        // add items!\n                        root.dispatch('ADD_ITEMS', {\n                            items: queue,\n                            index: -1,\n                            interactionMethod: InteractionMethod.BROWSE,\n                        });\n                    });\n                },\n            }),\n            0\n        );\n    } else if (!enabled && root.ref.browser) {\n        root.removeChildView(root.ref.browser);\n        root.ref.browser = null;\n    }\n};\n\n/**\n * Enable or disable paste functionality\n */\nconst togglePaste = root => {\n    const isAllowed = root.query('GET_ALLOW_PASTE');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.paster) {\n        root.ref.paster = createPaster();\n        root.ref.paster.onload = items => {\n            applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(queue => {\n                // these files don't fit so stop here\n                if (exceedsMaxFiles(root, queue)) return false;\n\n                // add items!\n                root.dispatch('ADD_ITEMS', {\n                    items: queue,\n                    index: -1,\n                    interactionMethod: InteractionMethod.PASTE,\n                });\n            });\n        };\n    } else if (!enabled && root.ref.paster) {\n        root.ref.paster.destroy();\n        root.ref.paster = null;\n    }\n};\n\n/**\n * Route actions\n */\nconst route$5 = createRoute({\n    DID_SET_ALLOW_BROWSE: ({ root, props }) => {\n        toggleBrowse(root, props);\n    },\n    DID_SET_ALLOW_DROP: ({ root }) => {\n        toggleDrop(root);\n    },\n    DID_SET_ALLOW_PASTE: ({ root }) => {\n        togglePaste(root);\n    },\n    DID_SET_DISABLED: ({ root, props }) => {\n        toggleDrop(root);\n        togglePaste(root);\n        toggleBrowse(root, props);\n        const isDisabled = root.query('GET_DISABLED');\n        if (isDisabled) {\n            root.element.dataset.disabled = 'disabled';\n        } else {\n            // delete root.element.dataset.disabled; <= this does not work on iOS 10\n            root.element.removeAttribute('data-disabled');\n        }\n    },\n});\n\nconst root = createView({\n    name: 'root',\n    read: ({ root }) => {\n        if (root.ref.measure) {\n            root.ref.measureHeight = root.ref.measure.offsetHeight;\n        }\n    },\n    create: create$e,\n    write: write$9,\n    destroy: ({ root }) => {\n        if (root.ref.paster) {\n            root.ref.paster.destroy();\n        }\n        if (root.ref.hopper) {\n            root.ref.hopper.destroy();\n        }\n        root.element.removeEventListener('touchmove', prevent);\n        root.element.removeEventListener('gesturestart', prevent);\n    },\n    mixins: {\n        styles: ['height'],\n    },\n});\n\n// creates the app\nconst createApp = (initialOptions = {}) => {\n    // let element\n    let originalElement = null;\n\n    // get default options\n    const defaultOptions = getOptions();\n\n    // create the data store, this will contain all our app info\n    const store = createStore(\n        // initial state (should be serializable)\n        createInitialState(defaultOptions),\n\n        // queries\n        [queries, createOptionQueries(defaultOptions)],\n\n        // action handlers\n        [actions, createOptionActions(defaultOptions)]\n    );\n\n    // set initial options\n    store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n    // kick thread if visibility changes\n    const visibilityHandler = () => {\n        if (document.hidden) return;\n        store.dispatch('KICK');\n    };\n    document.addEventListener('visibilitychange', visibilityHandler);\n\n    // re-render on window resize start and finish\n    let resizeDoneTimer = null;\n    let isResizing = false;\n    let isResizingHorizontally = false;\n    let initialWindowWidth = null;\n    let currentWindowWidth = null;\n    const resizeHandler = () => {\n        if (!isResizing) {\n            isResizing = true;\n        }\n        clearTimeout(resizeDoneTimer);\n        resizeDoneTimer = setTimeout(() => {\n            isResizing = false;\n            initialWindowWidth = null;\n            currentWindowWidth = null;\n            if (isResizingHorizontally) {\n                isResizingHorizontally = false;\n                store.dispatch('DID_STOP_RESIZE');\n            }\n        }, 500);\n    };\n    window.addEventListener('resize', resizeHandler);\n\n    // render initial view\n    const view = root(store, { id: getUniqueId() });\n\n    //\n    // PRIVATE API -------------------------------------------------------------------------------------\n    //\n    let isResting = false;\n    let isHidden = false;\n\n    const readWriteApi = {\n        // necessary for update loop\n\n        /**\n         * Reads from dom (never call manually)\n         * @private\n         */\n        _read: () => {\n            // test if we're resizing horizontally\n            // TODO: see if we can optimize this by measuring root rect\n            if (isResizing) {\n                currentWindowWidth = window.innerWidth;\n                if (!initialWindowWidth) {\n                    initialWindowWidth = currentWindowWidth;\n                }\n\n                if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                    store.dispatch('DID_START_RESIZE');\n                    isResizingHorizontally = true;\n                }\n            }\n\n            if (isHidden && isResting) {\n                // test if is no longer hidden\n                isResting = view.element.offsetParent === null;\n            }\n\n            // if resting, no need to read as numbers will still all be correct\n            if (isResting) return;\n\n            // read view data\n            view._read();\n\n            // if is hidden we need to know so we exit rest mode when revealed\n            isHidden = view.rect.element.hidden;\n        },\n\n        /**\n         * Writes to dom (never call manually)\n         * @private\n         */\n        _write: ts => {\n            // get all actions from store\n            const actions = store\n                .processActionQueue()\n\n                // filter out set actions (these will automatically trigger DID_SET)\n                .filter(action => !/^SET_/.test(action.type));\n\n            // if was idling and no actions stop here\n            if (isResting && !actions.length) return;\n\n            // some actions might trigger events\n            routeActionsToEvents(actions);\n\n            // update the view\n            isResting = view._write(ts, actions, isResizingHorizontally);\n\n            // will clean up all archived items\n            removeReleasedItems(store.query('GET_ITEMS'));\n\n            // now idling\n            if (isResting) {\n                store.processDispatchQueue();\n            }\n        },\n    };\n\n    //\n    // EXPOSE EVENTS -------------------------------------------------------------------------------------\n    //\n    const createEvent = name => data => {\n        // create default event\n        const event = {\n            type: name,\n        };\n\n        // no data to add\n        if (!data) {\n            return event;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('error')) {\n            event.error = data.error ? { ...data.error } : null;\n        }\n\n        if (data.status) {\n            event.status = { ...data.status };\n        }\n\n        if (data.file) {\n            event.output = data.file;\n        }\n\n        // only source is available, else add item if possible\n        if (data.source) {\n            event.file = data.source;\n        } else if (data.item || data.id) {\n            const item = data.item ? data.item : store.query('GET_ITEM', data.id);\n            event.file = item ? createItemAPI(item) : null;\n        }\n\n        // map all items in a possible items array\n        if (data.items) {\n            event.items = data.items.map(createItemAPI);\n        }\n\n        // if this is a progress event add the progress amount\n        if (/progress/.test(name)) {\n            event.progress = data.progress;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n            event.origin = data.origin;\n            event.target = data.target;\n        }\n\n        return event;\n    };\n\n    const eventRoutes = {\n        DID_DESTROY: createEvent('destroy'),\n\n        DID_INIT: createEvent('init'),\n\n        DID_THROW_MAX_FILES: createEvent('warning'),\n\n        DID_INIT_ITEM: createEvent('initfile'),\n        DID_START_ITEM_LOAD: createEvent('addfilestart'),\n        DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n        DID_LOAD_ITEM: createEvent('addfile'),\n\n        DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n        DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n        DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n        DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n        DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n        DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n        DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n        DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n        DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n        DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n        DID_REMOVE_ITEM: createEvent('removefile'),\n\n        DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n        DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n        DID_REORDER_ITEMS: createEvent('reorderfiles'),\n    };\n\n    const exposeEvent = event => {\n        // create event object to be dispatched\n        const detail = { pond: exports, ...event };\n        delete detail.type;\n        view.element.dispatchEvent(\n            new CustomEvent(`FilePond:${event.type}`, {\n                // event info\n                detail,\n\n                // event behaviour\n                bubbles: true,\n                cancelable: true,\n                composed: true, // triggers listeners outside of shadow root\n            })\n        );\n\n        // event object to params used for `on()` event handlers and callbacks `oninit()`\n        const params = [];\n\n        // if is possible error event, make it the first param\n        if (event.hasOwnProperty('error')) {\n            params.push(event.error);\n        }\n\n        // file is always section\n        if (event.hasOwnProperty('file')) {\n            params.push(event.file);\n        }\n\n        // append other props\n        const filtered = ['type', 'error', 'file'];\n        Object.keys(event)\n            .filter(key => !filtered.includes(key))\n            .forEach(key => params.push(event[key]));\n\n        // on(type, () => { })\n        exports.fire(event.type, ...params);\n\n        // oninit = () => {}\n        const handler = store.query(`GET_ON${event.type.toUpperCase()}`);\n        if (handler) {\n            handler(...params);\n        }\n    };\n\n    const routeActionsToEvents = actions => {\n        if (!actions.length) return;\n        actions\n            .filter(action => eventRoutes[action.type])\n            .forEach(action => {\n                const routes = eventRoutes[action.type];\n                (Array.isArray(routes) ? routes : [routes]).forEach(route => {\n                    // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                    if (action.type === 'DID_INIT_ITEM') {\n                        exposeEvent(route(action.data));\n                    } else {\n                        setTimeout(() => {\n                            exposeEvent(route(action.data));\n                        }, 0);\n                    }\n                });\n            });\n    };\n\n    //\n    // PUBLIC API -------------------------------------------------------------------------------------\n    //\n    const setOptions = options => store.dispatch('SET_OPTIONS', { options });\n\n    const getFile = query => store.query('GET_ACTIVE_ITEM', query);\n\n    const prepareFile = query =>\n        new Promise((resolve, reject) => {\n            store.dispatch('REQUEST_ITEM_PREPARE', {\n                query,\n                success: item => {\n                    resolve(item);\n                },\n                failure: error => {\n                    reject(error);\n                },\n            });\n        });\n\n    const addFile = (source, options = {}) =>\n        new Promise((resolve, reject) => {\n            addFiles([{ source, options }], { index: options.index })\n                .then(items => resolve(items && items[0]))\n                .catch(reject);\n        });\n\n    const isFilePondFile = obj => obj.file && obj.id;\n\n    const removeFile = (query, options) => {\n        // if only passed options\n        if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n            options = query;\n            query = undefined;\n        }\n\n        // request item removal\n        store.dispatch('REMOVE_ITEM', { ...options, query });\n\n        // see if item has been removed\n        return store.query('GET_ACTIVE_ITEM', query) === null;\n    };\n\n    const addFiles = (...args) =>\n        new Promise((resolve, reject) => {\n            const sources = [];\n            const options = {};\n\n            // user passed a sources array\n            if (isArray(args[0])) {\n                sources.push.apply(sources, args[0]);\n                Object.assign(options, args[1] || {});\n            } else {\n                // user passed sources as arguments, last one might be options object\n                const lastArgument = args[args.length - 1];\n                if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                    Object.assign(options, args.pop());\n                }\n\n                // add rest to sources\n                sources.push(...args);\n            }\n\n            store.dispatch('ADD_ITEMS', {\n                items: sources,\n                index: options.index,\n                interactionMethod: InteractionMethod.API,\n                success: resolve,\n                failure: reject,\n            });\n        });\n\n    const getFiles = () => store.query('GET_ACTIVE_ITEMS');\n\n    const processFile = query =>\n        new Promise((resolve, reject) => {\n            store.dispatch('REQUEST_ITEM_PROCESSING', {\n                query,\n                success: item => {\n                    resolve(item);\n                },\n                failure: error => {\n                    reject(error);\n                },\n            });\n        });\n\n    const prepareFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n        const items = queries.length ? queries : getFiles();\n        return Promise.all(items.map(prepareFile));\n    };\n\n    const processFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n        if (!queries.length) {\n            const files = getFiles().filter(\n                item =>\n                    !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                    item.status !== ItemStatus.PROCESSING &&\n                    item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                    item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n            );\n            return Promise.all(files.map(processFile));\n        }\n        return Promise.all(queries.map(processFile));\n    };\n\n    const removeFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n\n        let options;\n        if (typeof queries[queries.length - 1] === 'object') {\n            options = queries.pop();\n        } else if (Array.isArray(args[0])) {\n            options = args[1];\n        }\n\n        const files = getFiles();\n\n        if (!queries.length) return Promise.all(files.map(file => removeFile(file, options)));\n\n        // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n        const mappedQueries = queries\n            .map(query => (isNumber(query) ? (files[query] ? files[query].id : null) : query))\n            .filter(query => query);\n\n        return mappedQueries.map(q => removeFile(q, options));\n    };\n\n    const exports = {\n        // supports events\n        ...on(),\n\n        // inject private api methods\n        ...readWriteApi,\n\n        // inject all getters and setters\n        ...createOptionAPI(store, defaultOptions),\n\n        /**\n         * Override options defined in options object\n         * @param options\n         */\n        setOptions,\n\n        /**\n         * Load the given file\n         * @param source - the source of the file (either a File, base64 data uri or url)\n         * @param options - object, { index: 0 }\n         */\n        addFile,\n\n        /**\n         * Load the given files\n         * @param sources - the sources of the files to load\n         * @param options - object, { index: 0 }\n         */\n        addFiles,\n\n        /**\n         * Returns the file objects matching the given query\n         * @param query { string, number, null }\n         */\n        getFile,\n\n        /**\n         * Upload file with given name\n         * @param query { string, number, null  }\n         */\n        processFile,\n\n        /**\n         * Request prepare output for file with given name\n         * @param query { string, number, null  }\n         */\n        prepareFile,\n\n        /**\n         * Removes a file by its name\n         * @param query { string, number, null  }\n         */\n        removeFile,\n\n        /**\n         * Moves a file to a new location in the files list\n         */\n        moveFile: (query, index) => store.dispatch('MOVE_ITEM', { query, index }),\n\n        /**\n         * Returns all files (wrapped in public api)\n         */\n        getFiles,\n\n        /**\n         * Starts uploading all files\n         */\n        processFiles,\n\n        /**\n         * Clears all files from the files list\n         */\n        removeFiles,\n\n        /**\n         * Starts preparing output of all files\n         */\n        prepareFiles,\n\n        /**\n         * Sort list of files\n         */\n        sort: compare => store.dispatch('SORT', { compare }),\n\n        /**\n         * Browse the file system for a file\n         */\n        browse: () => {\n            // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n            var input = view.element.querySelector('input[type=file]');\n            if (input) {\n                input.click();\n            }\n        },\n\n        /**\n         * Destroys the app\n         */\n        destroy: () => {\n            // request destruction\n            exports.fire('destroy', view.element);\n\n            // stop active processes (file uploads, fetches, stuff like that)\n            // loop over items and depending on states call abort for ongoing processes\n            store.dispatch('ABORT_ALL');\n\n            // destroy view\n            view._destroy();\n\n            // stop listening to resize\n            window.removeEventListener('resize', resizeHandler);\n\n            // stop listening to the visiblitychange event\n            document.removeEventListener('visibilitychange', visibilityHandler);\n\n            // dispatch destroy\n            store.dispatch('DID_DESTROY');\n        },\n\n        /**\n         * Inserts the plugin before the target element\n         */\n        insertBefore: element => insertBefore(view.element, element),\n\n        /**\n         * Inserts the plugin after the target element\n         */\n        insertAfter: element => insertAfter(view.element, element),\n\n        /**\n         * Appends the plugin to the target element\n         */\n        appendTo: element => element.appendChild(view.element),\n\n        /**\n         * Replaces an element with the app\n         */\n        replaceElement: element => {\n            // insert the app before the element\n            insertBefore(view.element, element);\n\n            // remove the original element\n            element.parentNode.removeChild(element);\n\n            // remember original element\n            originalElement = element;\n        },\n\n        /**\n         * Restores the original element\n         */\n        restoreElement: () => {\n            if (!originalElement) {\n                return; // no element to restore\n            }\n\n            // restore original element\n            insertAfter(originalElement, view.element);\n\n            // remove our element\n            view.element.parentNode.removeChild(view.element);\n\n            // remove reference\n            originalElement = null;\n        },\n\n        /**\n         * Returns true if the app root is attached to given element\n         * @param element\n         */\n        isAttachedTo: element => view.element === element || originalElement === element,\n\n        /**\n         * Returns the root element\n         */\n        element: {\n            get: () => view.element,\n        },\n\n        /**\n         * Returns the current pond status\n         */\n        status: {\n            get: () => store.query('GET_STATUS'),\n        },\n    };\n\n    // Done!\n    store.dispatch('DID_INIT');\n\n    // create actual api object\n    return createObject(exports);\n};\n\nconst createAppObject = (customOptions = {}) => {\n    // default options\n    const defaultOptions = {};\n    forin(getOptions(), (key, value) => {\n        defaultOptions[key] = value[0];\n    });\n\n    // set app options\n    const app = createApp({\n        // default options\n        ...defaultOptions,\n\n        // custom options\n        ...customOptions,\n    });\n\n    // return the plugin instance\n    return app;\n};\n\nconst lowerCaseFirstLetter = string => string.charAt(0).toLowerCase() + string.slice(1);\n\nconst attributeNameToPropertyName = attributeName => toCamels(attributeName.replace(/^data-/, ''));\n\nconst mapObject = (object, propertyMap) => {\n    // remove unwanted\n    forin(propertyMap, (selector, mapping) => {\n        forin(object, (property, value) => {\n            // create regexp shortcut\n            const selectorRegExp = new RegExp(selector);\n\n            // tests if\n            const matches = selectorRegExp.test(property);\n\n            // no match, skip\n            if (!matches) {\n                return;\n            }\n\n            // if there's a mapping, the original property is always removed\n            delete object[property];\n\n            // should only remove, we done!\n            if (mapping === false) {\n                return;\n            }\n\n            // move value to new property\n            if (isString(mapping)) {\n                object[mapping] = value;\n                return;\n            }\n\n            // move to group\n            const group = mapping.group;\n            if (isObject(mapping) && !object[group]) {\n                object[group] = {};\n            }\n\n            object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n        });\n\n        // do submapping\n        if (mapping.mapping) {\n            mapObject(object[mapping.group], mapping.mapping);\n        }\n    });\n};\n\nconst getAttributesAsObject = (node, attributeMapping = {}) => {\n    // turn attributes into object\n    const attributes = [];\n    forin(node.attributes, index => {\n        attributes.push(node.attributes[index]);\n    });\n\n    const output = attributes\n        .filter(attribute => attribute.name)\n        .reduce((obj, attribute) => {\n            const value = attr(node, attribute.name);\n\n            obj[attributeNameToPropertyName(attribute.name)] =\n                value === attribute.name ? true : value;\n            return obj;\n        }, {});\n\n    // do mapping of object properties\n    mapObject(output, attributeMapping);\n\n    return output;\n};\n\nconst createAppAtElement = (element, options = {}) => {\n    // how attributes of the input element are mapped to the options for the plugin\n    const attributeMapping = {\n        // translate to other name\n        '^class$': 'className',\n        '^multiple$': 'allowMultiple',\n        '^capture$': 'captureMethod',\n        '^webkitdirectory$': 'allowDirectoriesOnly',\n\n        // group under single property\n        '^server': {\n            group: 'server',\n            mapping: {\n                '^process': {\n                    group: 'process',\n                },\n                '^revert': {\n                    group: 'revert',\n                },\n                '^fetch': {\n                    group: 'fetch',\n                },\n                '^restore': {\n                    group: 'restore',\n                },\n                '^load': {\n                    group: 'load',\n                },\n            },\n        },\n\n        // don't include in object\n        '^type$': false,\n        '^files$': false,\n    };\n\n    // add additional option translators\n    applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n    // create final options object by setting options object and then overriding options supplied on element\n    const mergedOptions = {\n        ...options,\n    };\n\n    const attributeOptions = getAttributesAsObject(\n        element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n        attributeMapping\n    );\n\n    // merge with options object\n    Object.keys(attributeOptions).forEach(key => {\n        if (isObject(attributeOptions[key])) {\n            if (!isObject(mergedOptions[key])) {\n                mergedOptions[key] = {};\n            }\n            Object.assign(mergedOptions[key], attributeOptions[key]);\n        } else {\n            mergedOptions[key] = attributeOptions[key];\n        }\n    });\n\n    // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n    // these will then be automatically set to the initial files\n    mergedOptions.files = (options.files || []).concat(\n        Array.from(element.querySelectorAll('input:not([type=file])')).map(input => ({\n            source: input.value,\n            options: {\n                type: input.dataset.type,\n            },\n        }))\n    );\n\n    // build plugin\n    const app = createAppObject(mergedOptions);\n\n    // add already selected files\n    if (element.files) {\n        Array.from(element.files).forEach(file => {\n            app.addFile(file);\n        });\n    }\n\n    // replace the target element\n    app.replaceElement(element);\n\n    // expose\n    return app;\n};\n\n// if an element is passed, we create the instance at that element, if not, we just create an up object\nconst createApp$1 = (...args) =>\n    isNode(args[0]) ? createAppAtElement(...args) : createAppObject(...args);\n\nconst PRIVATE_METHODS = ['fire', '_read', '_write'];\n\nconst createAppAPI = app => {\n    const api = {};\n\n    copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n    return api;\n};\n\n/**\n * Replaces placeholders in given string with replacements\n * @param string - \"Foo {bar}\"\"\n * @param replacements - { \"bar\": 10 }\n */\nconst replaceInString = (string, replacements) =>\n    string.replace(/(?:{([a-zA-Z]+)})/g, (match, group) => replacements[group]);\n\nconst createWorker = fn => {\n    const workerBlob = new Blob(['(', fn.toString(), ')()'], {\n        type: 'application/javascript',\n    });\n    const workerURL = URL.createObjectURL(workerBlob);\n    const worker = new Worker(workerURL);\n\n    return {\n        transfer: (message, cb) => {},\n        post: (message, cb, transferList) => {\n            const id = getUniqueId();\n\n            worker.onmessage = e => {\n                if (e.data.id === id) {\n                    cb(e.data.message);\n                }\n            };\n\n            worker.postMessage(\n                {\n                    id,\n                    message,\n                },\n                transferList\n            );\n        },\n        terminate: () => {\n            worker.terminate();\n            URL.revokeObjectURL(workerURL);\n        },\n    };\n};\n\nconst loadImage = url =>\n    new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = e => {\n            reject(e);\n        };\n        img.src = url;\n    });\n\nconst renameFile = (file, name) => {\n    const renamedFile = file.slice(0, file.size, file.type);\n    renamedFile.lastModifiedDate = file.lastModifiedDate;\n    renamedFile.name = name;\n    return renamedFile;\n};\n\nconst copyFile = file => renameFile(file, file.name);\n\n// already registered plugins (can't register twice)\nconst registeredPlugins = [];\n\n// pass utils to plugin\nconst createAppPlugin = plugin => {\n    // already registered\n    if (registeredPlugins.includes(plugin)) {\n        return;\n    }\n\n    // remember this plugin\n    registeredPlugins.push(plugin);\n\n    // setup!\n    const pluginOutline = plugin({\n        addFilter,\n        utils: {\n            Type,\n            forin,\n            isString,\n            isFile,\n            toNaturalFileSize,\n            replaceInString,\n            getExtensionFromFilename,\n            getFilenameWithoutExtension,\n            guesstimateMimeType,\n            getFileFromBlob,\n            getFilenameFromURL,\n            createRoute,\n            createWorker,\n            createView,\n            createItemAPI,\n            loadImage,\n            copyFile,\n            renameFile,\n            createBlob,\n            applyFilterChain,\n            text,\n            getNumericAspectRatioFromString,\n        },\n        views: {\n            fileActionButton,\n        },\n    });\n\n    // add plugin options to default options\n    extendDefaultOptions(pluginOutline.options);\n};\n\n// feature detection used by supported() method\nconst isOperaMini = () => Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\nconst hasPromises = () => 'Promise' in window;\nconst hasBlobSlice = () => 'slice' in Blob.prototype;\nconst hasCreateObjectURL = () => 'URL' in window && 'createObjectURL' in window.URL;\nconst hasVisibility = () => 'visibilityState' in document;\nconst hasTiming = () => 'performance' in window; // iOS 8.x\nconst hasCSSSupports = () => 'supports' in (window.CSS || {}); // use to detect Safari 9+\nconst isIE11 = () => /MSIE|Trident/.test(window.navigator.userAgent);\n\nconst supported = (() => {\n    // Runs immediately and then remembers result for subsequent calls\n    const isSupported =\n        // Has to be a browser\n        isBrowser() &&\n        // Can't run on Opera Mini due to lack of everything\n        !isOperaMini() &&\n        // Require these APIs to feature detect a modern browser\n        hasVisibility() &&\n        hasPromises() &&\n        hasBlobSlice() &&\n        hasCreateObjectURL() &&\n        hasTiming() &&\n        // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n        (hasCSSSupports() || isIE11());\n\n    return () => isSupported;\n})();\n\n/**\n * Plugin internal state (over all instances)\n */\nconst state = {\n    // active app instances, used to redraw the apps and to find the later\n    apps: [],\n};\n\n// plugin name\nconst name = 'filepond';\n\n/**\n * Public Plugin methods\n */\nconst fn = () => {};\nlet Status$1 = {};\nlet FileStatus = {};\nlet FileOrigin$1 = {};\nlet OptionTypes = {};\nlet create$f = fn;\nlet destroy = fn;\nlet parse = fn;\nlet find = fn;\nlet registerPlugin = fn;\nlet getOptions$1 = fn;\nlet setOptions$1 = fn;\n\n// if not supported, no API\nif (supported()) {\n    // start painter and fire load event\n    createPainter(\n        () => {\n            state.apps.forEach(app => app._read());\n        },\n        ts => {\n            state.apps.forEach(app => app._write(ts));\n        }\n    );\n\n    // fire loaded event so we know when FilePond is available\n    const dispatch = () => {\n        // let others know we have area ready\n        document.dispatchEvent(\n            new CustomEvent('FilePond:loaded', {\n                detail: {\n                    supported,\n                    create: create$f,\n                    destroy,\n                    parse,\n                    find,\n                    registerPlugin,\n                    setOptions: setOptions$1,\n                },\n            })\n        );\n\n        // clean up event\n        document.removeEventListener('DOMContentLoaded', dispatch);\n    };\n\n    if (document.readyState !== 'loading') {\n        // move to back of execution queue, FilePond should have been exported by then\n        setTimeout(() => dispatch(), 0);\n    } else {\n        document.addEventListener('DOMContentLoaded', dispatch);\n    }\n\n    // updates the OptionTypes object based on the current options\n    const updateOptionTypes = () =>\n        forin(getOptions(), (key, value) => {\n            OptionTypes[key] = value[1];\n        });\n\n    Status$1 = { ...Status };\n    FileOrigin$1 = { ...FileOrigin };\n    FileStatus = { ...ItemStatus };\n\n    OptionTypes = {};\n    updateOptionTypes();\n\n    // create method, creates apps and adds them to the app array\n    create$f = (...args) => {\n        const app = createApp$1(...args);\n        app.on('destroy', destroy);\n        state.apps.push(app);\n        return createAppAPI(app);\n    };\n\n    // destroys apps and removes them from the app array\n    destroy = hook => {\n        // returns true if the app was destroyed successfully\n        const indexToRemove = state.apps.findIndex(app => app.isAttachedTo(hook));\n        if (indexToRemove >= 0) {\n            // remove from apps\n            const app = state.apps.splice(indexToRemove, 1)[0];\n\n            // restore original dom element\n            app.restoreElement();\n\n            return true;\n        }\n\n        return false;\n    };\n\n    // parses the given context for plugins (does not include the context element itself)\n    parse = context => {\n        // get all possible hooks\n        const matchedHooks = Array.from(context.querySelectorAll(`.${name}`));\n\n        // filter out already active hooks\n        const newHooks = matchedHooks.filter(\n            newHook => !state.apps.find(app => app.isAttachedTo(newHook))\n        );\n\n        // create new instance for each hook\n        return newHooks.map(hook => create$f(hook));\n    };\n\n    // returns an app based on the given element hook\n    find = hook => {\n        const app = state.apps.find(app => app.isAttachedTo(hook));\n        if (!app) {\n            return null;\n        }\n        return createAppAPI(app);\n    };\n\n    // adds a plugin extension\n    registerPlugin = (...plugins) => {\n        // register plugins\n        plugins.forEach(createAppPlugin);\n\n        // update OptionTypes, each plugin might have extended the default options\n        updateOptionTypes();\n    };\n\n    getOptions$1 = () => {\n        const opts = {};\n        forin(getOptions(), (key, value) => {\n            opts[key] = value[0];\n        });\n        return opts;\n    };\n\n    setOptions$1 = opts => {\n        if (isObject(opts)) {\n            // update existing plugins\n            state.apps.forEach(app => {\n                app.setOptions(opts);\n            });\n\n            // override defaults\n            setOptions(opts);\n        }\n\n        // return new options\n        return getOptions$1();\n    };\n}\n\nexport {\n    FileOrigin$1 as FileOrigin,\n    FileStatus,\n    OptionTypes,\n    Status$1 as Status,\n    create$f as create,\n    destroy,\n    find,\n    getOptions$1 as getOptions,\n    parse,\n    registerPlugin,\n    setOptions$1 as setOptions,\n    supported,\n};\n","/*!\n * react-filepond v7.1.2\n * A handy FilePond adapter component for React\n * \n * Copyright (c) 2022 PQINA\n * https://pqina.nl/filepond\n * \n * Licensed under the MIT license.\n */\n\nimport React, { createElement, useCallback } from \"react\";\n\n// Import required methods and styles from the FilePond module, should not need anything else\nimport { create, supported, registerPlugin, FileStatus } from \"filepond\";\n\n// We need to be able to call the registerPlugin method directly so we can add plugins\nexport { registerPlugin, FileStatus };\n\n// Do this once\nconst isSupported = supported();\n\n// filtered methods\nconst filteredMethods = [\n  \"setOptions\",\n  \"on\",\n  \"off\",\n  \"onOnce\",\n  \"appendTo\",\n  \"insertAfter\",\n  \"insertBefore\",\n  \"isAttachedTo\",\n  \"replaceElement\",\n  \"restoreElement\",\n  \"destroy\",\n];\n\n// The React <FilePond/> wrapper\nexport class FilePond extends React.Component {\n  constructor(props) {\n    super(props);\n    this.allowFilesSync = true;\n  }\n\n  // Will setup FilePond instance when mounted\n  componentDidMount() {\n    // clone the input so we can restore it in unmount\n    this._input = this._element.querySelector('input[type=\"file\"]');\n    this._inputClone = this._input.cloneNode();\n\n    // exit here if not supported\n    if (!isSupported) return;\n\n    const options = Object.assign({}, this.props);\n\n    // if onupdate files is defined, make sure setFiles does not cause race condition\n    if (options.onupdatefiles) {\n      const cb = options.onupdatefiles;\n      options.onupdatefiles = (items) => {\n        this.allowFilesSync = false;\n        cb(items);\n      };\n    }\n\n    // Create our pond\n    this._pond = create(this._input, options);\n\n    // Reference pond methods to FilePond component instance\n    Object.keys(this._pond)\n      .filter((key) => !filteredMethods.includes(key))\n      .forEach((key) => {\n        this[key] = this._pond[key];\n      });\n  }\n\n  // Will clean up FilePond instance when unmounted\n  componentWillUnmount() {\n    // exit when no pond defined\n    if (!this._pond) return;\n\n    // This fixed <Strict> errors\n\n    // FilePond destroy is async so we have to move FilePond to a bin element so it can no longer affect current element tree as React unmount / mount is sync\n    const bin = document.createElement(\"div\");\n    bin.append(this._pond.element);\n    bin.id = \"foo\";\n\n    // now we call destroy so FilePond can start it's destroy logic\n    this._pond.destroy();\n    this._pond = undefined;\n\n    // we re-add the original file input element so everything is as it was before\n    this._element.append(this._inputClone);\n  }\n\n  shouldComponentUpdate() {\n    if (!this.allowFilesSync) {\n      this.allowFilesSync = true;\n      return false;\n    }\n    return true;\n  }\n\n  // Something changed\n  componentDidUpdate() {\n    // exit when no pond defined\n    if (!this._pond) return;\n\n    const options = Object.assign({}, this.props);\n\n    // this is only set onces, on didmount\n    delete options.onupdatefiles;\n\n    // update pond options based on new props\n    this._pond.setOptions(options);\n  }\n\n  // Renders basic element hook for FilePond to attach to\n  render() {\n    const {\n      id,\n      name,\n      className,\n      allowMultiple,\n      required,\n      captureMethod,\n      acceptedFileTypes,\n    } = this.props;\n    return createElement(\n      \"div\",\n      {\n        className: \"filepond--wrapper\",\n        ref: (element) => (this._element = element),\n      },\n      createElement(\"input\", {\n        type: \"file\",\n        name,\n        id,\n        accept: acceptedFileTypes,\n        multiple: allowMultiple,\n        required: required,\n        className: className,\n        capture: captureMethod,\n      })\n    );\n  }\n}\n\n","/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image\nconst isJPEG = file => /^image\\/jpeg/.test(file.type);\n\nconst Marker = {\n  JPEG: 0xffd8,\n  APP1: 0xffe1,\n  EXIF: 0x45786966,\n  TIFF: 0x4949,\n  Orientation: 0x0112,\n  Unknown: 0xff00\n};\n\nconst getUint16 = (view, offset, little = false) =>\n  view.getUint16(offset, little);\nconst getUint32 = (view, offset, little = false) =>\n  view.getUint32(offset, little);\n\nconst getImageOrientation = file =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = function(e) {\n      const view = new DataView(e.target.result);\n\n      // Every JPEG file starts from binary value '0xFFD8'\n      if (getUint16(view, 0) !== Marker.JPEG) {\n        // This aint no JPEG\n        resolve(-1);\n        return;\n      }\n\n      const length = view.byteLength;\n      let offset = 2;\n\n      while (offset < length) {\n        const marker = getUint16(view, offset);\n        offset += 2;\n\n        // There's our APP1 Marker\n        if (marker === Marker.APP1) {\n          if (getUint32(view, (offset += 2)) !== Marker.EXIF) {\n            // no EXIF info defined\n            break;\n          }\n\n          // Get TIFF Header\n          const little = getUint16(view, (offset += 6)) === Marker.TIFF;\n          offset += getUint32(view, offset + 4, little);\n\n          const tags = getUint16(view, offset, little);\n          offset += 2;\n\n          for (let i = 0; i < tags; i++) {\n            // found the orientation tag\n            if (\n              getUint16(view, offset + i * 12, little) === Marker.Orientation\n            ) {\n              resolve(getUint16(view, offset + i * 12 + 8, little));\n              return;\n            }\n          }\n        } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n          // Invalid\n          break;\n        } else {\n          offset += getUint16(view, offset);\n        }\n      }\n\n      // Nothing found\n      resolve(-1);\n    };\n\n    // we don't need to read the entire file to get the orientation\n    reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n  });\n\nconst IS_BROWSER = (() =>\n  typeof window !== 'undefined' && typeof window.document !== 'undefined')();\nconst isBrowser = () => IS_BROWSER;\n\n// 2x1 pixel image 90CW rotated with orientation header\nconst testSrc =\n  'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n// should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\nlet shouldCorrect = undefined;\nconst testImage = isBrowser() ? new Image() : {};\ntestImage.onload = () =>\n  (shouldCorrect = testImage.naturalWidth > testImage.naturalHeight);\ntestImage.src = testSrc;\n\nconst shouldCorrectImageExifOrientation = () => shouldCorrect;\n\n/**\n * Read Image Orientation Plugin\n */\nconst plugin = ({ addFilter, utils }) => {\n  const { Type, isFile } = utils;\n\n  // subscribe to file load and append required info\n  addFilter(\n    'DID_LOAD_ITEM',\n    (item, { query }) =>\n      new Promise((resolve, reject) => {\n        // get file reference\n        const file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (\n          !isFile(file) ||\n          !isJPEG(file) ||\n          !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') ||\n          !shouldCorrectImageExifOrientation()\n        ) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(orientation => {\n          item.setMetadata('exif', { orientation });\n          resolve(item);\n        });\n      })\n  );\n\n  // Expose plugin options\n  return {\n    options: {\n      // Enable or disable image orientation reading\n      allowImageExifOrientation: [true, Type.BOOLEAN]\n    }\n  };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser$1 =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser$1) {\n  document.dispatchEvent(\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n  );\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginImagePreview 4.6.12\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image and can be viewed in canvas\nconst isPreviewableImage = file => /^image/.test(file.type);\n\nconst vectorMultiply = (v, amount) => createVector(v.x * amount, v.y * amount);\n\nconst vectorAdd = (a, b) => createVector(a.x + b.x, a.y + b.y);\n\nconst vectorNormalize = v => {\n  const l = Math.sqrt(v.x * v.x + v.y * v.y);\n  if (l === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  return createVector(v.x / l, v.y / l);\n};\n\nconst vectorRotate = (v, radians, origin) => {\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n  const t = createVector(v.x - origin.x, v.y - origin.y);\n  return createVector(\n    origin.x + cos * t.x - sin * t.y,\n    origin.y + sin * t.x + cos * t.y\n  );\n};\n\nconst createVector = (x = 0, y = 0) => ({ x, y });\n\nconst getMarkupValue = (value, size, scalar = 1, axis) => {\n  if (typeof value === 'string') {\n    return parseFloat(value) * scalar;\n  }\n  if (typeof value === 'number') {\n    return value * (axis ? size[axis] : Math.min(size.width, size.height));\n  }\n  return;\n};\n\nconst getMarkupStyles = (markup, size, scale) => {\n  const lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n  const fill = markup.backgroundColor || markup.fontColor || 'transparent';\n  const stroke = markup.borderColor || markup.lineColor || 'transparent';\n  const strokeWidth = getMarkupValue(\n    markup.borderWidth || markup.lineWidth,\n    size,\n    scale\n  );\n  const lineCap = markup.lineCap || 'round';\n  const lineJoin = markup.lineJoin || 'round';\n  const dashes =\n    typeof lineStyle === 'string'\n      ? ''\n      : lineStyle.map(v => getMarkupValue(v, size, scale)).join(',');\n  const opacity = markup.opacity || 1;\n  return {\n    'stroke-linecap': lineCap,\n    'stroke-linejoin': lineJoin,\n    'stroke-width': strokeWidth || 0,\n    'stroke-dasharray': dashes,\n    stroke,\n    fill,\n    opacity\n  };\n};\n\nconst isDefined = value => value != null;\n\nconst getMarkupRect = (rect, size, scalar = 1) => {\n  let left =\n    getMarkupValue(rect.x, size, scalar, 'width') ||\n    getMarkupValue(rect.left, size, scalar, 'width');\n  let top =\n    getMarkupValue(rect.y, size, scalar, 'height') ||\n    getMarkupValue(rect.top, size, scalar, 'height');\n  let width = getMarkupValue(rect.width, size, scalar, 'width');\n  let height = getMarkupValue(rect.height, size, scalar, 'height');\n  let right = getMarkupValue(rect.right, size, scalar, 'width');\n  let bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n  if (!isDefined(top)) {\n    if (isDefined(height) && isDefined(bottom)) {\n      top = size.height - height - bottom;\n    } else {\n      top = bottom;\n    }\n  }\n\n  if (!isDefined(left)) {\n    if (isDefined(width) && isDefined(right)) {\n      left = size.width - width - right;\n    } else {\n      left = right;\n    }\n  }\n\n  if (!isDefined(width)) {\n    if (isDefined(left) && isDefined(right)) {\n      width = size.width - left - right;\n    } else {\n      width = 0;\n    }\n  }\n\n  if (!isDefined(height)) {\n    if (isDefined(top) && isDefined(bottom)) {\n      height = size.height - top - bottom;\n    } else {\n      height = 0;\n    }\n  }\n\n  return {\n    x: left || 0,\n    y: top || 0,\n    width: width || 0,\n    height: height || 0\n  };\n};\n\nconst pointsToPathShape = points =>\n  points\n    .map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`)\n    .join(' ');\n\nconst setAttributes = (element, attr) =>\n  Object.keys(attr).forEach(key => element.setAttribute(key, attr[key]));\n\nconst ns = 'http://www.w3.org/2000/svg';\nconst svg = (tag, attr) => {\n  const element = document.createElementNS(ns, tag);\n  if (attr) {\n    setAttributes(element, attr);\n  }\n  return element;\n};\n\nconst updateRect = element =>\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles\n  });\n\nconst updateEllipse = element => {\n  const cx = element.rect.x + element.rect.width * 0.5;\n  const cy = element.rect.y + element.rect.height * 0.5;\n  const rx = element.rect.width * 0.5;\n  const ry = element.rect.height * 0.5;\n  return setAttributes(element, {\n    cx,\n    cy,\n    rx,\n    ry,\n    ...element.styles\n  });\n};\n\nconst IMAGE_FIT_STYLE = {\n  contain: 'xMidYMid meet',\n  cover: 'xMidYMid slice'\n};\n\nconst updateImage = (element, markup) => {\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n  });\n};\n\nconst TEXT_ANCHOR = {\n  left: 'start',\n  center: 'middle',\n  right: 'end'\n};\n\nconst updateText = (element, markup, size, scale) => {\n  const fontSize = getMarkupValue(markup.fontSize, size, scale);\n  const fontFamily = markup.fontFamily || 'sans-serif';\n  const fontWeight = markup.fontWeight || 'normal';\n  const textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    'stroke-width': 0,\n    'font-weight': fontWeight,\n    'font-size': fontSize,\n    'font-family': fontFamily,\n    'text-anchor': textAlign\n  });\n\n  // update text\n  if (element.text !== markup.text) {\n    element.text = markup.text;\n    element.textContent = markup.text.length ? markup.text : ' ';\n  }\n};\n\nconst updateLine = (element, markup, size, scale) => {\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    fill: 'none'\n  });\n\n  const line = element.childNodes[0];\n  const begin = element.childNodes[1];\n  const end = element.childNodes[2];\n\n  const origin = element.rect;\n\n  const target = {\n    x: element.rect.x + element.rect.width,\n    y: element.rect.y + element.rect.height\n  };\n\n  setAttributes(line, {\n    x1: origin.x,\n    y1: origin.y,\n    x2: target.x,\n    y2: target.y\n  });\n\n  if (!markup.lineDecoration) return;\n\n  begin.style.display = 'none';\n  end.style.display = 'none';\n\n  const v = vectorNormalize({\n    x: target.x - origin.x,\n    y: target.y - origin.y\n  });\n\n  const l = getMarkupValue(0.05, size, scale);\n\n  if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n    const arrowBeginRotationPoint = vectorMultiply(v, l);\n    const arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n    const arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n    const arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n    setAttributes(begin, {\n      style: 'display:block;',\n      d: `M${arrowBeginA.x},${arrowBeginA.y} L${origin.x},${origin.y} L${\n        arrowBeginB.x\n      },${arrowBeginB.y}`\n    });\n  }\n\n  if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n    const arrowEndRotationPoint = vectorMultiply(v, -l);\n    const arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n    const arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n    const arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n    setAttributes(end, {\n      style: 'display:block;',\n      d: `M${arrowEndA.x},${arrowEndA.y} L${target.x},${target.y} L${\n        arrowEndB.x\n      },${arrowEndB.y}`\n    });\n  }\n};\n\nconst updatePath = (element, markup, size, scale) => {\n  setAttributes(element, {\n    ...element.styles,\n    fill: 'none',\n    d: pointsToPathShape(\n      markup.points.map(point => ({\n        x: getMarkupValue(point.x, size, scale, 'width'),\n        y: getMarkupValue(point.y, size, scale, 'height')\n      }))\n    )\n  });\n};\n\nconst createShape = node => markup => svg(node, { id: markup.id });\n\nconst createImage = markup => {\n  const shape = svg('image', {\n    id: markup.id,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    opacity: '0'\n  });\n  shape.onload = () => {\n    shape.setAttribute('opacity', markup.opacity || 1);\n  };\n  shape.setAttributeNS(\n    'http://www.w3.org/1999/xlink',\n    'xlink:href',\n    markup.src\n  );\n  return shape;\n};\n\nconst createLine = markup => {\n  const shape = svg('g', {\n    id: markup.id,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round'\n  });\n\n  const line = svg('line');\n  shape.appendChild(line);\n\n  const begin = svg('path');\n  shape.appendChild(begin);\n\n  const end = svg('path');\n  shape.appendChild(end);\n\n  return shape;\n};\n\nconst CREATE_TYPE_ROUTES = {\n  image: createImage,\n  rect: createShape('rect'),\n  ellipse: createShape('ellipse'),\n  text: createShape('text'),\n  path: createShape('path'),\n  line: createLine\n};\n\nconst UPDATE_TYPE_ROUTES = {\n  rect: updateRect,\n  ellipse: updateEllipse,\n  image: updateImage,\n  text: updateText,\n  path: updatePath,\n  line: updateLine\n};\n\nconst createMarkupByType = (type, markup) => CREATE_TYPE_ROUTES[type](markup);\n\nconst updateMarkupByType = (element, type, markup, size, scale) => {\n  if (type !== 'path') {\n    element.rect = getMarkupRect(markup, size, scale);\n  }\n  element.styles = getMarkupStyles(markup, size, scale);\n  UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n};\n\nconst MARKUP_RECT = [\n  'x',\n  'y',\n  'left',\n  'top',\n  'right',\n  'bottom',\n  'width',\n  'height'\n];\n\nconst toOptionalFraction = value =>\n  typeof value === 'string' && /%/.test(value)\n    ? parseFloat(value) / 100\n    : value;\n\n// adds default markup properties, clones markup\nconst prepareMarkup = markup => {\n  const [type, props] = markup;\n\n  const rect = props.points\n    ? {}\n    : MARKUP_RECT.reduce((prev, curr) => {\n        prev[curr] = toOptionalFraction(props[curr]);\n        return prev;\n      }, {});\n\n  return [\n    type,\n    {\n      zIndex: 0,\n      ...props,\n      ...rect\n    }\n  ];\n};\n\nconst sortMarkupByZIndex = (a, b) => {\n  if (a[1].zIndex > b[1].zIndex) {\n    return 1;\n  }\n  if (a[1].zIndex < b[1].zIndex) {\n    return -1;\n  }\n  return 0;\n};\n\nconst createMarkupView = _ =>\n  _.utils.createView({\n    name: 'image-preview-markup',\n    tag: 'svg',\n    ignoreRect: true,\n    mixins: {\n      apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n    },\n    write: ({ root, props }) => {\n      if (!props.dirty) return;\n\n      const { crop, resize, markup } = props;\n\n      const viewWidth = props.width;\n      const viewHeight = props.height;\n\n      let cropWidth = crop.width;\n      let cropHeight = crop.height;\n\n      if (resize) {\n        const { size } = resize;\n\n        let outputWidth = size && size.width;\n        let outputHeight = size && size.height;\n        const outputFit = resize.mode;\n        const outputUpscale = resize.upscale;\n\n        if (outputWidth && !outputHeight) outputHeight = outputWidth;\n        if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n        const shouldUpscale =\n          cropWidth < outputWidth && cropHeight < outputHeight;\n\n        if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n          let scalarWidth = outputWidth / cropWidth;\n          let scalarHeight = outputHeight / cropHeight;\n\n          if (outputFit === 'force') {\n            cropWidth = outputWidth;\n            cropHeight = outputHeight;\n          } else {\n            let scalar;\n            if (outputFit === 'cover') {\n              scalar = Math.max(scalarWidth, scalarHeight);\n            } else if (outputFit === 'contain') {\n              scalar = Math.min(scalarWidth, scalarHeight);\n            }\n            cropWidth = cropWidth * scalar;\n            cropHeight = cropHeight * scalar;\n          }\n        }\n      }\n\n      const size = {\n        width: viewWidth,\n        height: viewHeight\n      };\n\n      root.element.setAttribute('width', size.width);\n      root.element.setAttribute('height', size.height);\n\n      const scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n      // clear\n      root.element.innerHTML = '';\n\n      // get filter\n      const markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n      // draw new\n      markup\n        .filter(markupFilter)\n        .map(prepareMarkup)\n        .sort(sortMarkupByZIndex)\n        .forEach(markup => {\n          const [type, settings] = markup;\n\n          // create\n          const element = createMarkupByType(type, settings);\n\n          // update\n          updateMarkupByType(element, type, settings, size, scale);\n\n          // add\n          root.element.appendChild(element);\n        });\n    }\n  });\n\nconst createVector$1 = (x, y) => ({ x, y });\n\nconst vectorDot = (a, b) => a.x * b.x + a.y * b.y;\n\nconst vectorSubtract = (a, b) => createVector$1(a.x - b.x, a.y - b.y);\n\nconst vectorDistanceSquared = (a, b) =>\n  vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n\nconst vectorDistance = (a, b) => Math.sqrt(vectorDistanceSquared(a, b));\n\nconst getOffsetPointOnEdge = (length, rotation) => {\n  const a = length;\n\n  const A = 1.5707963267948966;\n  const B = rotation;\n  const C = 1.5707963267948966 - rotation;\n\n  const sinA = Math.sin(A);\n  const sinB = Math.sin(B);\n  const sinC = Math.sin(C);\n  const cosC = Math.cos(C);\n  const ratio = a / sinA;\n  const b = ratio * sinB;\n  const c = ratio * sinC;\n\n  return createVector$1(cosC * b, cosC * c);\n};\n\nconst getRotatedRectSize = (rect, rotation) => {\n  const w = rect.width;\n  const h = rect.height;\n\n  const hor = getOffsetPointOnEdge(w, rotation);\n  const ver = getOffsetPointOnEdge(h, rotation);\n\n  const tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n  const tr = createVector$1(\n    rect.x + rect.width + Math.abs(ver.y),\n    rect.y + Math.abs(ver.x)\n  );\n\n  const bl = createVector$1(\n    rect.x - Math.abs(ver.y),\n    rect.y + rect.height - Math.abs(ver.x)\n  );\n\n  return {\n    width: vectorDistance(tl, tr),\n    height: vectorDistance(tl, bl)\n  };\n};\n\nconst calculateCanvasSize = (image, canvasAspectRatio, zoom = 1) => {\n  const imageAspectRatio = image.height / image.width;\n\n  // determine actual pixels on x and y axis\n  let canvasWidth = 1;\n  let canvasHeight = canvasAspectRatio;\n  let imgWidth = 1;\n  let imgHeight = imageAspectRatio;\n  if (imgHeight > canvasHeight) {\n    imgHeight = canvasHeight;\n    imgWidth = imgHeight / imageAspectRatio;\n  }\n\n  const scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n  const width = image.width / (zoom * scalar * imgWidth);\n  const height = width * canvasAspectRatio;\n\n  return {\n    width: width,\n    height: height\n  };\n};\n\nconst getImageRectZoomFactor = (imageRect, cropRect, rotation, center) => {\n  // calculate available space round image center position\n  const cx = center.x > 0.5 ? 1 - center.x : center.x;\n  const cy = center.y > 0.5 ? 1 - center.y : center.y;\n  const imageWidth = cx * 2 * imageRect.width;\n  const imageHeight = cy * 2 * imageRect.height;\n\n  // calculate rotated crop rectangle size\n  const rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n  // calculate scalar required to fit image\n  return Math.max(\n    rotatedCropSize.width / imageWidth,\n    rotatedCropSize.height / imageHeight\n  );\n};\n\nconst getCenteredCropRect = (container, aspectRatio) => {\n  let width = container.width;\n  let height = width * aspectRatio;\n  if (height > container.height) {\n    height = container.height;\n    width = height / aspectRatio;\n  }\n  const x = (container.width - width) * 0.5;\n  const y = (container.height - height) * 0.5;\n\n  return {\n    x,\n    y,\n    width,\n    height\n  };\n};\n\nconst getCurrentCropSize = (imageSize, crop = {}) => {\n  let { zoom, rotation, center, aspectRatio } = crop;\n\n  if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n  const canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n  const canvasCenter = {\n    x: canvasSize.width * 0.5,\n    y: canvasSize.height * 0.5\n  };\n\n  const stage = {\n    x: 0,\n    y: 0,\n    width: canvasSize.width,\n    height: canvasSize.height,\n    center: canvasCenter\n  };\n\n  const shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n  const stageZoomFactor = getImageRectZoomFactor(\n    imageSize,\n    getCenteredCropRect(stage, aspectRatio),\n    rotation,\n    shouldLimit ? center : { x: 0.5, y: 0.5 }\n  );\n\n  const scale = zoom * stageZoomFactor;\n\n  // start drawing\n  return {\n    widthFloat: canvasSize.width / scale,\n    heightFloat: canvasSize.height / scale,\n    width: Math.round(canvasSize.width / scale),\n    height: Math.round(canvasSize.height / scale)\n  };\n};\n\nconst IMAGE_SCALE_SPRING_PROPS = {\n  type: 'spring',\n  stiffness: 0.5,\n  damping: 0.45,\n  mass: 10\n};\n\n// does horizontal and vertical flipping\nconst createBitmapView = _ =>\n  _.utils.createView({\n    name: 'image-bitmap',\n    ignoreRect: true,\n    mixins: { styles: ['scaleX', 'scaleY'] },\n    create: ({ root, props }) => {\n      root.appendChild(props.image);\n    }\n  });\n\n// shifts and rotates image\nconst createImageCanvasWrapper = _ =>\n  _.utils.createView({\n    name: 'image-canvas-wrapper',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: ['crop', 'width', 'height'],\n      styles: [\n        'originX',\n        'originY',\n        'translateX',\n        'translateY',\n        'scaleX',\n        'scaleY',\n        'rotateZ'\n      ],\n      animations: {\n        originX: IMAGE_SCALE_SPRING_PROPS,\n        originY: IMAGE_SCALE_SPRING_PROPS,\n        scaleX: IMAGE_SCALE_SPRING_PROPS,\n        scaleY: IMAGE_SCALE_SPRING_PROPS,\n        translateX: IMAGE_SCALE_SPRING_PROPS,\n        translateY: IMAGE_SCALE_SPRING_PROPS,\n        rotateZ: IMAGE_SCALE_SPRING_PROPS\n      }\n    },\n    create: ({ root, props }) => {\n      props.width = props.image.width;\n      props.height = props.image.height;\n      root.ref.bitmap = root.appendChildView(\n        root.createChildView(createBitmapView(_), { image: props.image })\n      );\n    },\n    write: ({ root, props }) => {\n      const { flip } = props.crop;\n      const { bitmap } = root.ref;\n      bitmap.scaleX = flip.horizontal ? -1 : 1;\n      bitmap.scaleY = flip.vertical ? -1 : 1;\n    }\n  });\n\n// clips canvas to correct aspect ratio\nconst createClipView = _ =>\n  _.utils.createView({\n    name: 'image-clip',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: [\n        'crop',\n        'markup',\n        'resize',\n        'width',\n        'height',\n        'dirty',\n        'background'\n      ],\n      styles: ['width', 'height', 'opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 250 }\n      }\n    },\n    didWriteView: function({ root, props }) {\n      if (!props.background) return;\n      root.element.style.backgroundColor = props.background;\n    },\n    create: ({ root, props }) => {\n      root.ref.image = root.appendChildView(\n        root.createChildView(\n          createImageCanvasWrapper(_),\n          Object.assign({}, props)\n        )\n      );\n\n      root.ref.createMarkup = () => {\n        if (root.ref.markup) return;\n        root.ref.markup = root.appendChildView(\n          root.createChildView(createMarkupView(_), Object.assign({}, props))\n        );\n      };\n\n      root.ref.destroyMarkup = () => {\n        if (!root.ref.markup) return;\n        root.removeChildView(root.ref.markup);\n        root.ref.markup = null;\n      };\n\n      // set up transparency grid\n      const transparencyIndicator = root.query(\n        'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n      );\n      if (transparencyIndicator === null) return;\n\n      // grid pattern\n      if (transparencyIndicator === 'grid') {\n        root.element.dataset.transparencyIndicator = transparencyIndicator;\n      }\n      // basic color\n      else {\n        root.element.dataset.transparencyIndicator = 'color';\n      }\n    },\n    write: ({ root, props, shouldOptimize }) => {\n      const { crop, markup, resize, dirty, width, height } = props;\n\n      root.ref.image.crop = crop;\n\n      const stage = {\n        x: 0,\n        y: 0,\n        width,\n        height,\n        center: {\n          x: width * 0.5,\n          y: height * 0.5\n        }\n      };\n\n      const image = {\n        width: root.ref.image.width,\n        height: root.ref.image.height\n      };\n\n      const origin = {\n        x: crop.center.x * image.width,\n        y: crop.center.y * image.height\n      };\n\n      const translation = {\n        x: stage.center.x - image.width * crop.center.x,\n        y: stage.center.y - image.height * crop.center.y\n      };\n\n      const rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n      const cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n      const shouldLimit =\n        typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n      const stageZoomFactor = getImageRectZoomFactor(\n        image,\n        getCenteredCropRect(stage, cropAspectRatio),\n        rotation,\n        shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n      );\n\n      const scale = crop.zoom * stageZoomFactor;\n\n      // update markup view\n      if (markup && markup.length) {\n        root.ref.createMarkup();\n        root.ref.markup.width = width;\n        root.ref.markup.height = height;\n        root.ref.markup.resize = resize;\n        root.ref.markup.dirty = dirty;\n        root.ref.markup.markup = markup;\n        root.ref.markup.crop = getCurrentCropSize(image, crop);\n      } else if (root.ref.markup) {\n        root.ref.destroyMarkup();\n      }\n\n      // update image view\n      const imageView = root.ref.image;\n\n      // don't update clip layout\n      if (shouldOptimize) {\n        imageView.originX = null;\n        imageView.originY = null;\n        imageView.translateX = null;\n        imageView.translateY = null;\n        imageView.rotateZ = null;\n        imageView.scaleX = null;\n        imageView.scaleY = null;\n        return;\n      }\n\n      imageView.originX = origin.x;\n      imageView.originY = origin.y;\n      imageView.translateX = translation.x;\n      imageView.translateY = translation.y;\n      imageView.rotateZ = rotation;\n      imageView.scaleX = scale;\n      imageView.scaleY = scale;\n    }\n  });\n\nconst createImageView = _ =>\n  _.utils.createView({\n    name: 'image-preview',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n      styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: IMAGE_SCALE_SPRING_PROPS,\n        scaleY: IMAGE_SCALE_SPRING_PROPS,\n        translateY: IMAGE_SCALE_SPRING_PROPS,\n        opacity: { type: 'tween', duration: 400 }\n      }\n    },\n    create: ({ root, props }) => {\n      root.ref.clip = root.appendChildView(\n        root.createChildView(createClipView(_), {\n          id: props.id,\n          image: props.image,\n          crop: props.crop,\n          markup: props.markup,\n          resize: props.resize,\n          dirty: props.dirty,\n          background: props.background\n        })\n      );\n    },\n    write: ({ root, props, shouldOptimize }) => {\n      const { clip } = root.ref;\n\n      const { image, crop, markup, resize, dirty } = props;\n\n      clip.crop = crop;\n      clip.markup = markup;\n      clip.resize = resize;\n      clip.dirty = dirty;\n\n      // don't update clip layout\n      clip.opacity = shouldOptimize ? 0 : 1;\n\n      // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n      if (shouldOptimize || root.rect.element.hidden) return;\n\n      // calculate scaled preview image size\n      const imageAspectRatio = image.height / image.width;\n      let aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n      // calculate container size\n      const containerWidth = root.rect.inner.width;\n      const containerHeight = root.rect.inner.height;\n\n      let fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      const minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n      const maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n      const panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n      const allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n      if (panelAspectRatio && !allowMultiple) {\n        fixedPreviewHeight = containerWidth * panelAspectRatio;\n        aspectRatio = panelAspectRatio;\n      }\n\n      // determine clip width and height\n      let clipHeight =\n        fixedPreviewHeight !== null\n          ? fixedPreviewHeight\n          : Math.max(\n              minPreviewHeight,\n              Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n            );\n\n      let clipWidth = clipHeight / aspectRatio;\n      if (clipWidth > containerWidth) {\n        clipWidth = containerWidth;\n        clipHeight = clipWidth * aspectRatio;\n      }\n\n      if (clipHeight > containerHeight) {\n        clipHeight = containerHeight;\n        clipWidth = containerHeight / aspectRatio;\n      }\n\n      clip.width = clipWidth;\n      clip.height = clipHeight;\n    }\n  });\n\nlet SVG_MASK = `<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\n    <defs>\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\n            <stop offset='50%' stop-color='#000000'/>\n            <stop offset='56%' stop-color='#0a0a0a'/>\n            <stop offset='63%' stop-color='#262626'/>\n            <stop offset='69%' stop-color='#4f4f4f'/>\n            <stop offset='75%' stop-color='#808080'/>\n            <stop offset='81%' stop-color='#b1b1b1'/>\n            <stop offset='88%' stop-color='#dadada'/>\n            <stop offset='94%' stop-color='#f6f6f6'/>\n            <stop offset='100%' stop-color='#ffffff'/>\n        </radialGradient>\n        <mask id=\"mask-__UID__\">\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\n        </mask>\n    </defs>\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\n</svg>`;\n\nlet SVGMaskUniqueId = 0;\n\nconst createImageOverlayView = fpAPI =>\n  fpAPI.utils.createView({\n    name: 'image-preview-overlay',\n    tag: 'div',\n    ignoreRect: true,\n    create: ({ root, props }) => {\n      let mask = SVG_MASK;\n      if (document.querySelector('base')) {\n        const url = new URL(\n          window.location.href.replace(window.location.hash, '')\n        ).href;\n        mask = mask.replace(/url\\(\\#/g, 'url(' + url + '#');\n      }\n\n      SVGMaskUniqueId++;\n      root.element.classList.add(\n        `filepond--image-preview-overlay-${props.status}`\n      );\n      root.element.innerHTML = mask.replace(/__UID__/g, SVGMaskUniqueId);\n    },\n    mixins: {\n      styles: ['opacity'],\n      animations: {\n        opacity: { type: 'spring', mass: 25 }\n      }\n    }\n  });\n\n/**\n * Bitmap Worker\n */\nconst BitmapWorker = function() {\n  self.onmessage = e => {\n    createImageBitmap(e.data.message.file).then(bitmap => {\n      self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n    });\n  };\n};\n\n/**\n * ColorMatrix Worker\n */\nconst ColorMatrixWorker = function() {\n  self.onmessage = e => {\n    const imageData = e.data.message.imageData;\n    const matrix = e.data.message.colorMatrix;\n\n    const data = imageData.data;\n    const l = data.length;\n\n    const m11 = matrix[0];\n    const m12 = matrix[1];\n    const m13 = matrix[2];\n    const m14 = matrix[3];\n    const m15 = matrix[4];\n\n    const m21 = matrix[5];\n    const m22 = matrix[6];\n    const m23 = matrix[7];\n    const m24 = matrix[8];\n    const m25 = matrix[9];\n\n    const m31 = matrix[10];\n    const m32 = matrix[11];\n    const m33 = matrix[12];\n    const m34 = matrix[13];\n    const m35 = matrix[14];\n\n    const m41 = matrix[15];\n    const m42 = matrix[16];\n    const m43 = matrix[17];\n    const m44 = matrix[18];\n    const m45 = matrix[19];\n\n    let index = 0,\n      r = 0.0,\n      g = 0.0,\n      b = 0.0,\n      a = 0.0;\n\n    for (; index < l; index += 4) {\n      r = data[index] / 255;\n      g = data[index + 1] / 255;\n      b = data[index + 2] / 255;\n      a = data[index + 3] / 255;\n      data[index] = Math.max(\n        0,\n        Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n      );\n      data[index + 1] = Math.max(\n        0,\n        Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n      );\n      data[index + 2] = Math.max(\n        0,\n        Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n      );\n      data[index + 3] = Math.max(\n        0,\n        Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n      );\n    }\n\n    self.postMessage({ id: e.data.id, message: imageData }, [\n      imageData.data.buffer\n    ]);\n  };\n};\n\nconst getImageSize = (url, cb) => {\n  let image = new Image();\n  image.onload = () => {\n    const width = image.naturalWidth;\n    const height = image.naturalHeight;\n    image = null;\n    cb(width, height);\n  };\n  image.src = url;\n};\n\nconst transforms = {\n  1: () => [1, 0, 0, 1, 0, 0],\n  2: width => [-1, 0, 0, 1, width, 0],\n  3: (width, height) => [-1, 0, 0, -1, width, height],\n  4: (width, height) => [1, 0, 0, -1, 0, height],\n  5: () => [0, 1, 1, 0, 0, 0],\n  6: (width, height) => [0, 1, -1, 0, height, 0],\n  7: (width, height) => [0, -1, -1, 0, height, width],\n  8: width => [0, -1, 1, 0, 0, width]\n};\n\nconst fixImageOrientation = (ctx, width, height, orientation) => {\n  // no orientation supplied\n  if (orientation === -1) {\n    return;\n  }\n\n  ctx.transform.apply(ctx, transforms[orientation](width, height));\n};\n\n// draws the preview image to canvas\nconst createPreviewImage = (data, width, height, orientation) => {\n  // can't draw on half pixels\n  width = Math.round(width);\n  height = Math.round(height);\n\n  // draw image\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n\n  // if is rotated incorrectly swap width and height\n  if (orientation >= 5 && orientation <= 8) {\n    [width, height] = [height, width];\n  }\n\n  // correct image orientation\n  fixImageOrientation(ctx, width, height, orientation);\n\n  // draw the image\n  ctx.drawImage(data, 0, 0, width, height);\n\n  return canvas;\n};\n\nconst isBitmap = file => /^image/.test(file.type) && !/svg/.test(file.type);\n\nconst MAX_WIDTH = 10;\nconst MAX_HEIGHT = 10;\n\nconst calculateAverageColor = image => {\n  const scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const width = (canvas.width = Math.ceil(image.width * scalar));\n  const height = (canvas.height = Math.ceil(image.height * scalar));\n  ctx.drawImage(image, 0, 0, width, height);\n  let data = null;\n  try {\n    data = ctx.getImageData(0, 0, width, height).data;\n  } catch (e) {\n    return null;\n  }\n  const l = data.length;\n\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  let i = 0;\n\n  for (; i < l; i += 4) {\n    r += data[i] * data[i];\n    g += data[i + 1] * data[i + 1];\n    b += data[i + 2] * data[i + 2];\n  }\n\n  r = averageColor(r, l);\n  g = averageColor(g, l);\n  b = averageColor(b, l);\n\n  return { r, g, b };\n};\n\nconst averageColor = (c, l) => Math.floor(Math.sqrt(c / (l / 4)));\n\nconst cloneCanvas = (origin, target) => {\n  target = target || document.createElement('canvas');\n  target.width = origin.width;\n  target.height = origin.height;\n  const ctx = target.getContext('2d');\n  ctx.drawImage(origin, 0, 0);\n  return target;\n};\n\nconst cloneImageData = imageData => {\n  let id;\n  try {\n    id = new ImageData(imageData.width, imageData.height);\n  } catch (e) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    id = ctx.createImageData(imageData.width, imageData.height);\n  }\n  id.data.set(new Uint8ClampedArray(imageData.data));\n  return id;\n};\n\nconst loadImage = url =>\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = () => {\n      resolve(img);\n    };\n    img.onerror = e => {\n      reject(e);\n    };\n    img.src = url;\n  });\n\nconst createImageWrapperView = _ => {\n  // create overlay view\n  const OverlayView = createImageOverlayView(_);\n\n  const ImageView = createImageView(_);\n\n  const { createWorker } = _.utils;\n\n  const applyFilter = (root, filter, target) =>\n    new Promise(resolve => {\n      // will store image data for future filter updates\n      if (!root.ref.imageData) {\n        root.ref.imageData = target\n          .getContext('2d')\n          .getImageData(0, 0, target.width, target.height);\n      }\n\n      // get image data reference\n      const imageData = cloneImageData(root.ref.imageData);\n\n      if (!filter || filter.length !== 20) {\n        target.getContext('2d').putImageData(imageData, 0, 0);\n        return resolve();\n      }\n\n      const worker = createWorker(ColorMatrixWorker);\n      worker.post(\n        {\n          imageData,\n          colorMatrix: filter\n        },\n        response => {\n          // apply filtered colors\n          target.getContext('2d').putImageData(response, 0, 0);\n\n          // stop worker\n          worker.terminate();\n\n          // done!\n          resolve();\n        },\n        [imageData.data.buffer]\n      );\n    });\n\n  const removeImageView = (root, imageView) => {\n    root.removeChildView(imageView);\n    imageView.image.width = 1;\n    imageView.image.height = 1;\n    imageView._destroy();\n  };\n\n  // remove an image\n  const shiftImage = ({ root }) => {\n    const imageView = root.ref.images.shift();\n    imageView.opacity = 0;\n    imageView.translateY = -15;\n    root.ref.imageViewBin.push(imageView);\n    return imageView;\n  };\n\n  // add new image\n  const pushImage = ({ root, props, image }) => {\n    const id = props.id;\n    const item = root.query('GET_ITEM', { id });\n    if (!item) return;\n\n    const crop = item.getMetadata('crop') || {\n      center: {\n        x: 0.5,\n        y: 0.5\n      },\n      flip: {\n        horizontal: false,\n        vertical: false\n      },\n      zoom: 1,\n      rotation: 0,\n      aspectRatio: null\n    };\n\n    const background = root.query(\n      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n    );\n\n    let markup;\n    let resize;\n    let dirty = false;\n    if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n      markup = item.getMetadata('markup') || [];\n      resize = item.getMetadata('resize');\n      dirty = true;\n    }\n\n    // append image presenter\n    const imageView = root.appendChildView(\n      root.createChildView(ImageView, {\n        id,\n        image,\n        crop,\n        resize,\n        markup,\n        dirty,\n        background,\n        opacity: 0,\n        scaleX: 1.15,\n        scaleY: 1.15,\n        translateY: 15\n      }),\n      root.childViews.length\n    );\n    root.ref.images.push(imageView);\n\n    // reveal the preview image\n    imageView.opacity = 1;\n    imageView.scaleX = 1;\n    imageView.scaleY = 1;\n    imageView.translateY = 0;\n\n    // the preview is now ready to be drawn\n    setTimeout(() => {\n      root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id });\n    }, 250);\n  };\n\n  const updateImage = ({ root, props }) => {\n    const item = root.query('GET_ITEM', { id: props.id });\n    if (!item) return;\n    const imageView = root.ref.images[root.ref.images.length - 1];\n    imageView.crop = item.getMetadata('crop');\n    imageView.background = root.query(\n      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n    );\n    if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n      imageView.dirty = true;\n      imageView.resize = item.getMetadata('resize');\n      imageView.markup = item.getMetadata('markup');\n    }\n  };\n\n  // replace image preview\n  const didUpdateItemMetadata = ({ root, props, action }) => {\n    // only filter and crop trigger redraw\n    if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n    // no images to update, exit\n    if (!root.ref.images.length) return;\n\n    // no item found, exit\n    const item = root.query('GET_ITEM', { id: props.id });\n    if (!item) return;\n\n    // for now, update existing image when filtering\n    if (/filter/.test(action.change.key)) {\n      const imageView = root.ref.images[root.ref.images.length - 1];\n      applyFilter(root, action.change.value, imageView.image);\n      return;\n    }\n\n    if (/crop|markup|resize/.test(action.change.key)) {\n      const crop = item.getMetadata('crop');\n      const image = root.ref.images[root.ref.images.length - 1];\n\n      // if aspect ratio has changed, we need to create a new image\n      if (\n        crop &&\n        crop.aspectRatio &&\n        image.crop &&\n        image.crop.aspectRatio &&\n        Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001\n      ) {\n        const imageView = shiftImage({ root });\n        pushImage({ root, props, image: cloneCanvas(imageView.image) });\n      }\n      // if not, we can update the current image\n      else {\n        updateImage({ root, props });\n      }\n    }\n  };\n\n  const canCreateImageBitmap = file => {\n    // Firefox versions before 58 will freeze when running createImageBitmap\n    // in a Web Worker so we detect those versions and return false for support\n    const userAgent = window.navigator.userAgent;\n    const isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n    const firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n    if (firefoxVersion !== null && firefoxVersion <= 58) return false;\n\n    return 'createImageBitmap' in window && isBitmap(file);\n  };\n\n  /**\n   * Write handler for when preview container has been created\n   */\n  const didCreatePreviewContainer = ({ root, props }) => {\n    const { id } = props;\n\n    // we need to get the file data to determine the eventual image size\n    const item = root.query('GET_ITEM', id);\n    if (!item) return;\n\n    // get url to file (we'll revoke it later on when done)\n    const fileURL = URL.createObjectURL(item.file);\n\n    // determine image size of this item\n    getImageSize(fileURL, (width, height) => {\n      // we can now scale the panel to the final size\n      root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n        id,\n        width,\n        height\n      });\n    });\n  };\n\n  const drawPreview = ({ root, props }) => {\n    const { id } = props;\n\n    // we need to get the file data to determine the eventual image size\n    const item = root.query('GET_ITEM', id);\n    if (!item) return;\n\n    // get url to file (we'll revoke it later on when done)\n    const fileURL = URL.createObjectURL(item.file);\n\n    // fallback\n    const loadPreviewFallback = () => {\n      // let's scale the image in the main thread :(\n      loadImage(fileURL).then(previewImageLoaded);\n    };\n\n    // image is now ready\n    const previewImageLoaded = imageData => {\n      // the file url is no longer needed\n      URL.revokeObjectURL(fileURL);\n\n      // draw the scaled down version here and use that as source so bitmapdata can be closed\n      // orientation info\n      const exif = item.getMetadata('exif') || {};\n      const orientation = exif.orientation || -1;\n\n      // get width and height from action, and swap if orientation is incorrect\n      let { width, height } = imageData;\n\n      // if no width or height, just return early.\n      if (!width || !height) return;\n\n      if (orientation >= 5 && orientation <= 8) {\n        [width, height] = [height, width];\n      }\n\n      // scale canvas based on pixel density\n      // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n      const pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n      // we want as much pixels to work with as possible,\n      // this multiplies the minimum image resolution,\n      // so when zooming in it doesn't get too blurry\n      const zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n      // imaeg scale factor\n      const scaleFactor = zoomFactor * pixelDensityFactor;\n\n      // calculate scaled preview image size\n      const previewImageRatio = height / width;\n\n      // calculate image preview height and width\n      const previewContainerWidth = root.rect.element.width;\n      const previewContainerHeight = root.rect.element.height;\n\n      let imageWidth = previewContainerWidth;\n      let imageHeight = imageWidth * previewImageRatio;\n\n      if (previewImageRatio > 1) {\n        imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n        imageHeight = imageWidth * previewImageRatio;\n      } else {\n        imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n        imageWidth = imageHeight / previewImageRatio;\n      }\n\n      // transfer to image tag so no canvas memory wasted on iOS\n      const previewImage = createPreviewImage(\n        imageData,\n        imageWidth,\n        imageHeight,\n        orientation\n      );\n\n      // done\n      const done = () => {\n        // calculate average image color, disabled for now\n        const averageColor = root.query(\n          'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n        )\n          ? calculateAverageColor(data)\n          : null;\n        item.setMetadata('color', averageColor, true);\n\n        // data has been transferred to canvas ( if was ImageBitmap )\n        if ('close' in imageData) {\n          imageData.close();\n        }\n\n        // show the overlay\n        root.ref.overlayShadow.opacity = 1;\n\n        // create the first image\n        pushImage({ root, props, image: previewImage });\n      };\n\n      // apply filter\n      const filter = item.getMetadata('filter');\n      if (filter) {\n        applyFilter(root, filter, previewImage).then(done);\n      } else {\n        done();\n      }\n    };\n\n    // if we support scaling using createImageBitmap we use a worker\n    if (canCreateImageBitmap(item.file)) {\n      // let's scale the image in a worker\n      const worker = createWorker(BitmapWorker);\n\n      worker.post(\n        {\n          file: item.file\n        },\n        imageBitmap => {\n          // destroy worker\n          worker.terminate();\n\n          // no bitmap returned, must be something wrong,\n          // try the oldschool way\n          if (!imageBitmap) {\n            loadPreviewFallback();\n            return;\n          }\n\n          // yay we got our bitmap, let's continue showing the preview\n          previewImageLoaded(imageBitmap);\n        }\n      );\n    } else {\n      // create fallback preview\n      loadPreviewFallback();\n    }\n  };\n\n  /**\n   * Write handler for when the preview image is ready to be animated\n   */\n  const didDrawPreview = ({ root }) => {\n    // get last added image\n    const image = root.ref.images[root.ref.images.length - 1];\n    image.translateY = 0;\n    image.scaleX = 1.0;\n    image.scaleY = 1.0;\n    image.opacity = 1;\n  };\n\n  /**\n   * Write handler for when the preview has been loaded\n   */\n  const restoreOverlay = ({ root }) => {\n    root.ref.overlayShadow.opacity = 1;\n    root.ref.overlayError.opacity = 0;\n    root.ref.overlaySuccess.opacity = 0;\n  };\n\n  const didThrowError = ({ root }) => {\n    root.ref.overlayShadow.opacity = 0.25;\n    root.ref.overlayError.opacity = 1;\n  };\n\n  const didCompleteProcessing = ({ root }) => {\n    root.ref.overlayShadow.opacity = 0.25;\n    root.ref.overlaySuccess.opacity = 1;\n  };\n\n  /**\n   * Constructor\n   */\n  const create = ({ root }) => {\n    // image view\n    root.ref.images = [];\n\n    // the preview image data (we need this to filter the image)\n    root.ref.imageData = null;\n\n    // image bin\n    root.ref.imageViewBin = [];\n\n    // image overlays\n    root.ref.overlayShadow = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'idle'\n      })\n    );\n\n    root.ref.overlaySuccess = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'success'\n      })\n    );\n\n    root.ref.overlayError = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'failure'\n      })\n    );\n  };\n\n  return _.utils.createView({\n    name: 'image-preview-wrapper',\n    create,\n    styles: ['height'],\n    apis: ['height'],\n    destroy: ({ root }) => {\n      // we resize the image so memory on iOS 12 is released more quickly (it seems)\n      root.ref.images.forEach(imageView => {\n        imageView.image.width = 1;\n        imageView.image.height = 1;\n      });\n    },\n    didWriteView: ({ root }) => {\n      root.ref.images.forEach(imageView => {\n        imageView.dirty = false;\n      });\n    },\n    write: _.utils.createRoute(\n      {\n        // image preview stated\n        DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n        DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n        DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n        DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n        // file states\n        DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n        DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n        DID_THROW_ITEM_INVALID: didThrowError,\n        DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n        DID_START_ITEM_PROCESSING: restoreOverlay,\n        DID_REVERT_ITEM_PROCESSING: restoreOverlay\n      },\n      ({ root }) => {\n        // views on death row\n        const viewsToRemove = root.ref.imageViewBin.filter(\n          imageView => imageView.opacity === 0\n        );\n\n        // views to retain\n        root.ref.imageViewBin = root.ref.imageViewBin.filter(\n          imageView => imageView.opacity > 0\n        );\n\n        // remove these views\n        viewsToRemove.forEach(imageView => removeImageView(root, imageView));\n        viewsToRemove.length = 0;\n      }\n    )\n  });\n};\n\n/**\n * Image Preview Plugin\n */\nconst plugin = fpAPI => {\n  const { addFilter, utils } = fpAPI;\n  const { Type, createRoute, isFile } = utils;\n\n  // imagePreviewView\n  const imagePreviewView = createImageWrapperView(fpAPI);\n\n  // called for each view that is created right after the 'create' method\n  addFilter('CREATE_VIEW', viewAPI => {\n    // get reference to created view\n    const { is, view, query } = viewAPI;\n\n    // only hook up to item view and only if is enabled for this cropper\n    if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n    // create the image preview plugin, but only do so if the item is an image\n    const didLoadItem = ({ root, props }) => {\n      const { id } = props;\n      const item = query('GET_ITEM', id);\n\n      // item could theoretically have been removed in the mean time\n      if (!item || !isFile(item.file) || item.archived) return;\n\n      // get the file object\n      const file = item.file;\n\n      // exit if this is not an image\n      if (!isPreviewableImage(file)) return;\n\n      // test if is filtered\n      if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n      // exit if image size is too high and no createImageBitmap support\n      // this would simply bring the browser to its knees and that is not what we want\n      const supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n      const maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n      if (\n        !supportsCreateImageBitmap &&\n        (maxPreviewFileSize && file.size > maxPreviewFileSize)\n      )\n        return;\n\n      // set preview view\n      root.ref.imagePreview = view.appendChildView(\n        view.createChildView(imagePreviewView, { id })\n      );\n\n      // update height if is fixed\n      const fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      if (fixedPreviewHeight) {\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: fixedPreviewHeight\n        });\n      }\n\n      // now ready\n      const queue =\n        !supportsCreateImageBitmap &&\n        file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n      root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id }, queue);\n    };\n\n    const rescaleItem = (root, props) => {\n      if (!root.ref.imagePreview) return;\n\n      let { id } = props;\n\n      // get item\n      const item = root.query('GET_ITEM', { id });\n      if (!item) return;\n\n      // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n      const panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n      const itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n      const fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n      // no data!\n      let { imageWidth, imageHeight } = root.ref;\n      if (!imageWidth || !imageHeight) return;\n\n      // get height min and max\n      const minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n      const maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n      // orientation info\n      const exif = item.getMetadata('exif') || {};\n      const orientation = exif.orientation || -1;\n\n      // get width and height from action, and swap of orientation is incorrect\n      if (orientation >= 5 && orientation <= 8)\n        [imageWidth, imageHeight] = [imageHeight, imageWidth];\n\n      // scale up width and height when we're dealing with an SVG\n      if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n        const scalar = 2048 / imageWidth;\n        imageWidth *= scalar;\n        imageHeight *= scalar;\n      }\n\n      // image aspect ratio\n      const imageAspectRatio = imageHeight / imageWidth;\n\n      // we need the item to get to the crop size\n      const previewAspectRatio =\n        (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n      // preview height range\n      let previewHeightMax = Math.max(\n        minPreviewHeight,\n        Math.min(imageHeight, maxPreviewHeight)\n      );\n      const itemWidth = root.rect.element.width;\n      const previewHeight = Math.min(\n        itemWidth * previewAspectRatio,\n        previewHeightMax\n      );\n\n      // request update to panel height\n      root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n        id: item.id,\n        height: previewHeight\n      });\n    };\n\n    const didResizeView = ({ root }) => {\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n    };\n\n    const didUpdateItemMetadata = ({ root, action }) => {\n      if (action.change.key !== 'crop') return;\n\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n    };\n\n    const didCalculatePreviewSize = ({ root, action }) => {\n      // remember dimensions\n      root.ref.imageWidth = action.width;\n      root.ref.imageHeight = action.height;\n\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n      root.ref.shouldDrawPreview = true;\n\n      // as image load could take a while and fire when draw loop is resting we need to give it a kick\n      root.dispatch('KICK');\n    };\n\n    // start writing\n    view.registerWriter(\n      createRoute(\n        {\n          DID_RESIZE_ROOT: didResizeView,\n          DID_STOP_RESIZE: didResizeView,\n          DID_LOAD_ITEM: didLoadItem,\n          DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n        },\n        ({ root, props }) => {\n          // no preview view attached\n          if (!root.ref.imagePreview) return;\n\n          // don't do anything while hidden\n          if (root.rect.element.hidden) return;\n\n          // resize the item panel\n          if (root.ref.shouldRescale) {\n            rescaleItem(root, props);\n            root.ref.shouldRescale = false;\n          }\n\n          if (root.ref.shouldDrawPreview) {\n            // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n            requestAnimationFrame(() => {\n              // this requestAnimationFrame nesting is horrible but it fixes an issue with 100hz displays on Chrome\n              // https://github.com/pqina/filepond-plugin-image-preview/issues/57\n              requestAnimationFrame(() => {\n                root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                  id: props.id\n                });\n              });\n            });\n\n            root.ref.shouldDrawPreview = false;\n          }\n        }\n      )\n    );\n  });\n\n  // expose plugin\n  return {\n    options: {\n      // Enable or disable image preview\n      allowImagePreview: [true, Type.BOOLEAN],\n\n      // filters file items to determine which are shown as preview\n      imagePreviewFilterItem: [() => true, Type.FUNCTION],\n\n      // Fixed preview height\n      imagePreviewHeight: [null, Type.INT],\n\n      // Min image height\n      imagePreviewMinHeight: [44, Type.INT],\n\n      // Max image height\n      imagePreviewMaxHeight: [256, Type.INT],\n\n      // Max size of preview file for when createImageBitmap is not supported\n      imagePreviewMaxFileSize: [null, Type.INT],\n\n      // The amount of extra pixels added to the image preview to allow comfortable zooming\n      imagePreviewZoomFactor: [2, Type.INT],\n\n      // Should we upscale small images to fit the max bounding box of the preview area\n      imagePreviewUpscale: [false, Type.BOOLEAN],\n\n      // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n      imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n      // Style of the transparancy indicator used behind images\n      imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n      // Enables or disables reading average image color\n      imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n      // Enables or disables the previewing of markup\n      imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n      // Allows filtering of markup to only show certain shapes\n      imagePreviewMarkupFilter: [() => true, Type.FUNCTION]\n    }\n  };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n  document.dispatchEvent(\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n  );\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginFileEncode 2.1.14\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst DataURIWorker = function() {\n    // route messages\n    self.onmessage = e => {\n        convert(e.data.message, response => {\n            self.postMessage({ id: e.data.id, message: response });\n        });\n    };\n\n    // convert file to data uri\n    const convert = (options, cb) => {\n        const { file } = options;\n\n        const reader = new FileReader();\n        reader.onloadend = () => {\n            cb(reader.result.replace('data:', '').replace(/^.+,/, ''));\n        };\n        reader.readAsDataURL(file);\n    };\n};\n\nconst plugin = ({ addFilter, utils }) => {\n    // get quick reference to Type utils\n    const { Type, createWorker, createRoute, isFile } = utils;\n\n    const encode = ({ name, file }) =>\n        new Promise(resolve => {\n            const worker = createWorker(DataURIWorker);\n            worker.post({ file }, data => {\n                resolve({ name, data });\n                worker.terminate();\n            });\n        });\n\n    // holds base64 strings till can be moved to item\n    const base64Cache = [];\n    addFilter('DID_CREATE_ITEM', (item, { query }) => {\n        if (!query('GET_ALLOW_FILE_ENCODE')) return;\n\n        item.extend(\n            'getFileEncodeBase64String',\n            () => base64Cache[item.id] && base64Cache[item.id].data\n        );\n        item.extend(\n            'getFileEncodeDataURL',\n            () =>\n                base64Cache[item.id] && `data:${item.fileType};base64,${base64Cache[item.id].data}`\n        );\n    });\n\n    addFilter(\n        'SHOULD_PREPARE_OUTPUT',\n        (shouldPrepareOutput, { query }) =>\n            new Promise(resolve => {\n                resolve(query('GET_ALLOW_FILE_ENCODE'));\n            })\n    );\n\n    addFilter(\n        'COMPLETE_PREPARE_OUTPUT',\n        (file, { item, query }) =>\n            new Promise(resolve => {\n                // if it's not a file or a list of files, continue\n                if (!query('GET_ALLOW_FILE_ENCODE') || (!isFile(file) && !Array.isArray(file))) {\n                    return resolve(file);\n                }\n\n                // store metadata settings for this cache\n                base64Cache[item.id] = {\n                    metadata: item.getMetadata(),\n                    data: null,\n                };\n\n                // wait for all file items to be encoded\n                Promise.all(\n                    (file instanceof Blob ? [{ name: null, file }] : file).map(encode)\n                ).then(dataItems => {\n                    base64Cache[item.id].data =\n                        file instanceof Blob ? dataItems[0].data : dataItems;\n                    resolve(file);\n                });\n            })\n    );\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', viewAPI => {\n        // get reference to created view\n        const { is, view, query } = viewAPI;\n\n        // only hook up to item view\n        if (!is('file-wrapper') || !query('GET_ALLOW_FILE_ENCODE')) {\n            return;\n        }\n\n        view.registerWriter(\n            createRoute({\n                DID_PREPARE_OUTPUT: ({ root, action }) => {\n                    // only do this if is not uploading async\n                    if (query('IS_ASYNC')) {\n                        return;\n                    }\n\n                    const item = query('GET_ITEM', action.id);\n                    if (!item) return;\n\n                    // extract base64 string\n                    const cache = base64Cache[item.id];\n                    const metadata = cache.metadata;\n                    const data = cache.data;\n\n                    // create JSON string from encoded data\n                    const value = JSON.stringify({\n                        id: item.id,\n                        name: item.file.name,\n                        type: item.file.type,\n                        size: item.file.size,\n                        metadata: metadata,\n                        data,\n                    });\n\n                    // for filepond < 4.13.0\n                    if (root.ref.data) {\n                        root.ref.data.value = value;\n                    }\n                    // newer versions\n                    else {\n                        root.dispatch('DID_DEFINE_VALUE', {\n                            id: item.id,\n                            value,\n                        });\n                    }\n                },\n                DID_REMOVE_ITEM: ({ action }) => {\n                    const item = query('GET_ITEM', action.id);\n                    if (!item) return;\n                    delete base64Cache[item.id];\n                },\n            })\n        );\n    });\n\n    return {\n        options: {\n            // Enable or disable file encoding\n            allowFileEncode: [true, Type.BOOLEAN],\n        },\n    };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n}\n\nexport default plugin;\n","import { FilePond, registerPlugin } from 'react-filepond'\nimport FilePondPluginImageExifOrientation from 'filepond-plugin-image-exif-orientation'\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview'\nimport FilePondPluginFileEncode from 'filepond-plugin-file-encode'\n\n//style\nimport 'filepond/dist/filepond.min.css'\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css'\n\nregisterPlugin(FilePondPluginFileEncode, FilePondPluginImageExifOrientation, FilePondPluginImagePreview)\nconst FilePondUploader = () => {\n  return (\n    <>\n      {/* @ts-ignore */}\n      <FilePond allowMultiple={true} allowReorder={true} allowDrop />\n    </>\n  )\n}\n\nexport default FilePondUploader\n","import { FileUploader } from '@/components/FileUploader'\nimport { Card, CardBody, CardHeader, CardTitle, Col, Row } from 'react-bootstrap'\nimport FilePondUploader from './FilePondUploader'\n\nconst AllFileUploads = () => {\n  return (\n    <Row className=\"justify-content-center\">\n      <Col md={6} lg={6}>\n        <Card>\n          <CardHeader>\n            <Row className=\"align-items-center\">\n              <Col>\n                <CardTitle as=\"h4\">Custom File Upload</CardTitle>\n              </Col>\n            </Row>\n          </CardHeader>\n          <CardBody className=\"pt-0\">\n            <FileUploader\n              icon=\"fa6-solid:upload\"\n              text=\"Drop files here or click to upload.\"\n              extraText=\"(This is just a demo dropzone. Selected files are not actually uploaded.)\"\n            />\n          </CardBody>\n        </Card>\n      </Col>\n      <Col md={6} lg={6}>\n        <Card>\n          <CardHeader>\n            <Row className=\"align-items-center\">\n              <Col>\n                <CardTitle as=\"h4\">File-pond Upload</CardTitle>\n              </Col>\n            </Row>\n          </CardHeader>\n          <CardBody className=\"pt-0\">\n            <FilePondUploader />\n          </CardBody>\n        </Card>\n      </Col>\n    </Row>\n  )\n}\n\nexport default AllFileUploads\n","import PageMetaData from '@/components/PageMetaData'\nimport AllFileUploads from './components/AllFileUploads'\n\nconst FileUploader = () => {\n  return (\n    <>\n      <PageMetaData title=\"File Uploads\" />\n      <AllFileUploads />\n    </>\n  )\n}\n\nexport default FileUploader\n"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","t","f","y","g","verb","n","v","op","__read","o","m","i","r","ar","error","__spreadArray","to","from","pack","l","COMMON_MIME_TYPES","toFileWithPath","file","path","withMimeType","webkitRelativePath","name","hasExtension","ext","type","FILES_TO_IGNORE","fromEvent","evt","_a","isObject","isDataTransfer","getDataTransferFiles","isChangeEvt","getInputFiles","item","getFsHandleFiles","fromList","handles","files","h","dt","items","toFilePromises","noIgnoredFiles","flatten","fromDataTransferItem","entry","fromDirEntry","acc","fwp","fromEntry","fromFileEntry","reader","entries","readEntries","_this","batch","err_1","err","_default","acceptedFiles","acceptedFilesArray","fileName","mimeType","baseMimeType","validType","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","iter","_arrayLikeToArray","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread","target","source","key","_defineProperty","obj","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","minLen","len","arr2","_i","_arr","_n","_d","_s","_e","FILE_INVALID_TYPE","FILE_TOO_LARGE","FILE_TOO_SMALL","TOO_MANY_FILES","getInvalidTypeRejectionErr","accept","messageSuffix","getTooLargeRejectionErr","maxSize","getTooSmallRejectionErr","minSize","TOO_MANY_FILES_REJECTION","fileAccepted","isAcceptable","accepts","fileMatchSize","isDefined","allFilesAccepted","_ref","multiple","maxFiles","validator","_fileAccepted","_fileAccepted2","accepted","_fileMatchSize","_fileMatchSize2","sizeMatch","customErrors","isPropagationStopped","event","isEvtWithFiles","onDocumentDragOver","isIe","userAgent","isEdge","isIeOrEdge","composeEventHandlers","_len","fns","_key","_len2","args","_key2","fn","canUseFileSystemAccessAPI","pickerOptionsFromAccept","acceptForPicker","_ref2","_ref3","ok","isMIMEType","isExt","agg","_ref4","_ref5","acceptPropAsAcceptAttr","a","_ref6","_ref7","isAbort","isSecurityError","_excluded","_excluded2","_excluded3","_excluded4","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","sourceKeys","Dropzone","forwardRef","ref","children","params","_useDropzone","useDropzone","open","props","useImperativeHandle","React","Fragment","defaultProps","PropTypes","initialState","_defaultProps$props","disabled","getFilesFromEvent","onDragEnter","onDragLeave","onDragOver","onDrop","onDropAccepted","onDropRejected","onFileDialogCancel","onFileDialogOpen","useFsAccessApi","autoFocus","preventDropOnDocument","noClick","noKeyboard","noDrag","noDragEventsBubbling","onError","acceptAttr","useMemo","pickerTypes","onFileDialogOpenCb","noop","onFileDialogCancelCb","rootRef","useRef","inputRef","_useReducer","useReducer","reducer","_useReducer2","state","dispatch","isFocused","isFileDialogActive","fsAccessApiWorksRef","onWindowFocus","useEffect","dragTargetsRef","onDocumentDrop","onErrCb","useCallback","onDragEnterCb","stopPropagation","fileCount","isDragAccept","isDragReject","onDragOverCb","hasFiles","onDragLeaveCb","targets","targetIdx","setFiles","fileRejections","acceptError","sizeError","errors","onDropCb","openFileDialog","opts","onKeyDownCb","onFocusCb","onBlurCb","onClickCb","composeHandler","composeKeyboardHandler","composeDragHandler","getRootProps","_ref2$refKey","refKey","role","onKeyDown","onFocus","onBlur","onClick","rest","onInputElementClick","getInputProps","_ref3$refKey","onChange","inputProps","action","useFileUploader","showPreview","selectedFiles","setSelectedFiles","useState","handleAcceptedFiles","callback","allFiles","formatBytes","bytes","decimals","k","dm","sizes","newFiles","FileUploader","onFileUpload","icon","extraText","text","removeFile","jsxs","jsx","IconifyIcon","idx","Card","Row","Col","Link","isNode","createStore","queries","actions","actionQueue","dispatchQueue","getState","processActionQueue","queue","processDispatchQueue","data","isBlocking","actionHandlers","query","str","queryHandles","api","defineProperty","property","definition","forin","cb","createObject","attr","node","ns","svgElements","isSVGElement","tag","createElement","className","attributes","element","appendChild","parent","child","index","appendChildView","childViews","view","removeChildView","IS_BROWSER","isBrowser","testElement","getChildCount","el","getViewRect","elementRect","offset","scale","left","top","right","bottom","rect","childView","childViewRect","expandRect","calculateRectSize","isNumber","thereYet","position","destination","velocity","errorMargin","spring","stiffness","damping","mass","resting","ts","skipToEndState","easeInOutQuad","tween","duration","easing","delay","start","p","reverse","animator","createAnimator","category","def","addGetSet","overwrite","getter","setter","animations","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","animation","addEvent","removeEvent","listeners","viewState","events","add","remove","apis","defaults","styles","currentProps","getOffset","getScale","getRect","propsHaveChanged","applyStyles","newProps","prop","opacity","perspective","translateX","translateY","scaleX","scaleY","rotateX","rotateY","rotateZ","originX","originY","width","height","transforms","elementCurrentStyle","Mixins","updateRect","style","createView","read","write","create","destroy","filterFrameActionsForChild","didCreateView","didWriteView","ignoreRect","ignoreRectUpdate","mixins","store","frameRect","isResting","activeMixins","writers","readers","destroyers","getElement","getChildViews","getReference","createChildView","getStyle","_read","internalAPI","_write","frameActions","shouldOptimize","writer","mixin","_destroy","destroyer","sharedAPIDefinition","internalAPIDefinition","needle","externalAPIDefinition","mixinAPIDefinition","b","mixinAPI","childCount","createPainter","fps","painter","interval","last","id","requestTick","cancelTick","setTimerType","tick","delta","createRoute","routes","root","timestamp","insertBefore","newNode","referenceNode","insertAfter","isArray","isEmpty","trim","toString","toArray","splitter","isBoolean","toBoolean","isString","toNumber","toInt","toFloat","isInt","toBytes","base","naturalFileSize","isFunction","toFunctionReference","string","levels","level","methods","createServerAPI","outline","createAction","method","timeout","headers","parts","toServerAPI","isNull","isAPI","getType","replaceSingleQuotes","conversionTable","convertTo","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","createOption","currentValue","createOptions","options","optionDefinition","createInitialState","fromCamels","separator","part","createOptionAPI","createOptionActions","createOptionQueries","InteractionMethod","getUniqueId","arrayRemove","run","sync","on","off","listener","fire","copyObjectPropertiesToObject","src","PRIVATE","createItemAPI","removeReleasedItems","ItemStatus","FileOrigin","getNonNumeric","getDecimalSeparator","getThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","Type","filters","applyFilterChain","utils","matchingFilters","initialFilter","current","next","applyFilters","addFilter","extendDefaultOptions","additionalOptions","defaultOptions","getOptions","setOptions","getItemByQuery","getNumericAspectRatioFromString","aspectRatio","getActiveItems","Status","res","canUpdateFileInput","dataTransfer","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","isAsync","EMPTY","ERROR","BUSY","IDLE","READY","option","status","hasRoomForItem","count","maxFileCount","limit","min","max","arrayInsert","insertItem","isBase64DataURI","getFilenameFromURL","url","getExtensionFromFilename","guesstimateExtension","subtype","leftPad","padding","getDateString","date","getFileFromBlob","blob","filename","extension","getBlobBuilder","createBlob","arrayBuffer","BB","bb","getBlobFromByteStringWithMimeType","byteString","ab","ia","getMimeTypeFromBase64DataURI","dataURI","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getBlobFromBase64DataURI","getFileFromBase64DataURI","getFileNameFromHeader","header","matches","getFileSizeFromHeader","size","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","createFileLoader","fetchFn","getProgress","abort","load","loadURL","response","computable","total","fileinfo","isGet","sendRequest","aborted","xhr","headersReceived","process","createResponse","code","createTimeoutResponse","hasQS","buildURL","createFetchFunction","apiUrl","onload","onerror","progress","request","ChunkStatus","processFileChunked","metadata","transfer","chunks","chunkTransferId","chunkServer","chunkSize","chunkRetryDelays","ondata","fd","requestTransferId","formData","requestParams","requestTransferOffset","requestUrl","lastChunkIndex","completeProcessingChunks","canProcessChunk","chunk","processChunk","processChunks","lengthComputable","loaded","updateTotalProgress","retryProcessChunk","totalBytesTransfered","totalSize","abortChunks","serverId","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createProcessorFunction","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","runtime","createFileProcessor","processFn","allowMinimumUploadDuration","progressFn","completeFn","transferId","reset","getDuration","getFilenameWithoutExtension","createFileStub","isFile","deepCloneObject","createItem","origin","serverFileReference","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","success","retryLoad","abortLoad","processor","onprocess","requestProcessing","abortProcessing","revert","revertFileUpload","forceRevert","serverTransferId","setMetadata","silent","handler","itemAPI","getItemIndexByQuery","getItemById","itemId","fetchBlob","getDomainFromURL","isExternalURL","dynamicLabel","label","isMockItem","listUpdated","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","failure","activeItems","change","shouldPrepareOutput","beforePrepareFile","upload","doUpload","currentIndex","interactionMethod","insertLocation","totalItems","ignoredFiles","isValidFile","promises","itemInsertLocation","mainStatus","handleAdd","shouldAdd","loadComplete","restore","fetch","processNow","maxParallelUploads","processNext","queueEntry","itemReference","server","shouldRemove","removeFromView","handleRevert","shouldRevert","requestRemoveResult","optionKeys","prioritizedOptionKeys","PrioritizedOptions","formatFilename","createElement$1","tagName","textNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","describeArc","x","startAngle","endAngle","arcSweep","end","percentageArc","svg","ringStrokeWidth","ringFrom","ringTo","coordinates","progressIndicator","create$1","write$1","isDisabled","shouldDisable","fileActionButton","toNaturalFileSize","labelBytes","labelKilobytes","labelMegabytes","labelGigabytes","KB","MB","GB","removeDecimalsWhenZero","decimalCount","create$2","fileSize","updateFile","updateFileSizeOnError","fileInfo","toPercentage","create$3","main","sub","didSetItemLoadProgress","title","didSetItemProcessProgress","didRequestItemProcessing","didAbortItemProcessing","didCompleteItemProcessing","clear","fileStatus","Buttons","ButtonKeys","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","calculateButtonWidth","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getLoadIndicatorAlignment","getProcessIndicatorAlignment","DefaultStyle","IdleStyle","ProcessingStyle","StyleMap","processingCompleteIndicatorView","create$4","LocalButtons","prev","curr","allowRevert","allowRemove","allowProcess","instantUpload","alignRemoveItemButton","buttonFilter","enabledButtons","map","buttonView","loadIndicatorView","progressIndicatorView","write$2","route","stylesToApply","defaultStyles","control","create$5","didLoadItem","fileWrapper","PANEL_SPRING_PROPS","create$6","section","createSection","viewConstructor","write$3","topRect","bottomRect","panel","createDragHelper","itemIds","prevIndex","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","create$7","grab","removedActivateListener","dragState","drag","drop","cancel","route$1","write$4","getItemsPerRow","horizontalSpace","itemWidth","getItemIndexByPosition","positionInView","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","indexX","indexY","offsetX","offsetY","itemTop","itemRight","itemBottom","dropAreaDimensions","val","create$8","addItemView","now","spawnDate","cooldown","dist","moveItem","vx","vy","introItemView","removeItemView","getItemHeight","getItemWidth","dragItem","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","location","visibleChildren","childHeight","childBottom","childTop","route$2","write$5","dragCoordinates","dragIndex","addIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","dragOffset","visualHeight","prevX","prevY","visualIndex","vectorX","vectorY","filterSetItemActions","list","create$9","storeDragCoordinates","clearDragCoordinates","route$3","write$6","newHeight","listScroller","attrToggle","enabledValue","resetFileInput","input","form","parentNode","create$a","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","toggleRequired","setCaptureMethod","doesAllowBrowse","disableField","updateRequiredStatus","updateFieldValidityStatus","browser","Key","create$b","updateLabelValue","clickable","dropLabel","addBlob","moveBlob","hideBlob","explodeBlob","write$7","route$4","drip","setInputFiles","create$c","getField","syncFieldPositionsWithItems","didReorderItems","didAddItem","shouldUseFileInput","dataContainer","didLoadItem$1","field","fileItem","didPrepareOutput","didSetDisabled","didRemoveItem","didDefineValue","write$8","getRootNode","images","text$1","guesstimateMimeType","requestDataTransferItems","links","getLinks","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","getAsEntry","isDirectoryEntry","getFilesInDirectory","dirCounter","fileCounter","resolveIfDone","dirEntry","directoryReader","readBatch","correctedFile","correctMissingFileType","getLinksFromTransferMetaData","getLinksFromTransferURLData","dragNDropObservers","eventPosition","createDragNDropClient","scopeToObserve","filterElement","observer","getDragNDropObserver","client","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","elementFromPoint","point","isEventTarget","elementAtPosition","initialTarget","setDropEffect","effect","onenter","overDropTarget","onexit","ondrag","allowdrop","allowsTransfer","ondrop","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","filterItems","lastState","currentState","filteredItems","listening","listeners$1","handlePaste","activeEl","inScope","listen","unlisten","createPaster","create$d","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","message","clear$1","listModified","isUsingFilePond","itemAdded","itemRemoved","itemProcessed","itemProcessedUndo","itemError","assistant","toCamels","debounce","func","immidiateOnly","MAX_FILES_LIMIT","prevent","create$e","canHover","hasPointerEvents","credits","frag","write$9","route$5","bounds","calculateRootBoundingBoxHeight","hopper","isMultiItem","maxItems","atMaxCapacity","addAction","listItemMargin","calculateListItemMargin","listHeight","calculateListHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","isCappedHeight","panelHeight","itemMargin","visual","scrollList","itemList","newItem","removedItem","verticalItemCount","exceedsMaxFiles","allowReplace","allowMultiple","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","beforeDropFile","toggleBrowse","togglePaste","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","routeActionsToEvents","createEvent","eventRoutes","exposeEvent","detail","exports","filtered","prepareFile","addFile","addFiles","isFilePondFile","sources","lastArgument","processFile","prepareFiles","processFiles","removeFiles","q","createAppObject","customOptions","lowerCaseFirstLetter","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","output","attribute","createAppAtElement","mergedOptions","attributeOptions","app","createApp$1","PRIVATE_METHODS","createAppAPI","replaceInString","replacements","match","createWorker","workerBlob","workerURL","worker","transferList","loadImage","img","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","plugin","pluginOutline","isOperaMini","hasPromises","hasBlobSlice","hasCreateObjectURL","hasVisibility","hasTiming","hasCSSSupports","isIE11","supported","isSupported","OptionTypes","create$f","parse","find","registerPlugin","getOptions$1","setOptions$1","updateOptionTypes","hook","indexToRemove","context","newHook","plugins","filteredMethods","FilePond","bin","required","captureMethod","acceptedFileTypes","isJPEG","Marker","getUint16","little","getUint32","getImageOrientation","length","marker","tags","testSrc","shouldCorrect","testImage","shouldCorrectImageExifOrientation","orientation","isBrowser$1","isPreviewableImage","vectorMultiply","amount","createVector","vectorAdd","vectorNormalize","vectorRotate","radians","cos","sin","getMarkupValue","scalar","axis","getMarkupStyles","markup","lineStyle","fill","stroke","strokeWidth","lineCap","lineJoin","dashes","getMarkupRect","pointsToPathShape","points","setAttributes","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","updateImage","TEXT_ANCHOR","updateText","fontSize","fontFamily","fontWeight","textAlign","updateLine","line","begin","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","createImage","shape","createLine","CREATE_TYPE_ROUTES","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","sortMarkupByZIndex","createMarkupView","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","outputWidth","outputHeight","outputFit","outputUpscale","shouldUpscale","scalarWidth","scalarHeight","markupFilter","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","rotation","A","B","C","sinA","sinB","sinC","cosC","ratio","c","getRotatedRectSize","w","hor","ver","tl","tr","bl","calculateCanvasSize","image","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","center","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","getCurrentCropSize","imageSize","canvasSize","stage","shouldLimit","stageZoomFactor","IMAGE_SCALE_SPRING_PROPS","createBitmapView","createImageCanvasWrapper","flip","bitmap","createClipView","transparencyIndicator","dirty","translation","cropAspectRatio","imageView","createImageView","clip","containerWidth","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","clipHeight","clipWidth","SVG_MASK","SVGMaskUniqueId","createImageOverlayView","fpAPI","mask","BitmapWorker","ColorMatrixWorker","imageData","matrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","getImageSize","fixImageOrientation","ctx","createPreviewImage","canvas","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","averageColor","cloneCanvas","cloneImageData","createImageWrapperView","OverlayView","ImageView","applyFilter","filter","removeImageView","shiftImage","pushImage","background","didUpdateItemMetadata","canCreateImageBitmap","isFirefox","firefoxVersion","didCreatePreviewContainer","fileURL","drawPreview","loadPreviewFallback","previewImageLoaded","pixelDensityFactor","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","done","imageBitmap","didDrawPreview","restoreOverlay","didThrowError","didCompleteProcessing","viewsToRemove","imagePreviewView","viewAPI","is","supportsCreateImageBitmap","maxPreviewFileSize","rescaleItem","itemPanelAspectRatio","fixedHeight","previewAspectRatio","previewHeightMax","previewHeight","didResizeView","didCalculatePreviewSize","DataURIWorker","convert","encode","base64Cache","dataItems","cache","FilePondPluginFileEncode","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","FilePondUploader","AllFileUploads","CardHeader","CardTitle","CardBody","PageMetaData"],"mappings":"qNAkHO,SAASA,GAAUC,EAASC,EAAYC,EAAGC,EAAW,CAC3D,SAASC,EAAMC,EAAO,CAAE,OAAOA,aAAiBH,EAAIG,EAAQ,IAAIH,EAAE,SAAUI,EAAS,CAAEA,EAAQD,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAKH,IAAMA,EAAI,UAAU,SAAUI,EAASC,EAAQ,CACvD,SAASC,EAAUH,EAAO,CAAE,GAAI,CAAEI,EAAKN,EAAU,KAAKE,CAAK,CAAC,CAAI,OAAQK,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASN,EAAO,CAAE,GAAI,CAAEI,EAAKN,EAAU,MAASE,CAAK,CAAC,CAAI,OAAQK,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKG,EAAQ,CAAEA,EAAO,KAAON,EAAQM,EAAO,KAAK,EAAIR,EAAMQ,EAAO,KAAK,EAAE,KAAKJ,EAAWG,CAAQ,CAAE,CAC5GF,GAAMN,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC1E,CAAG,CACH,CAEO,SAASY,GAAYb,EAASc,EAAM,CACzC,IAAIC,EAAI,CAAE,MAAO,EAAG,KAAM,UAAW,CAAE,GAAIC,EAAE,CAAC,EAAI,EAAG,MAAMA,EAAE,CAAC,EAAG,OAAOA,EAAE,CAAC,CAAI,EAAE,KAAM,CAAE,EAAE,IAAK,CAAA,CAAI,EAAEC,EAAGC,EAAGF,EAAGG,EAAI,OAAO,QAAQ,OAAO,UAAa,WAAa,SAAW,QAAQ,SAAS,EAC/L,OAAOA,EAAE,KAAOC,EAAK,CAAC,EAAGD,EAAE,MAAWC,EAAK,CAAC,EAAGD,EAAE,OAAYC,EAAK,CAAC,EAAG,OAAO,QAAW,aAAeD,EAAE,OAAO,QAAQ,EAAI,UAAW,CAAE,OAAO,IAAK,GAAKA,EAC1J,SAASC,EAAKC,EAAG,CAAE,OAAO,SAAUC,EAAG,CAAE,OAAOb,EAAK,CAACY,EAAGC,CAAC,CAAC,CAAE,CAAG,CAChE,SAASb,EAAKc,EAAI,CACd,GAAIN,EAAG,MAAM,IAAI,UAAU,iCAAiC,EAC5D,KAAOE,IAAMA,EAAI,EAAGI,EAAG,CAAC,IAAMR,EAAI,IAAKA,GAAG,GAAI,CAC1C,GAAIE,EAAI,EAAGC,IAAMF,EAAIO,EAAG,CAAC,EAAI,EAAIL,EAAE,OAAYK,EAAG,CAAC,EAAIL,EAAE,SAAcF,EAAIE,EAAE,SAAcF,EAAE,KAAKE,CAAC,EAAG,GAAKA,EAAE,OAAS,EAAEF,EAAIA,EAAE,KAAKE,EAAGK,EAAG,CAAC,CAAC,GAAG,KAAM,OAAOP,EAE3J,OADIE,EAAI,EAAGF,IAAGO,EAAK,CAACA,EAAG,CAAC,EAAI,EAAGP,EAAE,KAAK,GAC9BO,EAAG,CAAC,EAAC,CACT,IAAK,GAAG,IAAK,GAAGP,EAAIO,EAAI,MACxB,IAAK,GAAG,OAAAR,EAAE,QAAgB,CAAE,MAAOQ,EAAG,CAAC,EAAG,KAAM,EAAO,EACvD,IAAK,GAAGR,EAAE,QAASG,EAAIK,EAAG,CAAC,EAAGA,EAAK,CAAC,CAAC,EAAG,SACxC,IAAK,GAAGA,EAAKR,EAAE,IAAI,MAAOA,EAAE,KAAK,IAAG,EAAI,SACxC,QACI,GAAMC,EAAID,EAAE,KAAM,EAAAC,EAAIA,EAAE,OAAS,GAAKA,EAAEA,EAAE,OAAS,CAAC,KAAOO,EAAG,CAAC,IAAM,GAAKA,EAAG,CAAC,IAAM,GAAI,CAAER,EAAI,EAAG,QAAS,CAC1G,GAAIQ,EAAG,CAAC,IAAM,IAAM,CAACP,GAAMO,EAAG,CAAC,EAAIP,EAAE,CAAC,GAAKO,EAAG,CAAC,EAAIP,EAAE,CAAC,GAAK,CAAED,EAAE,MAAQQ,EAAG,CAAC,EAAG,KAAM,CACpF,GAAIA,EAAG,CAAC,IAAM,GAAKR,EAAE,MAAQC,EAAE,CAAC,EAAG,CAAED,EAAE,MAAQC,EAAE,CAAC,EAAGA,EAAIO,EAAI,KAAM,CACnE,GAAIP,GAAKD,EAAE,MAAQC,EAAE,CAAC,EAAG,CAAED,EAAE,MAAQC,EAAE,CAAC,EAAGD,EAAE,IAAI,KAAKQ,CAAE,EAAG,KAAM,CAC7DP,EAAE,CAAC,GAAGD,EAAE,IAAI,IAAK,EACrBA,EAAE,KAAK,IAAG,EAAI,QAChC,CACUQ,EAAKT,EAAK,KAAKd,EAASe,CAAC,CAC5B,OAAQL,EAAG,CAAEa,EAAK,CAAC,EAAGb,CAAC,EAAGQ,EAAI,CAAI,QAAA,CAAWD,EAAID,EAAI,CAAE,CACxD,GAAIO,EAAG,CAAC,EAAI,EAAG,MAAMA,EAAG,CAAC,EAAG,MAAO,CAAE,MAAOA,EAAG,CAAC,EAAIA,EAAG,CAAC,EAAI,OAAQ,KAAM,EAAM,CACtF,CACA,CA8BO,SAASC,GAAOC,EAAGJ,EAAG,CAC3B,IAAIK,EAAI,OAAO,QAAW,YAAcD,EAAE,OAAO,QAAQ,EACzD,GAAI,CAACC,EAAG,OAAOD,EACf,IAAIE,EAAID,EAAE,KAAKD,CAAC,EAAGG,EAAGC,EAAK,CAAA,EAAInB,EAC/B,GAAI,CACA,MAAQW,IAAM,QAAUA,KAAM,IAAM,EAAEO,EAAID,EAAE,KAAM,GAAE,MAAME,EAAG,KAAKD,EAAE,KAAK,CAC/E,OACSE,EAAO,CAAEpB,EAAI,CAAE,MAAOoB,CAAK,CAAG,QAC7B,CACJ,GAAI,CACIF,GAAK,CAACA,EAAE,OAASF,EAAIC,EAAE,SAAYD,EAAE,KAAKC,CAAC,CACzD,QACc,CAAE,GAAIjB,EAAG,MAAMA,EAAE,KAAM,CACrC,CACE,OAAOmB,CACT,CAkBO,SAASE,GAAcC,EAAIC,EAAMC,EAAM,CAC5C,GAAIA,GAAQ,UAAU,SAAW,EAAG,QAASP,EAAI,EAAGQ,EAAIF,EAAK,OAAQJ,EAAIF,EAAIQ,EAAGR,KACxEE,GAAM,EAAEF,KAAKM,MACRJ,IAAIA,EAAK,MAAM,UAAU,MAAM,KAAKI,EAAM,EAAGN,CAAC,GACnDE,EAAGF,CAAC,EAAIM,EAAKN,CAAC,GAGtB,OAAOK,EAAG,OAAOH,GAAM,MAAM,UAAU,MAAM,KAAKI,CAAI,CAAC,CACzD,CC7NO,IAAIG,GAAoB,IAAI,IAAI,CAEnC,CAAC,MAAO,WAAW,EACnB,CAAC,MAAO,uBAAuB,EAC/B,CAAC,MAAO,uBAAuB,EAC/B,CAAC,OAAQ,YAAY,EACrB,CAAC,MAAO,iBAAiB,EACzB,CAAC,MAAO,8BAA8B,EACtC,CAAC,MAAO,0BAA0B,EAClC,CAAC,MAAO,WAAW,EACnB,CAAC,KAAM,oBAAoB,EAC3B,CAAC,MAAO,qBAAqB,EAC7B,CAAC,MAAO,mBAAmB,EAC3B,CAAC,MAAO,mBAAmB,EAC3B,CAAC,MAAO,UAAU,EAClB,CAAC,MAAO,UAAU,EAClB,CAAC,MAAO,oBAAoB,EAC5B,CAAC,OAAQ,yEAAyE,EAClF,CAAC,MAAO,+BAA+B,EACvC,CAAC,OAAQ,sBAAsB,EAC/B,CAAC,KAAM,kBAAkB,EACzB,CAAC,MAAO,WAAW,EACnB,CAAC,OAAQ,YAAY,EACrB,CAAC,OAAQ,YAAY,EACrB,CAAC,MAAO,WAAW,EACnB,CAAC,OAAQ,WAAW,EACpB,CAAC,MAAO,0BAA0B,EAClC,CAAC,MAAO,eAAe,EACvB,CAAC,MAAO,0BAA0B,EAClC,CAAC,OAAQ,YAAY,EACrB,CAAC,MAAO,YAAY,EACpB,CAAC,KAAM,iBAAiB,EACxB,CAAC,OAAQ,kBAAkB,EAC3B,CAAC,SAAU,qBAAqB,EAChC,CAAC,MAAO,YAAY,EACpB,CAAC,OAAQ,YAAY,EACrB,CAAC,MAAO,iBAAiB,EACzB,CAAC,MAAO,YAAY,EACpB,CAAC,MAAO,WAAW,EACnB,CAAC,OAAQ,YAAY,EACrB,CAAC,OAAQ,qCAAqC,EAC9C,CAAC,MAAO,iDAAiD,EACzD,CAAC,MAAO,gDAAgD,EACxD,CAAC,MAAO,yCAAyC,EACjD,CAAC,MAAO,WAAW,EACnB,CAAC,MAAO,WAAW,EACnB,CAAC,MAAO,iBAAiB,EACzB,CAAC,OAAQ,YAAY,EACrB,CAAC,MAAO,UAAU,EAClB,CAAC,MAAO,WAAW,EACnB,CAAC,MAAO,iBAAiB,EACzB,CAAC,MAAO,yBAAyB,EACjC,CAAC,MAAO,+BAA+B,EACvC,CAAC,OAAQ,2EAA2E,EACpF,CAAC,MAAO,qBAAqB,EAC7B,CAAC,MAAO,iBAAiB,EACzB,CAAC,KAAM,kBAAkB,EACzB,CAAC,MAAO,eAAe,EACvB,CAAC,MAAO,+BAA+B,EACvC,CAAC,MAAO,mBAAmB,EAC3B,CAAC,MAAO,YAAY,EACpB,CAAC,OAAQ,YAAY,EACrB,CAAC,KAAM,YAAY,EACnB,CAAC,MAAO,UAAU,EAClB,CAAC,MAAO,YAAY,EACpB,CAAC,MAAO,uBAAuB,EAC/B,CAAC,MAAO,WAAW,EACnB,CAAC,OAAQ,YAAY,EACrB,CAAC,OAAQ,YAAY,EACrB,CAAC,OAAQ,YAAY,EACrB,CAAC,OAAQ,WAAW,EACpB,CAAC,QAAS,YAAY,EACtB,CAAC,QAAS,uBAAuB,EACjC,CAAC,MAAO,0BAA0B,EAClC,CAAC,OAAQ,mEAAmE,EAC5E,CAAC,MAAO,iBAAiB,EACzB,CAAC,MAAO,iCAAiC,EACzC,CAAC,MAAO,iBAAiB,EACzB,CAAC,KAAM,6BAA6B,EAEpC,CAAC,MAAO,kBAAkB,EAC1B,CAAC,MAAO,iBAAiB,EACzB,CAAC,MAAO,4BAA4B,CACxC,CAAC,EACM,SAASC,GAAeC,EAAMC,EAAM,CACvC,IAAItB,EAAIuB,GAAaF,CAAI,EACzB,GAAI,OAAOrB,EAAE,MAAS,SAAU,CAC5B,IAAIwB,EAAqBH,EAAK,mBAC9B,OAAO,eAAerB,EAAG,OAAQ,CAC7B,MAAO,OAAOsB,GAAS,SACjBA,EAIA,OAAOE,GAAuB,UAAYA,EAAmB,OAAS,EAClEA,EACAH,EAAK,KACf,SAAU,GACV,aAAc,GACd,WAAY,EACxB,CAAS,CACT,CACI,OAAOrB,CACX,CACA,SAASuB,GAAaF,EAAM,CACxB,IAAII,EAAOJ,EAAK,KACZK,EAAeD,GAAQA,EAAK,YAAY,GAAG,IAAM,GACrD,GAAIC,GAAgB,CAACL,EAAK,KAAM,CAC5B,IAAIM,EAAMF,EAAK,MAAM,GAAG,EACnB,IAAG,EAAG,YAAa,EACpBG,EAAOT,GAAkB,IAAIQ,CAAG,EAChCC,GACA,OAAO,eAAeP,EAAM,OAAQ,CAChC,MAAOO,EACP,SAAU,GACV,aAAc,GACd,WAAY,EAC5B,CAAa,CAEb,CACI,OAAOP,CACX,CCvHA,IAAIQ,GAAkB,CAElB,YACA,WACJ,EAWO,SAASC,GAAUC,EAAK,CAC3B,OAAOjD,GAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,OAAOc,GAAY,KAAM,SAAUoC,EAAI,CACnC,OAAIC,GAASF,CAAG,GAAKG,GAAeH,EAAI,YAAY,EACzC,CAAC,EAAcI,GAAqBJ,EAAI,aAAcA,EAAI,IAAI,CAAC,EAEjEK,GAAYL,CAAG,EACb,CAAC,EAAcM,GAAcN,CAAG,CAAC,EAEnC,MAAM,QAAQA,CAAG,GAAKA,EAAI,MAAM,SAAUO,EAAM,CAAE,MAAO,YAAaA,GAAQ,OAAOA,EAAK,SAAY,UAAW,CAAE,EACjH,CAAC,EAAcC,GAAiBR,CAAG,CAAC,EAExC,CAAC,EAAc,EAAE,CACpC,CAAS,CACT,CAAK,CACL,CACA,SAASG,GAAe9C,EAAO,CAC3B,OAAO6C,GAAS7C,CAAK,CACzB,CACA,SAASgD,GAAYhD,EAAO,CACxB,OAAO6C,GAAS7C,CAAK,GAAK6C,GAAS7C,EAAM,MAAM,CACnD,CACA,SAAS6C,GAAS5B,EAAG,CACjB,OAAO,OAAOA,GAAM,UAAYA,IAAM,IAC1C,CACA,SAASgC,GAAcN,EAAK,CACxB,OAAOS,GAAST,EAAI,OAAO,KAAK,EAAE,IAAI,SAAUV,EAAM,CAAE,OAAOD,GAAeC,CAAI,CAAE,CAAE,CAC1F,CAEA,SAASkB,GAAiBE,EAAS,CAC/B,OAAO3D,GAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI4D,EACJ,OAAO9C,GAAY,KAAM,SAAUoC,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAa,QAAQ,IAAIS,EAAQ,IAAI,SAAUE,EAAG,CAAE,OAAOA,EAAE,QAAO,CAAG,CAAE,CAAC,CAAC,EAC3F,IAAK,GACD,OAAAD,EAAQV,EAAG,KAAM,EACV,CAAC,EAAcU,EAAM,IAAI,SAAUrB,EAAM,CAAE,OAAOD,GAAeC,CAAI,CAAE,CAAE,CAAC,CACrG,CACA,CAAS,CACT,CAAK,CACL,CACA,SAASc,GAAqBS,EAAIhB,EAAM,CACpC,OAAO9C,GAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI+D,EAAOH,EACX,OAAO9C,GAAY,KAAM,SAAUoC,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GACD,OAAKY,EAAG,OACRC,EAAQL,GAASI,EAAG,KAAK,EACpB,OAAO,SAAUN,EAAM,CAAE,OAAOA,EAAK,OAAS,OAAS,EAGxDV,IAAS,OACF,CAAC,EAAciB,CAAK,EAExB,CAAC,EAAa,QAAQ,IAAIA,EAAM,IAAIC,EAAc,CAAC,CAAC,GARrC,CAAC,EAAa,CAAC,EASzC,IAAK,GACD,OAAAJ,EAAQV,EAAG,KAAM,EACV,CAAC,EAAce,GAAeC,GAAQN,CAAK,CAAC,CAAC,EACxD,IAAK,GAAG,MAAO,CAAC,EAAcK,GAAeP,GAASI,EAAG,KAAK,EACrD,IAAI,SAAUvB,EAAM,CAAE,OAAOD,GAAeC,CAAI,CAAI,CAAA,CAAC,CAAC,CAC/E,CACA,CAAS,CACT,CAAK,CACL,CACA,SAAS0B,GAAeL,EAAO,CAC3B,OAAOA,EAAM,OAAO,SAAUrB,EAAM,CAAE,OAAOQ,GAAgB,QAAQR,EAAK,IAAI,IAAM,EAAG,CAAE,CAC7F,CAKA,SAASmB,GAASK,EAAO,CACrB,GAAIA,IAAU,KACV,MAAO,CAAE,EAIb,QAFIH,EAAQ,CAAE,EAELhC,EAAI,EAAGA,EAAImC,EAAM,OAAQnC,IAAK,CACnC,IAAIW,EAAOwB,EAAMnC,CAAC,EAClBgC,EAAM,KAAKrB,CAAI,CACvB,CACI,OAAOqB,CACX,CAEA,SAASI,GAAeR,EAAM,CAC1B,GAAI,OAAOA,EAAK,kBAAqB,WACjC,OAAOW,GAAqBX,CAAI,EAEpC,IAAIY,EAAQZ,EAAK,iBAAkB,EAInC,OAAIY,GAASA,EAAM,YACRC,GAAaD,CAAK,EAEtBD,GAAqBX,CAAI,CACpC,CACA,SAASU,GAAQH,EAAO,CACpB,OAAOA,EAAM,OAAO,SAAUO,EAAKV,EAAO,CAAE,OAAO5B,GAAcA,GAAc,CAAE,EAAEP,GAAO6C,CAAG,EAAG,EAAK,EAAG7C,GAAQ,MAAM,QAAQmC,CAAK,EAAIM,GAAQN,CAAK,EAAI,CAACA,CAAK,CAAC,EAAI,EAAK,CAAE,EAAI,CAAA,CAAE,CACpL,CACA,SAASO,GAAqBX,EAAM,CAChC,IAAIjB,EAAOiB,EAAK,UAAW,EAC3B,GAAI,CAACjB,EACD,OAAO,QAAQ,OAAO,GAAG,OAAOiB,EAAM,gBAAgB,CAAC,EAE3D,IAAIe,EAAMjC,GAAeC,CAAI,EAC7B,OAAO,QAAQ,QAAQgC,CAAG,CAC9B,CAEA,SAASC,GAAUJ,EAAO,CACtB,OAAOpE,GAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,OAAOc,GAAY,KAAM,SAAUoC,EAAI,CACnC,MAAO,CAAC,EAAckB,EAAM,YAAcC,GAAaD,CAAK,EAAIK,GAAcL,CAAK,CAAC,CAChG,CAAS,CACT,CAAK,CACL,CAEA,SAASC,GAAaD,EAAO,CACzB,IAAIM,EAASN,EAAM,aAAc,EACjC,OAAO,IAAI,QAAQ,SAAU7D,EAASC,EAAQ,CAC1C,IAAImE,EAAU,CAAE,EAChB,SAASC,GAAc,CACnB,IAAIC,EAAQ,KAGZH,EAAO,YAAY,SAAUI,EAAO,CAAE,OAAO9E,GAAU6E,EAAO,OAAQ,OAAQ,UAAY,CACtF,IAAIjB,EAAOmB,EAAOhB,EAClB,OAAOjD,GAAY,KAAM,SAAUoC,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GACD,GAAM4B,EAAM,OAAQ,MAAO,CAAC,EAAa,CAAC,EAC1C5B,EAAG,MAAQ,EACf,IAAK,GACD,OAAAA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAK,CAAA,CAAC,CAAC,EACjB,CAAC,EAAa,QAAQ,IAAIyB,CAAO,CAAC,EAC7C,IAAK,GACD,OAAAf,EAAQV,EAAG,KAAM,EACjB3C,EAAQqD,CAAK,EACN,CAAC,EAAa,CAAC,EAC1B,IAAK,GACD,OAAAmB,EAAQ7B,EAAG,KAAM,EACjB1C,EAAOuE,CAAK,EACL,CAAC,EAAa,CAAC,EAC1B,IAAK,GAAG,MAAO,CAAC,EAAa,CAAC,EAC9B,IAAK,GACDhB,EAAQ,QAAQ,IAAIe,EAAM,IAAIN,EAAS,CAAC,EACxCG,EAAQ,KAAKZ,CAAK,EAElBa,EAAa,EACb1B,EAAG,MAAQ,EACf,IAAK,GAAG,MAAO,CAAC,CAAa,CACrD,CACA,CAAiB,CACjB,CAAa,CAAE,EAAI,SAAU8B,EAAK,CAClBxE,EAAOwE,CAAG,CAC1B,CAAa,CACb,CACQJ,EAAa,CACrB,CAAK,CACL,CAEA,SAASH,GAAcL,EAAO,CAC1B,OAAOpE,GAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,OAAOc,GAAY,KAAM,SAAUoC,EAAI,CACnC,MAAO,CAAC,EAAc,IAAI,QAAQ,SAAU3C,EAASC,EAAQ,CACrD4D,EAAM,KAAK,SAAU7B,EAAM,CACvB,IAAIgC,EAAMjC,GAAeC,EAAM6B,EAAM,QAAQ,EAC7C7D,EAAQgE,CAAG,CACd,EAAE,SAAUS,EAAK,CACdxE,EAAOwE,CAAG,CAClC,CAAqB,CACrB,CAAiB,CAAC,CAClB,CAAS,CACT,CAAK,CACL,CC7LA,IAAAC,GAAkB,SAAU1C,EAAM2C,EAAe,CAC/C,GAAI3C,GAAQ2C,EAAe,CACzB,IAAIC,EAAqB,MAAM,QAAQD,CAAa,EAAIA,EAAgBA,EAAc,MAAM,GAAG,EAC3FE,EAAW7C,EAAK,MAAQ,GACxB8C,GAAY9C,EAAK,MAAQ,IAAI,YAAa,EAC1C+C,EAAeD,EAAS,QAAQ,QAAS,EAAE,EAC/C,OAAOF,EAAmB,KAAK,SAAUrC,EAAM,CAC7C,IAAIyC,EAAYzC,EAAK,KAAI,EAAG,YAAa,EAEzC,OAAIyC,EAAU,OAAO,CAAC,IAAM,IACnBH,EAAS,cAAc,SAASG,CAAS,EACvCA,EAAU,SAAS,IAAI,EAEzBD,IAAiBC,EAAU,QAAQ,QAAS,EAAE,EAGhDF,IAAaE,CAC1B,CAAK,CACL,CAEE,MAAO,EACT,ECzBA,SAASC,GAAmBC,EAAK,CAAE,OAAOC,GAAmBD,CAAG,GAAKE,GAAiBF,CAAG,GAAKG,GAA4BH,CAAG,GAAKI,GAAkB,CAAG,CAEvJ,SAASA,IAAqB,CAAE,MAAM,IAAI,UAAU;AAAA,mFAAsI,CAAE,CAE5L,SAASF,GAAiBG,EAAM,CAAE,GAAI,OAAO,OAAW,KAAeA,EAAK,OAAO,QAAQ,GAAK,MAAQA,EAAK,YAAY,GAAK,KAAM,OAAO,MAAM,KAAKA,CAAI,CAAE,CAE5J,SAASJ,GAAmBD,EAAK,CAAE,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOM,GAAkBN,CAAG,CAAE,CAEzF,SAASO,GAAQC,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAa,CAAA,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,EAAK,OAAOD,CAAK,CAEnV,SAASG,GAAcC,EAAQ,CAAE,QAAS3E,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI4E,EAAiB,UAAU5E,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAA,EAAIA,EAAI,EAAIoE,GAAQ,OAAOQ,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBH,EAAQE,EAAKD,EAAOC,CAAG,CAAC,CAAI,CAAA,EAAI,OAAO,0BAA4B,OAAO,iBAAiBF,EAAQ,OAAO,0BAA0BC,CAAM,CAAC,EAAIR,GAAQ,OAAOQ,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeF,EAAQE,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAI,CAAA,CAAE,CAAG,OAAOF,CAAO,CAExf,SAASG,GAAgBC,EAAKF,EAAKnG,EAAO,CAAE,OAAImG,KAAOE,EAAO,OAAO,eAAeA,EAAKF,EAAK,CAAE,MAAOnG,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,CAAA,EAAYqG,EAAIF,CAAG,EAAInG,EAAgBqG,CAAI,CAI/M,SAASC,GAAenB,EAAK7D,EAAG,CAAE,OAAOiF,GAAgBpB,CAAG,GAAKqB,GAAsBrB,EAAK7D,CAAC,GAAKgE,GAA4BH,EAAK7D,CAAC,GAAKmF,IAAmB,CAE5J,SAASA,IAAmB,CAAE,MAAM,IAAI,UAAU;AAAA,mFAA2I,CAAE,CAE/L,SAASnB,GAA4BlE,EAAGsF,EAAQ,CAAE,GAAKtF,EAAW,IAAI,OAAOA,GAAM,SAAU,OAAOqE,GAAkBrE,EAAGsF,CAAM,EAAG,IAAI,EAAI,OAAO,UAAU,SAAS,KAAKtF,CAAC,EAAE,MAAM,EAAG,EAAE,EAAgE,GAAzD,IAAM,UAAYA,EAAE,cAAa,EAAIA,EAAE,YAAY,MAAU,IAAM,OAAS,IAAM,MAAO,OAAO,MAAM,KAAKA,CAAC,EAAG,GAAI,IAAM,aAAe,2CAA2C,KAAK,CAAC,EAAG,OAAOqE,GAAkBrE,EAAGsF,CAAM,EAAE,CAE9Z,SAASjB,GAAkBN,EAAKwB,EAAK,EAAMA,GAAO,MAAQA,EAAMxB,EAAI,UAAQwB,EAAMxB,EAAI,QAAQ,QAAS7D,EAAI,EAAGsF,EAAO,IAAI,MAAMD,CAAG,EAAGrF,EAAIqF,EAAKrF,IAAOsF,EAAKtF,CAAC,EAAI6D,EAAI7D,CAAC,EAAK,OAAOsF,CAAK,CAErL,SAASJ,GAAsBrB,EAAK7D,EAAG,CAAE,IAAIuF,EAAK1B,GAAO,KAAO,KAAO,OAAO,OAAW,KAAeA,EAAI,OAAO,QAAQ,GAAKA,EAAI,YAAY,EAAG,GAAI0B,GAAM,KAAc,KAAIC,EAAO,CAAE,EAAMC,EAAK,GAAUC,EAAK,GAAWC,EAAIC,EAAI,GAAI,CAAE,IAAKL,EAAKA,EAAG,KAAK1B,CAAG,EAAG,EAAE4B,GAAME,EAAKJ,EAAG,QAAQ,QAAoBC,EAAK,KAAKG,EAAG,KAAK,EAAO,EAAA3F,GAAKwF,EAAK,SAAWxF,IAA3DyF,EAAK,GAA6B,CAAoC,OAAUrC,EAAK,CAAEsC,EAAK,GAAME,EAAKxC,CAAM,QAAA,CAAW,GAAI,CAAM,CAACqC,GAAMF,EAAG,QAAa,MAAMA,EAAG,OAAS,CAAK,QAAA,CAAW,GAAIG,EAAI,MAAME,CAAG,EAAK,OAAOJ,EAAK,CAE/f,SAASP,GAAgBpB,EAAK,CAAE,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOA,CAAI,CAI5D,IAAIgC,GAAoB,oBACpBC,GAAiB,iBACjBC,GAAiB,iBACjBC,GAAiB,iBAQjBC,GAA6B,SAAoCC,EAAQ,CAClFA,EAAS,MAAM,QAAQA,CAAM,GAAKA,EAAO,SAAW,EAAIA,EAAO,CAAC,EAAIA,EACpE,IAAIC,EAAgB,MAAM,QAAQD,CAAM,EAAI,UAAU,OAAOA,EAAO,KAAK,IAAI,CAAC,EAAIA,EAClF,MAAO,CACL,KAAML,GACN,QAAS,qBAAqB,OAAOM,CAAa,CACnD,CACH,EACWC,GAA0B,SAAiCC,EAAS,CAC7E,MAAO,CACL,KAAMP,GACN,QAAS,uBAAuB,OAAOO,EAAS,GAAG,EAAE,OAAOA,IAAY,EAAI,OAAS,OAAO,CAC7F,CACH,EACWC,GAA0B,SAAiCC,EAAS,CAC7E,MAAO,CACL,KAAMR,GACN,QAAS,wBAAwB,OAAOQ,EAAS,GAAG,EAAE,OAAOA,IAAY,EAAI,OAAS,OAAO,CAC9F,CACH,EACWC,GAA2B,CACpC,KAAMR,GACN,QAAS,gBACX,EAGO,SAASS,GAAa9F,EAAMuF,EAAQ,CACzC,IAAIQ,EAAe/F,EAAK,OAAS,0BAA4BgG,GAAQhG,EAAMuF,CAAM,EACjF,MAAO,CAACQ,EAAcA,EAAe,KAAOT,GAA2BC,CAAM,CAAC,CAChF,CACO,SAASU,GAAcjG,EAAM4F,EAASF,EAAS,CACpD,GAAIQ,GAAUlG,EAAK,IAAI,EACrB,GAAIkG,GAAUN,CAAO,GAAKM,GAAUR,CAAO,EAAG,CAC5C,GAAI1F,EAAK,KAAO0F,EAAS,MAAO,CAAC,GAAOD,GAAwBC,CAAO,CAAC,EACxE,GAAI1F,EAAK,KAAO4F,EAAS,MAAO,CAAC,GAAOD,GAAwBC,CAAO,CAAC,CACzE,KAAM,IAAIM,GAAUN,CAAO,GAAK5F,EAAK,KAAO4F,EAAS,MAAO,CAAC,GAAOD,GAAwBC,CAAO,CAAC,EAAO,GAAIM,GAAUR,CAAO,GAAK1F,EAAK,KAAO0F,EAAS,MAAO,CAAC,GAAOD,GAAwBC,CAAO,CAAC,EAG5M,MAAO,CAAC,GAAM,IAAI,CACpB,CAEA,SAASQ,GAAUnI,EAAO,CACxB,OAA8BA,GAAU,IAC1C,CAeO,SAASoI,GAAiBC,EAAM,CACrC,IAAI/E,EAAQ+E,EAAK,MACbb,EAASa,EAAK,OACdR,EAAUQ,EAAK,QACfV,EAAUU,EAAK,QACfC,EAAWD,EAAK,SAChBE,EAAWF,EAAK,SAChBG,EAAYH,EAAK,UAErB,MAAI,CAACC,GAAYhF,EAAM,OAAS,GAAKgF,GAAYC,GAAY,GAAKjF,EAAM,OAASiF,EACxE,GAGFjF,EAAM,MAAM,SAAUrB,EAAM,CACjC,IAAIwG,EAAgBV,GAAa9F,EAAMuF,CAAM,EACzCkB,EAAiBpC,GAAemC,EAAe,CAAC,EAChDE,EAAWD,EAAe,CAAC,EAE3BE,EAAiBV,GAAcjG,EAAM4F,EAASF,CAAO,EACrDkB,EAAkBvC,GAAesC,EAAgB,CAAC,EAClDE,EAAYD,EAAgB,CAAC,EAE7BE,EAAeP,EAAYA,EAAUvG,CAAI,EAAI,KACjD,OAAO0G,GAAYG,GAAa,CAACC,CACrC,CAAG,CACH,CAIO,SAASC,GAAqBC,EAAO,CAC1C,OAAI,OAAOA,EAAM,sBAAyB,WACjCA,EAAM,qBAAsB,EAC1B,OAAOA,EAAM,aAAiB,IAChCA,EAAM,aAGR,EACT,CACO,SAASC,GAAeD,EAAO,CACpC,OAAKA,EAAM,aAMJ,MAAM,UAAU,KAAK,KAAKA,EAAM,aAAa,MAAO,SAAUzG,EAAM,CACzE,OAAOA,IAAS,SAAWA,IAAS,wBACxC,CAAG,EAPQ,CAAC,CAACyG,EAAM,QAAU,CAAC,CAACA,EAAM,OAAO,KAQ5C,CAKO,SAASE,GAAmBF,EAAO,CACxCA,EAAM,eAAgB,CACxB,CAEA,SAASG,GAAKC,EAAW,CACvB,OAAOA,EAAU,QAAQ,MAAM,IAAM,IAAMA,EAAU,QAAQ,UAAU,IAAM,EAC/E,CAEA,SAASC,GAAOD,EAAW,CACzB,OAAOA,EAAU,QAAQ,OAAO,IAAM,EACxC,CAEO,SAASE,IAAa,CAC3B,IAAIF,EAAY,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,OAAO,UAAU,UACrG,OAAOD,GAAKC,CAAS,GAAKC,GAAOD,CAAS,CAC5C,CAYO,SAASG,IAAuB,CACrC,QAASC,EAAO,UAAU,OAAQC,EAAM,IAAI,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC9ED,EAAIC,CAAI,EAAI,UAAUA,CAAI,EAG5B,OAAO,SAAUV,EAAO,CACtB,QAASW,EAAQ,UAAU,OAAQC,EAAO,IAAI,MAAMD,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGE,EAAQ,EAAGA,EAAQF,EAAOE,IACxGD,EAAKC,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAGnC,OAAOJ,EAAI,KAAK,SAAUK,EAAI,CAC5B,MAAI,CAACf,GAAqBC,CAAK,GAAKc,GAClCA,EAAG,MAAM,OAAQ,CAACd,CAAK,EAAE,OAAOY,CAAI,CAAC,EAGhCb,GAAqBC,CAAK,CACvC,CAAK,CACF,CACH,CAOO,SAASe,IAA4B,CAC1C,MAAO,uBAAwB,MACjC,CASO,SAASC,GAAwBzC,EAAQ,CAC9C,GAAIW,GAAUX,CAAM,EAAG,CACrB,IAAI0C,EAAkB,OAAO,QAAQ1C,CAAM,EAAE,OAAO,SAAU2C,EAAO,CACnE,IAAIC,EAAQ9D,GAAe6D,EAAO,CAAC,EAC/BpF,EAAWqF,EAAM,CAAC,EAClB7H,EAAM6H,EAAM,CAAC,EAEbC,EAAK,GAET,OAAKC,GAAWvF,CAAQ,IACtB,QAAQ,KAAK,YAAa,OAAOA,EAAU,uKAAwK,CAAC,EACpNsF,EAAK,KAGH,CAAC,MAAM,QAAQ9H,CAAG,GAAK,CAACA,EAAI,MAAMgI,EAAK,KACzC,QAAQ,KAAK,YAAa,OAAOxF,EAAU,mDAAoD,CAAC,EAChGsF,EAAK,IAGAA,CACR,CAAA,EAAE,OAAO,SAAUG,EAAKC,EAAO,CAC9B,IAAIC,EAAQpE,GAAemE,EAAO,CAAC,EAC/B1F,EAAW2F,EAAM,CAAC,EAClBnI,EAAMmI,EAAM,CAAC,EAEjB,OAAO1E,GAAcA,GAAc,CAAE,EAAEwE,CAAG,EAAG,GAAIpE,GAAgB,CAAE,EAAErB,EAAUxC,CAAG,CAAC,CACpF,EAAE,EAAE,EACL,MAAO,CAAC,CAEN,YAAa,QACb,OAAQ2H,CACd,CAAK,CACL,CAEE,OAAO1C,CACT,CAOO,SAASmD,GAAuBnD,EAAQ,CAC7C,GAAIW,GAAUX,CAAM,EAClB,OAAO,OAAO,QAAQA,CAAM,EAAE,OAAO,SAAUoD,EAAGC,EAAO,CACvD,IAAIC,EAAQxE,GAAeuE,EAAO,CAAC,EAC/B9F,EAAW+F,EAAM,CAAC,EAClBvI,EAAMuI,EAAM,CAAC,EAEjB,MAAO,CAAE,EAAC,OAAO5F,GAAmB0F,CAAC,EAAG,CAAC7F,CAAQ,EAAGG,GAAmB3C,CAAG,CAAC,CAC5E,EAAE,EAAE,EACJ,OAAO,SAAUtB,EAAG,CACnB,OAAOqJ,GAAWrJ,CAAC,GAAKsJ,GAAMtJ,CAAC,CACrC,CAAK,EAAE,KAAK,GAAG,CAIf,CASO,SAAS8J,GAAQ9J,EAAG,CACzB,OAAOA,aAAa,eAAiBA,EAAE,OAAS,cAAgBA,EAAE,OAASA,EAAE,UAC/E,CASO,SAAS+J,GAAgB/J,EAAG,CACjC,OAAOA,aAAa,eAAiBA,EAAE,OAAS,iBAAmBA,EAAE,OAASA,EAAE,aAClF,CASO,SAASqJ,GAAWrJ,EAAG,CAC5B,OAAOA,IAAM,WAAaA,IAAM,WAAaA,IAAM,WAAaA,IAAM,UAAY,iBAAiB,KAAKA,CAAC,CAC3G,CAMO,SAASsJ,GAAMtJ,EAAG,CACvB,MAAO,cAAc,KAAKA,CAAC,CAC7B,CCzTA,IAAIgK,GAAY,CAAC,UAAU,EACvBC,GAAa,CAAC,MAAM,EACpBC,GAAa,CAAC,SAAU,OAAQ,YAAa,UAAW,SAAU,UAAW,cAAe,aAAc,cAAe,QAAQ,EACjIC,GAAa,CAAC,SAAU,WAAY,SAAS,EAEjD,SAASlG,GAAmBC,EAAK,CAAE,OAAOC,GAAmBD,CAAG,GAAKE,GAAiBF,CAAG,GAAKG,GAA4BH,CAAG,GAAKI,GAAkB,CAAG,CAEvJ,SAASA,IAAqB,CAAE,MAAM,IAAI,UAAU;AAAA,mFAAsI,CAAE,CAE5L,SAASF,GAAiBG,EAAM,CAAE,GAAI,OAAO,OAAW,KAAeA,EAAK,OAAO,QAAQ,GAAK,MAAQA,EAAK,YAAY,GAAK,KAAM,OAAO,MAAM,KAAKA,CAAI,CAAE,CAE5J,SAASJ,GAAmBD,EAAK,CAAE,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOM,GAAkBN,CAAG,CAAE,CAEzF,SAASmB,GAAenB,EAAK7D,EAAG,CAAE,OAAOiF,GAAgBpB,CAAG,GAAKqB,GAAsBrB,EAAK7D,CAAC,GAAKgE,GAA4BH,EAAK7D,CAAC,GAAKmF,IAAmB,CAE5J,SAASA,IAAmB,CAAE,MAAM,IAAI,UAAU;AAAA,mFAA2I,CAAE,CAE/L,SAASnB,GAA4BlE,EAAGsF,EAAQ,CAAE,GAAKtF,EAAW,IAAI,OAAOA,GAAM,SAAU,OAAOqE,GAAkBrE,EAAGsF,CAAM,EAAG,IAAI,EAAI,OAAO,UAAU,SAAS,KAAKtF,CAAC,EAAE,MAAM,EAAG,EAAE,EAAgE,GAAzD,IAAM,UAAYA,EAAE,cAAa,EAAIA,EAAE,YAAY,MAAU,IAAM,OAAS,IAAM,MAAO,OAAO,MAAM,KAAKA,CAAC,EAAG,GAAI,IAAM,aAAe,2CAA2C,KAAK,CAAC,EAAG,OAAOqE,GAAkBrE,EAAGsF,CAAM,EAAE,CAE9Z,SAASjB,GAAkBN,EAAKwB,EAAK,EAAMA,GAAO,MAAQA,EAAMxB,EAAI,UAAQwB,EAAMxB,EAAI,QAAQ,QAAS7D,EAAI,EAAGsF,EAAO,IAAI,MAAMD,CAAG,EAAGrF,EAAIqF,EAAKrF,IAAOsF,EAAKtF,CAAC,EAAI6D,EAAI7D,CAAC,EAAK,OAAOsF,CAAK,CAErL,SAASJ,GAAsBrB,EAAK7D,EAAG,CAAE,IAAIuF,EAAK1B,GAAO,KAAO,KAAO,OAAO,OAAW,KAAeA,EAAI,OAAO,QAAQ,GAAKA,EAAI,YAAY,EAAG,GAAI0B,GAAM,KAAc,KAAIC,EAAO,CAAE,EAAMC,EAAK,GAAUC,EAAK,GAAWC,EAAIC,EAAI,GAAI,CAAE,IAAKL,EAAKA,EAAG,KAAK1B,CAAG,EAAG,EAAE4B,GAAME,EAAKJ,EAAG,QAAQ,QAAoBC,EAAK,KAAKG,EAAG,KAAK,EAAO,EAAA3F,GAAKwF,EAAK,SAAWxF,IAA3DyF,EAAK,GAA6B,CAAoC,OAAUrC,EAAK,CAAEsC,EAAK,GAAME,EAAKxC,CAAM,QAAA,CAAW,GAAI,CAAM,CAACqC,GAAMF,EAAG,QAAa,MAAMA,EAAG,OAAS,CAAK,QAAA,CAAW,GAAIG,EAAI,MAAME,CAAG,EAAK,OAAOJ,EAAK,CAE/f,SAASP,GAAgBpB,EAAK,CAAE,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOA,CAAI,CAEnE,SAASO,GAAQC,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAa,CAAA,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,EAAK,OAAOD,CAAK,CAEnV,SAASG,EAAcC,EAAQ,CAAE,QAAS3E,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI4E,EAAiB,UAAU5E,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAA,EAAIA,EAAI,EAAIoE,GAAQ,OAAOQ,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBH,EAAQE,EAAKD,EAAOC,CAAG,CAAC,CAAI,CAAA,EAAI,OAAO,0BAA4B,OAAO,iBAAiBF,EAAQ,OAAO,0BAA0BC,CAAM,CAAC,EAAIR,GAAQ,OAAOQ,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeF,EAAQE,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAI,CAAA,CAAE,CAAG,OAAOF,CAAO,CAExf,SAASG,GAAgBC,EAAKF,EAAKnG,EAAO,CAAE,OAAImG,KAAOE,EAAO,OAAO,eAAeA,EAAKF,EAAK,CAAE,MAAOnG,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,CAAA,EAAYqG,EAAIF,CAAG,EAAInG,EAAgBqG,CAAI,CAE/M,SAASgF,GAAyBnF,EAAQoF,EAAU,CAAE,GAAIpF,GAAU,KAAM,MAAO,GAAI,IAAID,EAASsF,GAA8BrF,EAAQoF,CAAQ,EAAOnF,EAAK,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIqF,EAAmB,OAAO,sBAAsBtF,CAAM,EAAG,IAAK,EAAI,EAAG,EAAIsF,EAAiB,OAAQ,IAAOrF,EAAMqF,EAAiB,CAAC,EAAO,EAAAF,EAAS,QAAQnF,CAAG,GAAK,IAAkB,OAAO,UAAU,qBAAqB,KAAKD,EAAQC,CAAG,IAAaF,EAAOE,CAAG,EAAID,EAAOC,CAAG,EAAM,CAAC,OAAOF,CAAO,CAE1e,SAASsF,GAA8BrF,EAAQoF,EAAU,CAAE,GAAIpF,GAAU,KAAM,MAAO,CAAE,EAAE,IAAID,EAAS,CAAE,EAAMwF,EAAa,OAAO,KAAKvF,CAAM,EAAOC,EAAK7E,EAAG,IAAKA,EAAI,EAAGA,EAAImK,EAAW,OAAQnK,IAAO6E,EAAMsF,EAAWnK,CAAC,EAAO,EAAAgK,EAAS,QAAQnF,CAAG,GAAK,KAAaF,EAAOE,CAAG,EAAID,EAAOC,CAAG,GAAK,OAAOF,CAAO,CAsBjT,IAAIyF,GAAwBC,EAAU,WAAC,SAAUtD,EAAMuD,EAAK,CAC1D,IAAIC,EAAWxD,EAAK,SAChByD,EAAST,GAAyBhD,EAAM4C,EAAS,EAEjDc,EAAeC,GAAYF,CAAM,EACjCG,EAAOF,EAAa,KACpBG,EAAQb,GAAyBU,EAAcb,EAAU,EAE7DiB,OAAAA,EAAmB,oBAACP,EAAK,UAAY,CACnC,MAAO,CACL,KAAMK,CACP,CACL,EAAK,CAACA,CAAI,CAAC,EAEWG,GAAM,cAAcC,EAAQ,SAAE,KAAMR,EAAS7F,EAAcA,EAAc,CAAA,EAAIkG,CAAK,EAAG,CAAA,EAAI,CAC3G,KAAMD,CACP,CAAA,CAAC,CAAC,CACL,CAAC,EACDP,GAAS,YAAc,WAEvB,IAAIY,GAAe,CACjB,SAAU,GACV,kBAAmB5J,GACnB,QAAS,IACT,QAAS,EACT,SAAU,GACV,SAAU,EACV,sBAAuB,GACvB,QAAS,GACT,WAAY,GACZ,OAAQ,GACR,qBAAsB,GACtB,UAAW,KACX,eAAgB,GAChB,UAAW,EACb,EACAgJ,GAAS,aAAeY,GACxBZ,GAAS,UAAY,CAgBnB,SAAUa,EAAU,KASpB,OAAQA,EAAU,SAASA,EAAU,QAAQA,EAAU,MAAM,CAAC,EAK9D,SAAUA,EAAU,KAKpB,sBAAuBA,EAAU,KAKjC,QAASA,EAAU,KAMnB,WAAYA,EAAU,KAKtB,OAAQA,EAAU,KAKlB,qBAAsBA,EAAU,KAKhC,QAASA,EAAU,OAKnB,QAASA,EAAU,OAMnB,SAAUA,EAAU,OAKpB,SAAUA,EAAU,KAOpB,kBAAmBA,EAAU,KAK7B,mBAAoBA,EAAU,KAK9B,iBAAkBA,EAAU,KAM5B,eAAgBA,EAAU,KAK1B,UAAWA,EAAU,KAOrB,YAAaA,EAAU,KAOvB,YAAaA,EAAU,KAOvB,WAAYA,EAAU,KAgCtB,OAAQA,EAAU,KASlB,eAAgBA,EAAU,KAS1B,eAAgBA,EAAU,KAO1B,QAASA,EAAU,KAOnB,UAAWA,EAAU,IACvB,EAuEA,IAAIC,GAAe,CACjB,UAAW,GACX,mBAAoB,GACpB,aAAc,GACd,aAAc,GACd,aAAc,GACd,cAAe,CAAE,EACjB,eAAgB,CAAA,CAClB,EA8EO,SAASR,IAAc,CAC5B,IAAIE,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAE,EAE9EO,EAAsBzG,EAAcA,EAAc,CAAA,EAAIsG,EAAY,EAAGJ,CAAK,EAC1E1E,EAASiF,EAAoB,OAC7BC,EAAWD,EAAoB,SAC/BE,EAAoBF,EAAoB,kBACxC9E,EAAU8E,EAAoB,QAC9B5E,EAAU4E,EAAoB,QAC9BnE,EAAWmE,EAAoB,SAC/BlE,EAAWkE,EAAoB,SAC/BG,EAAcH,EAAoB,YAClCI,EAAcJ,EAAoB,YAClCK,EAAaL,EAAoB,WACjCM,EAASN,EAAoB,OAC7BO,EAAiBP,EAAoB,eACrCQ,EAAiBR,EAAoB,eACrCS,EAAqBT,EAAoB,mBACzCU,EAAmBV,EAAoB,iBACvCW,EAAiBX,EAAoB,eACrCY,EAAYZ,EAAoB,UAChCa,EAAwBb,EAAoB,sBAC5Cc,EAAUd,EAAoB,QAC9Be,EAAaf,EAAoB,WACjCgB,EAAShB,EAAoB,OAC7BiB,EAAuBjB,EAAoB,qBAC3CkB,EAAUlB,EAAoB,QAC9BjE,EAAYiE,EAAoB,UAEhCmB,EAAaC,EAAAA,QAAQ,UAAY,CACnC,OAAOlD,GAAuBnD,CAAM,CACxC,EAAK,CAACA,CAAM,CAAC,EACPsG,EAAcD,EAAAA,QAAQ,UAAY,CACpC,OAAO5D,GAAwBzC,CAAM,CACzC,EAAK,CAACA,CAAM,CAAC,EACPuG,EAAqBF,EAAAA,QAAQ,UAAY,CAC3C,OAAO,OAAOV,GAAqB,WAAaA,EAAmBa,EACvE,EAAK,CAACb,CAAgB,CAAC,EACjBc,EAAuBJ,EAAAA,QAAQ,UAAY,CAC7C,OAAO,OAAOX,GAAuB,WAAaA,EAAqBc,EAC3E,EAAK,CAACd,CAAkB,CAAC,EAMnBgB,EAAUC,EAAM,OAAC,IAAI,EACrBC,EAAWD,EAAM,OAAC,IAAI,EAEtBE,EAAcC,EAAAA,WAAWC,GAAS/B,EAAY,EAC9CgC,EAAelI,GAAe+H,EAAa,CAAC,EAC5CI,EAAQD,EAAa,CAAC,EACtBE,EAAWF,EAAa,CAAC,EAEzBG,EAAYF,EAAM,UAClBG,EAAqBH,EAAM,mBAC3BI,GAAsBV,SAAO,OAAO,OAAW,KAAe,OAAO,iBAAmBf,GAAkBpD,GAAyB,CAAE,EAErI8E,GAAgB,UAAyB,CAEvC,CAACD,GAAoB,SAAWD,GAClC,WAAW,UAAY,CACrB,GAAIR,EAAS,QAAS,CACpB,IAAI9K,EAAQ8K,EAAS,QAAQ,MAExB9K,EAAM,SACToL,EAAS,CACP,KAAM,aACpB,CAAa,EACDT,EAAsB,EAElC,CACO,EAAE,GAAG,CAET,EAEDc,EAAAA,UAAU,UAAY,CACpB,cAAO,iBAAiB,QAASD,GAAe,EAAK,EAC9C,UAAY,CACjB,OAAO,oBAAoB,QAASA,GAAe,EAAK,CACzD,CACF,EAAE,CAACV,EAAUQ,EAAoBX,EAAsBY,EAAmB,CAAC,EAC5E,IAAIG,GAAiBb,EAAM,OAAC,EAAE,EAE1Bc,GAAiB,SAAwBhG,EAAO,CAC9CiF,EAAQ,SAAWA,EAAQ,QAAQ,SAASjF,EAAM,MAAM,IAK5DA,EAAM,eAAgB,EACtB+F,GAAe,QAAU,CAAE,EAC5B,EAEDD,EAAAA,UAAU,UAAY,CACpB,OAAIzB,IACF,SAAS,iBAAiB,WAAYnE,GAAoB,EAAK,EAC/D,SAAS,iBAAiB,OAAQ8F,GAAgB,EAAK,GAGlD,UAAY,CACb3B,IACF,SAAS,oBAAoB,WAAYnE,EAAkB,EAC3D,SAAS,oBAAoB,OAAQ8F,EAAc,EAEtD,CACL,EAAK,CAACf,EAASZ,CAAqB,CAAC,EAEnCyB,EAAAA,UAAU,UAAY,CACpB,MAAI,CAACrC,GAAYW,GAAaa,EAAQ,SACpCA,EAAQ,QAAQ,MAAO,EAGlB,UAAY,CAAE,CACtB,EAAE,CAACA,EAASb,EAAWX,CAAQ,CAAC,EACjC,IAAIwC,EAAUC,cAAY,SAAU9O,EAAG,CACjCsN,EACFA,EAAQtN,CAAC,EAGT,QAAQ,MAAMA,CAAC,CAErB,EAAK,CAACsN,CAAO,CAAC,EACRyB,EAAgBD,cAAY,SAAUlG,EAAO,CAC/CA,EAAM,eAAc,EAEpBA,EAAM,QAAS,EACfoG,GAAgBpG,CAAK,EACrB+F,GAAe,QAAU,GAAG,OAAO9J,GAAmB8J,GAAe,OAAO,EAAG,CAAC/F,EAAM,MAAM,CAAC,EAEzFC,GAAeD,CAAK,GACtB,QAAQ,QAAQ0D,EAAkB1D,CAAK,CAAC,EAAE,KAAK,SAAU3F,EAAO,CAC9D,GAAI,EAAA0F,GAAqBC,CAAK,GAAK,CAACyE,GAIpC,KAAI4B,EAAYhM,EAAM,OAClBiM,GAAeD,EAAY,GAAKlH,GAAiB,CACnD,MAAO9E,EACP,OAAQsK,EACR,QAAS/F,EACT,QAASF,EACT,SAAUW,EACV,SAAUC,EACV,UAAWC,CACrB,CAAS,EACGgH,GAAeF,EAAY,GAAK,CAACC,GACrCb,EAAS,CACP,aAAca,GACd,aAAcC,GACd,aAAc,GACd,KAAM,iBAChB,CAAS,EAEG5C,GACFA,EAAY3D,CAAK,EAE3B,CAAO,EAAE,MAAM,SAAU5I,EAAG,CACpB,OAAO6O,EAAQ7O,CAAC,CACxB,CAAO,CAEJ,EAAE,CAACsM,EAAmBC,EAAasC,EAASxB,EAAsBE,EAAY/F,EAASF,EAASW,EAAUC,EAAUC,CAAS,CAAC,EAC3HiH,GAAeN,cAAY,SAAUlG,EAAO,CAC9CA,EAAM,eAAgB,EACtBA,EAAM,QAAS,EACfoG,GAAgBpG,CAAK,EACrB,IAAIyG,EAAWxG,GAAeD,CAAK,EAEnC,GAAIyG,GAAYzG,EAAM,aACpB,GAAI,CACFA,EAAM,aAAa,WAAa,MACjC,MAAiB,CAAA,CAKpB,OAAIyG,GAAY5C,GACdA,EAAW7D,CAAK,EAGX,EACX,EAAK,CAAC6D,EAAYY,CAAoB,CAAC,EACjCiC,GAAgBR,cAAY,SAAUlG,EAAO,CAC/CA,EAAM,eAAgB,EACtBA,EAAM,QAAS,EACfoG,GAAgBpG,CAAK,EAErB,IAAI2G,EAAUZ,GAAe,QAAQ,OAAO,SAAU/I,GAAQ,CAC5D,OAAOiI,EAAQ,SAAWA,EAAQ,QAAQ,SAASjI,EAAM,CAC/D,CAAK,EAGG4J,EAAYD,EAAQ,QAAQ3G,EAAM,MAAM,EAExC4G,IAAc,IAChBD,EAAQ,OAAOC,EAAW,CAAC,EAG7Bb,GAAe,QAAUY,EAErB,EAAAA,EAAQ,OAAS,KAIrBlB,EAAS,CACP,KAAM,kBACN,aAAc,GACd,aAAc,GACd,aAAc,EACpB,CAAK,EAEGxF,GAAeD,CAAK,GAAK4D,GAC3BA,EAAY5D,CAAK,EAEpB,EAAE,CAACiF,EAASrB,EAAaa,CAAoB,CAAC,EAC3CoC,GAAWX,EAAAA,YAAY,SAAU7L,EAAO2F,EAAO,CACjD,IAAIrE,EAAgB,CAAE,EAClBmL,GAAiB,CAAE,EACvBzM,EAAM,QAAQ,SAAUrB,GAAM,CAC5B,IAAIwG,GAAgBV,GAAa9F,GAAM2L,CAAU,EAC7ClF,GAAiBpC,GAAemC,GAAe,CAAC,EAChDE,GAAWD,GAAe,CAAC,EAC3BsH,GAActH,GAAe,CAAC,EAE9BE,GAAiBV,GAAcjG,GAAM4F,EAASF,CAAO,EACrDkB,GAAkBvC,GAAesC,GAAgB,CAAC,EAClDE,GAAYD,GAAgB,CAAC,EAC7BoH,GAAYpH,GAAgB,CAAC,EAE7BE,GAAeP,EAAYA,EAAUvG,EAAI,EAAI,KAEjD,GAAI0G,IAAYG,IAAa,CAACC,GAC5BnE,EAAc,KAAK3C,EAAI,MAClB,CACL,IAAIiO,GAAS,CAACF,GAAaC,EAAS,EAEhClH,KACFmH,GAASA,GAAO,OAAOnH,EAAY,GAGrCgH,GAAe,KAAK,CAClB,KAAM9N,GACN,OAAQiO,GAAO,OAAO,SAAU7P,GAAG,CACjC,OAAOA,EACR,CAAA,CACX,CAAS,CACT,CACA,CAAK,GAEG,CAACiI,GAAY1D,EAAc,OAAS,GAAK0D,GAAYC,GAAY,GAAK3D,EAAc,OAAS2D,KAE/F3D,EAAc,QAAQ,SAAU3C,GAAM,CACpC8N,GAAe,KAAK,CAClB,KAAM9N,GACN,OAAQ,CAAC6F,EAAwB,CAC3C,CAAS,CACT,CAAO,EACDlD,EAAc,OAAO,CAAC,GAGxB8J,EAAS,CACP,cAAe9J,EACf,eAAgBmL,GAChB,KAAM,UACZ,CAAK,EAEGhD,GACFA,EAAOnI,EAAemL,GAAgB9G,CAAK,EAGzC8G,GAAe,OAAS,GAAK9C,GAC/BA,EAAe8C,GAAgB9G,CAAK,EAGlCrE,EAAc,OAAS,GAAKoI,GAC9BA,EAAepI,EAAeqE,CAAK,CAEtC,EAAE,CAACyF,EAAUpG,EAAUsF,EAAY/F,EAASF,EAASY,EAAUwE,EAAQC,EAAgBC,EAAgBzE,CAAS,CAAC,EAC9G2H,GAAWhB,cAAY,SAAUlG,EAAO,CAC1CA,EAAM,eAAc,EAEpBA,EAAM,QAAS,EACfoG,GAAgBpG,CAAK,EACrB+F,GAAe,QAAU,CAAE,EAEvB9F,GAAeD,CAAK,GACtB,QAAQ,QAAQ0D,EAAkB1D,CAAK,CAAC,EAAE,KAAK,SAAU3F,EAAO,CAC1D0F,GAAqBC,CAAK,GAAK,CAACyE,GAIpCoC,GAASxM,EAAO2F,CAAK,CAC7B,CAAO,EAAE,MAAM,SAAU5I,EAAG,CACpB,OAAO6O,EAAQ7O,CAAC,CACxB,CAAO,EAGHqO,EAAS,CACP,KAAM,OACZ,CAAK,CACF,EAAE,CAAC/B,EAAmBmD,GAAUZ,EAASxB,CAAoB,CAAC,EAE3D0C,GAAiBjB,EAAAA,YAAY,UAAY,CAG3C,GAAIN,GAAoB,QAAS,CAC/BH,EAAS,CACP,KAAM,YACd,CAAO,EACDX,IAEA,IAAIsC,EAAO,CACT,SAAU/H,EACV,MAAOwF,CACR,EACD,OAAO,mBAAmBuC,CAAI,EAAE,KAAK,SAAUhN,EAAS,CACtD,OAAOsJ,EAAkBtJ,CAAO,CACxC,CAAO,EAAE,KAAK,SAAUC,EAAO,CACvBwM,GAASxM,EAAO,IAAI,EACpBoL,EAAS,CACP,KAAM,aAChB,CAAS,CACT,CAAO,EAAE,MAAM,SAAUrO,EAAG,CAEhB0K,GAAQ1K,CAAC,GACX4N,EAAqB5N,CAAC,EACtBqO,EAAS,CACP,KAAM,aAClB,CAAW,GACQ1D,GAAgB3K,CAAC,GAC1BwO,GAAoB,QAAU,GAG1BT,EAAS,SACXA,EAAS,QAAQ,MAAQ,KACzBA,EAAS,QAAQ,MAAO,GAExBc,EAAQ,IAAI,MAAM,+JAA+J,CAAC,GAGpLA,EAAQ7O,CAAC,CAEnB,CAAO,EACD,MACN,CAEQ+N,EAAS,UACXM,EAAS,CACP,KAAM,YACd,CAAO,EACDX,EAAoB,EACpBK,EAAS,QAAQ,MAAQ,KACzBA,EAAS,QAAQ,MAAO,EAE9B,EAAK,CAACM,EAAUX,EAAoBE,EAAsBb,EAAgB0C,GAAUZ,EAASpB,EAAaxF,CAAQ,CAAC,EAE7GgI,GAAcnB,cAAY,SAAUlG,EAAO,CAEzC,CAACiF,EAAQ,SAAW,CAACA,EAAQ,QAAQ,YAAYjF,EAAM,MAAM,IAI7DA,EAAM,MAAQ,KAAOA,EAAM,MAAQ,SAAWA,EAAM,UAAY,IAAMA,EAAM,UAAY,MAC1FA,EAAM,eAAgB,EACtBmH,GAAgB,EAEtB,EAAK,CAAClC,EAASkC,EAAc,CAAC,EAExBG,GAAYpB,EAAAA,YAAY,UAAY,CACtCT,EAAS,CACP,KAAM,OACZ,CAAK,CACF,EAAE,EAAE,EACD8B,GAAWrB,EAAAA,YAAY,UAAY,CACrCT,EAAS,CACP,KAAM,MACZ,CAAK,CACF,EAAE,CAAE,CAAA,EAED+B,GAAYtB,EAAAA,YAAY,UAAY,CAClC5B,IAOAhE,GAAU,EACZ,WAAW6G,GAAgB,CAAC,EAE5BA,GAAgB,EAEtB,EAAK,CAAC7C,EAAS6C,EAAc,CAAC,EAExBM,GAAiB,SAAwB3G,EAAI,CAC/C,OAAO2C,EAAW,KAAO3C,CAC1B,EAEG4G,GAAyB,SAAgC5G,EAAI,CAC/D,OAAOyD,EAAa,KAAOkD,GAAe3G,CAAE,CAC7C,EAEG6G,GAAqB,SAA4B7G,EAAI,CACvD,OAAO0D,EAAS,KAAOiD,GAAe3G,CAAE,CACzC,EAEGsF,GAAkB,SAAyBpG,EAAO,CAChDyE,GACFzE,EAAM,gBAAiB,CAE1B,EAEG4H,GAAehD,EAAAA,QAAQ,UAAY,CACrC,OAAO,UAAY,CACjB,IAAI1D,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAE,EAC9E2G,EAAe3G,EAAM,OACrB4G,EAASD,IAAiB,OAAS,MAAQA,EAC3CE,GAAO7G,EAAM,KACb8G,GAAY9G,EAAM,UAClB+G,GAAU/G,EAAM,QAChBgH,GAAShH,EAAM,OACfiH,GAAUjH,EAAM,QAChByC,GAAczC,EAAM,YACpB2C,GAAa3C,EAAM,WACnB0C,GAAc1C,EAAM,YACpB4C,GAAS5C,EAAM,OACfkH,GAAOhG,GAAyBlB,EAAOgB,EAAU,EAErD,OAAOnF,EAAcA,EAAcI,GAAgB,CACjD,UAAWuK,GAAuBnH,GAAqByH,GAAWX,EAAW,CAAC,EAC9E,QAASK,GAAuBnH,GAAqB0H,GAASX,EAAS,CAAC,EACxE,OAAQI,GAAuBnH,GAAqB2H,GAAQX,EAAQ,CAAC,EACrE,QAASE,GAAelH,GAAqB4H,GAASX,EAAS,CAAC,EAChE,YAAaG,GAAmBpH,GAAqBoD,GAAawC,CAAa,CAAC,EAChF,WAAYwB,GAAmBpH,GAAqBsD,GAAY2C,EAAY,CAAC,EAC7E,YAAamB,GAAmBpH,GAAqBqD,GAAa8C,EAAa,CAAC,EAChF,OAAQiB,GAAmBpH,GAAqBuD,GAAQoD,EAAQ,CAAC,EACjE,KAAM,OAAOa,IAAS,UAAYA,KAAS,GAAKA,GAAO,cACxD,EAAED,EAAQ7C,CAAO,EAAG,CAACxB,GAAY,CAACc,EAAa,CAC9C,SAAU,CAClB,EAAU,CAAA,CAAE,EAAG6D,EAAI,CACd,CACF,EAAE,CAACnD,EAASoC,GAAaC,GAAWC,GAAUC,GAAWrB,EAAeK,GAAcE,GAAeQ,GAAU3C,EAAYC,EAAQf,CAAQ,CAAC,EACzI4E,GAAsBnC,cAAY,SAAUlG,EAAO,CACrDA,EAAM,gBAAiB,CACxB,EAAE,EAAE,EACDsI,GAAgB1D,EAAAA,QAAQ,UAAY,CACtC,OAAO,UAAY,CACjB,IAAIzD,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAE,EAC9EoH,EAAepH,EAAM,OACrB2G,EAASS,IAAiB,OAAS,MAAQA,EAC3CC,GAAWrH,EAAM,SACjBgH,GAAUhH,EAAM,QAChBiH,GAAOhG,GAAyBjB,EAAOgB,EAAU,EAEjDsG,GAAatL,GAAgB,CAC/B,OAAQwH,EACR,SAAUtF,EACV,KAAM,OACN,MAAO,CACL,QAAS,MACV,EACD,SAAUoI,GAAelH,GAAqBiI,GAAUtB,EAAQ,CAAC,EACjE,QAASO,GAAelH,GAAqB4H,GAASE,EAAmB,CAAC,EAC1E,SAAU,EAClB,EAASP,EAAQ3C,CAAQ,EAEnB,OAAOpI,EAAcA,EAAc,CAAE,EAAE0L,EAAU,EAAGL,EAAI,CACzD,CACL,EAAK,CAACjD,EAAU5G,EAAQc,EAAU6H,GAAUzD,CAAQ,CAAC,EACnD,OAAO1G,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,UAAWE,GAAa,CAACjC,EACzB,aAAcmE,GACd,cAAeU,GACf,QAASrD,EACT,SAAUE,EACV,KAAMsC,GAAeN,EAAc,CACvC,CAAG,CACH,CAOA,SAAS7B,GAAQE,EAAOkD,EAAQ,CAE9B,OAAQA,EAAO,KAAI,CACjB,IAAK,QACH,OAAO3L,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,UAAW,EACnB,CAAO,EAEH,IAAK,OACH,OAAOzI,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,UAAW,EACnB,CAAO,EAEH,IAAK,aACH,OAAOzI,EAAcA,EAAc,CAAE,EAAEwG,EAAY,EAAG,CAAA,EAAI,CACxD,mBAAoB,EAC5B,CAAO,EAEH,IAAK,cACH,OAAOxG,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,mBAAoB,EAC5B,CAAO,EAEH,IAAK,kBACH,OAAOzI,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,aAAckD,EAAO,aACrB,aAAcA,EAAO,aACrB,aAAcA,EAAO,YAC7B,CAAO,EAEH,IAAK,WACH,OAAO3L,EAAcA,EAAc,CAAE,EAAEyI,CAAK,EAAG,CAAA,EAAI,CACjD,cAAekD,EAAO,cACtB,eAAgBA,EAAO,cAC/B,CAAO,EAEH,IAAK,QACH,OAAO3L,EAAc,CAAE,EAAEwG,EAAY,EAEvC,QACE,OAAOiC,CACb,CACA,CAEA,SAAST,IAAO,CAAA,CCt8BQ,SAAA4D,GAAgBC,EAAuB,GAAM,CACnE,KAAM,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EAK3DC,EAAsB,CAAC3O,EAAmB4O,IAA2C,CACzF,IAAIC,EAAW7O,EAEXuO,IACIvO,EAAA,IAAKrB,GACT,OAAO,OAAOA,EAAM,CAClB,QAASA,EAAK,KAAQ,MAAM,GAAG,EAAE,CAAC,IAAM,QAAU,IAAI,gBAAgBA,CAAI,EAAI,KAC9E,cAAemQ,EAAYnQ,EAAK,IAAI,CACrC,CAAA,CACH,EAEWkQ,EAAA,CAAC,GAAGL,CAAa,EACnBK,EAAA,KAAK,GAAG7O,CAAK,EACtByO,EAAiBI,CAAQ,GAGvBD,KAAmBC,CAAQ,CACjC,EAKMC,EAAc,CAACC,EAAeC,EAAmB,IAAM,CACvD,GAAAD,IAAU,EAAU,MAAA,UACxB,MAAME,EAAI,KACJC,EAAKF,EAAW,EAAI,EAAIA,EACxBG,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAEhEnR,EAAI,KAAK,MAAM,KAAK,IAAI+Q,CAAK,EAAI,KAAK,IAAIE,CAAC,CAAC,EAClD,OAAO,YAAYF,EAAQ,KAAK,IAAIE,EAAGjR,CAAC,GAAG,QAAQkR,CAAE,CAAC,EAAI,IAAMC,EAAMnR,CAAC,CACzE,EAWO,MAAA,CACL,cAAAwQ,EACA,oBAAAG,EACA,WATkBhQ,GAAmB,CAC/B,MAAAyQ,EAAW,CAAC,GAAGZ,CAAa,EAClCY,EAAS,OAAOA,EAAS,QAAQzQ,CAAI,EAAG,CAAC,EACzC8P,EAAiBW,CAAQ,CAC3B,CAMA,CACF,CChCA,MAAMC,GAAe,CAAC,CAAE,YAAAd,EAAc,GAAM,aAAAe,EAAc,KAAAC,EAAM,UAAAC,EAAW,KAAAC,KAA8B,CACvG,KAAM,CAAE,cAAAjB,EAAe,oBAAAG,EAAqB,WAAAe,CAAW,EAAIpB,GAAgBC,CAAW,EACtF,OAEIoB,EAAA,KAAA5G,WAAA,CAAA,SAAA,CAAA6G,EAAAA,IAACxH,GAAS,CAAA,OAAS9G,GAAkBqN,EAAoBrN,EAAegO,CAAY,EACjF,SAAC,CAAA,CAAE,aAAA/B,EAAc,cAAAU,CAAA,IAChB2B,EAAAA,IAAC,MAAI,CAAA,UAAU,4DAA4D,MAAO,CAAE,OAAQ,OAAQ,EAClG,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,wBAAyB,GAAGpC,EAAA,EACzC,SAAA,CAACqC,EAAAA,IAAA,QAAA,CAAO,GAAG3B,EAAiB,CAAA,CAAA,EAC3BsB,GAAQK,EAAA,IAACC,GAAY,CAAA,KAAAN,EAAY,UAAW,gBAAiB,EAC9DK,EAAAA,IAAC,MAAI,SAAKH,CAAA,CAAA,EACTG,EAAA,IAAA,OAAA,CAAK,UAAU,mBAAoB,SAAUJ,CAAA,CAAA,CAAA,CAChD,CAAA,CACF,CAAA,EAEJ,EAGAI,EAAAA,IAAC,MAAI,CAAA,UAAU,yBACX,UAAApB,GAAiB,IAAI,IAAI,CAAC7P,EAAMmR,IAAQ,CAClC,MAAA7Q,EAAMN,EAAK,KAAK,OAAOA,EAAK,KAAK,YAAY,GAAG,EAAI,CAAC,EAEzD,OAAAiR,EAAAA,IAACG,GAAK,CAAA,UAAU,+BACd,SAAAH,EAAAA,IAAC,MAAI,CAAA,UAAU,MACb,SAAAD,EAAA,KAACK,GAAI,CAAA,UAAU,qBACZ,SAAA,CAAArR,EAAK,SACHiR,EAAA,IAAAK,GAAA,CAAI,GAAG,OACN,eAAC,MAAI,CAAA,oBAAkB,GAAG,UAAU,oCAAoC,IAAKtR,EAAK,KAAM,IAAKA,EAAK,OAAS,CAAA,EAC7G,EAED,CAACA,EAAK,eACJsR,GAAI,CAAA,GAAG,OACN,SAACL,MAAA,MAAA,CAAI,UAAU,YACb,SAAAA,EAAA,IAAC,QAAK,UAAU,kCAAmC,WAAI,YAAY,EAAE,EACvE,CACF,CAAA,EAEFD,EAAAA,KAACM,GAAI,CAAA,UAAU,OACb,SAAA,CAAAL,MAACM,IAAK,GAAG,GAAG,UAAU,qBACnB,WAAK,KACR,EACAN,EAAAA,IAAC,KAAE,UAAU,OACX,eAAC,SAAQ,CAAA,SAAAjR,EAAK,aAAc,CAAA,CAC9B,CAAA,CAAA,EACF,EACAiR,EAAAA,IAACK,IAAI,UAAU,WACb,eAACC,GAAK,CAAA,GAAG,GAAG,UAAU,6CACpB,SAAAN,EAAA,IAACC,IAAY,KAAK,cAAc,UAAU,cAAc,QAAS,IAAMH,EAAW/Q,CAAI,CAAG,CAAA,CAC3F,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,GA7BkDmR,EAAM,OA8B1D,CAAA,CAEH,CACH,CAAA,CAAA,EAEF,CAEJ,EClFA;AAAA;AAAA;AAAA;AAAA,GAQA,MAAMK,GAASzT,GAASA,aAAiB,YAEnC0T,GAAc,CAAClH,EAAcmH,EAAU,CAAA,EAAIC,EAAU,CAAA,IAAO,CAE9D,MAAMnF,EAAQ,CACV,GAAGjC,CACN,EAGKqH,EAAc,CAAE,EAChBC,EAAgB,CAAE,EAGlBC,EAAW,KAAO,CAAE,GAAGtF,IAGvBuF,EAAqB,IAAM,CAE7B,MAAMC,EAAQ,CAAC,GAAGJ,CAAW,EAG7B,OAAAA,EAAY,OAAS,EAEdI,CACV,EAGKC,EAAuB,IAAM,CAE/B,MAAMD,EAAQ,CAAC,GAAGH,CAAa,EAG/BA,EAAc,OAAS,EAGvBG,EAAM,QAAQ,CAAC,CAAE,KAAAzR,EAAM,KAAA2R,CAAI,IAAO,CAC9BzF,EAASlM,EAAM2R,CAAI,CAC/B,CAAS,CACJ,EAGKzF,EAAW,CAAClM,EAAM2R,EAAMC,IAAe,CAEzC,GAAIA,GAAc,CAAC,SAAS,OAAQ,CAChCN,EAAc,KAAK,CAAE,KAAAtR,EAAM,KAAA2R,CAAI,CAAE,EACjC,MACZ,CAGYE,EAAe7R,CAAI,GACnB6R,EAAe7R,CAAI,EAAE2R,CAAI,EAI7BN,EAAY,KAAK,CACb,KAAArR,EACA,KAAA2R,CACZ,CAAS,CACJ,EAEKG,EAAQ,CAACC,KAAQ1K,IAAU2K,EAAaD,CAAG,EAAIC,EAAaD,CAAG,EAAE,GAAG1K,CAAI,EAAI,KAE5E4K,EAAM,CACR,SAAAV,EACA,mBAAAC,EACA,qBAAAE,EACA,SAAAxF,EACA,MAAA4F,CACH,EAED,IAAIE,EAAe,CAAE,EACrBb,EAAQ,QAAQW,GAAS,CACrBE,EAAe,CACX,GAAGF,EAAM7F,CAAK,EACd,GAAG+F,CACN,CACT,CAAK,EAED,IAAIH,EAAiB,CAAE,EACvB,OAAAT,EAAQ,QAAQjC,GAAU,CACtB0C,EAAiB,CACb,GAAG1C,EAAOjD,EAAU4F,EAAO7F,CAAK,EAChC,GAAG4F,CACN,CACT,CAAK,EAEMI,CACX,EAEMC,GAAiB,CAACrO,EAAKsO,EAAUC,IAAe,CAClD,GAAI,OAAOA,GAAe,WAAY,CAClCvO,EAAIsO,CAAQ,EAAIC,EAChB,MACR,CACI,OAAO,eAAevO,EAAKsO,EAAU,CAAE,GAAGC,CAAU,CAAE,CAC1D,EAEMC,EAAQ,CAACxO,EAAKyO,IAAO,CACvB,UAAW3O,KAAOE,EACTA,EAAI,eAAeF,CAAG,GAI3B2O,EAAG3O,EAAKE,EAAIF,CAAG,CAAC,CAExB,EAEM4O,GAAeH,GAAc,CAC/B,MAAMvO,EAAM,CAAE,EACd,OAAAwO,EAAMD,EAAYD,GAAY,CAC1BD,GAAerO,EAAKsO,EAAUC,EAAWD,CAAQ,CAAC,CAC1D,CAAK,EACMtO,CACX,EAEM2O,EAAO,CAACC,EAAM5S,EAAMrC,EAAQ,OAAS,CACvC,GAAIA,IAAU,KACV,OAAOiV,EAAK,aAAa5S,CAAI,GAAK4S,EAAK,aAAa5S,CAAI,EAE5D4S,EAAK,aAAa5S,EAAMrC,CAAK,CACjC,EAEMkV,GAAK,6BACLC,GAAc,CAAC,MAAO,MAAM,EAE5BC,GAAeC,GAAOF,GAAY,SAASE,CAAG,EAE9CC,GAAgB,CAACD,EAAKE,EAAWC,EAAa,CAAA,IAAO,CACnD,OAAOD,GAAc,WACrBC,EAAaD,EACbA,EAAY,MAEhB,MAAME,EAAUL,GAAaC,CAAG,EAC1B,SAAS,gBAAgBH,GAAIG,CAAG,EAChC,SAAS,cAAcA,CAAG,EAChC,OAAIE,IACIH,GAAaC,CAAG,EAChBL,EAAKS,EAAS,QAASF,CAAS,EAEhCE,EAAQ,UAAYF,GAG5BV,EAAMW,EAAY,CAACnT,EAAMrC,IAAU,CAC/BgV,EAAKS,EAASpT,EAAMrC,CAAK,CACjC,CAAK,EACMyV,CACX,EAEMC,GAAcC,GAAU,CAACC,EAAOC,IAAU,CACxC,OAAOA,EAAU,KAAeF,EAAO,SAASE,CAAK,EACrDF,EAAO,aAAaC,EAAOD,EAAO,SAASE,CAAK,CAAC,EAEjDF,EAAO,YAAYC,CAAK,CAEhC,EAEME,GAAkB,CAACH,EAAQI,IAAe,CAACC,EAAMH,KAC/C,OAAOA,EAAU,IACjBE,EAAW,OAAOF,EAAO,EAAGG,CAAI,EAEhCD,EAAW,KAAKC,CAAI,EAGjBA,GAGLC,GAAkB,CAACN,EAAQI,IAAeC,IAE5CD,EAAW,OAAOA,EAAW,QAAQC,CAAI,EAAG,CAAC,EAGzCA,EAAK,QAAQ,YACbL,EAAO,YAAYK,EAAK,OAAO,EAG5BA,GAGLE,GACF,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,IAC1DC,GAAY,IAAMD,GAElBE,GAAcD,GAAW,EAAGb,GAAc,KAAK,EAAI,CAAE,EACrDe,GACF,aAAcD,GAAcE,GAAMA,EAAG,SAAS,OAASA,GAAMA,EAAG,WAAW,OAEzEC,GAAc,CAACC,EAAaT,EAAYU,EAAQC,IAAU,CAC5D,MAAMC,EAAOF,EAAO,CAAC,GAAKD,EAAY,KAChCI,EAAMH,EAAO,CAAC,GAAKD,EAAY,IAC/BK,EAAQF,EAAOH,EAAY,MAC3BM,EAASF,EAAMJ,EAAY,QAAUE,EAAM,CAAC,GAAK,GAEjDK,EAAO,CAET,QAAS,CACL,GAAGP,CACN,EAGD,MAAO,CACH,KAAMA,EAAY,KAClB,IAAKA,EAAY,IACjB,MAAOA,EAAY,MACnB,OAAQA,EAAY,MACvB,EAID,MAAO,CACH,KAAAG,EACA,IAAAC,EACA,MAAAC,EACA,OAAAC,CACH,CACJ,EAGD,OAAAf,EACK,OAAOiB,GAAa,CAACA,EAAU,cAAe,CAAA,EAC9C,IAAIA,GAAaA,EAAU,IAAI,EAC/B,QAAQC,GAAiB,CACtBC,GAAWH,EAAK,MAAO,CAAE,GAAGE,EAAc,KAAK,CAAE,EACjDC,GAAWH,EAAK,MAAO,CAAE,GAAGE,EAAc,KAAK,CAAE,CAC7D,CAAS,EAGLE,GAAkBJ,EAAK,KAAK,EAG5BA,EAAK,MAAM,QAAUA,EAAK,QAAQ,aAClCA,EAAK,MAAM,OAASA,EAAK,QAAQ,YAGjCI,GAAkBJ,EAAK,KAAK,EAErBA,CACX,EAEMG,GAAa,CAACvB,EAAQC,IAAU,CAElCA,EAAM,KAAOD,EAAO,IACpBC,EAAM,OAASD,EAAO,KACtBC,EAAM,QAAUD,EAAO,IACvBC,EAAM,MAAQD,EAAO,KAEjBC,EAAM,OAASD,EAAO,SACtBA,EAAO,OAASC,EAAM,QAGtBA,EAAM,MAAQD,EAAO,QACrBA,EAAO,MAAQC,EAAM,MAE7B,EAEMuB,GAAoBJ,GAAQ,CAC9BA,EAAK,MAAQA,EAAK,MAAQA,EAAK,KAC/BA,EAAK,OAASA,EAAK,OAASA,EAAK,GACrC,EAEMK,GAAWpX,GAAS,OAAOA,GAAU,SAUrCqX,GAAW,CAACC,EAAUC,EAAaC,EAAUC,EAAc,OACtD,KAAK,IAAIH,EAAWC,CAAW,EAAIE,GAAe,KAAK,IAAID,CAAQ,EAAIC,EAM5EC,GAEF,CAAC,CAAE,UAAAC,EAAY,GAAK,QAAAC,EAAU,IAAM,KAAAC,EAAO,EAAE,EAAK,CAAE,IAEhD,CACI,IAAI5R,EAAS,KACTqR,EAAW,KACXE,EAAW,EACXM,EAAU,GA6Ed,MAAMrD,EAAMM,GAAa,CACrB,YA3EgB,CAACgD,EAAIC,IAAmB,CAExC,GAAIF,EAAS,OAGb,GAAI,EAAEV,GAASnR,CAAM,GAAKmR,GAASE,CAAQ,GAAI,CAC3CQ,EAAU,GACVN,EAAW,EACX,MACpB,CAGgB,MAAM5W,EAAI,EAAE0W,EAAWrR,GAAU0R,EAGjCH,GAAY5W,EAAIiX,EAGhBP,GAAYE,EAGZA,GAAYI,EAGRP,GAASC,EAAUrR,EAAQuR,CAAQ,GAAKQ,GACxCV,EAAWrR,EACXuR,EAAW,EACXM,EAAU,GAGVrD,EAAI,SAAS6C,CAAQ,EACrB7C,EAAI,WAAW6C,CAAQ,GAGvB7C,EAAI,SAAS6C,CAAQ,CAE5B,EAwCG,OAAQ,CACJ,IAnCUtX,GAAS,CAgBvB,GAdIoX,GAASpX,CAAK,GAAK,CAACoX,GAASE,CAAQ,IACrCA,EAAWtX,GAIXiG,IAAW,OACXA,EAASjG,EACTsX,EAAWtX,GAIfiG,EAASjG,EAGLsX,IAAarR,GAAU,OAAOA,EAAW,IAAa,CAEtD6R,EAAU,GACVN,EAAW,EAGX/C,EAAI,SAAS6C,CAAQ,EACrB7C,EAAI,WAAW6C,CAAQ,EAEvB,MACpB,CAEgBQ,EAAU,EACb,EAOO,IAAK,IAAM7R,CACd,EACD,QAAS,CACL,IAAK,IAAM6R,CACd,EACD,SAAU9X,GAAS,CAAE,EACrB,WAAYA,GAAS,CAAE,CACvC,CAAa,EAED,OAAOyU,CACV,EAGHwD,GAAgBtX,GAAMA,EAAI,GAAM,EAAIA,EAAIA,EAAI,IAAM,EAAI,EAAIA,GAAKA,EAE/DuX,GAEF,CAAC,CAAE,SAAAC,EAAW,IAAK,OAAAC,EAASH,GAAe,MAAAI,EAAQ,CAAC,EAAK,CAAE,IAEvD,CACI,IAAIC,EAAQ,KACR3X,EACA4X,EACAT,EAAU,GACVU,EAAU,GACVvS,EAAS,KA0Bb,MAAMwO,EAAMM,GAAa,CACrB,YAzBgB,CAACgD,EAAIC,IAAmB,CACpCF,GAAW7R,IAAW,OAEtBqS,IAAU,OACVA,EAAQP,GAGR,EAAAA,EAAKO,EAAQD,KAEjB1X,EAAIoX,EAAKO,EAAQD,EAEb1X,GAAKwX,GAAYH,GACjBrX,EAAI,EACJ4X,EAAIC,EAAU,EAAI,EAClB/D,EAAI,SAAS8D,EAAItS,CAAM,EACvBwO,EAAI,WAAW8D,EAAItS,CAAM,EACzB6R,EAAU,KAEVS,EAAI5X,EAAIwX,EACR1D,EAAI,UAAU9T,GAAK,EAAIyX,EAAOI,EAAU,EAAID,EAAIA,CAAC,EAAI,GAAKtS,CAAM,IAEvE,EAKG,OAAQ,CACJ,IAAK,IAAOuS,EAAU,EAAIvS,EAC1B,IAAKjG,GAAS,CAEV,GAAIiG,IAAW,KAAM,CACjBA,EAASjG,EACTyU,EAAI,SAASzU,CAAK,EAClByU,EAAI,WAAWzU,CAAK,EACpB,MAC5B,CAG4BA,EAAQiG,GACRA,EAAS,EACTuS,EAAU,KAGVA,EAAU,GACVvS,EAASjG,GAIb8X,EAAU,GACVQ,EAAQ,IACX,CACJ,EACD,QAAS,CACL,IAAK,IAAMR,CACd,EACD,SAAU9X,GAAS,CAAE,EACrB,WAAYA,GAAS,CAAE,CACvC,CAAa,EAED,OAAOyU,CACV,EAEHgE,GAAW,CACb,OAAAf,GACA,MAAAQ,EACJ,EAOMQ,GAAiB,CAAC9D,EAAY+D,EAAUhE,IAAa,CAGvD,MAAMiE,EACFhE,EAAW+D,CAAQ,GAAK,OAAO/D,EAAW+D,CAAQ,EAAEhE,CAAQ,GAAM,SAC5DC,EAAW+D,CAAQ,EAAEhE,CAAQ,EAC7BC,EAAW+D,CAAQ,GAAK/D,EAE5BpS,EAAO,OAAOoW,GAAQ,SAAWA,EAAMA,EAAI,KAC3C1M,EAAQ,OAAO0M,GAAQ,SAAW,CAAE,GAAGA,CAAG,EAAK,CAAE,EAEvD,OAAOH,GAASjW,CAAI,EAAIiW,GAASjW,CAAI,EAAE0J,CAAK,EAAI,IACpD,EAEM2M,GAAY,CAAChT,EAAMQ,EAAK6F,EAAO4M,EAAY,KAAU,CACvDzS,EAAM,MAAM,QAAQA,CAAG,EAAIA,EAAM,CAACA,CAAG,EACrCA,EAAI,QAAQjF,GAAK,CACbyE,EAAK,QAAQM,GAAO,CAChB,IAAI9D,EAAO8D,EACP4S,EAAS,IAAM7M,EAAM/F,CAAG,EACxB6S,EAAShZ,GAAUkM,EAAM/F,CAAG,EAAInG,EAEhC,OAAOmG,GAAQ,WACf9D,EAAO8D,EAAI,IACX4S,EAAS5S,EAAI,QAAU4S,EACvBC,EAAS7S,EAAI,QAAU6S,GAGvB,EAAA5X,EAAEiB,CAAI,GAAK,CAACyW,KAIhB1X,EAAEiB,CAAI,EAAI,CACN,IAAK0W,EACL,IAAKC,CACR,EACb,CAAS,CACT,CAAK,CACL,EAMMC,GAAa,CAAC,CAAE,YAAAC,EAAa,UAAAC,EAAW,gBAAAC,EAAiB,gBAAAC,CAAe,IAAO,CAEjF,MAAMC,EAAe,CAAE,GAAGH,CAAW,EAG/BF,EAAa,CAAE,EAGrB,OAAApE,EAAMqE,EAAa,CAACvE,EAAU4E,IAAc,CACxC,MAAMd,EAAWC,GAAea,CAAS,EACzC,GAAI,CAACd,EACD,OAIJA,EAAS,SAAWzY,GAAS,CACzBmZ,EAAUxE,CAAQ,EAAI3U,CACzB,EAGDyY,EAAS,OAASa,EAAa3E,CAAQ,EAiBvCkE,GAAU,CAdG,CACT,IAAKlE,EACL,OAAQ3U,GAAS,CAETyY,EAAS,SAAWzY,IAIxByY,EAAS,OAASzY,EACrB,EACD,OAAQ,IAAMmZ,EAAUxE,CAAQ,CACnC,CAGc,EAAG,CAACyE,EAAiBC,CAAe,EAAGF,EAAW,EAAI,EAGrEF,EAAW,KAAKR,CAAQ,CAChC,CAAK,EAGM,CACH,MAAOV,GAAM,CACT,IAAIC,EAAiB,SAAS,OAC1BF,EAAU,GACd,OAAAmB,EAAW,QAAQM,GAAa,CACvBA,EAAU,UAASzB,EAAU,IAClCyB,EAAU,YAAYxB,EAAIC,CAAc,CACxD,CAAa,EACMF,CACV,EACD,QAAS,IAAM,CAAE,CACpB,CACL,EAEM0B,GAAW/D,GAAW,CAACjT,EAAMuH,IAAO,CACtC0L,EAAQ,iBAAiBjT,EAAMuH,CAAE,CACrC,EAEM0P,GAAchE,GAAW,CAACjT,EAAMuH,IAAO,CACzC0L,EAAQ,oBAAoBjT,EAAMuH,CAAE,CACxC,EAGM2P,GAAY,CAAC,CACf,YAAAR,EACA,UAAAC,EACA,gBAAAC,EACA,gBAAAC,EACA,UAAAM,EACA,KAAA3D,CACJ,IAAM,CACF,MAAM4D,EAAS,CAAE,EAEXC,EAAML,GAASxD,EAAK,OAAO,EAC3B8D,EAASL,GAAYzD,EAAK,OAAO,EAEvC,OAAAqD,EAAgB,GAAK,CAAC7W,EAAMuH,IAAO,CAC/B6P,EAAO,KAAK,CACR,KAAApX,EACA,GAAAuH,CACZ,CAAS,EACD8P,EAAIrX,EAAMuH,CAAE,CACf,EAEDsP,EAAgB,IAAM,CAAC7W,EAAMuH,IAAO,CAChC6P,EAAO,OAAOA,EAAO,UAAU3Q,GAASA,EAAM,OAASzG,GAAQyG,EAAM,KAAOc,CAAE,EAAG,CAAC,EAClF+P,EAAOtX,EAAMuH,CAAE,CAClB,EAEM,CACH,MAAO,IAEI,GAEX,QAAS,IAAM,CACX6P,EAAO,QAAQ3Q,GAAS,CACpB6Q,EAAO7Q,EAAM,KAAMA,EAAM,EAAE,CAC3C,CAAa,CACJ,CACJ,CACL,EAIM8Q,GAAO,CAAC,CAAE,YAAAb,EAAa,UAAAC,EAAW,gBAAAE,CAAe,IAAO,CAC1DR,GAAUK,EAAaG,EAAiBF,CAAS,CACrD,EAEMhR,GAAYnI,GAASA,GAAS,KAO9Bga,GAAW,CACb,QAAS,EACT,OAAQ,EACR,OAAQ,EACR,WAAY,EACZ,WAAY,EACZ,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,CACb,EAEMC,GAAS,CAAC,CAAE,YAAAf,EAAa,UAAAC,EAAW,gBAAAC,EAAiB,gBAAAC,EAAiB,KAAArD,KAAW,CAEnF,MAAMsD,EAAe,CAAE,GAAGH,CAAW,EAG/Be,EAAe,CAAE,EAGvBrB,GAAUK,EAAa,CAACE,EAAiBC,CAAe,EAAGF,CAAS,EAGpE,MAAMgB,EAAY,IAAM,CAAChB,EAAU,YAAiB,EAAGA,EAAU,YAAiB,CAAC,EAC7EiB,EAAW,IAAM,CAACjB,EAAU,QAAa,EAAGA,EAAU,QAAa,CAAC,EACpEkB,EAAU,IACZrE,EAAK,KAAOO,GAAYP,EAAK,KAAMA,EAAK,WAAYmE,EAAS,EAAIC,EAAQ,CAAE,EAAI,KACnF,OAAAhB,EAAgB,KAAO,CAAE,IAAKiB,CAAS,EACvChB,EAAgB,KAAO,CAAE,IAAKgB,CAAS,EAGvCnB,EAAY,QAAQ/S,GAAO,CACvBgT,EAAUhT,CAAG,EACT,OAAOmT,EAAanT,CAAG,EAAM,IAAc6T,GAAS7T,CAAG,EAAImT,EAAanT,CAAG,CACvF,CAAK,EAGM,CACH,MAAO,IAAM,CAET,GAAKmU,GAAiBJ,EAAcf,CAAS,EAK7C,OAAAoB,GAAYvE,EAAK,QAASmD,CAAS,EAGnC,OAAO,OAAOe,EAAc,CAAE,GAAGf,CAAS,CAAE,EAGrC,EACV,EACD,QAAS,IAAM,CAAE,CACpB,CACL,EAEMmB,GAAmB,CAACJ,EAAcM,IAAa,CAEjD,GAAI,OAAO,KAAKN,CAAY,EAAE,SAAW,OAAO,KAAKM,CAAQ,EAAE,OAC3D,MAAO,GAIX,UAAWC,KAAQD,EACf,GAAIA,EAASC,CAAI,IAAMP,EAAaO,CAAI,EACpC,MAAO,GAIf,MAAO,EACX,EAEMF,GAAc,CAChB9E,EACA,CACI,QAAAiF,EACA,YAAAC,EACA,WAAAC,EACA,WAAAC,EACA,OAAAC,EACA,OAAAC,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,EACA,MAAAC,EACA,OAAAC,CACR,IACK,CACD,IAAIC,EAAa,GACbtB,EAAS,IAGT9R,GAAUgT,CAAO,GAAKhT,GAAUiT,CAAO,KACvCnB,GAAU,qBAAqBkB,GAAW,CAAC,MAAMC,GAAW,CAAC,OAK7DjT,GAAUwS,CAAW,IACrBY,GAAc,eAAeZ,CAAW,SAIxCxS,GAAUyS,CAAU,GAAKzS,GAAU0S,CAAU,KAC7CU,GAAc,eAAeX,GAAc,CAAC,OAAOC,GAAc,CAAC,YAIlE1S,GAAU2S,CAAM,GAAK3S,GAAU4S,CAAM,KACrCQ,GAAc,WAAWpT,GAAU2S,CAAM,EAAIA,EAAS,CAAC,KACnD3S,GAAU4S,CAAM,EAAIA,EAAS,CACzC,SAIQ5S,GAAU+S,CAAO,IACjBK,GAAc,WAAWL,CAAO,SAGhC/S,GAAU6S,CAAO,IACjBO,GAAc,WAAWP,CAAO,SAGhC7S,GAAU8S,CAAO,IACjBM,GAAc,WAAWN,CAAO,SAIhCM,EAAW,SACXtB,GAAU,aAAasB,CAAU,KAIjCpT,GAAUuS,CAAO,IACjBT,GAAU,WAAWS,CAAO,IAGxBA,IAAY,IACZT,GAAU,sBAIVS,EAAU,IACVT,GAAU,yBAKd9R,GAAUmT,CAAM,IAChBrB,GAAU,UAAUqB,CAAM,OAI1BnT,GAAUkT,CAAK,IACfpB,GAAU,SAASoB,CAAK,OAI5B,MAAMG,EAAsB/F,EAAQ,qBAAuB,IAGvDwE,EAAO,SAAWuB,EAAoB,QAAUvB,IAAWuB,KAC3D/F,EAAQ,MAAM,QAAUwE,EAGxBxE,EAAQ,oBAAsBwE,EAEtC,EAEMwB,GAAS,CACX,OAAAxB,GACA,UAAAP,GACA,WAAAT,GACA,KAAAc,EACJ,EAEM2B,GAAa,CAAC3E,EAAO,CAAE,EAAEtB,EAAU,CAAE,EAAEkG,EAAQ,MAC5ClG,EAAQ,mBACTsB,EAAK,WAAa,SAAS4E,EAAM,WAAY,EAAE,GAAK,EACpD5E,EAAK,UAAY,SAAS4E,EAAM,UAAW,EAAE,GAAK,EAClD5E,EAAK,YAAc,SAAS4E,EAAM,YAAa,EAAE,GAAK,EACtD5E,EAAK,aAAe,SAAS4E,EAAM,aAAc,EAAE,GAAK,EACxD5E,EAAK,WAAa,SAAS4E,EAAM,WAAY,EAAE,GAAK,EACpDlG,EAAQ,iBAAmB,IAG/BsB,EAAK,KAAOtB,EAAQ,YAAc,EAClCsB,EAAK,IAAMtB,EAAQ,WAAa,EAChCsB,EAAK,MAAQtB,EAAQ,aAAe,EACpCsB,EAAK,OAAStB,EAAQ,cAAgB,EAEtCsB,EAAK,MAAQA,EAAK,KAAOA,EAAK,MAC9BA,EAAK,OAASA,EAAK,IAAMA,EAAK,OAE9BA,EAAK,UAAYtB,EAAQ,UAEzBsB,EAAK,OAAStB,EAAQ,eAAiB,KAEhCsB,GAGL6E,EAEF,CAAC,CAEG,IAAAvG,EAAM,MACN,KAAAhT,EAAO,KACP,WAAAmT,EAAa,CAAE,EAGf,KAAAqG,EAAO,IAAM,CAAE,EACf,MAAAC,EAAQ,IAAM,CAAE,EAChB,OAAAC,EAAS,IAAM,CAAE,EACjB,QAAAC,EAAU,IAAM,CAAE,EAGlB,2BAAAC,EAA6B,CAACrG,EAAOhC,IAAYA,EACjD,cAAAsI,EAAgB,IAAM,CAAE,EACxB,aAAAC,EAAe,IAAM,CAAE,EAGvB,WAAAC,EAAa,GACb,iBAAAC,EAAmB,GAGnB,OAAAC,EAAS,CAAE,CACd,EAAG,KAAO,CAEPC,EAEArQ,EAAQ,CAAA,IACP,CAED,MAAMuJ,EAAUH,GAAcD,EAAK,aAAahT,CAAI,GAAImT,CAAU,EAG5DmG,EAAQ,OAAO,iBAAiBlG,EAAS,IAAI,EAG7CsB,EAAO2E,GAAY,EACzB,IAAIc,EAAY,KAGZC,EAAY,GAGhB,MAAM1G,EAAa,CAAE,EAGf2G,EAAe,CAAE,EAGjB9Q,EAAM,CAAE,EAGR6C,EAAQ,CAAE,EAGVkO,EAAU,CACZb,CACH,EAEKc,EAAU,CACZf,CACH,EAEKgB,EAAa,CACfb,CACH,EAGKc,EAAa,IAAMrH,EACnBsH,EAAgB,IAAMhH,EAAW,OAAQ,EACzCiH,EAAe,IAAMpR,EACrBqR,EAAkBV,GAAS,CAACvG,EAAM9J,KAAU8J,EAAKuG,EAAOrQ,EAAK,EAC7DmO,EAAU,IACRmC,IAGJA,EAAYjG,GAAYQ,EAAMhB,EAAY,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACjDyG,GAELU,EAAW,IAAMvB,EAMjBwB,EAAQ,IAAM,CAChBX,EAAY,KAGZzG,EAAW,QAAQH,IAASA,GAAM,MAAK,CAAE,EAEpB,EAAEyG,GAAoBtF,EAAK,OAASA,EAAK,SAE1D2E,GAAW3E,EAAMtB,EAASkG,CAAK,EAInC,MAAMlH,EAAM,CAAE,KAAM2I,GAAa,MAAAlR,EAAO,KAAA6K,CAAM,EAC9C6F,EAAQ,QAAQxY,IAAUA,GAAOqQ,CAAG,CAAC,CACxC,EAMK4I,EAAS,CAACtF,EAAIuF,EAAcC,KAAmB,CAEjD,IAAIzF,GAAUwF,EAAa,SAAW,EAGtC,OAAAX,EAAQ,QAAQa,IAAU,CACAA,GAAO,CACzB,MAAAtR,EACA,KAAMkR,GACN,QAASE,EACT,UAAWvF,EACX,eAAAwF,EACpB,CAAiB,IACqB,KAClBzF,GAAU,GAE9B,CAAa,EAGD4E,EAAa,QAAQe,IAAS,CAELA,GAAM,MAAM1F,CAAE,IACd,KACjBD,GAAU,GAE9B,CAAa,EAGD/B,EACK,OAAOH,IAAS,CAAC,CAACA,GAAM,QAAQ,UAAU,EAC1C,QAAQA,IAAS,CAEOA,GAAM,OACvBmC,EACAkE,EAA2BrG,GAAO0H,CAAY,EAC9CC,EACH,IAEGzF,GAAU,GAElC,CAAiB,EAGL/B,EAEK,QAAQ,CAACH,GAAOC,KAAU,CAEnBD,GAAM,QAAQ,aAKlBwH,GAAY,YAAYxH,GAAM,QAASC,EAAK,EAG5CD,GAAM,MAAO,EAGbA,GAAM,OACFmC,EACAkE,EAA2BrG,GAAO0H,CAAY,EAC9CC,EACH,EAGDzF,GAAU,GAC9B,CAAiB,EAGL2E,EAAY3E,GAEZqE,EAAa,CACT,MAAAjQ,EACA,KAAMkR,GACN,QAASE,EACT,UAAWvF,CAC3B,CAAa,EAGMD,EACV,EAEK4F,EAAW,IAAM,CACnBhB,EAAa,QAAQe,GAASA,EAAM,QAAO,CAAE,EAC7CZ,EAAW,QAAQc,GAAa,CAC5BA,EAAU,CAAE,KAAMP,GAAa,MAAAlR,CAAK,CAAE,CACtD,CAAa,EACD6J,EAAW,QAAQH,GAASA,EAAM,SAAQ,CAAE,CAC/C,EAGKgI,EAAsB,CACxB,QAAS,CACL,IAAKd,CACR,EACD,MAAO,CACH,IAAKI,CACR,EACD,WAAY,CACR,IAAKH,CACR,CACJ,EAGKc,EAAwB,CAC1B,GAAGD,EACH,KAAM,CACF,IAAKvD,CACR,EAGD,IAAK,CACD,IAAK2C,CACR,EAGD,GAAIc,GAAUzb,IAASyb,EACvB,YAAapI,GAAYD,CAAO,EAChC,gBAAiBwH,EAAgBV,CAAK,EACtC,SAAUvG,IACND,EAAW,KAAKC,CAAI,EACbA,GAEX,WAAYA,GAAQ,CAChBD,EAAW,OAAOA,EAAW,QAAQC,CAAI,EAAG,CAAC,CAChD,EACD,gBAAiBF,GAAgBL,EAASM,CAAU,EACpD,gBAAiBE,GAAgBR,EAASM,CAAU,EACpD,eAAgByH,GAAUb,EAAQ,KAAKa,CAAM,EAC7C,eAAgBpZ,GAAUwY,EAAQ,KAAKxY,CAAM,EAC7C,kBAAmBuZ,GAAad,EAAW,KAAKc,CAAS,EACzD,iBAAkB,IAAOlI,EAAQ,iBAAmB,GAGpD,SAAU8G,EAAM,SAChB,MAAOA,EAAM,KAChB,EAGKwB,GAAwB,CAC1B,QAAS,CACL,IAAKjB,CACR,EACD,WAAY,CACR,IAAKC,CACR,EACD,KAAM,CACF,IAAK1C,CACR,EACD,QAAS,CACL,IAAK,IAAMoC,CACd,EACD,cAAe,IAAML,EACrB,MAAAe,EACA,OAAAE,EACA,SAAAK,CACH,EAGKM,GAAqB,CACvB,GAAGJ,EACH,KAAM,CACF,IAAK,IAAM7G,CACd,CACJ,EAGD,OAAO,KAAKuF,CAAM,EACb,KAAK,CAAC1R,EAAGqT,IAEFrT,IAAM,SACC,EACAqT,IAAM,SACN,GAEJ,CACV,EACA,QAAQ9X,GAAO,CACZ,MAAM+X,EAAWzC,GAAOtV,CAAG,EAAE,CACzB,YAAamW,EAAOnW,CAAG,EACvB,UAAW+F,EACX,UAAWuC,EACX,gBAAiBoP,EACjB,gBAAiBE,GACjB,KAAMhJ,GAAaiJ,EAAkB,CACzD,CAAiB,EAEGE,GACAxB,EAAa,KAAKwB,CAAQ,CAE9C,CAAa,EAGL,MAAMd,GAAcrI,GAAa8I,CAAqB,EAGtD9B,EAAO,CACH,KAAMqB,GACN,MAAAlR,CACZ,CAAS,EAGD,MAAMiS,GAAa9H,GAAcZ,CAAO,EACxC,OAAAM,EAAW,QAAQ,CAACH,EAAOC,IAAU,CACjCuH,GAAY,YAAYxH,EAAM,QAASuI,GAAatI,CAAK,CACrE,CAAS,EAGDqG,EAAckB,EAAW,EAGlBrI,GAAagJ,EAAqB,CAC5C,EAECK,GAAgB,CAACvC,EAAMC,EAAOuC,EAAM,KAAO,CAC7C,MAAMhc,EAAO,iBAGb,GAAI,OAAOA,CAAI,EAAG,CACd,OAAOA,CAAI,EAAE,QAAQ,KAAKwZ,CAAI,EAC9B,OAAOxZ,CAAI,EAAE,QAAQ,KAAKyZ,CAAK,EAC/B,MACR,CAEI,OAAOzZ,CAAI,EAAI,CACX,QAAS,CAACwZ,CAAI,EACd,QAAS,CAACC,CAAK,CAClB,EAED,MAAMwC,EAAU,OAAOjc,CAAI,EAErBkc,EAAW,IAAOF,EACxB,IAAIG,EAAO,KACPC,EAAK,KACLC,EAAc,KACdC,EAAa,KAEjB,MAAMC,EAAe,IAAM,CACnB,SAAS,QACTF,EAAc,IAAM,OAAO,WAAW,IAAMG,EAAK,YAAY,KAAK,EAAGN,CAAQ,EAC7EI,EAAa,IAAM,OAAO,aAAaF,CAAE,IAEzCC,EAAc,IAAM,OAAO,sBAAsBG,CAAI,EACrDF,EAAa,IAAM,OAAO,qBAAqBF,CAAE,EAExD,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAC5CE,GAAYA,EAAY,EAC5BC,EAAc,EACdC,EAAK,YAAY,KAAK,CAC9B,CAAK,EAED,MAAMA,EAAO9G,GAAM,CAEf0G,EAAKC,EAAYG,CAAI,EAGhBL,IACDA,EAAOzG,GAGX,MAAM+G,EAAQ/G,EAAKyG,EAEfM,GAASP,IAMbC,EAAOzG,EAAM+G,EAAQP,EAGrBD,EAAQ,QAAQ,QAAQzC,GAAQA,EAAI,CAAE,EACtCyC,EAAQ,QAAQ,QAAQxC,GAASA,EAAM/D,CAAE,CAAC,EAC7C,EAED,OAAA6G,EAAc,EACdC,EAAK,YAAY,KAAK,EAEf,CACH,MAAO,IAAM,CACTF,EAAWF,CAAE,CAChB,CACJ,CACL,EAEMM,GAAc,CAACC,EAAQjV,IAAO,CAAC,CAAE,KAAAkV,EAAM,MAAA/S,EAAO,QAAA0H,EAAU,CAAA,EAAI,UAAAsL,EAAW,eAAA3B,CAAc,IAAO,CAC9F3J,EACK,OAAOjC,GAAUqN,EAAOrN,EAAO,IAAI,CAAC,EACpC,QAAQA,GACLqN,EAAOrN,EAAO,IAAI,EAAE,CAAE,KAAAsN,EAAM,MAAA/S,EAAO,OAAQyF,EAAO,KAAM,UAAAuN,EAAW,eAAA3B,CAAgB,CAAA,CACtF,EACDxT,GACAA,EAAG,CAAE,KAAAkV,EAAM,MAAA/S,EAAO,QAAA0H,EAAS,UAAAsL,EAAW,eAAA3B,EAAgB,CAE9D,EAEM4B,GAAe,CAACC,EAASC,IAC3BA,EAAc,WAAW,aAAaD,EAASC,CAAa,EAE1DC,GAAc,CAACF,EAASC,IACnBA,EAAc,WAAW,aAAaD,EAASC,EAAc,WAAW,EAG7EE,GAAUvf,GAAS,MAAM,QAAQA,CAAK,EAEtCwf,GAAUxf,GAASA,GAAS,KAE5Byf,GAAOlL,GAAOA,EAAI,KAAM,EAExBmL,GAAW1f,GAAS,GAAKA,EAEzB2f,GAAU,CAAC3f,EAAO4f,EAAW,MAC3BJ,GAAQxf,CAAK,EACN,CAAE,EAETuf,GAAQvf,CAAK,EACNA,EAEJ0f,GAAS1f,CAAK,EAChB,MAAM4f,CAAQ,EACd,IAAIH,EAAI,EACR,OAAOlL,GAAOA,EAAI,MAAM,EAG3BsL,GAAY7f,GAAS,OAAOA,GAAU,UAEtC8f,GAAY9f,GAAU6f,GAAU7f,CAAK,EAAIA,EAAQA,IAAU,OAE3D+f,GAAW/f,GAAS,OAAOA,GAAU,SAErCggB,GAAWhgB,GACboX,GAASpX,CAAK,EAAIA,EAAQ+f,GAAS/f,CAAK,EAAI0f,GAAS1f,CAAK,EAAE,QAAQ,WAAY,EAAE,EAAI,EAEpFigB,GAAQjgB,GAAS,SAASggB,GAAShgB,CAAK,EAAG,EAAE,EAE7CkgB,GAAUlgB,GAAS,WAAWggB,GAAShgB,CAAK,CAAC,EAE7CmgB,GAAQngB,GAASoX,GAASpX,CAAK,GAAK,SAASA,CAAK,GAAK,KAAK,MAAMA,CAAK,IAAMA,EAE7EogB,GAAU,CAACpgB,EAAOqgB,EAAO,MAAS,CAEpC,GAAIF,GAAMngB,CAAK,EACX,OAAOA,EAIX,IAAIsgB,EAAkBZ,GAAS1f,CAAK,EAAE,KAAM,EAG5C,MAAI,OAAO,KAAKsgB,CAAe,GAC3BA,EAAkBA,EAAgB,QAAQ,OAAQ,EAAE,EAAE,KAAM,EACrDL,GAAMK,CAAe,EAAID,EAAOA,GAIvC,MAAM,KAAKC,CAAe,GAC1BA,EAAkBA,EAAgB,QAAQ,OAAQ,EAAE,EAAE,KAAM,EACrDL,GAAMK,CAAe,EAAID,GAG7BJ,GAAMK,CAAe,CAChC,EAEMC,GAAavgB,GAAS,OAAOA,GAAU,WAEvCwgB,GAAsBC,GAAU,CAClC,IAAI7U,EAAM,KACN8U,EAASD,EAAO,MAAM,GAAG,EACzBE,EAAQ,KACZ,KAAQA,EAAQD,EAAO,SAEnB,GADA9U,EAAMA,EAAI+U,CAAK,EACX,CAAC/U,EACD,OAAO,KAGf,OAAOA,CACX,EAEMgV,GAAU,CACZ,QAAS,OACT,MAAO,QACP,OAAQ,SACR,MAAO,MACP,QAAS,MACT,KAAM,KACV,EAEMC,GAAkBC,GAAW,CAC/B,MAAMrM,EAAM,CAAE,EAEd,OAAAA,EAAI,IAAMsL,GAASe,CAAO,EAAIA,EAAUA,EAAQ,KAAO,GACvDrM,EAAI,QAAUqM,EAAQ,QAAU,SAASA,EAAQ,QAAS,EAAE,EAAI,EAChErM,EAAI,QAAUqM,EAAQ,QAAUA,EAAQ,QAAU,CAAE,EAEpDjM,EAAM+L,GAASza,GAAO,CAClBsO,EAAItO,CAAG,EAAI4a,GAAa5a,EAAK2a,EAAQ3a,CAAG,EAAGya,GAAQza,CAAG,EAAGsO,EAAI,QAASA,EAAI,OAAO,CACzF,CAAK,EAGDA,EAAI,QAAUqM,EAAQ,SAAWf,GAASe,CAAO,GAAKA,EAAQ,IAAMrM,EAAI,QAAU,KAGlFA,EAAI,OAASqM,EAAQ,QAAU,KAG/B,OAAOrM,EAAI,QAEJA,CACX,EAEMsM,GAAe,CAAC1e,EAAMye,EAASE,EAAQC,EAASC,IAAY,CAE9D,GAAIJ,IAAY,KACZ,OAAO,KAIX,GAAI,OAAOA,GAAY,WACnB,OAAOA,EAIX,MAAMnP,EAAS,CACX,IAAKqP,IAAW,OAASA,IAAW,QAAU,IAAI3e,CAAI,IAAM,GAC5D,OAAA2e,EACA,QAAAE,EACA,gBAAiB,GACjB,QAAAD,EACA,OAAQ,KACR,OAAQ,KACR,QAAS,IACZ,EAGD,GAAIlB,GAASe,CAAO,EAChB,OAAAnP,EAAO,IAAMmP,EACNnP,EAOX,GAHA,OAAO,OAAOA,EAAQmP,CAAO,EAGzBf,GAASpO,EAAO,OAAO,EAAG,CAC1B,MAAMwP,EAAQxP,EAAO,QAAQ,MAAM,OAAO,EAC1CA,EAAO,QAAU,CACb,OAAQwP,EAAM,CAAC,EACf,MAAOA,EAAM,CAAC,CACjB,CACT,CAGI,OAAAxP,EAAO,gBAAkBmO,GAAUnO,EAAO,eAAe,EAElDA,CACX,EAEMyP,GAAcphB,GAAS6gB,GAAgB7gB,CAAK,EAE5CqhB,GAASrhB,GAASA,IAAU,KAE5B6C,GAAW7C,GAAS,OAAOA,GAAU,UAAYA,IAAU,KAE3DshB,GAAQthB,GAEN6C,GAAS7C,CAAK,GACd+f,GAAS/f,EAAM,GAAG,GAClB6C,GAAS7C,EAAM,OAAO,GACtB6C,GAAS7C,EAAM,MAAM,GACrB6C,GAAS7C,EAAM,OAAO,GACtB6C,GAAS7C,EAAM,KAAK,EAItBuhB,GAAUvhB,GACRuf,GAAQvf,CAAK,EACN,QAGPqhB,GAAOrhB,CAAK,EACL,OAGPmgB,GAAMngB,CAAK,EACJ,MAGP,2BAA2B,KAAKA,CAAK,EAC9B,QAGPshB,GAAMthB,CAAK,EACJ,MAGJ,OAAOA,EAGZwhB,GAAsBjN,GACxBA,EACK,QAAQ,SAAU,IAAI,EACtB,QAAQ,SAAU,IAAI,EACtB,QAAQ,SAAU,IAAI,EACtB,QAAQ,SAAU,IAAI,EACtB,QAAQ,SAAU,IAAI,EACtB,QAAQ,SAAU,IAAI,EAEzBkN,GAAkB,CACpB,MAAO9B,GACP,QAASG,GACT,IAAK9f,GAAUuhB,GAAQvhB,CAAK,IAAM,QAAUogB,GAAQpgB,CAAK,EAAIigB,GAAMjgB,CAAK,EACxE,OAAQkgB,GACR,MAAOA,GACP,MAAOE,GACP,OAAQpgB,GAAUugB,GAAWvgB,CAAK,EAAIA,EAAQ0f,GAAS1f,CAAK,EAC5D,SAAUA,GAASwgB,GAAoBxgB,CAAK,EAC5C,UAAWohB,GACX,OAAQphB,GAAS,CACb,GAAI,CACA,OAAO,KAAK,MAAMwhB,GAAoBxhB,CAAK,CAAC,CAC/C,MAAW,CACR,OAAO,IACnB,CACK,CACL,EAEM0hB,GAAY,CAAC1hB,EAAOwC,IAASif,GAAgBjf,CAAI,EAAExC,CAAK,EAExD2hB,GAAiB,CAACC,EAAUC,EAAcC,IAAc,CAE1D,GAAIF,IAAaC,EACb,OAAOD,EAIX,IAAIG,EAAeR,GAAQK,CAAQ,EAGnC,GAAIG,IAAiBD,EAAW,CAE5B,MAAME,EAAiBN,GAAUE,EAAUE,CAAS,EAMpD,GAHAC,EAAeR,GAAQS,CAAc,EAGjCA,IAAmB,KACnB,KAAM,kDAAkD,MAAM,qBAAqBF,CAAS,IAE5FF,EAAWI,CAEvB,CAGI,OAAOJ,CACX,EAEMK,GAAe,CAACJ,EAAcC,IAAc,CAC9C,IAAII,EAAeL,EACnB,MAAO,CACH,WAAY,GACZ,IAAK,IAAMK,EACX,IAAKN,GAAY,CACbM,EAAeP,GAAeC,EAAUC,EAAcC,CAAS,CAClE,CACJ,CACL,EAEMK,GAAgBC,GAAW,CAC7B,MAAM/b,EAAM,CAAE,EACd,OAAAwO,EAAMuN,EAAS3H,GAAQ,CACnB,MAAM4H,EAAmBD,EAAQ3H,CAAI,EACrCpU,EAAIoU,CAAI,EAAIwH,GAAaI,EAAiB,CAAC,EAAGA,EAAiB,CAAC,CAAC,CACzE,CAAK,EACMtN,GAAa1O,CAAG,CAC3B,EAEMic,GAAqBF,IAAY,CAEnC,MAAO,CAAE,EAGT,kBAAmB,KAGnB,kBAAmB,KAGnB,gBAAiB,CAAE,EAGnB,QAASD,GAAcC,CAAO,CAClC,GAEMG,GAAa,CAAC9B,EAAQ+B,EAAY,MACpC/B,EACK,MAAM,WAAW,EACjB,IAAIgC,GAAQA,EAAK,YAAa,CAAA,EAC9B,KAAKD,CAAS,EAEjBE,GAAkB,CAACnG,EAAO6F,IAAY,CACxC,MAAM/b,EAAM,CAAE,EACd,OAAAwO,EAAMuN,EAASjc,GAAO,CAClBE,EAAIF,CAAG,EAAI,CACP,IAAK,IAAMoW,EAAM,SAAQ,EAAG,QAAQpW,CAAG,EACvC,IAAKnG,GAAS,CACVuc,EAAM,SAAS,OAAOgG,GAAWpc,EAAK,GAAG,EAAE,YAAa,CAAA,GAAI,CACxD,MAAAnG,CACpB,CAAiB,CACJ,CACJ,CACT,CAAK,EACMqG,CACX,EAEMsc,GAAsBP,GAAW,CAAC1T,EAAU4F,EAAO7F,IAAU,CAC/D,MAAMpI,EAAM,CAAE,EACd,OAAAwO,EAAMuN,EAASjc,GAAO,CAClB,MAAM9D,EAAOkgB,GAAWpc,EAAK,GAAG,EAAE,YAAa,EAE/CE,EAAI,OAAOhE,CAAI,EAAE,EAAIsP,GAAU,CAC3B,GAAI,CACAlD,EAAM,QAAQtI,CAAG,EAAIwL,EAAO,KAC/B,MAAW,CAExB,CAGYjD,EAAS,WAAWrM,CAAI,GAAI,CAAE,MAAOoM,EAAM,QAAQtI,CAAG,EAAG,CAC5D,CACT,CAAK,EACME,CACX,EAEMuc,GAAsBR,GAAW3T,GAAS,CAC5C,MAAMpI,EAAM,CAAE,EACd,OAAAwO,EAAMuN,EAASjc,GAAO,CAClBE,EAAI,OAAOkc,GAAWpc,EAAK,GAAG,EAAE,YAAa,CAAA,EAAE,EAAIwL,GAAUlD,EAAM,QAAQtI,CAAG,CACtF,CAAK,EACME,CACX,EAEMwc,GAAoB,CACtB,IAAK,EACL,KAAM,EACN,OAAQ,EACR,MAAO,EACP,KAAM,CACV,EAEMC,GAAc,IAChB,KAAK,OAAM,EACN,SAAS,EAAE,EACX,UAAU,EAAG,EAAE,EAElBC,GAAc,CAAC5d,EAAK0Q,IAAU1Q,EAAI,OAAO0Q,EAAO,CAAC,EAEjDmN,GAAM,CAAClO,EAAImO,IAAS,CAClBA,EACAnO,EAAI,EACG,SAAS,OAChB,QAAQ,QAAQ,CAAC,EAAE,KAAKA,CAAE,EAE1B,WAAWA,EAAI,CAAC,CAExB,EAEMoO,GAAK,IAAM,CACb,MAAMxJ,EAAY,CAAE,EACdyJ,EAAM,CAACla,EAAO6L,IAAO,CACvBiO,GACIrJ,EACAA,EAAU,UAAU0J,GAAYA,EAAS,QAAUna,IAAUma,EAAS,KAAOtO,GAAM,CAACA,EAAG,CAC1F,CACJ,EACKuO,EAAO,CAACpa,EAAOY,EAAMoZ,IAAS,CAChCvJ,EACK,OAAO0J,GAAYA,EAAS,QAAUna,CAAK,EAC3C,IAAIma,GAAYA,EAAS,EAAE,EAC3B,QAAQtO,GAAMkO,GAAI,IAAMlO,EAAG,GAAGjL,CAAI,EAAGoZ,CAAI,CAAC,CAClD,EACD,MAAO,CACH,SAAU,CAACha,KAAUY,IAAS,CAC1BwZ,EAAKpa,EAAOY,EAAM,EAAI,CACzB,EACD,KAAM,CAACZ,KAAUY,IAAS,CACtBwZ,EAAKpa,EAAOY,EAAM,EAAK,CAC1B,EACD,GAAI,CAACZ,EAAO6L,IAAO,CACf4E,EAAU,KAAK,CAAE,MAAAzQ,EAAO,GAAA6L,CAAE,CAAE,CAC/B,EACD,OAAQ,CAAC7L,EAAO6L,IAAO,CACnB4E,EAAU,KAAK,CACX,MAAAzQ,EACA,GAAI,IAAIY,IAAS,CACbsZ,EAAIla,EAAO6L,CAAE,EACbA,EAAG,GAAGjL,CAAI,CACb,CACjB,CAAa,CACJ,EACD,IAAAsZ,CACH,CACL,EAEMG,GAA+B,CAACC,EAAKtd,EAAQqF,IAAa,CAC5D,OAAO,oBAAoBiY,CAAG,EACzB,OAAO5O,GAAY,CAACrJ,EAAS,SAASqJ,CAAQ,CAAC,EAC/C,QAAQxO,GACL,OAAO,eAAeF,EAAQE,EAAK,OAAO,yBAAyBod,EAAKpd,CAAG,CAAC,CAC/E,CACT,EAEMqd,GAAU,CACZ,OACA,UACA,SACA,OACA,KACA,MACA,SACA,YACA,SACA,UACA,WACA,UACA,WACA,oBACA,QACJ,EAEMC,GAAgBvgB,GAAQ,CAC1B,MAAMuR,EAAM,CAAE,EACd,OAAA6O,GAA6BpgB,EAAMuR,EAAK+O,EAAO,EACxC/O,CACX,EAEMiP,GAAsBjgB,GAAS,CACjCA,EAAM,QAAQ,CAACP,EAAM2S,IAAU,CACvB3S,EAAK,UACL6f,GAAYtf,EAAOoS,CAAK,CAEpC,CAAK,CACL,EAEM8N,EAAa,CACf,KAAM,EACN,KAAM,EACN,kBAAmB,EACnB,WAAY,EACZ,oBAAqB,EACrB,iBAAkB,EAClB,wBAAyB,GACzB,QAAS,EACT,WAAY,CAChB,EAEMC,GAAa,CACf,MAAO,EACP,MAAO,EACP,MAAO,CACX,EAEMC,GAAgBtP,GAAO,UAAU,KAAKA,CAAG,EAEzCuP,GAAsB,IAAMD,GAAe,IAAK,eAAc,CAAE,EAAE,CAAC,EAEnEE,GAAwB,IAAM,CAGhC,MAAMC,EAAmBF,GAAqB,EACxCG,EAAgC,IAAQ,eAAgB,EAE9D,OAAIA,IADqC,OAE9BJ,GAAcI,CAA4B,EAAE,CAAC,EAEjDD,IAAqB,IAAM,IAAM,GAC5C,EAEME,EAAO,CACT,QAAS,UACT,IAAK,MACL,OAAQ,SACR,OAAQ,SACR,MAAO,QACP,OAAQ,SACR,SAAU,WACV,OAAQ,SACR,WAAY,YACZ,MAAO,OACX,EAGMC,GAAU,CAAE,EAGZC,GAAmB,CAACje,EAAKnG,EAAOqkB,IAClC,IAAI,QAAQ,CAACpkB,EAASC,IAAW,CAE7B,MAAMokB,EAAkBH,GAAQ,OAAOvjB,GAAKA,EAAE,MAAQuF,CAAG,EAAE,IAAIvF,GAAKA,EAAE,EAAE,EAGxE,GAAI0jB,EAAgB,SAAW,EAAG,CAC9BrkB,EAAQD,CAAK,EACb,MACZ,CAGQ,MAAMukB,EAAgBD,EAAgB,MAAO,EAG7CA,EACK,OAEG,CAACE,EAASC,IAASD,EAAQ,KAAKxkB,GAASykB,EAAKzkB,EAAOqkB,CAAK,CAAC,EAG3DE,EAAcvkB,EAAOqkB,CAAK,CAG1C,EACa,KAAKrkB,GAASC,EAAQD,CAAK,CAAC,EAC5B,MAAMyB,GAASvB,EAAOuB,CAAK,CAAC,CACzC,CAAK,EAECijB,GAAe,CAACve,EAAKnG,EAAOqkB,IAC9BF,GAAQ,OAAOvjB,GAAKA,EAAE,MAAQuF,CAAG,EAAE,IAAIvF,GAAKA,EAAE,GAAGZ,EAAOqkB,CAAK,CAAC,EAG5DM,GAAY,CAACxe,EAAK2O,IAAOqP,GAAQ,KAAK,CAAE,IAAAhe,EAAK,GAAA2O,EAAI,EAEjD8P,GAAuBC,GAAqB,OAAO,OAAOC,GAAgBD,CAAiB,EAE3FE,GAAa,KAAO,CAAE,GAAGD,KAEzBE,GAAa3U,GAAQ,CACvBwE,EAAMxE,EAAM,CAAClK,EAAKnG,IAAU,CAEnB8kB,GAAe3e,CAAG,IAGvB2e,GAAe3e,CAAG,EAAE,CAAC,EAAIwb,GACrB3hB,EACA8kB,GAAe3e,CAAG,EAAE,CAAC,EACrB2e,GAAe3e,CAAG,EAAE,CAAC,CACxB,EACT,CAAK,CACL,EAGM2e,GAAiB,CAEnB,GAAI,CAAC,KAAMZ,EAAK,MAAM,EAGtB,KAAM,CAAC,WAAYA,EAAK,MAAM,EAG9B,SAAU,CAAC,GAAOA,EAAK,OAAO,EAG9B,UAAW,CAAC,KAAMA,EAAK,MAAM,EAG7B,SAAU,CAAC,GAAOA,EAAK,OAAO,EAG9B,cAAe,CAAC,KAAMA,EAAK,MAAM,EAMjC,yBAA0B,CAAC,GAAMA,EAAK,OAAO,EAG7C,UAAW,CAAC,GAAMA,EAAK,OAAO,EAC9B,YAAa,CAAC,GAAMA,EAAK,OAAO,EAChC,WAAY,CAAC,GAAMA,EAAK,OAAO,EAC/B,cAAe,CAAC,GAAOA,EAAK,OAAO,EACnC,aAAc,CAAC,GAAMA,EAAK,OAAO,EACjC,YAAa,CAAC,GAAMA,EAAK,OAAO,EAChC,YAAa,CAAC,GAAMA,EAAK,OAAO,EAChC,aAAc,CAAC,GAAMA,EAAK,OAAO,EACjC,aAAc,CAAC,GAAOA,EAAK,OAAO,EAClC,qBAAsB,CAAC,GAAOA,EAAK,OAAO,EAG1C,YAAa,CAAC,GAAOA,EAAK,OAAO,EAGjC,YAAa,CAAC,GAAOA,EAAK,OAAO,EAGjC,SAAU,CAAC,KAAMA,EAAK,GAAG,EACzB,cAAe,CAAC,GAAOA,EAAK,OAAO,EAGnC,0BAA2B,CAAC,GAAMA,EAAK,OAAO,EAC9C,mBAAoB,CAAC,SAAUA,EAAK,MAAM,EAC1C,mBAAoB,CAAC,GAAIA,EAAK,GAAG,EAGjC,WAAY,CAAC,GAAOA,EAAK,OAAO,EAChC,cAAe,CAAC,GAAMA,EAAK,OAAO,EAClC,eAAgB,CAAC,GAAOA,EAAK,OAAO,EACpC,aAAc,CAAC,CAAC,YAAa,YAAa,aAAa,EAAGA,EAAK,KAAK,EAGpE,cAAe,CAAC,GAAMA,EAAK,OAAO,EAClC,mBAAoB,CAAC,EAAGA,EAAK,GAAG,EAChC,2BAA4B,CAAC,GAAMA,EAAK,OAAO,EAG/C,aAAc,CAAC,GAAOA,EAAK,OAAO,EAClC,WAAY,CAAC,GAAOA,EAAK,OAAO,EAChC,UAAW,CAAC,IAASA,EAAK,GAAG,EAC7B,iBAAkB,CAAC,CAAC,IAAK,IAAM,GAAI,EAAGA,EAAK,KAAK,EAGhD,OAAQ,CAAC,KAAMA,EAAK,UAAU,EAG9B,aAAc,CAAC,IAAMA,EAAK,GAAG,EAG7B,mBAAoB,CAAC,QAASA,EAAK,MAAM,EACzC,uBAAwB,CAAC,KAAMA,EAAK,MAAM,EAC1C,uBAAwB,CAAC,KAAMA,EAAK,MAAM,EAC1C,uBAAwB,CAAC,KAAMA,EAAK,MAAM,EAE1C,sBAAuB,CAACJ,KAAuBI,EAAK,MAAM,EAC1D,wBAAyB,CAACH,KAAyBG,EAAK,MAAM,EAE9D,UAAW,CACP,+EACAA,EAAK,MACR,EACD,kBAAmB,CAAC,+BAAgCA,EAAK,MAAM,EAC/D,wBAAyB,CAAC,mBAAoBA,EAAK,MAAM,EACzD,0BAA2B,CAAC,qBAAsBA,EAAK,MAAM,EAC7D,uBAAwB,CAAC,eAAgBA,EAAK,MAAM,EACpD,qBAAsB,CAAC,gBAAiBA,EAAK,MAAM,EACnD,iBAAkB,CAAC,UAAWA,EAAK,MAAM,EACzC,eAAgB,CAAC,QAASA,EAAK,MAAM,EACrC,mBAAoB,CAAC,oBAAqBA,EAAK,MAAM,EACrD,iBAAkB,CAAC,UAAWA,EAAK,MAAM,EACzC,qBAAsB,CAAC,sBAAuBA,EAAK,MAAM,EACzD,oBAAqB,CAAC,YAAaA,EAAK,MAAM,EAC9C,4BAA6B,CAAC,kBAAmBA,EAAK,MAAM,EAC5D,2BAA4B,CAAC,mBAAoBA,EAAK,MAAM,EAC5D,yBAA0B,CAAC,sBAAuBA,EAAK,MAAM,EAC7D,+BAAgC,CAAC,sBAAuBA,EAAK,MAAM,EAEnE,iBAAkB,CAAC,gBAAiBA,EAAK,MAAM,EAC/C,gBAAiB,CAAC,eAAgBA,EAAK,MAAM,EAC7C,eAAgB,CAAC,cAAeA,EAAK,MAAM,EAE3C,sBAAuB,CAAC,SAAUA,EAAK,MAAM,EAC7C,yBAA0B,CAAC,QAASA,EAAK,MAAM,EAC/C,yBAA0B,CAAC,QAASA,EAAK,MAAM,EAC/C,+BAAgC,CAAC,SAAUA,EAAK,MAAM,EACtD,8BAA+B,CAAC,OAAQA,EAAK,MAAM,EACnD,+BAAgC,CAAC,QAASA,EAAK,MAAM,EACrD,uBAAwB,CAAC,SAAUA,EAAK,MAAM,EAG9C,WAAY,CACR,6UACAA,EAAK,MACR,EACD,YAAa,CACT,yTACAA,EAAK,MACR,EACD,UAAW,CACP,8YACAA,EAAK,MACR,EACD,SAAU,CACN,kZACAA,EAAK,MACR,EACD,SAAU,CACN,oQACAA,EAAK,MACR,EAGD,OAAQ,CAAC,KAAMA,EAAK,QAAQ,EAC5B,UAAW,CAAC,KAAMA,EAAK,QAAQ,EAC/B,QAAS,CAAC,KAAMA,EAAK,QAAQ,EAC7B,eAAgB,CAAC,KAAMA,EAAK,QAAQ,EACpC,WAAY,CAAC,KAAMA,EAAK,QAAQ,EAChC,eAAgB,CAAC,KAAMA,EAAK,QAAQ,EACpC,kBAAmB,CAAC,KAAMA,EAAK,QAAQ,EACvC,UAAW,CAAC,KAAMA,EAAK,QAAQ,EAC/B,mBAAoB,CAAC,KAAMA,EAAK,QAAQ,EACxC,sBAAuB,CAAC,KAAMA,EAAK,QAAQ,EAC3C,mBAAoB,CAAC,KAAMA,EAAK,QAAQ,EACxC,oBAAqB,CAAC,KAAMA,EAAK,QAAQ,EACzC,cAAe,CAAC,KAAMA,EAAK,QAAQ,EACnC,eAAgB,CAAC,KAAMA,EAAK,QAAQ,EACpC,aAAc,CAAC,KAAMA,EAAK,QAAQ,EAClC,cAAe,CAAC,KAAMA,EAAK,QAAQ,EACnC,cAAe,CAAC,KAAMA,EAAK,QAAQ,EACnC,eAAgB,CAAC,KAAMA,EAAK,QAAQ,EAGpC,eAAgB,CAAC,KAAMA,EAAK,QAAQ,EACpC,cAAe,CAAC,KAAMA,EAAK,QAAQ,EACnC,iBAAkB,CAAC,KAAMA,EAAK,QAAQ,EACtC,kBAAmB,CAAC,KAAMA,EAAK,QAAQ,EAGvC,iBAAkB,CAAC,KAAMA,EAAK,MAAM,EACpC,sBAAuB,CAAC,KAAMA,EAAK,MAAM,EACzC,0BAA2B,CAAC,KAAMA,EAAK,MAAM,EAC7C,8BAA+B,CAAC,OAAQA,EAAK,MAAM,EACnD,+BAAgC,CAAC,QAASA,EAAK,MAAM,EACrD,2BAA4B,CAAC,QAASA,EAAK,MAAM,EACjD,+BAAgC,CAAC,QAASA,EAAK,MAAM,EACrD,2BAA4B,CAAC,GAAOA,EAAK,OAAO,EAGhD,MAAO,CAAC,CAAA,EAAIA,EAAK,KAAK,EAGtB,QAAS,CAAC,CAAC,oBAAqB,kBAAkB,EAAGA,EAAK,KAAK,CACnE,EAEMe,GAAiB,CAACxhB,EAAO6Q,IAEvBkL,GAAQlL,CAAK,EACN7Q,EAAM,CAAC,GAAK,KAInB0c,GAAM7L,CAAK,EACJ7Q,EAAM6Q,CAAK,GAAK,MAIvB,OAAOA,GAAU,WACjBA,EAAQA,EAAM,IAIX7Q,EAAM,KAAKP,GAAQA,EAAK,KAAOoR,CAAK,GAAK,MAG9C4Q,GAAkCC,GAAe,CACnD,GAAI3F,GAAQ2F,CAAW,EACnB,OAAOA,EAEX,GAAI,IAAI,KAAKA,CAAW,EAAG,CACvB,MAAMhE,EAAQgE,EAAY,MAAM,GAAG,EACnC,OAAOhE,EAAM,CAAC,EAAIA,EAAM,CAAC,CACjC,CACI,OAAO,WAAWgE,CAAW,CACjC,EAEMC,GAAiB3hB,GAASA,EAAM,OAAOP,GAAQ,CAACA,EAAK,QAAQ,EAE7DmiB,GAAS,CACX,MAAO,EACP,KAAM,EACN,MAAO,EACP,KAAM,EACN,MAAO,CACX,EAEA,IAAIC,GAAM,KACV,MAAMC,GAAqB,IAAM,CAC7B,GAAID,KAAQ,KACR,GAAI,CACA,MAAME,EAAe,IAAI,aACzBA,EAAa,MAAM,IAAI,IAAI,KAAK,CAAC,aAAa,EAAG,gBAAgB,CAAC,EAClE,MAAMlP,EAAK,SAAS,cAAc,OAAO,EACzCA,EAAG,aAAa,OAAQ,MAAM,EAC9BA,EAAG,MAAQkP,EAAa,MACxBF,GAAMhP,EAAG,MAAM,SAAW,CAC7B,MAAa,CACVgP,GAAM,EAClB,CAEI,OAAOA,EACX,EAEMG,GAAa,CACf9B,EAAW,WACXA,EAAW,iBACXA,EAAW,uBACf,EACM+B,GAAY,CACd/B,EAAW,QACXA,EAAW,WACXA,EAAW,kBACXA,EAAW,IACf,EACMgC,GAAa,CAAChC,EAAW,mBAAmB,EAE5CiC,GAAqB1iB,GAAQuiB,GAAW,SAASviB,EAAK,MAAM,EAC5D2iB,GAAoB3iB,GAAQwiB,GAAU,SAASxiB,EAAK,MAAM,EAC1D4iB,GAAqB5iB,GAAQyiB,GAAW,SAASziB,EAAK,MAAM,EAE5D6iB,GAAUtX,GACZ5L,GAAS4L,EAAM,QAAQ,MAAM,IAC5B5L,GAAS4L,EAAM,QAAQ,OAAO,OAAO,GAAK8R,GAAW9R,EAAM,QAAQ,OAAO,OAAO,GAEhFkF,GAAUlF,IAAU,CACtB,WAAY,IAAM,CACd,MAAMhL,EAAQ2hB,GAAe3W,EAAM,KAAK,EAElC,CAAE,MAAAuX,EAAO,MAAAC,EAAO,KAAAC,EAAM,KAAAC,EAAM,MAAAC,CAAK,EAAKf,GAE5C,OAAI5hB,EAAM,SAAW,EAAUuiB,EAE3BviB,EAAM,KAAKmiB,EAAkB,EAAUK,EAEvCxiB,EAAM,KAAKoiB,EAAiB,EAAUK,EAEtCziB,EAAM,KAAKqiB,EAAkB,EAAUM,EAEpCD,CACV,EAED,SAAU7R,GAAS2Q,GAAexW,EAAM,MAAO6F,CAAK,EAEpD,gBAAiBA,GAAS2Q,GAAeG,GAAe3W,EAAM,KAAK,EAAG6F,CAAK,EAE3E,iBAAkB,IAAM8Q,GAAe3W,EAAM,KAAK,EAElD,UAAW,IAAMA,EAAM,MAEvB,cAAe6F,GAAS,CACpB,MAAMpR,EAAO+hB,GAAexW,EAAM,MAAO6F,CAAK,EAC9C,OAAOpR,EAAOA,EAAK,SAAW,IACjC,EAED,cAAeoR,GAAS,CACpB,MAAMpR,EAAO+hB,GAAexW,EAAM,MAAO6F,CAAK,EAC9C,OAAOpR,EAAOA,EAAK,SAAW,IACjC,EAED,WAAY,IACR,OAAO,KAAKuL,EAAM,OAAO,EACpB,OAAOtI,GAAO,SAAS,KAAKA,CAAG,CAAC,EAChC,IAAIkgB,IAAW,CACZ,KAAMA,EACN,MAAO5X,EAAM,QAAQ4X,CAAM,CAC3C,EAAc,EAEV,uBAAwB,IACE,SAAS,KAAK5X,EAAM,QAAQ,gBAAgB,EAE5D,EACAyW,GAAgCzW,EAAM,QAAQ,qBAAqB,EAI7E,4BAA6B,IAAMA,EAAM,QAAQ,0BAEjD,oBAAqB6X,GACjBlB,GAAe3W,EAAM,KAAK,EAAE,OAAOvL,GAAQA,EAAK,SAAWojB,CAAM,EAErE,gBAAiB,IAAMlB,GAAe3W,EAAM,KAAK,EAAE,OAEnD,yBAA0B,IACtBA,EAAM,QAAQ,aAAe8W,GAAkB,GAAM,CAACQ,GAAQtX,CAAK,EAEvE,SAAU,IAAMsX,GAAQtX,CAAK,EAE7B,qBAAsB6F,IAAU,CAC5B,WAAYA,EAAM,2BAA2B,GAAK,OAClD,eAAgBA,EAAM,+BAA+B,GAAK,OAC1D,eAAgBA,EAAM,+BAA+B,GAAK,OAC1D,eAAgBA,EAAM,+BAA+B,GAAK,MAClE,EACA,GAEMiS,GAAiB9X,GAAS,CAC5B,MAAM+X,EAAQpB,GAAe3W,EAAM,KAAK,EAAE,OAG1C,GAAI,CAACA,EAAM,QAAQ,cACf,OAAO+X,IAAU,EAIrB,MAAMC,EAAehY,EAAM,QAAQ,SAMnC,OALIgY,IAAiB,MAKjBD,EAAQC,CAMhB,EAEMC,GAAQ,CAAC1mB,EAAO2mB,EAAKC,IAAQ,KAAK,IAAI,KAAK,IAAIA,EAAK5mB,CAAK,EAAG2mB,CAAG,EAE/DE,GAAc,CAAC1hB,EAAK0Q,EAAO3S,IAASiC,EAAI,OAAO0Q,EAAO,EAAG3S,CAAI,EAE7D4jB,GAAa,CAACrjB,EAAOP,EAAM2S,IACzB2J,GAAQtc,CAAI,EACL,KAIP,OAAO2S,EAAU,KACjBpS,EAAM,KAAKP,CAAI,EACRA,IAIX2S,EAAQ6Q,GAAM7Q,EAAO,EAAGpS,EAAM,MAAM,EAGpCojB,GAAYpjB,EAAOoS,EAAO3S,CAAI,EAGvBA,GAGL6jB,GAAkBxS,GACpB,4GAA4G,KACxGA,CACH,EAECyS,GAAqBC,GACvB,GAAGA,CAAG,GACD,MAAM,GAAG,EACT,IAAG,EACH,MAAM,GAAG,EACT,MAAO,EAEVC,GAA2B7kB,GAAQA,EAAK,MAAM,GAAG,EAAE,IAAK,EAExD8kB,GAAuB3kB,GAAQ,CAEjC,GAAI,OAAOA,GAAS,SAChB,MAAO,GAIX,MAAM4kB,EAAU5kB,EAAK,MAAM,GAAG,EAAE,IAAK,EAGrC,MAAI,MAAM,KAAK4kB,CAAO,EACX,MAGP,iBAAiB,KAAKA,CAAO,EACtB,MAGP,QAAQ,KAAKA,CAAO,EACb,MAGP,SAAS,KAAKA,CAAO,EACd,MAIP,SAAS,KAAKA,CAAO,EAEjBA,IAAY,OACL,MAIJA,EAGJ,EACX,EAEMC,GAAU,CAACrnB,EAAOsnB,EAAU,MAAQA,EAAUtnB,GAAO,MAAM,CAACsnB,EAAQ,MAAM,EAE1EC,GAAgB,CAACC,EAAO,IAAI,OAC9B,GAAGA,EAAK,YAAa,CAAA,IAAIH,GAAQG,EAAK,SAAU,EAAG,EAAG,IAAI,CAAC,IAAIH,GAC3DG,EAAK,QAAS,EACd,IACH,CAAA,IAAIH,GAAQG,EAAK,SAAQ,EAAI,IAAI,CAAC,IAAIH,GAAQG,EAAK,WAAU,EAAI,IAAI,CAAC,IAAIH,GACvEG,EAAK,WAAY,EACjB,IACR,CAAK,GAECC,GAAkB,CAACC,EAAMC,EAAUnlB,EAAO,KAAMolB,EAAY,OAAS,CACvE,MAAM3lB,EACF,OAAOO,GAAS,SACVklB,EAAK,MAAM,EAAGA,EAAK,KAAMllB,CAAI,EAC7BklB,EAAK,MAAM,EAAGA,EAAK,KAAMA,EAAK,IAAI,EAC5C,OAAAzlB,EAAK,iBAAmB,IAAI,KAGxBylB,EAAK,gBAAezlB,EAAK,cAAgBylB,EAAK,eAG7C3H,GAAS4H,CAAQ,IAClBA,EAAWJ,GAAe,GAI1BI,GAAYC,IAAc,MAAQV,GAAyBS,CAAQ,EACnE1lB,EAAK,KAAO0lB,GAEZC,EAAYA,GAAaT,GAAqBllB,EAAK,IAAI,EACvDA,EAAK,KAAO0lB,GAAYC,EAAY,IAAMA,EAAY,KAGnD3lB,CACX,EAEM4lB,GAAiB,IACX,OAAO,YACX,OAAO,aACP,OAAO,mBACP,OAAO,gBACP,OAAO,cAGTC,GAAa,CAACC,EAAahjB,IAAa,CAC1C,MAAMijB,EAAKH,GAAgB,EAE3B,GAAIG,EAAI,CACJ,MAAMC,EAAK,IAAID,EACf,OAAAC,EAAG,OAAOF,CAAW,EACdE,EAAG,QAAQljB,CAAQ,CAClC,CAEI,OAAO,IAAI,KAAK,CAACgjB,CAAW,EAAG,CAC3B,KAAMhjB,CACd,CAAK,CACL,EAEMmjB,GAAoC,CAACC,EAAYpjB,IAAa,CAChE,MAAMqjB,EAAK,IAAI,YAAYD,EAAW,MAAM,EACtCE,EAAK,IAAI,WAAWD,CAAE,EAE5B,QAAS,EAAI,EAAG,EAAID,EAAW,OAAQ,IACnCE,EAAG,CAAC,EAAIF,EAAW,WAAW,CAAC,EAGnC,OAAOL,GAAWM,EAAIrjB,CAAQ,CAClC,EAEMujB,GAA+BC,IACzB,cAAc,KAAKA,CAAO,GAAK,CAAE,GAAE,CAAC,GAAK,KAG/CC,GAAiCD,GAEtBA,EAAQ,MAAM,GAAG,EAAE,CAAC,EAGrB,QAAQ,MAAO,EAAE,EAG3BE,GAAiCF,GAC5B,KAAKC,GAA+BD,CAAO,CAAC,EAGjDG,GAA2BH,GAAW,CACxC,MAAMxjB,EAAWujB,GAA6BC,CAAO,EAC/CJ,EAAaM,GAA+BF,CAAO,EAEzD,OAAOL,GAAkCC,EAAYpjB,CAAQ,CACjE,EAEM4jB,GAA2B,CAACJ,EAASZ,EAAUC,IAC1CH,GAAgBiB,GAAyBH,CAAO,EAAGZ,EAAU,KAAMC,CAAS,EAGjFgB,GAAwBC,GAAU,CAEpC,GAAI,CAAC,yBAAyB,KAAKA,CAAM,EAAG,OAAO,KAGnD,MAAMC,EAAUD,EACX,MAAM,2BAA2B,EACjC,OAAO,CAAC,EACR,IAAIxmB,GAAQA,EAAK,KAAM,EAAC,QAAQ,qBAAsB,EAAE,CAAC,EACzD,OAAOA,GAAQA,EAAK,MAAM,EAE/B,OAAOymB,EAAQ,OAAS,UAAUA,EAAQA,EAAQ,OAAS,CAAC,CAAC,EAAI,IACrE,EAEMC,GAAwBF,GAAU,CACpC,GAAI,mBAAmB,KAAKA,CAAM,EAAG,CACjC,MAAMG,EAAOH,EAAO,MAAM,QAAQ,EAAE,CAAC,EACrC,OAAOG,EAAO,SAASA,EAAM,EAAE,EAAI,IAC3C,CACI,OAAO,IACX,EAEMC,GAA0BJ,GACxB,0BAA0B,KAAKA,CAAM,IACzBA,EAAO,MAAM,GAAG,EAAE,CAAC,GAAK,IAAI,KAAM,GACjC,KAKfK,GAAyBhI,GAAW,CACtC,MAAMiI,EAAO,CACT,OAAQ,KACR,KAAM,KACN,KAAM,IACT,EAEKC,EAAOlI,EAAQ,MAAM;AAAA,CAAI,EAC/B,QAAS2H,KAAUO,EAAM,CACrB,MAAM/mB,EAAOumB,GAAsBC,CAAM,EACzC,GAAIxmB,EAAM,CACN8mB,EAAK,KAAO9mB,EACZ,QACZ,CAEQ,MAAM2mB,EAAOD,GAAsBF,CAAM,EACzC,GAAIG,EAAM,CACNG,EAAK,KAAOH,EACZ,QACZ,CAEQ,MAAM9iB,EAAS+iB,GAAwBJ,CAAM,EAC7C,GAAI3iB,EAAQ,CACRijB,EAAK,OAASjjB,EACd,QACZ,CACA,CAEI,OAAOijB,CACX,EAEME,GAAmBC,GAAW,CAChC,MAAM7a,EAAQ,CACV,OAAQ,KACR,SAAU,GACV,SAAU,EACV,KAAM,KACN,UAAW,KACX,SAAU,EACV,QAAS,IACZ,EAEK8a,EAAc,IAAM9a,EAAM,SAC1B+a,EAAQ,IAAM,CACZ/a,EAAM,SAAWA,EAAM,QAAQ,OAC/BA,EAAM,QAAQ,MAAO,CAE5B,EAGKgb,EAAO,IAAM,CAEf,MAAMvjB,EAASuI,EAAM,OAErBgG,EAAI,KAAK,OAAQvO,CAAM,EAGnBA,aAAkB,KAClBuO,EAAI,KAAK,OAAQvO,CAAM,EAChBA,aAAkB,KAEzBuO,EAAI,KAAK,OAAQgT,GAAgBvhB,EAAQA,EAAO,IAAI,CAAC,EAC9C6gB,GAAgB7gB,CAAM,EAE7BuO,EAAI,KAAK,OAAQkU,GAAyBziB,CAAM,CAAC,EAGjDwjB,EAAQxjB,CAAM,CAErB,EAGKwjB,EAAUzC,GAAO,CAEnB,GAAI,CAACqC,EAAS,CACV7U,EAAI,KAAK,QAAS,CACd,KAAM,QACN,KAAM,iBACN,KAAM,GACtB,CAAa,EACD,MACZ,CAGQhG,EAAM,UAAY,KAAK,IAAK,EAG5BA,EAAM,QAAU6a,EACZrC,EACA0C,GAAY,CAERlb,EAAM,SAAW,KAAK,IAAK,EAAGA,EAAM,UAGpCA,EAAM,SAAW,GAGbkb,aAAoB,OACpBA,EAAWlC,GAAgBkC,EAAUA,EAAS,MAAQ3C,GAAmBC,CAAG,CAAC,GAGjFxS,EAAI,KACA,OAEAkV,aAAoB,KAAOA,EAAWA,EAAWA,EAAS,KAAO,IACpE,CACJ,EACDloB,GAAS,CACLgT,EAAI,KACA,QACA,OAAOhT,GAAU,SACX,CACI,KAAM,QACN,KAAM,EACN,KAAMA,CACpC,EAC0BA,CACT,CACJ,EACD,CAACmoB,EAAYpF,EAASqF,IAAU,CAU5B,GARIA,IACApb,EAAM,KAAOob,GAIjBpb,EAAM,SAAW,KAAK,IAAK,EAAGA,EAAM,UAGhC,CAACmb,EAAY,CACbnb,EAAM,SAAW,KACjB,MACpB,CAGgBA,EAAM,SAAW+V,EAAUqF,EAG3BpV,EAAI,KAAK,WAAYhG,EAAM,QAAQ,CACtC,EACD,IAAM,CACFgG,EAAI,KAAK,OAAO,CACnB,EACDkV,GAAY,CACR,MAAMG,EAAWZ,GACb,OAAOS,GAAa,SAAWA,EAAWA,EAAS,OACtD,EACDlV,EAAI,KAAK,OAAQ,CACb,KAAMhG,EAAM,MAAQqb,EAAS,KAC7B,SAAUA,EAAS,KACnB,OAAQA,EAAS,MACrC,CAAiB,CACjB,CACS,CACJ,EAEKrV,EAAM,CACR,GAAGyO,GAAI,EACP,UAAWhd,GAAWuI,EAAM,OAASvI,EACrC,YAAAqjB,EACA,MAAAC,EACA,KAAAC,CACH,EAED,OAAOhV,CACX,EAEMsV,GAAQ/I,GAAU,WAAW,KAAKA,CAAM,EAExCgJ,GAAc,CAAC7V,EAAM8S,EAAK7E,IAAY,CACxC,MAAM3N,EAAM,CACR,UAAW,IAAM,CAAE,EACnB,WAAY,IAAM,CAAE,EACpB,OAAQ,IAAM,CAAE,EAChB,UAAW,IAAM,CAAE,EACnB,QAAS,IAAM,CAAE,EACjB,QAAS,IAAM,CAAE,EACjB,MAAO,IAAM,CACTwV,EAAU,GACVC,EAAI,MAAO,CACd,CACJ,EAGD,IAAID,EAAU,GACVE,EAAkB,GAGtB/H,EAAU,CACN,OAAQ,OACR,QAAS,CAAE,EACX,gBAAiB,GACjB,GAAGA,CACN,EAGD6E,EAAM,UAAUA,CAAG,EAIf8C,GAAM3H,EAAQ,MAAM,GAAKjO,IACzB8S,EAAM,GAAGA,CAAG,GAAG,mBAAmB,OAAO9S,GAAS,SAAWA,EAAO,KAAK,UAAUA,CAAI,CAAC,CAAC,IAI7F,MAAM+V,EAAM,IAAI,eAGVE,EAAUL,GAAM3H,EAAQ,MAAM,EAAI8H,EAAMA,EAAI,OAClD,OAAAE,EAAQ,WAAa/pB,GAAK,CAElB4pB,GAIJxV,EAAI,WAAWpU,EAAE,iBAAkBA,EAAE,OAAQA,EAAE,KAAK,CACvD,EAGD6pB,EAAI,mBAAqB,IAAM,CAEvBA,EAAI,WAAa,GAKjBA,EAAI,aAAe,GAAKA,EAAI,SAAW,GAIvCC,IAIJA,EAAkB,GAGlB1V,EAAI,UAAUyV,CAAG,EACpB,EAGDA,EAAI,OAAS,IAAM,CAEXA,EAAI,QAAU,KAAOA,EAAI,OAAS,IAClCzV,EAAI,OAAOyV,CAAG,EAEdzV,EAAI,QAAQyV,CAAG,CAEtB,EAGDA,EAAI,QAAU,IAAMzV,EAAI,QAAQyV,CAAG,EAGnCA,EAAI,QAAU,IAAM,CAChBD,EAAU,GACVxV,EAAI,QAAS,CAChB,EAGDyV,EAAI,UAAY,IAAMzV,EAAI,UAAUyV,CAAG,EAGvCA,EAAI,KAAK9H,EAAQ,OAAQ6E,EAAK,EAAI,EAG9B9G,GAAMiC,EAAQ,OAAO,IACrB8H,EAAI,QAAU9H,EAAQ,SAI1B,OAAO,KAAKA,EAAQ,OAAO,EAAE,QAAQjc,GAAO,CACxC,MAAMnG,EAAQ,SAAS,mBAAmBoiB,EAAQ,QAAQjc,CAAG,CAAC,CAAC,EAC/D+jB,EAAI,iBAAiB/jB,EAAKnG,CAAK,CACvC,CAAK,EAGGoiB,EAAQ,eACR8H,EAAI,aAAe9H,EAAQ,cAI3BA,EAAQ,kBACR8H,EAAI,gBAAkB,IAI1BA,EAAI,KAAK/V,CAAI,EAENM,CACX,EAEM4V,EAAiB,CAAC7nB,EAAM8nB,EAAM7pB,EAAMygB,KAAa,CACnD,KAAA1e,EACA,KAAA8nB,EACA,KAAA7pB,EACA,QAAAygB,CACJ,GAEMqJ,GAAwBzV,GAAMoV,GAAO,CACvCpV,EAAGuV,EAAe,QAAS,EAAG,UAAWH,EAAI,sBAAqB,CAAE,CAAC,CACzE,EAEMM,GAAQjW,GAAO,KAAK,KAAKA,CAAG,EAC5BkW,GAAW,IAAItJ,IAAU,CAC3B,IAAI8F,EAAM,GACV,OAAA9F,EAAM,QAAQsB,GAAQ,CAClBwE,GAAOuD,GAAMvD,CAAG,GAAKuD,GAAM/H,CAAI,EAAIA,EAAK,QAAQ,KAAM,GAAG,EAAIA,CACrE,CAAK,EACMwE,CACX,EAEMyD,GAAsB,CAACC,EAAS,GAAIhZ,IAAW,CAEjD,GAAI,OAAOA,GAAW,WAClB,OAAOA,EAIX,GAAI,CAACA,GAAU,CAACoO,GAASpO,EAAO,GAAG,EAC/B,OAAO,KAIX,MAAMiZ,EAASjZ,EAAO,SAAW2T,GAAOA,GAClCuF,EAAUlZ,EAAO,UAAY2T,GAAO,MAG1C,MAAO,CAAC2B,EAAKwC,EAAMhoB,EAAOqpB,EAAUtB,EAAOtI,IAAY,CAEnD,MAAM6J,EAAUf,GAAY/C,EAAKwD,GAASE,EAAQhZ,EAAO,GAAG,EAAG,CAC3D,GAAGA,EACH,aAAc,MAC1B,CAAS,EAED,OAAAoZ,EAAQ,OAASb,GAAO,CAEpB,MAAMhJ,EAAUgJ,EAAI,sBAAuB,EAGrCvC,EAAWuB,GAAuBhI,CAAO,EAAE,MAAQ8F,GAAmBC,CAAG,EAG/EwC,EACIY,EACI,OACAH,EAAI,OACJvY,EAAO,SAAW,OACZ,KACA8V,GAAgBmD,EAAOV,EAAI,QAAQ,EAAGvC,CAAQ,EACpDzG,CACpB,CACa,CACJ,EAED6J,EAAQ,QAAUb,GAAO,CACrBzoB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CAC7C,CACa,CACJ,EAEDa,EAAQ,UAAYb,GAAO,CACvBhJ,EAAQmJ,EAAe,UAAWH,EAAI,OAAQ,KAAMA,EAAI,sBAAqB,CAAE,CAAC,CACnF,EAEDa,EAAQ,UAAYR,GAAsB9oB,CAAK,EAC/CspB,EAAQ,WAAaD,EACrBC,EAAQ,QAAUvB,EAGXuB,CACV,CACL,EAEMC,GAAc,CAChB,OAAQ,EACR,SAAU,EACV,WAAY,EACZ,MAAO,EACP,QAAS,CACb,EAYMC,GAAqB,CACvBN,EACAhZ,EACAtP,EACAJ,EACAipB,EACAzB,EACAhoB,EACAqpB,EACAtB,EACA2B,EACA/I,IACC,CAED,MAAMgJ,EAAS,CAAE,EACX,CAAE,gBAAAC,EAAiB,YAAAC,EAAa,UAAAC,EAAW,iBAAAC,CAAkB,EAAGpJ,EAGhE3T,EAAQ,CACV,SAAU4c,EACV,QAAS,EACZ,EAGKI,EAAS9Z,EAAO,SAAW+Z,GAAMA,GACjCd,EACFjZ,EAAO,SACN,CAACuY,EAAKlJ,IACHA,IAAW,OAASkJ,EAAI,kBAAkB,eAAe,EAAIA,EAAI,UACnEW,EAAUlZ,EAAO,UAAY2T,GAAO,MAGpCqG,EAAoB7W,GAAM,CAC5B,MAAM8W,EAAW,IAAI,SAGjB/oB,GAASqoB,CAAQ,GAAGU,EAAS,OAAOvpB,EAAM,KAAK,UAAU6oB,CAAQ,CAAC,EAEtE,MAAMhK,EACF,OAAOvP,EAAO,SAAY,WACpBA,EAAO,QAAQ1P,EAAMipB,CAAQ,EAC7B,CACI,GAAGvZ,EAAO,QACV,gBAAiB1P,EAAK,IACzB,EAEL4pB,EAAgB,CAClB,GAAGla,EACH,QAAAuP,CACH,EAGK6J,EAAUf,GAAYyB,EAAOG,CAAQ,EAAGnB,GAASE,EAAQhZ,EAAO,GAAG,EAAGka,CAAa,EAEzFd,EAAQ,OAASb,GAAOpV,EAAG8V,EAAOV,EAAK2B,EAAc,MAAM,CAAC,EAE5Dd,EAAQ,QAAUb,GACdzoB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CAC7C,CACa,EAELa,EAAQ,UAAYR,GAAsB9oB,CAAK,CAClD,EAEKqqB,EAAwBhX,GAAM,CAChC,MAAMiX,EAAatB,GAASE,EAAQW,EAAY,IAAK7c,EAAM,QAAQ,EAS7Dod,EAAgB,CAClB,QAPA,OAAOla,EAAO,SAAY,WACpBA,EAAO,QAAQlD,EAAM,QAAQ,EAC7B,CACI,GAAGkD,EAAO,OACb,EAIP,OAAQ,MACX,EAEKoZ,EAAUf,GAAY,KAAM+B,EAAYF,CAAa,EAE3Dd,EAAQ,OAASb,GAAOpV,EAAG8V,EAAOV,EAAK2B,EAAc,MAAM,CAAC,EAE5Dd,EAAQ,QAAUb,GACdzoB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CAC7C,CACa,EAELa,EAAQ,UAAYR,GAAsB9oB,CAAK,CAClD,EAGKuqB,EAAiB,KAAK,MAAM/pB,EAAK,KAAOspB,CAAS,EACvD,QAASjqB,EAAI,EAAGA,GAAK0qB,EAAgB1qB,IAAK,CACtC,MAAMmV,EAASnV,EAAIiqB,EACbpX,EAAOlS,EAAK,MAAMwU,EAAQA,EAAS8U,EAAW,iCAAiC,EACrFH,EAAO9pB,CAAC,EAAI,CACR,MAAOA,EACP,KAAM6S,EAAK,KACX,OAAAsC,EACA,KAAAtC,EACA,KAAAlS,EACA,SAAU,EACV,QAAS,CAAC,GAAGupB,CAAgB,EAC7B,OAAQR,GAAY,OACpB,MAAO,KACP,QAAS,KACT,QAAS,IACZ,CACT,CAEI,MAAMiB,EAA2B,IAAMxC,EAAKhb,EAAM,QAAQ,EAEpDyd,EAAkBC,GACpBA,EAAM,SAAWnB,GAAY,QAAUmB,EAAM,SAAWnB,GAAY,MAElEoB,EAAeD,GAAS,CAE1B,GAAI1d,EAAM,QAAS,OAMnB,GAHA0d,EAAQA,GAASf,EAAO,KAAKc,CAAe,EAGxC,CAACC,EAAO,CAEJf,EAAO,MAAMe,GAASA,EAAM,SAAWnB,GAAY,QAAQ,GAC3DiB,EAA0B,EAI9B,MACZ,CAGQE,EAAM,OAASnB,GAAY,WAC3BmB,EAAM,SAAW,KAGjB,MAAMV,EAASH,EAAY,SAAWI,GAAMA,GACtCb,EAAUS,EAAY,UAAYhG,GAAO,MAGzCyG,EAAatB,GAASE,EAAQW,EAAY,IAAK7c,EAAM,QAAQ,EAE7DyS,EACF,OAAOoK,EAAY,SAAY,WACzBA,EAAY,QAAQa,CAAK,EACzB,CACI,GAAGb,EAAY,QACf,eAAgB,kCAChB,gBAAiBa,EAAM,OACvB,gBAAiBlqB,EAAK,KACtB,cAAeA,EAAK,IACvB,EAEL8oB,EAAWoB,EAAM,QAAUnC,GAAYyB,EAAOU,EAAM,IAAI,EAAGJ,EAAY,CACzE,GAAGT,EACH,QAAApK,CACZ,CAAS,EAED6J,EAAQ,OAAS,IAAM,CAEnBoB,EAAM,OAASnB,GAAY,SAG3BmB,EAAM,QAAU,KAGhBE,EAAe,CAClB,EAEDtB,EAAQ,WAAa,CAACuB,EAAkBC,EAAQ1C,KAAU,CACtDsC,EAAM,SAAWG,EAAmBC,EAAS,KAC7CC,EAAqB,CACxB,EAEDzB,EAAQ,QAAUb,GAAO,CACrBiC,EAAM,OAASnB,GAAY,MAC3BmB,EAAM,QAAU,KAChBA,EAAM,MAAQtB,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WACtCuC,EAAkBN,CAAK,GACxB1qB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CACjD,CACiB,CAER,EAEDa,EAAQ,UAAYb,GAAO,CACvBiC,EAAM,OAASnB,GAAY,MAC3BmB,EAAM,QAAU,KACXM,EAAkBN,CAAK,GACxB5B,GAAsB9oB,CAAK,EAAEyoB,CAAG,CAEvC,EAEDa,EAAQ,QAAU,IAAM,CACpBoB,EAAM,OAASnB,GAAY,OAC3BmB,EAAM,QAAU,KAChB3C,EAAO,CACV,CACJ,EAEKiD,EAAoBN,GAElBA,EAAM,QAAQ,SAAW,EAAU,IAGvCA,EAAM,OAASnB,GAAY,QAC3B,aAAamB,EAAM,OAAO,EAC1BA,EAAM,QAAU,WAAW,IAAM,CAC7BC,EAAaD,CAAK,CAC9B,EAAWA,EAAM,QAAQ,OAAO,EAGjB,IAGLK,EAAsB,IAAM,CAE9B,MAAME,EAAuBtB,EAAO,OAAO,CAAC7S,EAAG4T,IACvC5T,IAAM,MAAQ4T,EAAM,WAAa,KAAa,KAC3C5T,EAAI4T,EAAM,SAClB,CAAC,EAGJ,GAAIO,IAAyB,KAAM,OAAO5B,EAAS,GAAO,EAAG,CAAC,EAG9D,MAAM6B,EAAYvB,EAAO,OAAO,CAACvB,EAAOsC,IAAUtC,EAAQsC,EAAM,KAAM,CAAC,EAGvErB,EAAS,GAAM4B,EAAsBC,CAAS,CACjD,EAGKN,EAAgB,IAAM,CACAjB,EAAO,OAAOe,GAASA,EAAM,SAAWnB,GAAY,UAAU,EACjF,QACkB,GACvBoB,EAAc,CACjB,EAEKQ,EAAc,IAAM,CACtBxB,EAAO,QAAQe,GAAS,CACpB,aAAaA,EAAM,OAAO,EACtBA,EAAM,SACNA,EAAM,QAAQ,MAAO,CAErC,CAAS,CACJ,EAGD,OAAK1d,EAAM,SAaPqd,EAAsBrV,GAAU,CAExBhI,EAAM,UAGV2c,EACK,OAAOe,GAASA,EAAM,OAAS1V,CAAM,EACrC,QAAQ0V,GAAS,CACdA,EAAM,OAASnB,GAAY,SAC3BmB,EAAM,SAAWA,EAAM,IAC3C,CAAiB,EAGLE,EAAe,EAC3B,CAAS,EA1BDV,EAAkBkB,GAAY,CAEtBpe,EAAM,UAGV0c,EAAS0B,CAAQ,EAGjBpe,EAAM,SAAWoe,EACjBR,EAAe,EAC3B,CAAS,EAmBE,CACH,MAAO,IAAM,CACT5d,EAAM,QAAU,GAChBme,EAAa,CAChB,CACJ,CACL,EAUME,GAA8B,CAACnC,EAAQhZ,EAAQtP,EAAM+f,IAAY,CACnEngB,EACAipB,EACAzB,EACAhoB,EACAqpB,EACAtB,EACA2B,IACC,CAED,GAAI,CAAClpB,EAAM,OAGX,MAAM8qB,EAAiB3K,EAAQ,aACzB4K,EAAoBD,GAAkB9qB,EAAK,KAAOmgB,EAAQ,UAC1D6K,EAAkBF,IAAmBC,GAAqB5K,EAAQ,YACxE,GAAIngB,aAAgB,MAAQgrB,EACxB,OAAOhC,GACHN,EACAhZ,EACAtP,EACAJ,EACAipB,EACAzB,EACAhoB,EACAqpB,EACAtB,EACA2B,EACA/I,CACH,EAGL,MAAMqJ,EAAS9Z,EAAO,SAAW+Z,GAAMA,GACjCd,EAASjZ,EAAO,SAAW2T,GAAOA,GAClCuF,EAAUlZ,EAAO,UAAY2T,GAAO,MAEpCpE,EACF,OAAOvP,EAAO,SAAY,WACpBA,EAAO,QAAQ1P,EAAMipB,CAAQ,GAAK,CAAA,EAClC,CACI,GAAGvZ,EAAO,OACb,EAELka,EAAgB,CAClB,GAAGla,EACH,QAAAuP,CACH,EAGD,IAAI0K,EAAW,IAAI,SAGf/oB,GAASqoB,CAAQ,GACjBU,EAAS,OAAOvpB,EAAM,KAAK,UAAU6oB,CAAQ,CAAC,GAIjDjpB,aAAgB,KAAO,CAAC,CAAE,KAAM,KAAM,KAAAA,CAAI,CAAE,EAAIA,GAAM,QAAQiB,GAAQ,CACnE0oB,EAAS,OACLvpB,EACAa,EAAK,KACLA,EAAK,OAAS,KAAOA,EAAK,KAAK,KAAO,GAAGA,EAAK,IAAI,GAAGA,EAAK,KAAK,IAAI,EACtE,CACT,CAAK,EAGD,MAAM6nB,EAAUf,GAAYyB,EAAOG,CAAQ,EAAGnB,GAASE,EAAQhZ,EAAO,GAAG,EAAGka,CAAa,EACzF,OAAAd,EAAQ,OAASb,GAAO,CACpBT,EAAKY,EAAe,OAAQH,EAAI,OAAQU,EAAOV,EAAI,QAAQ,EAAGA,EAAI,sBAAuB,CAAA,CAAC,CAC7F,EAEDa,EAAQ,QAAUb,GAAO,CACrBzoB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CACzC,CACS,CACJ,EAEDa,EAAQ,UAAYR,GAAsB9oB,CAAK,EAC/CspB,EAAQ,WAAaD,EACrBC,EAAQ,QAAUvB,EAGXuB,CACX,EAEMmC,GAA0B,CAACvC,EAAS,GAAIhZ,EAAQtP,EAAM+f,IAEpD,OAAOzQ,GAAW,WAAmB,IAAI7F,IAAW6F,EAAOtP,EAAM,GAAGyJ,EAAQsW,CAAO,EAGnF,CAACzQ,GAAU,CAACoO,GAASpO,EAAO,GAAG,EAAU,KAGtCmb,GAA4BnC,EAAQhZ,EAAQtP,EAAM+f,CAAO,EAO9D+K,GAAuB,CAACxC,EAAS,GAAIhZ,IAAW,CAElD,GAAI,OAAOA,GAAW,WAClB,OAAOA,EAIX,GAAI,CAACA,GAAU,CAACoO,GAASpO,EAAO,GAAG,EAC/B,MAAO,CAACyb,EAAc3D,IAASA,EAAM,EAIzC,MAAMmB,EAASjZ,EAAO,SAAW2T,GAAOA,GAClCuF,EAAUlZ,EAAO,UAAY2T,GAAO,MAG1C,MAAO,CAAC8H,EAAc3D,EAAMhoB,IAAU,CAClC,MAAMspB,EAAUf,GACZoD,EACAzC,EAAShZ,EAAO,IAChBA,CACH,EACD,OAAAoZ,EAAQ,OAASb,GAAO,CACpBT,EACIY,EACI,OACAH,EAAI,OACJU,EAAOV,EAAI,QAAQ,EACnBA,EAAI,sBAAqB,CAC7C,CACa,CACJ,EAEDa,EAAQ,QAAUb,GAAO,CACrBzoB,EACI4oB,EACI,QACAH,EAAI,OACJW,EAAQX,EAAI,QAAQ,GAAKA,EAAI,WAC7BA,EAAI,sBAAqB,CAC7C,CACa,CACJ,EAEDa,EAAQ,UAAYR,GAAsB9oB,CAAK,EAExCspB,CACV,CACL,EAEMsC,GAAkB,CAAC1G,EAAM,EAAGC,EAAM,IAAMD,EAAM,KAAK,UAAYC,EAAMD,GAErE2G,GAAoC,CACtCxY,EACAqD,EAAW,IACX1B,EAAS,EACT8W,EAAU,GACVC,EAAU,MACT,CACD,IAAIvM,EAAU,KACd,MAAM3I,EAAQ,KAAK,IAAK,EAElBuG,EAAO,IAAM,CACf,IAAI4O,EAAU,KAAK,IAAG,EAAKnV,EACvBD,EAAQgV,GAAgBE,EAASC,CAAO,EAExCC,EAAUpV,EAAQF,IAClBE,EAAQoV,EAAUpV,EAAQF,GAG9B,IAAI2S,EAAW2C,EAAUtV,EACzB,GAAI2S,GAAY,GAAK,SAAS,OAAQ,CAClChW,EAAG,CAAC,EACJ,MACZ,CAEQA,EAAGgW,CAAQ,EAEX7J,EAAU,WAAWpC,EAAMxG,CAAK,CACnC,EAED,OAAIF,EAAW,GAAG0G,EAAM,EAEjB,CACH,MAAO,IAAM,CACT,aAAaoC,CAAO,CACvB,CACJ,CACL,EAEMyM,GAAsB,CAACC,EAAWvL,IAAY,CAChD,MAAM3T,EAAQ,CACV,SAAU,GACV,kBAAmB,EACnB,4BAA6B,KAC7B,SAAU,KACV,UAAW,KACX,kBAAmB,EACnB,SAAU,EACV,QAAS,KACT,SAAU,IACb,EAEK,CAAE,2BAAAmf,CAA0B,EAAKxL,EAEjCgI,EAAU,CAACnoB,EAAMipB,IAAa,CAChC,MAAM2C,EAAa,IAAM,CAIjBpf,EAAM,WAAa,GAAKA,EAAM,WAAa,MAG/CgG,EAAI,KAAK,WAAYA,EAAI,YAAW,CAAE,CACzC,EAEKqZ,EAAa,IAAM,CACrBrf,EAAM,SAAW,GACjBgG,EAAI,KAAK,iBAAkBhG,EAAM,SAAS,IAAI,CACjD,EAGDgG,EAAI,KAAK,OAAO,EAGhBhG,EAAM,UAAY,KAAK,IAAK,EAG5BA,EAAM,4BAA8B6e,GAChCxC,GAAY,CACRrc,EAAM,kBAAoBqc,EAC1Brc,EAAM,kBAAoB,KAAK,IAAK,EAAGA,EAAM,UAE7Cof,EAAY,EAIRpf,EAAM,UAAYA,EAAM,oBAAsB,GAAK,CAACA,EAAM,UAE1Dqf,EAAY,CAEnB,EAGDF,EAA6BP,GAAgB,IAAK,IAAI,EAAI,CAC7D,EAGD5e,EAAM,QAAUkf,EAEZ1rB,EAGAipB,EAKAvB,GAAY,CAGRlb,EAAM,SAAW5L,GAAS8mB,CAAQ,EAC5BA,EACA,CACI,KAAM,OACN,KAAM,IACN,KAAM,GAAGA,CAAQ,GACjB,QAAS,CAAE,CACd,EAGPlb,EAAM,SAAW,KAAK,IAAK,EAAGA,EAAM,UAGpCA,EAAM,SAAW,EAGjBgG,EAAI,KAAK,OAAQhG,EAAM,SAAS,IAAI,GAMhC,CAACmf,GACAA,GAA8Bnf,EAAM,oBAAsB,IAE3Dqf,EAAY,CAEnB,EAGDrsB,GAAS,CAELgN,EAAM,4BAA4B,MAAO,EAGzCgG,EAAI,KACA,QACA5R,GAASpB,CAAK,EACRA,EACA,CACI,KAAM,QACN,KAAM,EACN,KAAM,GAAGA,CAAK,EAC5C,CACiB,CACJ,EAGD,CAACmoB,EAAYpF,EAASqF,IAAU,CAE5Bpb,EAAM,SAAW,KAAK,IAAK,EAAGA,EAAM,UAGpCA,EAAM,SAAWmb,EAAapF,EAAUqF,EAAQ,KAEhDgE,EAAY,CACf,EAGD,IAAM,CAEFpf,EAAM,4BAA4B,MAAO,EAGzCgG,EAAI,KAAK,QAAShG,EAAM,SAAWA,EAAM,SAAS,KAAO,IAAI,CAChE,EAGDsf,GAAc,CACVtZ,EAAI,KAAK,WAAYsZ,CAAU,CAC/C,CACS,CACJ,EAEKvE,EAAQ,IAAM,CAEX/a,EAAM,UAGXA,EAAM,4BAA4B,MAAO,EAGrCA,EAAM,QAAQ,OAAOA,EAAM,QAAQ,MAAO,EAG9CA,EAAM,SAAW,GACpB,EAEKuf,EAAQ,IAAM,CAChBxE,EAAO,EACP/a,EAAM,SAAW,GACjBA,EAAM,kBAAoB,EAC1BA,EAAM,SAAW,EACjBA,EAAM,UAAY,KAClBA,EAAM,kBAAoB,EAC1BA,EAAM,SAAW,EACjBA,EAAM,QAAU,KAChBA,EAAM,SAAW,IACpB,EAEK8a,EAAcqE,EACd,IAAOnf,EAAM,SAAW,KAAK,IAAIA,EAAM,SAAUA,EAAM,iBAAiB,EAAI,KAC5E,IAAMA,EAAM,UAAY,KAExBwf,EAAcL,EACd,IAAM,KAAK,IAAInf,EAAM,SAAUA,EAAM,iBAAiB,EACtD,IAAMA,EAAM,SAEZgG,EAAM,CACR,GAAGyO,GAAI,EACP,QAAAkH,EACA,MAAAZ,EACA,YAAAD,EACA,YAAA0E,EACA,MAAAD,CACH,EAED,OAAOvZ,CACX,EAEMyZ,GAA8B7rB,GAAQA,EAAK,UAAU,EAAGA,EAAK,YAAY,GAAG,CAAC,GAAKA,EAElF8rB,GAAiBjoB,GAAU,CAC7B,IAAIiO,EAAO,CAACjO,EAAO,KAAMA,EAAO,KAAMA,EAAO,IAAI,EAGjD,OAAIA,aAAkB,MAAQ6gB,GAAgB7gB,CAAM,EAChDiO,EAAK,CAAC,EAAIjO,EAAO,MAAQqhB,GAAe,EACjCR,GAAgB7gB,CAAM,GAE7BiO,EAAK,CAAC,EAAIjO,EAAO,OACjBiO,EAAK,CAAC,EAAImU,GAA6BpiB,CAAM,GACtC6Z,GAAS7Z,CAAM,IAEtBiO,EAAK,CAAC,EAAI6S,GAAmB9gB,CAAM,EACnCiO,EAAK,CAAC,EAAI,EACVA,EAAK,CAAC,EAAI,4BAGP,CACH,KAAMA,EAAK,CAAC,EACZ,KAAMA,EAAK,CAAC,EACZ,KAAMA,EAAK,CAAC,CACf,CACL,EAEMia,GAASpuB,GAAS,CAAC,EAAEA,aAAiB,MAASA,aAAiB,MAAQA,EAAM,MAE9EquB,GAAkB9K,GAAO,CAC3B,GAAI,CAAC1gB,GAAS0gB,CAAG,EAAG,OAAOA,EAC3B,MAAMtd,EAASsZ,GAAQgE,CAAG,EAAI,CAAE,EAAG,CAAE,EACrC,UAAWpd,KAAOod,EAAK,CACnB,GAAI,CAACA,EAAI,eAAepd,CAAG,EAAG,SAC9B,MAAMlF,EAAIsiB,EAAIpd,CAAG,EACjBF,EAAOE,CAAG,EAAIlF,GAAK4B,GAAS5B,CAAC,EAAIotB,GAAgBptB,CAAC,EAAIA,CAC9D,CACI,OAAOgF,CACX,EAEMqoB,GAAa,CAACC,EAAS,KAAMC,EAAsB,KAAMvsB,EAAO,OAAS,CAE3E,MAAMwc,EAAKqE,GAAa,EAKlBrU,EAAQ,CAEV,SAAU,GAGV,OAAQ,GAGR,SAAU,GAGV,OAAQ,KAGR,KAAAxM,EAGA,oBAAAusB,EAGA,WAAY,KAGZ,kBAAmB,GAGnB,OAAQA,EAAsB7K,EAAW,oBAAsBA,EAAW,KAG1E,aAAc,KACd,gBAAiB,IACpB,EAGD,IAAI8K,EAAiC,KAKrC,MAAMvD,EAAW,CAAE,EAGbwD,EAAYpI,GAAW7X,EAAM,OAAS6X,EAGtCjD,EAAO,CAACpa,KAAU6C,IAAW,CAC3B2C,EAAM,UAAYA,EAAM,QAC5BgG,EAAI,KAAKxL,EAAO,GAAG6C,CAAM,CAC5B,EAGK6iB,EAAmB,IAAMzH,GAAyBzY,EAAM,KAAK,IAAI,EACjEmgB,EAAc,IAAMngB,EAAM,KAAK,KAC/BogB,EAAc,IAAMpgB,EAAM,KAAK,KAC/BqgB,EAAU,IAAMrgB,EAAM,KAKtBgb,EAAO,CAACvjB,EAAQ6oB,EAAQnE,IAAW,CAQrC,GANAnc,EAAM,OAASvI,EAGfuO,EAAI,SAAS,MAAM,EAGfhG,EAAM,KAAM,CACZgG,EAAI,SAAS,WAAW,EACxB,MACZ,CAGQhG,EAAM,KAAO0f,GAAejoB,CAAM,EAGlC6oB,EAAO,GAAG,OAAQ,IAAM,CACpB1L,EAAK,WAAW,CAC5B,CAAS,EAGD0L,EAAO,GAAG,OAAQC,GAAQ,CAEtBvgB,EAAM,KAAK,KAAOugB,EAAK,KAGvBvgB,EAAM,KAAK,SAAWugB,EAAK,SAGvBA,EAAK,SACLT,EAAS3K,GAAW,MACpBnV,EAAM,oBAAsBugB,EAAK,OACjCvgB,EAAM,OAASkV,EAAW,qBAI9BN,EAAK,WAAW,CAC5B,CAAS,EAGD0L,EAAO,GAAG,WAAYjE,GAAY,CAC9B4D,EAAU/K,EAAW,OAAO,EAE5BN,EAAK,gBAAiByH,CAAQ,CAC1C,CAAS,EAGDiE,EAAO,GAAG,QAASttB,GAAS,CACxBitB,EAAU/K,EAAW,UAAU,EAE/BN,EAAK,qBAAsB5hB,CAAK,CAC5C,CAAS,EAGDstB,EAAO,GAAG,QAAS,IAAM,CACrBL,EAAU/K,EAAW,IAAI,EACzBN,EAAK,YAAY,CAC7B,CAAS,EAGD0L,EAAO,GAAG,OAAQ9sB,GAAQ,CAEtBwM,EAAM,aAAe,KAGrB,MAAMwgB,EAAU1uB,GAAU,CAEtBkO,EAAM,KAAO2f,GAAO7tB,CAAM,EAAIA,EAASkO,EAAM,KAGzC8f,IAAW3K,GAAW,OAASnV,EAAM,oBACrCigB,EAAU/K,EAAW,mBAAmB,EAExC+K,EAAU/K,EAAW,IAAI,EAG7BN,EAAK,MAAM,CACd,EAEK5hB,EAAQlB,GAAU,CAEpBkO,EAAM,KAAOxM,EACbohB,EAAK,WAAW,EAEhBqL,EAAU/K,EAAW,UAAU,EAC/BN,EAAK,kBAAmB9iB,CAAM,CACjC,EAGD,GAAIkO,EAAM,oBAAqB,CAC3BwgB,EAAQhtB,CAAI,EACZ,MAChB,CAGY2oB,EAAO3oB,EAAMgtB,EAASxtB,CAAK,CACvC,CAAS,EAGDstB,EAAO,UAAU7oB,CAAM,EAGvBuI,EAAM,aAAesgB,EAGrBA,EAAO,KAAM,CAChB,EAEKG,EAAY,IAAM,CACfzgB,EAAM,cAGXA,EAAM,aAAa,KAAM,CAC5B,EAEK0gB,EAAY,IAAM,CACpB,GAAI1gB,EAAM,aAAc,CACpBA,EAAM,aAAa,MAAO,EAC1B,MACZ,CACQigB,EAAU/K,EAAW,IAAI,EACzBN,EAAK,YAAY,CACpB,EAKK+G,EAAU,CAACgF,EAAWC,IAAc,CAEtC,GAAI5gB,EAAM,kBAAmB,CACzBA,EAAM,kBAAoB,GAC1B,MACZ,CASQ,GANAigB,EAAU/K,EAAW,UAAU,EAG/B8K,EAAiC,KAG7B,EAAEhgB,EAAM,gBAAgB,MAAO,CAC/BgG,EAAI,GAAG,OAAQ,IAAM,CACjB2V,EAAQgF,EAAWC,CAAS,CAC5C,CAAa,EACD,MACZ,CAGQD,EAAU,GAAG,OAAQZ,GAAuB,CAExC/f,EAAM,WAAa,KACnBA,EAAM,oBAAsB+f,CACxC,CAAS,EAGDY,EAAU,GAAG,WAAYrB,GAAc,CAEnCtf,EAAM,WAAasf,CAC/B,CAAS,EAEDqB,EAAU,GAAG,iBAAkBZ,GAAuB,CAElD/f,EAAM,gBAAkB,KAGxBA,EAAM,WAAa,KACnBA,EAAM,oBAAsB+f,EAE5BE,EAAU/K,EAAW,mBAAmB,EACxCN,EAAK,mBAAoBmL,CAAmB,CACxD,CAAS,EAEDY,EAAU,GAAG,QAAS,IAAM,CACxB/L,EAAK,eAAe,CAChC,CAAS,EAED+L,EAAU,GAAG,QAAS3tB,GAAS,CAC3BgN,EAAM,gBAAkB,KACxBigB,EAAU/K,EAAW,gBAAgB,EACrCN,EAAK,gBAAiB5hB,CAAK,CACvC,CAAS,EAED2tB,EAAU,GAAG,QAASZ,GAAuB,CACzC/f,EAAM,gBAAkB,KAGxBA,EAAM,oBAAsB+f,EAE5BE,EAAU/K,EAAW,IAAI,EACzBN,EAAK,eAAe,EAGhBoL,GACAA,EAAgC,CAEhD,CAAS,EAEDW,EAAU,GAAG,WAAYtE,GAAY,CACjCzH,EAAK,mBAAoByH,CAAQ,CAC7C,CAAS,EAGD,MAAMmE,EAAUhtB,GAAQ,CAEhBwM,EAAM,UAGV2gB,EAAU,QAAQntB,EAAM,CAAE,GAAGipB,CAAQ,CAAE,CAC1C,EAGKzpB,EAAQ,QAAQ,MAGtB4tB,EAAU5gB,EAAM,KAAMwgB,EAASxtB,CAAK,EAGpCgN,EAAM,gBAAkB2gB,CAC3B,EAEKE,EAAoB,IAAM,CAC5B7gB,EAAM,kBAAoB,GAC1BigB,EAAU/K,EAAW,iBAAiB,CACzC,EAEK4L,EAAkB,IACpB,IAAI,QAAQtvB,GAAW,CACnB,GAAI,CAACwO,EAAM,gBAAiB,CACxBA,EAAM,kBAAoB,GAE1BigB,EAAU/K,EAAW,IAAI,EACzBN,EAAK,eAAe,EAEpBpjB,EAAS,EACT,MAChB,CAEYwuB,EAAiC,IAAM,CACnCxuB,EAAS,CACZ,EAEDwO,EAAM,gBAAgB,MAAO,CACzC,CAAS,EAKC+gB,EAAS,CAACC,EAAkBC,IAC9B,IAAI,QAAQ,CAACzvB,EAASC,IAAW,CAG7B,MAAMyvB,EACFlhB,EAAM,sBAAwB,KAAOA,EAAM,oBAAsBA,EAAM,WAG3E,GAAIkhB,IAAqB,KAAM,CAC3B1vB,EAAS,EACT,MAChB,CAGYwvB,EACIE,EACA,IAAM,CAEFlhB,EAAM,oBAAsB,KAC5BA,EAAM,WAAa,KACnBxO,EAAS,CACZ,EACDwB,GAAS,CAEL,GAAI,CAACiuB,EAAa,CACdzvB,EAAS,EACT,MACxB,CAGoByuB,EAAU/K,EAAW,uBAAuB,EAC5CN,EAAK,sBAAsB,EAC3BnjB,EAAOuB,CAAK,CAChC,CACa,EAGDitB,EAAU/K,EAAW,IAAI,EACzBN,EAAK,gBAAgB,CACjC,CAAS,EAGCuM,EAAc,CAACzpB,EAAKnG,EAAO6vB,IAAW,CACxC,MAAMhqB,EAAOM,EAAI,MAAM,GAAG,EACpB8Y,EAAOpZ,EAAK,CAAC,EACb2Y,EAAO3Y,EAAK,IAAK,EACvB,IAAIsO,EAAO+W,EACXrlB,EAAK,QAAQM,GAAQgO,EAAOA,EAAKhO,CAAG,CAAE,EAGlC,KAAK,UAAUgO,EAAKqK,CAAI,CAAC,IAAM,KAAK,UAAUxe,CAAK,IAGvDmU,EAAKqK,CAAI,EAAIxe,EAGbqjB,EAAK,kBAAmB,CACpB,IAAKpE,EACL,MAAOiM,EAASjM,CAAI,EACpB,OAAA4Q,CACZ,CAAS,EACJ,EAIKpb,EAAM,CACR,GAAI,CAAE,IAAK,IAAMgK,CAAI,EACrB,OAAQ,CAAE,IAAK,IAAM8P,EAAQ,IAAKvuB,GAAUuuB,EAASvuB,CAAQ,EAC7D,SAAU,CAAE,IAAK,IAAMyO,EAAM,mBAAqB,EAClD,WAAY,CAAE,IAAK,IAAMA,EAAM,UAAY,EAC3C,OAAQ,CAAE,IAAK,IAAMA,EAAM,MAAQ,EACnC,SAAU,CAAE,IAAK,IAAMA,EAAM,KAAK,IAAM,EACxC,yBAA0B,CAAE,IAAK,IAAMyf,GAA4Bzf,EAAM,KAAK,IAAI,CAAG,EACrF,cAAe,CAAE,IAAKkgB,CAAkB,EACxC,SAAU,CAAE,IAAKC,CAAa,EAC9B,SAAU,CAAE,IAAKC,CAAa,EAC9B,KAAM,CAAE,IAAKC,CAAS,EACtB,aAAc,CAAE,IAAK,IAAMrgB,EAAM,KAAK,aAAe,EAErD,OAAQ,CAAE,IAAK,IAAMA,EAAM,MAAQ,EAEnC,YAlBgBtI,GAAOkoB,GAAgBloB,EAAM+kB,EAAS/kB,CAAG,EAAI+kB,CAAQ,EAmBrE,YAAa,CAAC/kB,EAAKnG,EAAO6vB,IAAW,CACjC,GAAIhtB,GAASsD,CAAG,EAAG,CACf,MAAMgO,EAAOhO,EACb,cAAO,KAAKgO,CAAI,EAAE,QAAQhO,GAAO,CAC7BypB,EAAYzpB,EAAKgO,EAAKhO,CAAG,EAAGnG,CAAK,CACrD,CAAiB,EACMmG,CACvB,CACY,OAAAypB,EAAYzpB,EAAKnG,EAAO6vB,CAAM,EACvB7vB,CACV,EAED,OAAQ,CAACqC,EAAMytB,IAAaC,EAAQ1tB,CAAI,EAAIytB,EAE5C,UAAAX,EACA,UAAAD,EACA,kBAAAI,EACA,gBAAAC,EAEA,KAAA9F,EACA,QAAAW,EACA,OAAAoF,EAEA,GAAGtM,GAAI,EAEP,OAAQ,IAAOzU,EAAM,OAAS,GAE9B,QAAS,IAAOA,EAAM,SAAW,GACjC,SAAU,CAAE,IAAK,IAAMA,EAAM,QAAU,EAEvC,QAAS,IAAOA,EAAM,SAAW,GACjC,SAAU,CAAE,IAAK,IAAMA,EAAM,QAAU,EAGvC,QAASxM,GAASwM,EAAM,KAAOxM,CAClC,EAGK8tB,EAAUhb,GAAaN,CAAG,EAEhC,OAAOsb,CACX,EAEMC,GAAsB,CAACvsB,EAAO6Q,IAE5BkL,GAAQlL,CAAK,EACN,EAINyL,GAASzL,CAAK,EAKZ7Q,EAAM,UAAUP,GAAQA,EAAK,KAAOoR,CAAK,EAJrC,GAOT2b,GAAc,CAACxsB,EAAOysB,IAAW,CACnC,MAAMra,EAAQma,GAAoBvsB,EAAOysB,CAAM,EAC/C,GAAI,EAAAra,EAAQ,GAGZ,OAAOpS,EAAMoS,CAAK,GAAK,IAC3B,EAEMsa,GAAY,CAAClJ,EAAKwC,EAAMhoB,EAAOqpB,EAAUtB,EAAOtI,IAAY,CAC9D,MAAM6J,EAAUf,GAAY,KAAM/C,EAAK,CACnC,OAAQ,MACR,aAAc,MACtB,CAAK,EAED,OAAA8D,EAAQ,OAASb,GAAO,CAEpB,MAAMhJ,EAAUgJ,EAAI,sBAAuB,EAGrCvC,EAAWuB,GAAuBhI,CAAO,EAAE,MAAQ8F,GAAmBC,CAAG,EAG/EwC,EAAKY,EAAe,OAAQH,EAAI,OAAQzC,GAAgByC,EAAI,SAAUvC,CAAQ,EAAGzG,CAAO,CAAC,CAC5F,EAED6J,EAAQ,QAAUb,GAAO,CACrBzoB,EAAM4oB,EAAe,QAASH,EAAI,OAAQA,EAAI,WAAYA,EAAI,sBAAqB,CAAE,CAAC,CACzF,EAEDa,EAAQ,UAAYb,GAAO,CACvBhJ,EAAQmJ,EAAe,UAAWH,EAAI,OAAQ,KAAMA,EAAI,sBAAqB,CAAE,CAAC,CACnF,EAEDa,EAAQ,UAAYR,GAAsB9oB,CAAK,EAC/CspB,EAAQ,WAAaD,EACrBC,EAAQ,QAAUvB,EAGXuB,CACX,EAEMqF,GAAmBnJ,IACjBA,EAAI,QAAQ,IAAI,IAAM,IACtBA,EAAM,SAAS,SAAWA,GAEvBA,EACF,YAAW,EACX,QAAQ,QAAS,EAAE,EACnB,QAAQ,gBAAiB,IAAI,EAC7B,MAAM,GAAG,EAAE,CAAC,GAGfoJ,GAAgBpJ,IACjBA,EAAI,QAAQ,GAAG,EAAI,IAAMA,EAAI,QAAQ,IAAI,EAAI,KAC9CmJ,GAAiB,SAAS,IAAI,IAAMA,GAAiBnJ,CAAG,EAEtDqJ,GAAeC,GAAS,IAAIzkB,IAAYyU,GAAWgQ,CAAK,EAAIA,EAAM,GAAGzkB,CAAM,EAAIykB,EAE/EC,GAAattB,GAAQ,CAACkrB,GAAOlrB,EAAK,IAAI,EAEtCutB,GAAc,CAAC/hB,EAAUD,IAAU,CACrC,aAAaA,EAAM,iBAAiB,EACpCA,EAAM,kBAAoB,WAAW,IAAM,CACvCC,EAAS,mBAAoB,CAAE,MAAO0W,GAAe3W,EAAM,KAAK,EAAG,CACtE,EAAE,CAAC,CACR,EAEMiiB,GAAkB,CAAC3mB,KAAO+B,IAC5B,IAAI,QAAQ7L,GAAW,CACnB,GAAI,CAAC8J,EACD,OAAO9J,EAAQ,EAAI,EAGvB,MAAMM,EAASwJ,EAAG,GAAG+B,CAAM,EAE3B,GAAIvL,GAAU,KACV,OAAON,EAAQ,EAAI,EAGvB,GAAI,OAAOM,GAAW,UAClB,OAAON,EAAQM,CAAM,EAGrB,OAAOA,EAAO,MAAS,YACvBA,EAAO,KAAKN,CAAO,CAE/B,CAAK,EAEC0wB,GAAY,CAACliB,EAAOmiB,IAAY,CAClCniB,EAAM,MAAM,KAAK,CAAC7D,EAAGqT,IAAM2S,EAAQnN,GAAc7Y,CAAC,EAAG6Y,GAAcxF,CAAC,CAAC,CAAC,CAC1E,EAGM4S,GAA0B,CAACpiB,EAAOqiB,IAAgB,CAAC,CACrD,MAAAxc,EACA,QAAA2a,EAAU,IAAM,CAAE,EAClB,QAAA8B,EAAU,IAAM,CAAE,EAClB,GAAG3O,CACP,EAAI,KAAO,CACP,MAAMlf,EAAO+hB,GAAexW,EAAM,MAAO6F,CAAK,EAC9C,GAAI,CAACpR,EAAM,CACP6tB,EAAQ,CACJ,MAAO1G,EAAe,QAAS,EAAG,gBAAgB,EAClD,KAAM,IAClB,CAAS,EACD,MACR,CACIyG,EAAY5tB,EAAM+rB,EAAS8B,EAAS3O,GAAW,CAAA,CAAE,CACrD,EAEMxO,GAAU,CAAClF,EAAU4F,EAAO7F,KAAW,CAIzC,UAAW,IAAM,CACb2W,GAAe3W,EAAM,KAAK,EAAE,QAAQvL,GAAQ,CACxCA,EAAK,OAAQ,EACbA,EAAK,UAAW,EAChBA,EAAK,gBAAiB,CAClC,CAAS,CACJ,EAKD,cAAe,CAAC,CAAE,MAAAlD,EAAQ,CAAA,KAAS,CAE/B,MAAMsD,EAAQtD,EAAM,IAAIiC,IAAS,CAC7B,OAAQA,EAAK,OAASA,EAAK,OAASA,EACpC,QAASA,EAAK,OAC1B,EAAU,EAIF,IAAI+uB,EAAc5L,GAAe3W,EAAM,KAAK,EAE5CuiB,EAAY,QAAQ9tB,GAAQ,CAEnBI,EAAM,KAAKrB,GAAQA,EAAK,SAAWiB,EAAK,QAAUjB,EAAK,SAAWiB,EAAK,IAAI,GAC5EwL,EAAS,cAAe,CAAE,MAAOxL,EAAM,OAAQ,GAAO,CAEtE,CAAS,EAGD8tB,EAAc5L,GAAe3W,EAAM,KAAK,EACxCnL,EAAM,QAAQ,CAACrB,EAAM4T,IAAU,CAEvBmb,EAAY,KAAK9tB,GAAQA,EAAK,SAAWjB,EAAK,QAAUiB,EAAK,OAASjB,EAAK,MAAM,GAIrFyM,EAAS,WAAY,CACjB,GAAGzM,EACH,kBAAmB4gB,GAAkB,KACrC,MAAAhN,CAChB,CAAa,CACb,CAAS,CACJ,EAED,yBAA0B,CAAC,CAAE,GAAA4I,EAAI,OAAA9M,EAAQ,OAAAsf,CAAM,IAAO,CAE9CA,EAAO,SAGX,aAAaxiB,EAAM,iBAAiB,EACpCA,EAAM,kBAAoB,WAAW,IAAM,CACvC,MAAMvL,EAAO+sB,GAAYxhB,EAAM,MAAOgQ,CAAE,EAGxC,GAAI,CAACnK,EAAM,UAAU,EAAG,CAEpB8P,GAAiB,wBAAyB,GAAO,CAC7C,KAAAlhB,EACA,MAAAoR,EACA,OAAA3C,EACA,OAAAsf,CACpB,CAAiB,EAAE,KAAKC,GAAuB,CAE3B,MAAMC,EAAoB7c,EAAM,yBAAyB,EACrD6c,IACAD,EAAsBC,EAAkBjuB,EAAMguB,CAAmB,GAEhEA,GAELxiB,EACI,yBACA,CACI,MAAO+P,EACP,KAAAvb,EACA,QAASjB,GAAQ,CACbyM,EAAS,qBAAsB,CAAE,GAAA+P,EAAI,KAAAxc,CAAI,CAAE,CAC9C,CACJ,EACD,EACH,CACrB,CAAiB,EAED,MAChB,CAGgBiB,EAAK,SAAW0gB,GAAW,OAC3BlV,EAAS,gBAAiB,CACtB,GAAIxL,EAAK,GACT,MAAO,KACP,oBAAqBA,EAAK,MAC9C,CAAiB,EAIL,MAAMkuB,EAAS,IAAM,CAEjB,WAAW,IAAM,CACb1iB,EAAS,0BAA2B,CAAE,MAAO+P,CAAE,CAAE,CACpD,EAAE,EAAE,CACR,EAEK+Q,EAAS6B,GAAY,CACvBnuB,EAAK,OACDiqB,GAAqB1e,EAAM,QAAQ,OAAO,IAAKA,EAAM,QAAQ,OAAO,MAAM,EAC1E6F,EAAM,kBAAkB,CAC5C,EACqB,KAAK+c,EAAWD,EAAS,IAAM,CAAE,CAAA,EACjC,MAAM,IAAM,CAAA,CAAE,CACtB,EAEK5H,EAAQ6H,GAAY,CACtBnuB,EAAK,gBAAe,EAAG,KAAKmuB,EAAWD,EAAS,IAAM,EAAE,CAC3D,EAGD,GAAIluB,EAAK,SAAWygB,EAAW,oBAC3B,OAAO6L,EAAO/gB,EAAM,QAAQ,aAAa,EAI7C,GAAIvL,EAAK,SAAWygB,EAAW,WAC3B,OAAO6F,EAAM/a,EAAM,QAAQ,aAAa,EAGxCA,EAAM,QAAQ,eACd2iB,EAAQ,CAEf,EAAE,CAAC,EACP,EAED,UAAW,CAAC,CAAE,MAAA9c,EAAO,MAAAuB,KAAY,CAC7B,MAAM3S,EAAO+hB,GAAexW,EAAM,MAAO6F,CAAK,EAC9C,GAAI,CAACpR,EAAM,OACX,MAAMouB,EAAe7iB,EAAM,MAAM,QAAQvL,CAAI,EAC7C2S,EAAQ6Q,GAAM7Q,EAAO,EAAGpH,EAAM,MAAM,OAAS,CAAC,EAC1C6iB,IAAiBzb,GACrBpH,EAAM,MAAM,OAAOoH,EAAO,EAAGpH,EAAM,MAAM,OAAO6iB,EAAc,CAAC,EAAE,CAAC,CAAC,CACtE,EAED,KAAM,CAAC,CAAE,QAAAV,KAAc,CACnBD,GAAUliB,EAAOmiB,CAAO,EACxBliB,EAAS,iBAAkB,CACvB,MAAO4F,EAAM,kBAAkB,CAC3C,CAAS,CACJ,EAED,UAAW,CAAC,CAAE,MAAA7Q,EAAO,MAAAoS,EAAO,kBAAA0b,EAAmB,QAAAtC,EAAU,IAAM,GAAI,QAAA8B,EAAU,IAAM,CAAA,KAAS,CACxF,IAAIO,EAAezb,EAEnB,GAAIA,IAAU,IAAM,OAAOA,EAAU,IAAa,CAC9C,MAAM2b,EAAiBld,EAAM,0BAA0B,EACjDmd,EAAand,EAAM,iBAAiB,EAC1Cgd,EAAeE,IAAmB,SAAW,EAAIC,CAC7D,CAEQ,MAAMC,EAAepd,EAAM,mBAAmB,EACxCqd,EAAczrB,GAChBkoB,GAAOloB,CAAM,EAAI,CAACwrB,EAAa,SAASxrB,EAAO,KAAK,YAAa,CAAA,EAAI,CAACsZ,GAAQtZ,CAAM,EAGlF0rB,EAFanuB,EAAM,OAAOkuB,CAAW,EAEf,IACxBzrB,GACI,IAAI,QAAQ,CAACjG,EAASC,IAAW,CAC7BwO,EAAS,WAAY,CACjB,kBAAA6iB,EACA,OAAQrrB,EAAO,QAAUA,EACzB,QAASjG,EACT,QAASC,EACT,MAAOoxB,IACP,QAASprB,EAAO,SAAW,CAAE,CACrD,CAAqB,CACJ,CAAA,CACR,EAED,QAAQ,IAAI0rB,CAAQ,EACf,KAAK3C,CAAO,EACZ,MAAM8B,CAAO,CACrB,EAOD,SAAU,CAAC,CACP,OAAA7qB,EACA,MAAA2P,EAAQ,GACR,kBAAA0b,EACA,QAAAtC,EAAU,IAAM,CAAE,EAClB,QAAA8B,EAAU,IAAM,CAAE,EAClB,QAAA3O,EAAU,CAAE,CACpB,IAAU,CAEF,GAAI5C,GAAQtZ,CAAM,EAAG,CACjB6qB,EAAQ,CACJ,MAAO1G,EAAe,QAAS,EAAG,WAAW,EAC7C,KAAM,IACtB,CAAa,EACD,MACZ,CAGQ,GAAI+D,GAAOloB,CAAM,GAAKuI,EAAM,QAAQ,aAAa,SAASvI,EAAO,KAAK,YAAa,CAAA,EAE/E,OAIJ,GAAI,CAACqgB,GAAe9X,CAAK,EAAG,CAGxB,GACIA,EAAM,QAAQ,eACb,CAACA,EAAM,QAAQ,eAAiB,CAACA,EAAM,QAAQ,aAClD,CACE,MAAMhN,EAAQ4oB,EAAe,UAAW,EAAG,WAAW,EAEtD3b,EAAS,sBAAuB,CAC5B,OAAAxI,EACA,MAAAzE,CACpB,CAAiB,EAEDsvB,EAAQ,CAAE,MAAAtvB,EAAO,KAAM,IAAI,CAAE,EAE7B,MAChB,CAIY,MAAMyB,EAAOkiB,GAAe3W,EAAM,KAAK,EAAE,CAAC,EAG1C,GACIvL,EAAK,SAAWygB,EAAW,qBAC3BzgB,EAAK,SAAWygB,EAAW,wBAC7B,CACE,MAAM+L,EAAcpb,EAAM,kBAAkB,EAoB5C,GAnBApR,EAAK,OACDiqB,GAAqB1e,EAAM,QAAQ,OAAO,IAAKA,EAAM,QAAQ,OAAO,MAAM,EAC1EihB,CACpB,EACqB,KAAK,IAAM,CACHA,GAGLhhB,EAAS,WAAY,CACjB,OAAAxI,EACA,MAAA2P,EACA,kBAAA0b,EACA,QAAAtC,EACA,QAAA8B,EACA,QAAA3O,CAC5B,CAAyB,CACJ,CAAA,EACA,MAAM,IAAM,CAAA,CAAE,EAEfsN,EAAa,MACjC,CAGYhhB,EAAS,cAAe,CAAE,MAAOxL,EAAK,EAAE,CAAE,CACtD,CAGQ,MAAMqrB,EACFnM,EAAQ,OAAS,QACXwB,GAAW,MACXxB,EAAQ,OAAS,QACjBwB,GAAW,MACXA,GAAW,MAGf1gB,EAAOorB,GAETC,EAGAA,IAAW3K,GAAW,MAAQ,KAAO1d,EAGrCkc,EAAQ,IACX,EAGD,OAAO,KAAKA,EAAQ,UAAY,CAAA,CAAE,EAAE,QAAQjc,GAAO,CAC/CjD,EAAK,YAAYiD,EAAKic,EAAQ,SAASjc,CAAG,CAAC,CACvD,CAAS,EAGDue,GAAa,kBAAmBxhB,EAAM,CAAE,MAAAoR,EAAO,SAAA5F,CAAQ,CAAE,EAGzD,MAAMmjB,EAAqBvd,EAAM,0BAA0B,EAGtD7F,EAAM,QAAQ,4BACfoH,EAAQgc,IAAuB,SAAW,GAAKpjB,EAAM,MAAM,QAI/DqY,GAAWrY,EAAM,MAAOvL,EAAM2S,CAAK,EAG/B0K,GAAWsR,CAAkB,GAAK3rB,GAClCyqB,GAAUliB,EAAOojB,CAAkB,EAIvC,MAAMpT,EAAKvb,EAAK,GAGhBA,EAAK,GAAG,OAAQ,IAAM,CAClBwL,EAAS,gBAAiB,CAAE,GAAA+P,EAAI,CAC5C,CAAS,EAEDvb,EAAK,GAAG,YAAa,IAAM,CACvBwL,EAAS,sBAAuB,CAAE,GAAA+P,EAAI,CAClD,CAAS,EAEDvb,EAAK,GAAG,YAAa,IAAM,CACvBwL,EAAS,uBAAwB,CAAE,GAAA+P,EAAI,CACnD,CAAS,EAEDvb,EAAK,GAAG,gBAAiB4nB,GAAY,CACjCpc,EAAS,gCAAiC,CAAE,GAAA+P,EAAI,SAAAqM,CAAQ,CAAE,CACtE,CAAS,EAED5nB,EAAK,GAAG,qBAAsBzB,GAAS,CACnC,MAAMqwB,EAAaxB,GAAa7hB,EAAM,QAAQ,kBAAkB,EAAEhN,CAAK,EAGvE,GAAIA,EAAM,MAAQ,KAAOA,EAAM,KAAO,IAAK,CACvCiN,EAAS,yBAA0B,CAC/B,GAAA+P,EACA,MAAAhd,EACA,OAAQ,CACJ,KAAMqwB,EACN,IAAK,GAAGrwB,EAAM,IAAI,KAAKA,EAAM,IAAI,GACpC,CACrB,CAAiB,EAGDsvB,EAAQ,CAAE,MAAAtvB,EAAO,KAAMgiB,GAAcvgB,CAAI,CAAC,CAAE,EAC5C,MAChB,CAGYwL,EAAS,4BAA6B,CAClC,GAAA+P,EACA,MAAAhd,EACA,OAAQ,CACJ,KAAMqwB,EACN,IAAKrjB,EAAM,QAAQ,eACtB,CACjB,CAAa,CACb,CAAS,EAEDvL,EAAK,GAAG,kBAAmBzB,GAAS,CAChCiN,EAAS,yBAA0B,CAC/B,GAAA+P,EACA,MAAOhd,EAAM,OACb,OAAQA,EAAM,MAC9B,CAAa,EACDsvB,EAAQ,CAAE,MAAOtvB,EAAM,OAAQ,KAAMgiB,GAAcvgB,CAAI,EAAG,CACtE,CAAS,EAEDA,EAAK,GAAG,aAAc,IAAM,CACxBwL,EAAS,cAAe,CAAE,MAAO+P,CAAE,CAAE,CACjD,CAAS,EAEDvb,EAAK,GAAG,YAAa,IAAM,CACvBA,EAAK,GAAG,kBAAmB+tB,GAAU,CAC5B7C,GAAOlrB,EAAK,IAAI,GACrBwL,EAAS,2BAA4B,CAAE,GAAA+P,EAAI,OAAAwS,CAAM,CAAE,CACnE,CAAa,EAEDviB,EAAS,qBAAsB,CAC3B,MAAO+P,EACP,KAAAvb,EACA,KAAM,CACF,OAAAgD,EACA,QAAA+oB,CACH,CACjB,CAAa,CACb,CAAS,EAED/rB,EAAK,GAAG,OAAQ,IAAM,CAClB,MAAM6uB,EAAYC,GAAa,CAE3B,GAAI,CAACA,EAAW,CACZtjB,EAAS,cAAe,CACpB,MAAO+P,CAC/B,CAAqB,EACD,MACpB,CAGgBvb,EAAK,GAAG,kBAAmB+tB,GAAU,CACjCviB,EAAS,2BAA4B,CAAE,GAAA+P,EAAI,OAAAwS,CAAM,CAAE,CACvE,CAAiB,EAID7M,GAAiB,wBAAyB,GAAO,CAAE,KAAAlhB,EAAM,MAAAoR,CAAO,CAAA,EAAE,KAC9D4c,GAAuB,CAEnB,MAAMC,EAAoB7c,EAAM,yBAAyB,EACrD6c,IACAD,EAAsBC,EAAkBjuB,EAAMguB,CAAmB,GAErE,MAAMe,EAAe,IAAM,CACvBvjB,EAAS,qBAAsB,CAC3B,MAAO+P,EACP,KAAAvb,EACA,KAAM,CACF,OAAAgD,EACA,QAAA+oB,CACH,CACjC,CAA6B,EAEDwB,GAAY/hB,EAAUD,CAAK,CAC9B,EAGD,GAAIyiB,EAAqB,CAErBxiB,EACI,yBACA,CACI,MAAO+P,EACP,KAAAvb,EACA,QAASjB,GAAQ,CACbyM,EAAS,qBAAsB,CAAE,GAAA+P,EAAI,KAAAxc,CAAI,CAAE,EAC3CgwB,EAAc,CACjB,CACJ,EACD,EACH,EAED,MAC5B,CAEwBA,EAAc,CACtC,CACiB,CACJ,EAKD7N,GAAiB,gBAAiBlhB,EAAM,CAAE,MAAAoR,EAAO,SAAA5F,CAAU,CAAA,EACtD,KAAK,IAAM,CACRgiB,GAAgBpc,EAAM,qBAAqB,EAAGmP,GAAcvgB,CAAI,CAAC,EAAE,KAC/D6uB,CACH,CACJ,CAAA,EACA,MAAM1xB,GAAK,CACR,GAAI,CAACA,GAAK,CAACA,EAAE,OAAS,CAACA,EAAE,OAAQ,OAAO0xB,EAAU,EAAK,EACvDrjB,EAAS,yBAA0B,CAC/B,GAAA+P,EACA,MAAOpe,EAAE,MACT,OAAQA,EAAE,MAClC,CAAqB,CACrB,CAAiB,CACjB,CAAS,EAED6C,EAAK,GAAG,gBAAiB,IAAM,CAC3BwL,EAAS,4BAA6B,CAAE,GAAA+P,EAAI,CACxD,CAAS,EAEDvb,EAAK,GAAG,mBAAoB4nB,GAAY,CACpCpc,EAAS,mCAAoC,CAAE,GAAA+P,EAAI,SAAAqM,CAAQ,CAAE,CACzE,CAAS,EAED5nB,EAAK,GAAG,gBAAiBzB,GAAS,CAC9BiN,EAAS,kCAAmC,CACxC,GAAA+P,EACA,MAAAhd,EACA,OAAQ,CACJ,KAAM6uB,GAAa7hB,EAAM,QAAQ,wBAAwB,EAAEhN,CAAK,EAChE,IAAKgN,EAAM,QAAQ,eACtB,CACjB,CAAa,CACb,CAAS,EAEDvL,EAAK,GAAG,uBAAwBzB,GAAS,CACrCiN,EAAS,yCAA0C,CAC/C,GAAA+P,EACA,MAAAhd,EACA,OAAQ,CACJ,KAAM6uB,GAAa7hB,EAAM,QAAQ,8BAA8B,EAAEhN,CAAK,EACtE,IAAKgN,EAAM,QAAQ,eACtB,CACjB,CAAa,CACb,CAAS,EAEDvL,EAAK,GAAG,mBAAoBsrB,GAAuB,CAC/C9f,EAAS,+BAAgC,CACrC,GAAA+P,EACA,MAAO,KACP,oBAAA+P,CAChB,CAAa,EACD9f,EAAS,mBAAoB,CAAE,GAAA+P,EAAI,MAAO+P,CAAmB,CAAE,CAC3E,CAAS,EAEDtrB,EAAK,GAAG,gBAAiB,IAAM,CAC3BwL,EAAS,4BAA6B,CAAE,GAAA+P,EAAI,CACxD,CAAS,EAEDvb,EAAK,GAAG,iBAAkB,IAAM,CAC5BwL,EAAS,6BAA8B,CAAE,GAAA+P,EAAI,EAC7C/P,EAAS,mBAAoB,CAAE,GAAA+P,EAAI,MAAO,IAAI,CAAE,CAC5D,CAAS,EAGD/P,EAAS,eAAgB,CAAE,GAAA+P,EAAI,MAAA5I,EAAO,kBAAA0b,CAAiB,CAAE,EAEzDd,GAAY/hB,EAAUD,CAAK,EAG3B,KAAM,CAAE,IAAAwY,EAAK,KAAAwC,EAAM,QAAAyI,EAAS,MAAAC,CAAK,EAAK1jB,EAAM,QAAQ,QAAU,CAAE,EAEhEvL,EAAK,KACDgD,EAGAmjB,GACIkF,IAAW3K,GAAW,MAEhB7D,GAAS7Z,CAAM,GAAKmqB,GAAcnqB,CAAM,GACpCisB,EACIzH,GAAoBzD,EAAKkL,CAAK,EAElChC,GAEN5B,IAAW3K,GAAW,MACpB8G,GAAoBzD,EAAKiL,CAAO,EAChCxH,GAAoBzD,EAAKwC,CAAI,CACtC,EAGD,CAACxnB,EAAMgtB,EAASxtB,IAAU,CAEtB2iB,GAAiB,YAAaniB,EAAM,CAAE,MAAAqS,CAAO,CAAA,EACxC,KAAK2a,CAAO,EACZ,MAAMxtB,CAAK,CAChC,CACS,CACJ,EAED,uBAAwB,CAAC,CAAE,KAAAyB,EAAM,QAAA+rB,EAAS,QAAA8B,EAAU,IAAM,CAAA,KAAS,CAE/D,MAAMrsB,EAAM,CACR,MAAO2lB,EAAe,QAAS,EAAG,gBAAgB,EAClD,KAAM,IACT,EAGD,GAAInnB,EAAK,SAAU,OAAO6tB,EAAQrsB,CAAG,EAGrC0f,GAAiB,iBAAkBlhB,EAAK,KAAM,CAAE,MAAAoR,EAAO,KAAApR,CAAM,CAAA,EAAE,KAAK3C,GAAU,CAC1E6jB,GAAiB,0BAA2B7jB,EAAQ,CAAE,MAAA+T,EAAO,KAAApR,EAAM,EAAE,KAAK3C,GAAU,CAEhF,GAAI2C,EAAK,SAAU,OAAO6tB,EAAQrsB,CAAG,EAGrCuqB,EAAQ1uB,CAAM,CAC9B,CAAa,CACb,CAAS,CACJ,EAED,mBAAoB,CAAC,CAAE,KAAA2C,EAAM,KAAAiR,KAAW,CACpC,KAAM,CAAE,QAAA8a,EAAS,OAAA/oB,CAAM,EAAKiO,EAGtB0d,EAAqBvd,EAAM,0BAA0B,EAiB3D,GAhBIiM,GAAWsR,CAAkB,GAAK3rB,GAClCyqB,GAAUliB,EAAOojB,CAAkB,EAIvCnjB,EAAS,gBAAiB,CACtB,GAAIxL,EAAK,GACT,MAAO,KACP,oBAAqBA,EAAK,SAAW0gB,GAAW,MAAQ,KAAO1d,CAC3E,CAAS,EAID+oB,EAAQxL,GAAcvgB,CAAI,CAAC,EAGvBA,EAAK,SAAW0gB,GAAW,MAAO,CAClClV,EAAS,sBAAuB,CAAE,GAAIxL,EAAK,EAAE,CAAE,EAC/C,MACZ,CAGQ,GAAIA,EAAK,SAAW0gB,GAAW,MAAO,CAClClV,EAAS,+BAAgC,CACrC,GAAIxL,EAAK,GACT,MAAO,KACP,oBAAqBgD,CACrC,CAAa,EAEDwI,EAAS,mBAAoB,CACzB,GAAIxL,EAAK,GACT,MAAOA,EAAK,UAAYgD,CACxC,CAAa,EACD,MACZ,CAGYoO,EAAM,UAAU,GAAK7F,EAAM,QAAQ,eACnCC,EAAS,0BAA2B,CAAE,MAAOxL,EAAK,EAAE,CAAE,CAE7D,EAED,gBAAiB2tB,GAAwBpiB,EAAOvL,GAAQ,CAEpDA,EAAK,UAAW,CACxB,CAAK,EAED,qBAAsB2tB,GAAwBpiB,EAAO,CAACvL,EAAM+rB,EAAS8B,IAAY,CAC7EriB,EACI,yBACA,CACI,MAAOxL,EAAK,GACZ,KAAAA,EACA,QAASjB,GAAQ,CACbyM,EAAS,qBAAsB,CAAE,GAAIxL,EAAK,GAAI,KAAAjB,EAAM,EACpDgtB,EAAQ,CACJ,KAAM/rB,EACN,OAAQjB,CAChC,CAAqB,CACJ,EACD,QAAA8uB,CACH,EACD,EACH,CACT,CAAK,EAED,wBAAyBF,GAAwBpiB,EAAO,CAACvL,EAAM+rB,EAAS8B,IAAY,CAShF,GAAI,EALA7tB,EAAK,SAAWygB,EAAW,MAE3BzgB,EAAK,SAAWygB,EAAW,kBAGI,CAC/B,MAAMyO,EAAa,IACf1jB,EAAS,0BAA2B,CAAE,MAAOxL,EAAM,QAAA+rB,EAAS,QAAA8B,EAAS,EAEnE3G,EAAU,IAAO,SAAS,OAASgI,EAAU,EAAK,WAAWA,EAAY,EAAE,EAI7ElvB,EAAK,SAAWygB,EAAW,qBAC3BzgB,EAAK,SAAWygB,EAAW,wBAE3BzgB,EAAK,OACDiqB,GAAqB1e,EAAM,QAAQ,OAAO,IAAKA,EAAM,QAAQ,OAAO,MAAM,EAC1E6F,EAAM,kBAAkB,CAC5C,EACqB,KAAK8V,CAAO,EACZ,MAAM,IAAM,CAAA,CAAE,EACZlnB,EAAK,SAAWygB,EAAW,YAClCzgB,EAAK,gBAAe,EAAG,KAAKknB,CAAO,EAGvC,MACZ,CAGYlnB,EAAK,SAAWygB,EAAW,oBAE/BzgB,EAAK,kBAAmB,EAExBwL,EAAS,8BAA+B,CAAE,GAAIxL,EAAK,EAAE,CAAE,EAEvDwL,EAAS,eAAgB,CAAE,MAAOxL,EAAM,QAAA+rB,EAAS,QAAA8B,CAAS,EAAE,EAAI,EACxE,CAAK,EAED,aAAcF,GAAwBpiB,EAAO,CAACvL,EAAM+rB,EAAS8B,IAAY,CACrE,MAAMsB,EAAqB/d,EAAM,0BAA0B,EAI3D,GAH4BA,EAAM,sBAAuBqP,EAAW,UAAU,EAAE,SAGpD0O,EAAoB,CAE5C5jB,EAAM,gBAAgB,KAAK,CACvB,GAAIvL,EAAK,GACT,QAAA+rB,EACA,QAAA8B,CAChB,CAAa,EAGD,MACZ,CAGQ,GAAI7tB,EAAK,SAAWygB,EAAW,WAAY,OAE3C,MAAM2O,EAAc,IAAM,CAEtB,MAAMC,EAAa9jB,EAAM,gBAAgB,MAAO,EAGhD,GAAI,CAAC8jB,EAAY,OAGjB,KAAM,CAAE,GAAA9T,EAAI,QAAAwQ,EAAS,QAAA8B,CAAS,EAAGwB,EAC3BC,EAAgBvN,GAAexW,EAAM,MAAOgQ,CAAE,EAGpD,GAAI,CAAC+T,GAAiBA,EAAc,SAAU,CAC1CF,EAAa,EACb,MAChB,CAGY5jB,EAAS,eAAgB,CAAE,MAAO+P,EAAI,QAAAwQ,EAAS,QAAA8B,CAAS,EAAE,EAAI,CACjE,EAGD7tB,EAAK,OAAO,mBAAoB,IAAM,CAClC+rB,EAAQxL,GAAcvgB,CAAI,CAAC,EAC3BovB,EAAa,EAIb,MAAMG,EAAShkB,EAAM,QAAQ,OAE7B,GADsBA,EAAM,QAAQ,eACfvL,EAAK,SAAW0gB,GAAW,OAASrD,GAAWkS,EAAO,MAAM,EAAG,CAChF,MAAMzkB,EAAO,IAAM,CAAE,EACrB9K,EAAK,OAAS0gB,GAAW,MACzBnV,EAAM,QAAQ,OAAO,OAAOvL,EAAK,OAAQ8K,EAAMA,CAAI,CACnE,CAIgBsG,EAAM,sBAAuBqP,EAAW,mBAAmB,EAAE,SAC7DlV,EAAM,MAAM,QAEZC,EAAS,kCAAkC,CAE3D,CAAS,EAGDxL,EAAK,OAAO,gBAAiBzB,GAAS,CAClCsvB,EAAQ,CAAE,MAAAtvB,EAAO,KAAMgiB,GAAcvgB,CAAI,CAAC,CAAE,EAC5CovB,EAAa,CACzB,CAAS,EAGD,MAAMlQ,EAAU3T,EAAM,QACtBvL,EAAK,QACDwqB,GACIR,GAAwB9K,EAAQ,OAAO,IAAKA,EAAQ,OAAO,QAASA,EAAQ,KAAM,CAC9E,gBAAiBlf,EAAK,WACtB,YAAakf,EAAQ,OAAO,MAC5B,aAAcA,EAAQ,aACtB,WAAYA,EAAQ,WACpB,UAAWA,EAAQ,UACnB,iBAAkBA,EAAQ,gBAC9C,CAAiB,EACD,CACI,2BAA4B9N,EAAM,mCAAmC,CACzF,CACa,EAED,CAACrS,EAAMgtB,EAASxtB,IAAU,CAEtB2iB,GAAiB,iBAAkBniB,EAAM,CAAE,MAAAqS,EAAO,KAAApR,CAAM,CAAA,EACnD,KAAKjB,GAAQ,CACVyM,EAAS,qBAAsB,CAAE,GAAIxL,EAAK,GAAI,KAAAjB,EAAM,EAEpDgtB,EAAQhtB,CAAI,CACf,CAAA,EACA,MAAMR,CAAK,CAChC,CACS,CACT,CAAK,EAED,sBAAuBovB,GAAwBpiB,EAAOvL,GAAQ,CAC1DwL,EAAS,0BAA2B,CAAE,MAAOxL,CAAI,CAAE,CAC3D,CAAK,EAED,oBAAqB2tB,GAAwBpiB,EAAOvL,GAAQ,CACxDwtB,GAAgBpc,EAAM,wBAAwB,EAAGmP,GAAcvgB,CAAI,CAAC,EAAE,KAAKwvB,GAAgB,CAClFA,GAGLhkB,EAAS,cAAe,CAAE,MAAOxL,CAAI,CAAE,CACnD,CAAS,CACT,CAAK,EAED,aAAc2tB,GAAwBpiB,EAAOvL,GAAQ,CACjDA,EAAK,QAAS,CACtB,CAAK,EAED,YAAa2tB,GAAwBpiB,EAAO,CAACvL,EAAM+rB,EAAS8B,EAAS3O,IAAY,CAC7E,MAAMuQ,EAAiB,IAAM,CAEzB,MAAMlU,EAAKvb,EAAK,GAGhB+sB,GAAYxhB,EAAM,MAAOgQ,CAAE,EAAE,QAAS,EAGtC/P,EAAS,kBAAmB,CAAE,MAAO,KAAM,GAAA+P,EAAI,KAAAvb,EAAM,EAGrDutB,GAAY/hB,EAAUD,CAAK,EAG3BwgB,EAAQxL,GAAcvgB,CAAI,CAAC,CAC9B,EAIKuvB,EAAShkB,EAAM,QAAQ,OAEzBvL,EAAK,SAAW0gB,GAAW,OAC3B6O,GACAlS,GAAWkS,EAAO,MAAM,GACxBrQ,EAAQ,SAAW,IAEnB1T,EAAS,wBAAyB,CAAE,GAAIxL,EAAK,EAAE,CAAE,EAEjDuvB,EAAO,OACHvvB,EAAK,OACL,IAAMyvB,EAAgB,EACtBrM,GAAU,CACN5X,EAAS,8BAA+B,CACpC,GAAIxL,EAAK,GACT,MAAOmnB,EAAe,QAAS,EAAG/D,EAAQ,IAAI,EAC9C,OAAQ,CACJ,KAAMgK,GAAa7hB,EAAM,QAAQ,oBAAoB,EAAE6X,CAAM,EAC7D,IAAK7X,EAAM,QAAQ,eACtB,CACzB,CAAqB,CACrB,CACa,KAII2T,EAAQ,QAAUlf,EAAK,SAAW0gB,GAAW,OAAS1gB,EAAK,WAAa,MAIxEuL,EAAM,QAAQ,cAAgBvL,EAAK,KAAK,KAAOuL,EAAM,QAAQ,WAC7DA,EAAM,QAAQ,cAAgBA,EAAM,QAAQ,aAE7CvL,EAAK,OACDiqB,GAAqB1e,EAAM,QAAQ,OAAO,IAAKA,EAAM,QAAQ,OAAO,MAAM,EAC1E6F,EAAM,kBAAkB,CAC3B,EAILqe,EAAgB,EAE5B,CAAK,EAED,gBAAiB9B,GAAwBpiB,EAAOvL,GAAQ,CACpDA,EAAK,UAAW,CACxB,CAAK,EAED,sBAAuB2tB,GAAwBpiB,EAAOvL,GAAQ,CAE1D,GAAIA,EAAK,SAAU,CACfwL,EAAS,yBAA0B,CAAE,GAAIxL,EAAK,EAAE,CAAE,EAClD,MACZ,CAGQA,EAAK,kBAAkB,KAAK,IAAM,CACTuL,EAAM,QAAQ,eAE/BC,EAAS,cAAe,CAAE,MAAOxL,EAAK,EAAE,CAAE,CAE1D,CAAS,CACT,CAAK,EAED,+BAAgC2tB,GAAwBpiB,EAAOvL,GAAQ,CAEnE,GAAI,CAACuL,EAAM,QAAQ,cAAe,CAC9BC,EAAS,yBAA0B,CAAE,MAAOxL,CAAI,CAAE,EAClD,MACZ,CAIQ,MAAM0vB,EAAeC,GAAgB,CAC5BA,GACLnkB,EAAS,yBAA0B,CAAE,MAAOxL,CAAI,CAAE,CACrD,EAEK6G,EAAKuK,EAAM,wBAAwB,EACzC,GAAI,CAACvK,EACD,OAAO6oB,EAAa,EAAI,EAG5B,MAAME,EAAsB/oB,EAAG0Z,GAAcvgB,CAAI,CAAC,EAClD,GAAI4vB,GAAuB,KAEvB,OAAOF,EAAa,EAAI,EAG5B,GAAI,OAAOE,GAAwB,UAC/B,OAAOF,EAAaE,CAAmB,EAGvC,OAAOA,EAAoB,MAAS,YACpCA,EAAoB,KAAKF,CAAY,CAEjD,CAAK,EAED,uBAAwB/B,GAAwBpiB,EAAOvL,GAAQ,CAC3DA,EAAK,OACDiqB,GAAqB1e,EAAM,QAAQ,OAAO,IAAKA,EAAM,QAAQ,OAAO,MAAM,EAC1E6F,EAAM,kBAAkB,CACpC,EACa,KAAK,IAAM,EACa7F,EAAM,QAAQ,eAAiB+hB,GAAWttB,CAAI,IAE/DwL,EAAS,cAAe,CAAE,MAAOxL,EAAK,EAAE,CAAE,CAEjD,CAAA,EACA,MAAM,IAAM,CAAA,CAAE,CAC3B,CAAK,EAED,YAAa,CAAC,CAAE,QAAAkf,KAAc,CAE1B,MAAM2Q,EAAa,OAAO,KAAK3Q,CAAO,EAGhC4Q,EAAwBC,GAAmB,OAAO9sB,GAAO4sB,EAAW,SAAS5sB,CAAG,CAAC,EAG7D,CAEtB,GAAG6sB,EAGH,GAAG,OAAO,KAAK5Q,CAAO,EAAE,OAAOjc,GAAO,CAAC6sB,EAAsB,SAAS7sB,CAAG,CAAC,CAC7E,EAGiB,QAAQA,GAAO,CAC7BuI,EAAS,OAAO6T,GAAWpc,EAAK,GAAG,EAAE,YAAa,CAAA,GAAI,CAClD,MAAOic,EAAQjc,CAAG,CAClC,CAAa,CACb,CAAS,CACJ,CACL,GAEM8sB,GAAqB,CACvB,QACJ,EAEMC,GAAiB7wB,GAAQA,EAEzB8wB,GAAkBC,GACb,SAAS,cAAcA,CAAO,EAGnCrgB,EAAO,CAACkC,EAAMjV,IAAU,CAC1B,IAAIqzB,EAAWpe,EAAK,WAAW,CAAC,EAC3Boe,EAGMrzB,IAAUqzB,EAAS,YAC1BA,EAAS,UAAYrzB,IAHrBqzB,EAAW,SAAS,eAAerzB,CAAK,EACxCiV,EAAK,YAAYoe,CAAQ,EAIjC,EAEMC,GAAmB,CAACC,EAASC,EAASC,EAAQC,IAAmB,CACnE,MAAMC,GAAoBD,EAAiB,IAAO,IAAM,KAAK,GAAM,IACnE,MAAO,CACH,EAAGH,EAAUE,EAAS,KAAK,IAAIE,CAAc,EAC7C,EAAGH,EAAUC,EAAS,KAAK,IAAIE,CAAc,CAChD,CACL,EAEMC,GAAc,CAACC,EAAGhzB,EAAG4yB,EAAQK,EAAYC,EAAUC,IAAa,CAClE,MAAM1b,EAAQgb,GAAiBO,EAAGhzB,EAAG4yB,EAAQM,CAAQ,EAC/CE,EAAMX,GAAiBO,EAAGhzB,EAAG4yB,EAAQK,CAAU,EACrD,MAAO,CAAC,IAAKxb,EAAM,EAAGA,EAAM,EAAG,IAAKmb,EAAQA,EAAQ,EAAGO,EAAU,EAAGC,EAAI,EAAGA,EAAI,CAAC,EAAE,KAAK,GAAG,CAC9F,EAEMC,GAAgB,CAACL,EAAGhzB,EAAG4yB,EAAQ7xB,EAAMD,IAAO,CAC9C,IAAIqyB,EAAW,EACf,OAAIryB,EAAKC,GAAQD,EAAKC,GAAQ,KAC1BoyB,EAAW,GAEXpyB,EAAOD,GAAMC,EAAOD,GAAM,KAC1BqyB,EAAW,GAERJ,GACHC,EACAhzB,EACA4yB,EACA,KAAK,IAAI,MAAQ7xB,CAAI,EAAI,IACzB,KAAK,IAAI,MAAQD,CAAE,EAAI,IACvBqyB,CACH,CACL,EAEMjY,GAAS,CAAC,CAAE,KAAAkD,EAAM,MAAA/S,KAAY,CAEhCA,EAAM,KAAO,GACbA,EAAM,SAAW,EACjBA,EAAM,QAAU,EAGhB,MAAMioB,EAAM7e,GAAc,KAAK,EAC/B2J,EAAK,IAAI,KAAO3J,GAAc,OAAQ,CAClC,eAAgB,EAChB,iBAAkB,OAC1B,CAAK,EACD6e,EAAI,YAAYlV,EAAK,IAAI,IAAI,EAE7BA,EAAK,IAAI,IAAMkV,EAEflV,EAAK,YAAYkV,CAAG,CACxB,EAEMrY,GAAQ,CAAC,CAAE,KAAAmD,EAAM,MAAA/S,KAAY,CAC/B,GAAIA,EAAM,UAAY,EAClB,OAGAA,EAAM,QACN+S,EAAK,QAAQ,QAAQ,MAAQ/S,EAAM,OAIvC,MAAMkoB,EAAkB,SAASpf,EAAKiK,EAAK,IAAI,KAAM,cAAc,EAAG,EAAE,EAGlE+J,EAAO/J,EAAK,KAAK,QAAQ,MAAQ,GAGvC,IAAIoV,EAAW,EACXC,EAAS,EAGTpoB,EAAM,MACNmoB,EAAW,EACXC,EAAS,KAETD,EAAW,EACXC,EAASpoB,EAAM,UAInB,MAAMqoB,EAAcL,GAAclL,EAAMA,EAAMA,EAAOoL,EAAiBC,EAAUC,CAAM,EAGtFtf,EAAKiK,EAAK,IAAI,KAAM,IAAKsV,CAAW,EAGpCvf,EAAKiK,EAAK,IAAI,KAAM,iBAAkB/S,EAAM,MAAQA,EAAM,SAAW,EAAI,EAAI,CAAC,CAClF,EAEMsoB,GAAoB5Y,EAAW,CACjC,IAAK,MACL,KAAM,qBACN,iBAAkB,GAClB,WAAY,GACZ,OAAAG,GACA,MAAAD,GACA,OAAQ,CACJ,KAAM,CAAC,WAAY,OAAQ,OAAO,EAClC,OAAQ,CAAC,SAAS,EAClB,WAAY,CACR,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,EACzC,SAAU,CACN,KAAM,SACN,UAAW,IACX,QAAS,IACT,KAAM,EACT,CACJ,CACJ,CACL,CAAC,EAEK2Y,GAAW,CAAC,CAAE,KAAAxV,EAAM,MAAA/S,KAAY,CAClC+S,EAAK,QAAQ,WAAa/S,EAAM,MAAQ,IAAM,SAASA,EAAM,KAAK,UAElEA,EAAM,WAAa,EACvB,EAEMwoB,GAAU,CAAC,CAAE,KAAAzV,EAAM,MAAA/S,KAAY,CACjC,KAAM,CAAE,WAAAyoB,CAAU,EAAKzoB,EACjB0oB,EAAgB3V,EAAK,MAAM,cAAc,GAAK/S,EAAM,UAAY,EAElE0oB,GAAiB,CAACD,GAClBzoB,EAAM,WAAa,GACnB8I,EAAKiK,EAAK,QAAS,WAAY,UAAU,GAClC,CAAC2V,GAAiBD,IACzBzoB,EAAM,WAAa,GACnB+S,EAAK,QAAQ,gBAAgB,UAAU,EAE/C,EAEM4V,GAAmBjZ,EAAW,CAChC,IAAK,SACL,WAAY,CACR,KAAM,QACT,EACD,WAAY,GACZ,iBAAkB,GAClB,KAAM,qBACN,OAAQ,CACJ,KAAM,CAAC,OAAO,EACd,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,SAAS,EAClE,WAAY,CACR,OAAQ,SACR,OAAQ,SACR,WAAY,SACZ,WAAY,SACZ,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,CAC5C,EACD,UAAW,EACd,EACD,OAAQ6Y,GACR,MAAOC,EACX,CAAC,EAEKI,GAAoB,CAACziB,EAAO2R,EAAmB,IAAK3D,EAAO,IAAM+B,EAAU,KAAO,CACpF,KAAM,CACF,WAAA2S,EAAa,QACb,eAAAC,EAAiB,KACjB,eAAAC,EAAiB,KACjB,eAAAC,EAAiB,IACzB,EAAQ9S,EAGJ/P,EAAQ,KAAK,MAAM,KAAK,IAAIA,CAAK,CAAC,EAElC,MAAM8iB,EAAK9U,EACL+U,EAAK/U,EAAOA,EACZgV,EAAKhV,EAAOA,EAAOA,EAGzB,OAAIhO,EAAQ8iB,EACD,GAAG9iB,CAAK,IAAI0iB,CAAU,GAI7B1iB,EAAQ+iB,EACD,GAAG,KAAK,MAAM/iB,EAAQ8iB,CAAE,CAAC,IAAIH,CAAc,GAIlD3iB,EAAQgjB,EACD,GAAGC,GAAuBjjB,EAAQ+iB,EAAI,EAAGpR,CAAgB,CAAC,IAAIiR,CAAc,GAIhF,GAAGK,GAAuBjjB,EAAQgjB,EAAI,EAAGrR,CAAgB,CAAC,IAAIkR,CAAc,EACvF,EAEMI,GAAyB,CAACt1B,EAAOu1B,EAAc/S,IAC1CxiB,EACF,QAAQu1B,CAAY,EACpB,MAAM,GAAG,EACT,OAAO9S,GAAQA,IAAS,GAAG,EAC3B,KAAKD,CAAS,EAGjBgT,GAAW,CAAC,CAAE,KAAAvW,EAAM,MAAA/S,KAAY,CAElC,MAAMpH,EAAWquB,GAAgB,MAAM,EACvCruB,EAAS,UAAY,2BAIrBkQ,EAAKlQ,EAAU,cAAe,MAAM,EACpCma,EAAK,YAAYna,CAAQ,EACzBma,EAAK,IAAI,SAAWna,EAGpB,MAAM2wB,EAAWtC,GAAgB,MAAM,EACvCsC,EAAS,UAAY,0BACrBxW,EAAK,YAAYwW,CAAQ,EACzBxW,EAAK,IAAI,SAAWwW,EAGpB1iB,EAAK0iB,EAAUxW,EAAK,MAAM,iCAAiC,CAAC,EAC5DlM,EAAKjO,EAAUouB,GAAejU,EAAK,MAAM,gBAAiB/S,EAAM,EAAE,CAAC,CAAC,CACxE,EAEMwpB,GAAa,CAAC,CAAE,KAAAzW,EAAM,MAAA/S,KAAY,CACpC6G,EACIkM,EAAK,IAAI,SACT6V,GACI7V,EAAK,MAAM,gBAAiB/S,EAAM,EAAE,EACpC,IACA+S,EAAK,MAAM,oBAAoB,EAC/BA,EAAK,MAAM,uBAAwBA,EAAK,KAAK,CACzD,CACK,EACDlM,EAAKkM,EAAK,IAAI,SAAUiU,GAAejU,EAAK,MAAM,gBAAiB/S,EAAM,EAAE,CAAC,CAAC,CACjF,EAEMypB,GAAwB,CAAC,CAAE,KAAA1W,EAAM,MAAA/S,KAAY,CAE/C,GAAIiU,GAAMlB,EAAK,MAAM,gBAAiB/S,EAAM,EAAE,CAAC,EAAG,CAC9CwpB,GAAW,CAAE,KAAAzW,EAAM,MAAA/S,EAAO,EAC1B,MACR,CAEI6G,EAAKkM,EAAK,IAAI,SAAUA,EAAK,MAAM,mCAAmC,CAAC,CAC3E,EAEM2W,GAAWha,EAAW,CACxB,KAAM,YACN,WAAY,GACZ,iBAAkB,GAClB,MAAOmD,GAAY,CACf,cAAe2W,GACf,qBAAsBA,GACtB,0BAA2BC,GAC3B,uBAAwBA,EAChC,CAAK,EACD,cAAe1W,GAAQ,CACnByF,GAAa,cAAe,CAAE,GAAGzF,EAAM,KAAMA,CAAI,CAAE,CACtD,EACD,OAAQuW,GACR,OAAQ,CACJ,OAAQ,CAAC,aAAc,YAAY,EACnC,WAAY,CACR,WAAY,SACZ,WAAY,QACf,CACJ,CACL,CAAC,EAEKK,GAAe71B,GAAS,KAAK,MAAMA,EAAQ,GAAG,EAE9C81B,GAAW,CAAC,CAAE,KAAA7W,KAAW,CAE3B,MAAM8W,EAAO5C,GAAgB,MAAM,EACnC4C,EAAK,UAAY,6BACjB9W,EAAK,YAAY8W,CAAI,EACrB9W,EAAK,IAAI,KAAO8W,EAGhB,MAAMC,EAAM7C,GAAgB,MAAM,EAClC6C,EAAI,UAAY,4BAChB/W,EAAK,YAAY+W,CAAG,EACpB/W,EAAK,IAAI,IAAM+W,EAEfC,GAAuB,CAAE,KAAAhX,EAAM,OAAQ,CAAE,SAAU,IAAI,EAAI,CAC/D,EAEMgX,GAAyB,CAAC,CAAE,KAAAhX,EAAM,OAAAtN,KAAa,CACjD,MAAMukB,EACFvkB,EAAO,WAAa,KACdsN,EAAK,MAAM,wBAAwB,EACnC,GAAGA,EAAK,MAAM,wBAAwB,CAAC,IAAI4W,GAAalkB,EAAO,QAAQ,CAAC,IAClFoB,EAAKkM,EAAK,IAAI,KAAMiX,CAAK,EACzBnjB,EAAKkM,EAAK,IAAI,IAAKA,EAAK,MAAM,yBAAyB,CAAC,CAC5D,EAEMkX,GAA4B,CAAC,CAAE,KAAAlX,EAAM,OAAAtN,KAAa,CACpD,MAAMukB,EACFvkB,EAAO,WAAa,KACdsN,EAAK,MAAM,2BAA2B,EACtC,GAAGA,EAAK,MAAM,2BAA2B,CAAC,IAAI4W,GAAalkB,EAAO,QAAQ,CAAC,IACrFoB,EAAKkM,EAAK,IAAI,KAAMiX,CAAK,EACzBnjB,EAAKkM,EAAK,IAAI,IAAKA,EAAK,MAAM,yBAAyB,CAAC,CAC5D,EAEMmX,GAA2B,CAAC,CAAE,KAAAnX,KAAW,CAC3ClM,EAAKkM,EAAK,IAAI,KAAMA,EAAK,MAAM,2BAA2B,CAAC,EAC3DlM,EAAKkM,EAAK,IAAI,IAAKA,EAAK,MAAM,yBAAyB,CAAC,CAC5D,EAEMoX,GAAyB,CAAC,CAAE,KAAApX,KAAW,CACzClM,EAAKkM,EAAK,IAAI,KAAMA,EAAK,MAAM,mCAAmC,CAAC,EACnElM,EAAKkM,EAAK,IAAI,IAAKA,EAAK,MAAM,wBAAwB,CAAC,CAC3D,EAEMqX,GAA4B,CAAC,CAAE,KAAArX,KAAW,CAC5ClM,EAAKkM,EAAK,IAAI,KAAMA,EAAK,MAAM,oCAAoC,CAAC,EACpElM,EAAKkM,EAAK,IAAI,IAAKA,EAAK,MAAM,uBAAuB,CAAC,CAC1D,EAEMsX,GAAQ,CAAC,CAAE,KAAAtX,KAAW,CACxBlM,EAAKkM,EAAK,IAAI,KAAM,EAAE,EACtBlM,EAAKkM,EAAK,IAAI,IAAK,EAAE,CACzB,EAEMxd,GAAQ,CAAC,CAAE,KAAAwd,EAAM,OAAAtN,KAAa,CAChCoB,EAAKkM,EAAK,IAAI,KAAMtN,EAAO,OAAO,IAAI,EACtCoB,EAAKkM,EAAK,IAAI,IAAKtN,EAAO,OAAO,GAAG,CACxC,EAEM6kB,GAAa5a,EAAW,CAC1B,KAAM,cACN,WAAY,GACZ,iBAAkB,GAClB,MAAOmD,GAAY,CACf,cAAewX,GACf,2BAA4BA,GAC5B,4BAA6BH,GAC7B,0BAA2BC,GAC3B,6BAA8BC,GAC9B,iCAAkCH,GAClC,8BAA+BF,GAC/B,0BAA2Bx0B,GAC3B,uBAAwBA,GACxB,gCAAiCA,GACjC,uCAAwCA,GACxC,4BAA6BA,EACrC,CAAK,EACD,cAAewd,GAAQ,CACnByF,GAAa,cAAe,CAAE,GAAGzF,EAAM,KAAMA,CAAI,CAAE,CACtD,EACD,OAAQ6W,GACR,OAAQ,CACJ,OAAQ,CAAC,aAAc,aAAc,SAAS,EAC9C,WAAY,CACR,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,EACzC,WAAY,SACZ,WAAY,QACf,CACJ,CACL,CAAC,EAMKW,GAAU,CACZ,cAAe,CACX,MAAO,mCACP,OAAQ,kBACR,UAAW,mCACX,MAAO,yBACV,EACD,cAAe,CACX,MAAO,mCACP,OAAQ,kBACR,KAAM,iBACN,UAAW,mCACX,MAAO,8BACV,EACD,WAAY,CACR,MAAO,+BACP,OAAQ,sBACR,KAAM,kBACN,UAAW,+BACX,MAAO,6BACV,EACD,YAAa,CACT,MAAO,gCACP,OAAQ,0BACR,KAAM,mBACN,UAAW,gCACX,MAAO,8BACV,EACD,oBAAqB,CACjB,MAAO,yCACP,OAAQ,wBACR,UAAW,yCACX,MAAO,8BACV,EACD,oBAAqB,CACjB,MAAO,yCACP,OAAQ,wBACR,KAAM,iBACN,UAAW,yCACX,MAAO,8BACV,EACD,qBAAsB,CAClB,MAAO,wCACP,OAAQ,iCACR,KAAM,gBACN,UAAW,0CACX,MAAO,8BACV,CACL,EAGMC,GAAa,CAAE,EACrB7hB,EAAM4hB,GAAStwB,GAAO,CAClBuwB,GAAW,KAAKvwB,CAAG,CACvB,CAAC,EAED,MAAMwwB,GAA0B1X,GAAQ,CACpC,GAAI2X,GAA2B3X,CAAI,IAAM,QAAS,MAAO,GACzD,MAAM4X,EAAa5X,EAAK,IAAI,iBAAiB,KAAK,QAClD,OAAO4X,EAAW,OAAS,KAAOA,EAAW,MAAQA,EAAW,IACpE,EAEMC,GAAuB7X,GACNA,EAAK,IAAI,oBAAoB,KAAK,QACnC,MAIhB8X,GAAoC9X,GACtC,KAAK,MAAMA,EAAK,IAAI,iBAAiB,KAAK,QAAQ,OAAS,CAAC,EAC1D+X,GAAsC/X,GACxC,KAAK,MAAMA,EAAK,IAAI,iBAAiB,KAAK,QAAQ,KAAO,CAAC,EAExDgY,GAA4BhY,GAAQA,EAAK,MAAM,mCAAmC,EAClFiY,GAA+BjY,GAAQA,EAAK,MAAM,uCAAuC,EACzF2X,GAA6B3X,GAAQA,EAAK,MAAM,uCAAuC,EAEvFkY,GAAe,CACjB,oBAAqB,CAAE,QAAS,CAAG,EACnC,oBAAqB,CAAE,QAAS,CAAG,EACnC,iBAAkB,CAAE,QAAS,CAAG,EAChC,kBAAmB,CAAE,QAAS,CAAG,EACjC,0BAA2B,CAAE,QAAS,CAAG,EACzC,0BAA2B,CAAE,QAAS,CAAG,EACzC,2BAA4B,CAAE,QAAS,CAAG,EAC1C,sBAAuB,CAAE,QAAS,EAAG,MAAOF,EAA2B,EACvE,yBAA0B,CAAE,QAAS,EAAG,MAAOC,EAA8B,EAC7E,4BAA6B,CAAE,QAAS,EAAG,OAAQ,IAAM,OAAQ,GAAM,EACvE,KAAM,CAAE,WAAY,EAAG,WAAY,EAAG,QAAS,CAAG,EAClD,OAAQ,CAAE,WAAY,EAAG,WAAY,EAAG,QAAS,CAAG,CACxD,EAEME,GAAY,CACd,iBAAkB,CAAE,QAAS,CAAG,EAChC,kBAAmB,CAAE,QAAS,CAAG,EACjC,KAAM,CAAE,WAAYT,EAAyB,EAC7C,OAAQ,CAAE,WAAYA,EAAyB,CACnD,EAEMU,GAAkB,CACpB,0BAA2B,CAAE,QAAS,CAAG,EACzC,yBAA0B,CAAE,QAAS,CAAG,EACxC,OAAQ,CAAE,QAAS,CAAG,CAC1B,EAEMC,GAAW,CACb,uBAAwB,CACpB,iBAAkB,CAAE,QAAS,CAAG,EAChC,KAAM,CAAE,WAAYX,EAAyB,EAC7C,OAAQ,CAAE,WAAYA,GAAyB,QAAS,CAAG,CAC9D,EACD,oBAAqB,CACjB,oBAAqB,CAAE,QAAS,CAAG,EACnC,sBAAuB,CAAE,QAAS,CAAG,EACrC,OAAQ,CAAE,QAAS,CAAG,CACzB,EACD,0BAA2B,CACvB,oBAAqB,CAAE,QAAS,CAAG,EACnC,iBAAkB,CAAE,QAAS,CAAG,EAChC,KAAM,CAAE,WAAYA,EAAyB,EAC7C,OAAQ,CAAE,QAAS,CAAG,CACzB,EACD,sBAAuB,CACnB,yBAA0B,CAAE,QAAS,EAAG,MAAOC,EAA4B,EAC3E,KAAM,CAAE,WAAYD,EAAyB,EAC7C,OAAQ,CAAE,QAAS,CAAG,CACzB,EACD,4BAA6B,CACzB,yBAA0B,CAAE,QAAS,EAAG,MAAOC,EAA4B,EAC3E,iBAAkB,CAAE,QAAS,CAAG,EAChC,KAAM,CAAE,WAAYD,EAAyB,EAC7C,OAAQ,CAAE,QAAS,EAAG,WAAYA,EAAyB,CAC9D,EACD,cAAeS,GACf,oBAAqB,CACjB,iBAAkB,CAAE,QAAS,CAAG,EAChC,KAAM,CAAE,WAAYT,EAAyB,EAC7C,OAAQ,CAAE,WAAYA,EAAyB,CAClD,EACD,0BAA2BU,GAC3B,4BAA6BA,GAC7B,iCAAkCA,GAClC,6BAA8B,CAC1B,2BAA4B,CAAE,QAAS,CAAG,EAC1C,KAAM,CAAE,QAAS,CAAG,EACpB,OAAQ,CAAE,QAAS,CAAG,CACzB,EACD,gCAAiC,CAC7B,iBAAkB,CAAE,QAAS,CAAG,EAChC,0BAA2B,CAAE,QAAS,CAAG,EACzC,OAAQ,CAAE,QAAS,CAAG,EACtB,KAAM,CAAE,WAAYV,EAAyB,CAChD,EACD,uCAAwC,CACpC,2BAA4B,CAAE,QAAS,CAAG,EAC1C,OAAQ,CAAE,QAAS,CAAG,EACtB,KAAM,CAAE,QAAS,CAAG,CACvB,EACD,0BAA2B,CACvB,iBAAkB,CAAE,QAAS,CAAG,EAChC,kBAAmB,CAAE,QAAS,CAAG,EACjC,KAAM,CAAE,WAAYA,EAAyB,EAC7C,OAAQ,CAAE,QAAS,CAAG,CACzB,EACD,2BAA4BS,EAChC,EAGMG,GAAkC3b,EAAW,CAC/C,OAAQ,CAAC,CAAE,KAAAqD,KAAW,CAClBA,EAAK,QAAQ,UAAYA,EAAK,MAAM,eAAe,CACtD,EACD,KAAM,gCACN,WAAY,GACZ,OAAQ,CACJ,OAAQ,CAAC,SAAU,SAAU,SAAS,EACtC,WAAY,CACR,OAAQ,SACR,OAAQ,SACR,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,CAC5C,CACJ,CACL,CAAC,EAKKuY,GAAW,CAAC,CAAE,KAAAvY,EAAM,MAAA/S,KAAY,CAElC,MAAMurB,EAAe,OAAO,KAAKhB,EAAO,EAAE,OAAO,CAACiB,EAAMC,KACpDD,EAAKC,CAAI,EAAI,CAAE,GAAGlB,GAAQkB,CAAI,CAAG,EAC1BD,GACR,EAAE,EAEC,CAAE,GAAAjZ,CAAE,EAAKvS,EAGT0rB,EAAc3Y,EAAK,MAAM,kBAAkB,EAG3C4Y,EAAc5Y,EAAK,MAAM,kBAAkB,EAG3C6Y,EAAe7Y,EAAK,MAAM,mBAAmB,EAG7C8Y,EAAgB9Y,EAAK,MAAM,oBAAoB,EAG/C8G,EAAU9G,EAAK,MAAM,UAAU,EAG/B+Y,EAAwB/Y,EAAK,MAAM,oCAAoC,EAG7E,IAAIgZ,EACAlS,EACI+R,GAAgB,CAACF,EAEjBK,EAAe9xB,GAAO,CAAC,uBAAuB,KAAKA,CAAG,EAC/C,CAAC2xB,GAAgBF,EAExBK,EAAe9xB,GAAO,CAAC,sDAAsD,KAAKA,CAAG,EAC9E,CAAC2xB,GAAgB,CAACF,IAEzBK,EAAe9xB,GAAO,CAAC,UAAU,KAAKA,CAAG,GAI7C8xB,EAAe9xB,GAAO,CAAC,UAAU,KAAKA,CAAG,EAG7C,MAAM+xB,EAAiBD,EAAevB,GAAW,OAAOuB,CAAY,EAAIvB,GAAW,OAAQ,EAS3F,GANIqB,GAAiBH,IACjBH,EAAa,qBAAwB,MAAQ,+BAC7CA,EAAa,qBAAwB,KAAO,mBAI5C1R,GAAW,CAAC6R,EAAa,CACzB,MAAMO,EAAMb,GAAS,6BACrBa,EAAI,KAAK,WAAanB,GACtBmB,EAAI,KAAK,WAAapB,GACtBoB,EAAI,OAAO,WAAapB,GACxBoB,EAAI,4BAA8B,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,CAAG,CAC9E,CAgBI,GAbIpS,GAAW,CAAC+R,IACZ,CACI,4BACA,8BACA,mCACA,iCACZ,EAAU,QAAQ3xB,GAAO,CACbmxB,GAASnxB,CAAG,EAAE,OAAO,WAAa4wB,EAC9C,CAAS,EACDO,GAAS,gCAAmC,OAAO,WAAaR,IAIhEkB,GAAyBJ,EAAa,CACtCH,EAAa,qBAAwB,MAAQ,8BAC7C,MAAMU,EAAMb,GAAS,6BACrBa,EAAI,KAAK,WAAaxB,GACtBwB,EAAI,OAAO,WAAapB,GACxBoB,EAAI,4BAA8B,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,CAAG,CAC9E,CAGSN,IACDJ,EAAa,WAAc,SAAW,IAI1C5iB,EAAM4iB,EAAc,CAACtxB,EAAKyO,IAAe,CAErC,MAAMwjB,EAAanZ,EAAK,gBAAgB4V,GAAkB,CACtD,MAAO5V,EAAK,MAAMrK,EAAW,KAAK,EAClC,KAAMqK,EAAK,MAAMrK,EAAW,IAAI,EAChC,QAAS,CACrB,CAAS,EAGGsjB,EAAe,SAAS/xB,CAAG,GAC3B8Y,EAAK,gBAAgBmZ,CAAU,EAI/BxjB,EAAW,WACXwjB,EAAW,QAAQ,aAAa,WAAY,UAAU,EACtDA,EAAW,QAAQ,aAAa,SAAU,QAAQ,GAItDA,EAAW,QAAQ,QAAQ,MAAQnZ,EAAK,MAAM,aAAarK,EAAW,KAAK,EAAE,EAG7EwjB,EAAW,QAAQ,UAAU,IAAIxjB,EAAW,SAAS,EAGrDwjB,EAAW,GAAG,QAAS/3B,GAAK,CACxBA,EAAE,gBAAiB,EACf,CAAAuU,EAAW,UACfqK,EAAK,SAASrK,EAAW,OAAQ,CAAE,MAAO6J,EAAI,CAC1D,CAAS,EAGDQ,EAAK,IAAI,SAAS9Y,CAAG,EAAE,EAAIiyB,CACnC,CAAK,EAGDnZ,EAAK,IAAI,4BAA8BA,EAAK,gBACxCA,EAAK,gBAAgBsY,EAA+B,CACvD,EACDtY,EAAK,IAAI,4BAA4B,QAAQ,QAAQ,MAAQA,EAAK,MAC9D,wCACH,EAGDA,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgB2W,GAAU,CAAE,GAAAnX,CAAE,CAAE,CAAC,EAG3EQ,EAAK,IAAI,OAASA,EAAK,gBAAgBA,EAAK,gBAAgBuX,GAAY,CAAE,GAAA/X,CAAE,CAAE,CAAC,EAG/E,MAAM4Z,EAAoBpZ,EAAK,gBAC3BA,EAAK,gBAAgBuV,GAAmB,CACpC,QAAS,EACT,MAAOvV,EAAK,MAAM,mCAAmC,CACxD,CAAA,CACJ,EACDoZ,EAAkB,QAAQ,UAAU,IAAI,0BAA0B,EAClEpZ,EAAK,IAAI,sBAAwBoZ,EAEjC,MAAMC,EAAwBrZ,EAAK,gBAC/BA,EAAK,gBAAgBuV,GAAmB,CACpC,QAAS,EACT,MAAOvV,EAAK,MAAM,uCAAuC,CAC5D,CAAA,CACJ,EACDqZ,EAAsB,QAAQ,UAAU,IAAI,6BAA6B,EACzErZ,EAAK,IAAI,yBAA2BqZ,EAGpCrZ,EAAK,IAAI,aAAe,CAAE,CAC9B,EAEMsZ,GAAU,CAAC,CAAE,KAAAtZ,EAAM,QAAArL,EAAS,MAAA1H,CAAK,IAAO,CAE1CssB,GAAM,CAAE,KAAAvZ,EAAM,QAAArL,EAAS,MAAA1H,CAAK,CAAE,EAG9B,IAAIyF,EAASiC,EACR,OAAM,EACN,OAAOjC,GAAU,QAAQ,KAAKA,EAAO,IAAI,CAAC,EAC1C,QAAO,EACP,KAAKA,GAAU2lB,GAAS3lB,EAAO,IAAI,CAAC,EAGzC,GAAIA,EAAQ,CAERsN,EAAK,IAAI,aAAe,CAAE,EAE1B,MAAMwZ,EAAgBnB,GAAS3lB,EAAO,IAAI,EAC1CkD,EAAMsiB,GAAc,CAAC90B,EAAMq2B,IAAkB,CAEzC,MAAMC,EAAU1Z,EAAK,IAAI5c,CAAI,EAG7BwS,EAAM6jB,EAAe,CAACvyB,EAAK0b,IAAiB,CACxC,MAAM7hB,EACFy4B,EAAcp2B,CAAI,GAAK,OAAOo2B,EAAcp2B,CAAI,EAAE8D,CAAG,EAAM,IACrDsyB,EAAcp2B,CAAI,EAAE8D,CAAG,EACvB0b,EACV5C,EAAK,IAAI,aAAa,KAAK,CAAE,QAAA0Z,EAAS,IAAAxyB,EAAK,MAAAnG,EAAO,CAClE,CAAa,CACb,CAAS,CACT,CAGIif,EAAK,IAAI,aAAa,QAAQ,CAAC,CAAE,QAAA0Z,EAAS,IAAAxyB,EAAK,MAAAnG,KAAY,CACvD24B,EAAQxyB,CAAG,EAAI,OAAOnG,GAAU,WAAaA,EAAMif,CAAI,EAAIjf,CACnE,CAAK,CACL,EAEMw4B,GAAQzZ,GAAY,CACtB,2CAA4C,CAAC,CAAE,KAAAE,EAAM,OAAAtN,KAAa,CAC9DsN,EAAK,IAAI,0BAA0B,MAAQtN,EAAO,KACrD,EACD,qCAAsC,CAAC,CAAE,KAAAsN,EAAM,OAAAtN,KAAa,CACxDsN,EAAK,IAAI,oBAAoB,MAAQtN,EAAO,KAC/C,EACD,wCAAyC,CAAC,CAAE,KAAAsN,EAAM,OAAAtN,KAAa,CAC3DsN,EAAK,IAAI,uBAAuB,MAAQtN,EAAO,KAClD,EACD,4BAA6B,CAAC,CAAE,KAAAsN,KAAW,CACvCA,EAAK,IAAI,yBAAyB,KAAO,GACzCA,EAAK,IAAI,yBAAyB,SAAW,CAChD,EACD,oBAAqB,CAAC,CAAE,KAAAA,KAAW,CAC/BA,EAAK,IAAI,sBAAsB,KAAO,GACtCA,EAAK,IAAI,sBAAsB,SAAW,CAC7C,EACD,sBAAuB,CAAC,CAAE,KAAAA,KAAW,CACjCA,EAAK,IAAI,yBAAyB,KAAO,GACzCA,EAAK,IAAI,yBAAyB,SAAW,CAChD,EACD,8BAA+B,CAAC,CAAE,KAAAA,EAAM,OAAAtN,KAAa,CACjDsN,EAAK,IAAI,sBAAsB,KAAO,GACtCA,EAAK,IAAI,sBAAsB,SAAWtN,EAAO,QACpD,EACD,iCAAkC,CAAC,CAAE,KAAAsN,EAAM,OAAAtN,KAAa,CACpDsN,EAAK,IAAI,yBAAyB,KAAO,GACzCA,EAAK,IAAI,yBAAyB,SAAWtN,EAAO,QACvD,CACL,CAAC,EAEK1P,GAAO2Z,EAAW,CACpB,OAAQ4b,GACR,MAAOe,GACP,cAAetZ,GAAQ,CACnByF,GAAa,cAAe,CAAE,GAAGzF,EAAM,KAAMA,CAAI,CAAE,CACtD,EACD,KAAM,MACV,CAAC,EAKK2Z,GAAW,CAAC,CAAE,KAAA3Z,EAAM,MAAA/S,KAAY,CAElC+S,EAAK,IAAI,SAAWkU,GAAgB,QAAQ,EAC5ClU,EAAK,YAAYA,EAAK,IAAI,QAAQ,EAGlCA,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgBhd,GAAM,CAAE,GAAIiK,EAAM,EAAI,CAAA,CAAC,EAGjF+S,EAAK,IAAI,KAAO,EACpB,EAKM4Z,GAAc,CAAC,CAAE,KAAA5Z,EAAM,MAAA/S,KAAY,CAErC6G,EAAKkM,EAAK,IAAI,SAAUiU,GAAejU,EAAK,MAAM,gBAAiB/S,EAAM,EAAE,CAAC,CAAC,CACjF,EAEM4sB,GAAcld,EAAW,CAC3B,OAAQgd,GACR,WAAY,GACZ,MAAO7Z,GAAY,CACf,cAAe8Z,EACvB,CAAK,EACD,cAAe5Z,GAAQ,CACnByF,GAAa,cAAe,CAAE,GAAGzF,EAAM,KAAMA,CAAI,CAAE,CACtD,EACD,IAAK,WACL,KAAM,cACV,CAAC,EAEK8Z,GAAqB,CAAE,KAAM,SAAU,QAAS,GAAK,KAAM,CAAG,EAE9DC,GAAW,CAAC,CAAE,KAAA/Z,EAAM,MAAA/S,KAAY,CAClC,CACI,CACI,KAAM,KACT,EACD,CACI,KAAM,SACN,MAAO,CACH,WAAY,KACZ,OAAQ,IACX,EACD,OAAQ,CACJ,WAAY,CACR,OAAQ6sB,EACX,EACD,OAAQ,CAAC,aAAc,QAAQ,CAClC,CACJ,EACD,CACI,KAAM,SACN,MAAO,CACH,WAAY,IACf,EACD,OAAQ,CACJ,WAAY,CACR,WAAYA,EACf,EACD,OAAQ,CAAC,YAAY,CACxB,CACJ,CACT,EAAM,QAAQE,GAAW,CACjBC,GAAcja,EAAMga,EAAS/sB,EAAM,IAAI,CAC/C,CAAK,EAED+S,EAAK,QAAQ,UAAU,IAAI,aAAa/S,EAAM,IAAI,EAAE,EAEpD+S,EAAK,IAAI,SAAW,IACxB,EAEMia,GAAgB,CAACja,EAAMga,EAAS1jB,IAAc,CAChD,MAAM4jB,EAAkBvd,EAAW,CAC/B,KAAM,SAASqd,EAAQ,IAAI,cAAc1jB,CAAS,GAClD,OAAQ0jB,EAAQ,OAChB,iBAAkB,EAC1B,CAAK,EAEKjjB,EAAOiJ,EAAK,gBAAgBka,EAAiBF,EAAQ,KAAK,EAEhEha,EAAK,IAAIga,EAAQ,IAAI,EAAIha,EAAK,gBAAgBjJ,CAAI,CACtD,EAEMojB,GAAU,CAAC,CAAE,KAAAna,EAAM,MAAA/S,KAAY,CAQjC,IANI+S,EAAK,IAAI,WAAa,MAAQ/S,EAAM,WAAa+S,EAAK,IAAI,YAC1DA,EAAK,IAAI,SAAWY,GAAU3T,EAAM,QAAQ,EAAIA,EAAM,SAAW,GACjE+S,EAAK,QAAQ,QAAQ,SAAWA,EAAK,IAAI,UAIzC,CAAC/S,EAAM,OAAQ,OAGnB,MAAMmtB,EAAUpa,EAAK,IAAI,IAAI,KAAK,QAC5Bqa,EAAara,EAAK,IAAI,OAAO,KAAK,QAGlC3D,EAAS,KAAK,IAAI+d,EAAQ,OAASC,EAAW,OAAQptB,EAAM,MAAM,EAGxE+S,EAAK,IAAI,OAAO,WAAaoa,EAAQ,OAIrCpa,EAAK,IAAI,OAAO,QAAU3D,EAAS+d,EAAQ,OAASC,EAAW,QAAU,IAGzEra,EAAK,IAAI,OAAO,WAAa3D,EAASge,EAAW,MACrD,EAEMC,GAAQ3d,EAAW,CACrB,KAAM,QACN,KAAM,CAAC,CAAE,KAAAqD,EAAM,MAAA/S,KAAaA,EAAM,cAAgB+S,EAAK,IAAI,OAAO,WAClE,MAAOma,GACP,OAAQJ,GACR,WAAY,GACZ,OAAQ,CACJ,KAAM,CAAC,SAAU,gBAAiB,UAAU,CAC/C,CACL,CAAC,EAEKQ,GAAmB/1B,GAAS,CAC9B,MAAMg2B,EAAUh2B,EAAM,IAAIP,GAAQA,EAAK,EAAE,EACzC,IAAIw2B,EACJ,MAAO,CACH,SAAU7jB,GAAS,CACf6jB,EAAY7jB,CACf,EACD,SAAU,IAAM6jB,EAChB,aAAcx2B,GAAQu2B,EAAQ,QAAQv2B,EAAK,EAAE,CAChD,CACL,EAEMy2B,GAAwB,CAC1B,KAAM,SACN,UAAW,IACX,QAAS,IACT,KAAM,EACV,EAEMC,GAAoB,SAEpBC,GAAW,CACb,oBAAqB,OACrB,8BAA+B,UAC/B,uBAAwB,eACxB,0BAA2B,aAC3B,cAAe,OACf,4BAA6B,eAC7B,sBAAuB,OACvB,0BAA2B,kBAC3B,4BAA6B,kBAC7B,iCAAkC,aAClC,6BAA8B,sBAC9B,gCAAiC,mBACjC,uCAAwC,0BACxC,0BAA2B,YAC3B,2BAA4B,MAChC,EAKMC,GAAW,CAAC,CAAE,KAAA7a,EAAM,MAAA/S,KAAY,CAqBlC,GAnBA+S,EAAK,IAAI,YAAc5e,GAAK4e,EAAK,SAAS,oBAAqB,CAAE,GAAI/S,EAAM,EAAE,CAAE,EAG/E+S,EAAK,QAAQ,GAAK,kBAAkB/S,EAAM,EAAE,GAC5C+S,EAAK,QAAQ,iBAAiB,QAASA,EAAK,IAAI,WAAW,EAG3DA,EAAK,IAAI,UAAYA,EAAK,gBAAgBA,EAAK,gBAAgB6Z,GAAa,CAAE,GAAI5sB,EAAM,EAAI,CAAA,CAAC,EAG7F+S,EAAK,IAAI,MAAQA,EAAK,gBAAgBA,EAAK,gBAAgBsa,GAAO,CAAE,KAAM,YAAc,CAAA,CAAC,EAGzFta,EAAK,IAAI,MAAM,OAAS,KAGxB/S,EAAM,iBAAmB,GAGrB,CAAC+S,EAAK,MAAM,mBAAmB,EAAG,OAGtCA,EAAK,QAAQ,QAAQ,UAAY,OAEjC,MAAM8a,EAAO15B,GAAK,CACd,GAAI,CAACA,EAAE,UAAW,OAElB,IAAI25B,EAA0B,GAE9B,MAAMzL,EAAS,CACX,EAAGluB,EAAE,MACL,EAAGA,EAAE,KACR,EAED6L,EAAM,WAAa,CACf,EAAG+S,EAAK,WACR,EAAGA,EAAK,UACX,EAED/S,EAAM,WAAa,CACf,EAAG7L,EAAE,QACL,EAAGA,EAAE,OACR,EAED,MAAM45B,EAAYT,GAAiBva,EAAK,MAAM,kBAAkB,CAAC,EAEjEA,EAAK,SAAS,gBAAiB,CAAE,GAAI/S,EAAM,GAAI,UAAA+tB,EAAW,EAE1D,MAAMC,EAAO75B,GAAK,CACd,GAAI,CAACA,EAAE,UAAW,OAElBA,EAAE,gBAAiB,EACnBA,EAAE,eAAgB,EAElB6L,EAAM,WAAa,CACf,EAAG7L,EAAE,MAAQkuB,EAAO,EACpB,EAAGluB,EAAE,MAAQkuB,EAAO,CACvB,EAIGriB,EAAM,WAAW,EAAIA,EAAM,WAAW,EAAIA,EAAM,WAAW,EAAIA,EAAM,WAAW,EACzE,IAAM,CAAC8tB,IACdA,EAA0B,GAC1B/a,EAAK,QAAQ,oBAAoB,QAASA,EAAK,IAAI,WAAW,GAGlEA,EAAK,SAAS,gBAAiB,CAAE,GAAI/S,EAAM,GAAI,UAAA+tB,EAAW,CAC7D,EAEKE,EAAO95B,GAAK,CACTA,EAAE,YAEP6L,EAAM,WAAa,CACf,EAAG7L,EAAE,MAAQkuB,EAAO,EACpB,EAAGluB,EAAE,MAAQkuB,EAAO,CACvB,EAEDP,EAAO,EACV,EAEKoM,EAAS,IAAM,CACjBpM,EAAO,CACV,EAEKA,EAAQ,IAAM,CAChB,SAAS,oBAAoB,gBAAiBoM,CAAM,EACpD,SAAS,oBAAoB,cAAeF,CAAI,EAChD,SAAS,oBAAoB,YAAaC,CAAI,EAE9Clb,EAAK,SAAS,gBAAiB,CAAE,GAAI/S,EAAM,GAAI,UAAA+tB,EAAW,EAGtDD,GACA,WAAW,IAAM/a,EAAK,QAAQ,iBAAiB,QAASA,EAAK,IAAI,WAAW,EAAG,CAAC,CAEvF,EAED,SAAS,iBAAiB,gBAAiBmb,CAAM,EACjD,SAAS,iBAAiB,cAAeF,CAAI,EAC7C,SAAS,iBAAiB,YAAaC,CAAI,CAC9C,EAEDlb,EAAK,QAAQ,iBAAiB,cAAe8a,CAAI,CACrD,EAEMM,GAAUtb,GAAY,CACxB,wBAAyB,CAAC,CAAE,KAAAE,EAAM,OAAAtN,KAAa,CAC3CsN,EAAK,OAAStN,EAAO,MACxB,CACL,CAAC,EAEK2oB,GAAUvb,GACZ,CACI,cAAe,CAAC,CAAE,KAAAE,EAAM,MAAA/S,KAAY,CAChCA,EAAM,WAAa,CACf,EAAG+S,EAAK,WACR,EAAGA,EAAK,UACX,CACJ,EACD,cAAe,CAAC,CAAE,KAAAA,KAAW,CACzBA,EAAK,QAAQ,QAAQ,UAAY,MACpC,EACD,cAAe,CAAC,CAAE,KAAAA,EAAM,MAAA/S,KAAY,CAChCA,EAAM,WAAa,KACnBA,EAAM,WAAa,KACnB+S,EAAK,QAAQ,QAAQ,UAAY,MACpC,CACJ,EACD,CAAC,CAAE,KAAAA,EAAM,QAAArL,EAAS,MAAA1H,EAAO,eAAAqR,CAAc,IAAO,CACtC0B,EAAK,QAAQ,QAAQ,YAAc,QAC/BA,EAAK,QAAU,IACfA,EAAK,QAAQ,QAAQ,UAAY,QAKzC,IAAItN,EAASiC,EACR,OAAM,EACN,OAAOjC,GAAU,QAAQ,KAAKA,EAAO,IAAI,CAAC,EAC1C,QAAO,EACP,KAAKA,GAAUkoB,GAASloB,EAAO,IAAI,CAAC,EAGrCA,GAAUA,EAAO,OAASzF,EAAM,eAEhCA,EAAM,aAAeyF,EAAO,KAG5BsN,EAAK,QAAQ,QAAQ,kBAAoB4a,GAAS3tB,EAAM,YAAY,GAAK,IAI7E,MAAMiZ,EACFlG,EAAK,MAAM,6BAA6B,GAAKA,EAAK,MAAM,wBAAwB,EAC/EkG,EAKO5H,IACR0B,EAAK,OAASA,EAAK,KAAK,QAAQ,MAAQkG,IALxCkV,GAAQ,CAAE,KAAApb,EAAM,QAAArL,EAAS,MAAA1H,CAAK,CAAE,EAC5B,CAAC+S,EAAK,QAAUA,EAAK,IAAI,UAAU,KAAK,QAAQ,OAAS,IACzDA,EAAK,OAASA,EAAK,IAAI,UAAU,KAAK,QAAQ,SAOlD1B,IACA0B,EAAK,IAAI,MAAM,OAAS,MAG5BA,EAAK,IAAI,MAAM,OAASA,EAAK,MACrC,CACA,EAEM/b,GAAO0Y,EAAW,CACpB,OAAQke,GACR,MAAOQ,GACP,QAAS,CAAC,CAAE,KAAArb,EAAM,MAAA/S,KAAY,CAC1B+S,EAAK,QAAQ,oBAAoB,QAASA,EAAK,IAAI,WAAW,EAC9DA,EAAK,SAAS,eAAgB,CAAE,MAAO/S,EAAM,GAAI,CACpD,EACD,IAAK,KACL,KAAM,OACN,OAAQ,CACJ,KAAM,CACF,KACA,oBACA,mBACA,YACA,aACA,aACA,YACH,EACD,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,UAAW,QAAQ,EAC5E,WAAY,CACR,OAAQ0tB,GACR,OAAQA,GACR,WAAYD,GACZ,WAAYA,GACZ,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,CAC5C,CACJ,CACL,CAAC,EAED,IAAIY,GAAiB,CAACC,EAAiBC,IAG5B,KAAK,IAAI,EAAG,KAAK,OAAOD,EAAkB,GAAKC,CAAS,CAAC,EAGpE,MAAMC,GAAyB,CAAC1kB,EAAMnK,EAAU8uB,IAAmB,CAC/D,GAAI,CAACA,EAAgB,OAErB,MAAMH,EAAkBxkB,EAAK,KAAK,QAAQ,MAEpClU,EAAI+J,EAAS,OACnB,IAAI2S,EAAO,KAGX,GAAI1c,IAAM,GAAK64B,EAAe,IAAM9uB,EAAS,CAAC,EAAE,KAAK,QAAQ,IAAK,MAAO,GAIzE,MAAM+uB,EADO/uB,EAAS,CAAC,EACD,KAAK,QACrBgvB,EAAuBD,EAAS,WAAaA,EAAS,YACtDH,EAAYG,EAAS,MAAQC,EAC7BC,EAAcP,GAAeC,EAAiBC,CAAS,EAG7D,GAAIK,IAAgB,EAAG,CACnB,QAASjlB,EAAQ,EAAGA,EAAQ/T,EAAG+T,IAAS,CACpC,MAAMD,EAAQ/J,EAASgK,CAAK,EACtBklB,EAAWnlB,EAAM,KAAK,MAAM,IAAMA,EAAM,KAAK,QAAQ,OAAS,GACpE,GAAI+kB,EAAe,IAAMI,EACrB,OAAOllB,CAEvB,CACQ,OAAO/T,CACf,CAGI,MAAMk5B,EAAqBJ,EAAS,UAAYA,EAAS,aACnDK,EAAaL,EAAS,OAASI,EACrC,QAASnlB,EAAQ,EAAGA,EAAQ/T,EAAG+T,IAAS,CACpC,MAAMqlB,EAASrlB,EAAQilB,EACjBK,EAAS,KAAK,MAAMtlB,EAAQilB,CAAW,EAEvCM,EAAUF,EAAST,EACnBY,EAAUF,EAASF,EAEnBK,EAAUD,EAAUT,EAAS,UAC7BW,EAAYH,EAAUX,EACtBe,EAAaH,EAAUJ,EAAaL,EAAS,aAEnD,GAAID,EAAe,IAAMa,GAAcb,EAAe,IAAMW,EAAS,CACjE,GAAIX,EAAe,KAAOY,EACtB,OAAO1lB,EACAA,IAAU/T,EAAI,EACrB0c,EAAO3I,EAEP2I,EAAO,IAEvB,CACA,CAEI,OAAIA,IAAS,KACFA,EAGJ1c,CACX,EAEM25B,GAAqB,CACvB,OAAQ,EACR,MAAO,EACP,IAAI,WAAY,CACZ,OAAO,KAAK,MACf,EACD,IAAI,UAAUC,EAAK,EACX,KAAK,SAAW,GAAKA,IAAQ,KAAG,KAAK,OAASA,EACrD,EACD,IAAI,UAAW,CACX,OAAO,KAAK,KACf,EACD,IAAI,SAASA,EAAK,EACV,KAAK,QAAU,GAAKA,IAAQ,KAAG,KAAK,MAAQA,EACxD,CAKA,EAEMC,GAAW,CAAC,CAAE,KAAA1c,KAAW,CAE3BjK,EAAKiK,EAAK,QAAS,OAAQ,MAAM,EAEjCA,EAAK,IAAI,kBAAoB,KAAK,IAAK,CAC3C,EAOM2c,GAAc,CAAC,CAAE,KAAA3c,EAAM,OAAAtN,KAAa,CACtC,KAAM,CAAE,GAAA8M,EAAI,MAAA5I,EAAO,kBAAA0b,CAAmB,EAAG5f,EAEzCsN,EAAK,IAAI,SAAWpJ,EAEpB,MAAMgmB,EAAM,KAAK,IAAK,EACtB,IAAIC,EAAYD,EACZnhB,EAAU,EAEd,GAAI6W,IAAsB1O,GAAkB,KAAM,CAC9CnI,EAAU,EACV,MAAMqhB,EAAW9c,EAAK,MAAM,0BAA0B,EAChD+c,EAAOH,EAAM5c,EAAK,IAAI,kBAC5B6c,EAAYE,EAAOD,EAAWF,GAAOE,EAAWC,GAAQH,CAChE,CAEI5c,EAAK,IAAI,kBAAoB6c,EAE7B7c,EAAK,gBACDA,EAAK,gBAED/b,GAGA,CACI,UAAA44B,EACA,GAAArd,EACA,QAAA/D,EACA,kBAAA6W,CAChB,CACS,EACD1b,CACH,CACL,EAEMomB,GAAW,CAAC/4B,EAAM2wB,EAAGhzB,EAAGq7B,EAAK,EAAGC,EAAK,IAAM,CAEzCj5B,EAAK,YACLA,EAAK,WAAa,KAClBA,EAAK,WAAa,KAClBA,EAAK,WAAaA,EAAK,WAAW,EAAIA,EAAK,WAAW,EACtDA,EAAK,WAAaA,EAAK,WAAW,EAAIA,EAAK,WAAW,EACtDA,EAAK,OAAS,MACdA,EAAK,OAAS,QAEdA,EAAK,WAAa2wB,EAClB3wB,EAAK,WAAarC,EAEd,KAAK,MAAQqC,EAAK,YAEdA,EAAK,UAAY,GACjBk5B,GAAcl5B,EAAM2wB,EAAGhzB,EAAGq7B,EAAIC,CAAE,EAIpCj5B,EAAK,OAAS,EACdA,EAAK,OAAS,EACdA,EAAK,QAAU,GAG3B,EAEMk5B,GAAgB,CAACl5B,EAAM2wB,EAAGhzB,EAAGq7B,EAAIC,IAAO,CACtCj5B,EAAK,oBAAsB2f,GAAkB,MAC7C3f,EAAK,WAAa,KAClBA,EAAK,WAAa2wB,EAClB3wB,EAAK,WAAa,KAClBA,EAAK,WAAarC,GACXqC,EAAK,oBAAsB2f,GAAkB,MACpD3f,EAAK,WAAa,KAClBA,EAAK,WAAa2wB,EAAIqI,EAAK,GAE3Bh5B,EAAK,WAAa,KAClBA,EAAK,WAAarC,EAAIs7B,EAAK,GAE3Bj5B,EAAK,OAAS,GACdA,EAAK,OAAS,IACPA,EAAK,oBAAsB2f,GAAkB,QACpD3f,EAAK,WAAa,KAClBA,EAAK,WAAarC,EAAI,IACfqC,EAAK,oBAAsB2f,GAAkB,MACpD3f,EAAK,WAAa,KAClBA,EAAK,WAAa2wB,EAAI,GACtB3wB,EAAK,WAAa,KAE1B,EAOMm5B,GAAiB,CAAC,CAAE,KAAApd,EAAM,OAAAtN,KAAa,CACzC,KAAM,CAAE,GAAA8M,CAAE,EAAK9M,EAGTqE,EAAOiJ,EAAK,WAAW,KAAKrJ,GAASA,EAAM,KAAO6I,CAAE,EAGrDzI,IAKLA,EAAK,OAAS,GACdA,EAAK,OAAS,GACdA,EAAK,QAAU,EAGfA,EAAK,iBAAmB,GAC5B,EAEMsmB,GAAgB1mB,GAClBA,EAAM,KAAK,QAAQ,OACnBA,EAAM,KAAK,QAAQ,aAAe,GAClCA,EAAM,KAAK,QAAQ,UAAY,GAC7B2mB,GAAe3mB,GACjBA,EAAM,KAAK,QAAQ,MACnBA,EAAM,KAAK,QAAQ,WAAa,GAChCA,EAAM,KAAK,QAAQ,YAAc,GAE/B4mB,GAAW,CAAC,CAAE,KAAAvd,EAAM,OAAAtN,KAAa,CACnC,KAAM,CAAE,GAAA8M,EAAI,UAAAwb,CAAS,EAAKtoB,EAGpBzO,EAAO+b,EAAK,MAAM,WAAY,CAAE,GAAAR,CAAE,CAAE,EAGpCzI,EAAOiJ,EAAK,WAAW,KAAKrJ,GAASA,EAAM,KAAO6I,CAAE,EAEpDge,EAAWxd,EAAK,WAAW,OAC3Byd,EAAWzC,EAAU,aAAa/2B,CAAI,EAG5C,GAAI,CAAC8S,EAAM,OAEX,MAAM2mB,EAAe,CACjB,EAAG3mB,EAAK,WAAW,EAAIA,EAAK,WAAW,EAAIA,EAAK,WAAW,EAC3D,EAAGA,EAAK,WAAW,EAAIA,EAAK,WAAW,EAAIA,EAAK,WAAW,CAC9D,EAGK4mB,EAAaN,GAActmB,CAAI,EAC/B6mB,EAAYN,GAAavmB,CAAI,EAGnC,IAAI8mB,EAAO,KAAK,MAAM7d,EAAK,KAAK,MAAM,MAAQ4d,CAAS,EACnDC,EAAOL,IAAUK,EAAOL,GAG5B,MAAMrT,EAAO,KAAK,MAAMqT,EAAWK,EAAO,CAAC,EAE3CrB,GAAmB,UAAYmB,EAAaxT,EAC5CqS,GAAmB,SAAWoB,EAAYC,EAG1C,IAAIC,EAAW,CACX,EAAG,KAAK,MAAMJ,EAAa,EAAIC,CAAU,EACzC,EAAG,KAAK,MAAMD,EAAa,EAAIE,CAAS,EACxC,aAAc,UAAwB,CAClC,OACIF,EAAa,EAAIlB,GAAmB,WACpCkB,EAAa,EAAI,GACjBA,EAAa,EAAIlB,GAAmB,UACpCkB,EAAa,EAAI,EAEVD,EACJ,KAAK,EAAII,EAAO,KAAK,CAC/B,EACD,YAAa,UAAuB,CAChC,MAAMr5B,EAAQwb,EAAK,MAAM,kBAAkB,EACrC+d,EAAkB/d,EAAK,WAAW,OAAOrJ,GAASA,EAAM,KAAK,QAAQ,MAAM,EAC3E/J,EAAWpI,EAAM,IAAIP,GACvB85B,EAAgB,KAAKhmB,GAAaA,EAAU,KAAO9T,EAAK,EAAE,CAC7D,EACKouB,EAAezlB,EAAS,UAAU+J,GAASA,IAAUI,CAAI,EACzD4mB,EAAaN,GAActmB,CAAI,EAC/BlU,EAAI+J,EAAS,OACnB,IAAIuH,EAAMtR,EACNm7B,EAAc,EACdC,EAAc,EACdC,EAAW,EACf,QAAS77B,EAAI,EAAGA,EAAIQ,EAAGR,IAInB,GAHA27B,EAAcX,GAAczwB,EAASvK,CAAC,CAAC,EACvC67B,EAAWD,EACXA,EAAcC,EAAWF,EACrBN,EAAa,EAAIO,EAAa,CAC9B,GAAI5L,EAAehwB,EAAG,CAClB,GAAIq7B,EAAa,EAAIQ,EAAWP,EAAY,CACxCxpB,EAAM9R,EACN,KAC5B,CACwB,QACxB,CACoB8R,EAAM9R,EACN,KACpB,CAEY,OAAO8R,CACV,CACJ,EAGD,MAAMyC,EAAQinB,EAAO,EAAIC,EAAS,aAAc,EAAGA,EAAS,YAAa,EACzE9d,EAAK,SAAS,YAAa,CAAE,MAAOjJ,EAAM,MAAAH,EAAO,EAGjD,MAAMyb,EAAe2I,EAAU,SAAU,EAEzC,GAAI3I,IAAiB,QAAaA,IAAiBzb,EAAO,CAGtD,GAFAokB,EAAU,SAASpkB,CAAK,EAEpByb,IAAiB,OAAW,OAEhCrS,EAAK,SAAS,oBAAqB,CAC/B,MAAOA,EAAK,MAAM,kBAAkB,EACpC,OAAQyd,EACR,OAAQ7mB,CACpB,CAAS,CACT,CACA,EAKMunB,GAAUre,GAAY,CACxB,aAAc6c,GACd,gBAAiBS,GACjB,cAAeG,EACnB,CAAC,EAQKa,GAAU,CAAC,CAAE,KAAApe,EAAM,MAAA/S,EAAO,QAAA0H,EAAS,eAAA2J,CAAc,IAAO,CAE1D6f,GAAQ,CAAE,KAAAne,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,CAAE,EAEhC,KAAM,CAAE,gBAAA0pB,CAAe,EAAKpxB,EAGtBsuB,EAAkBvb,EAAK,KAAK,QAAQ,MAGpC+d,EAAkB/d,EAAK,WAAW,OAAOrJ,GAASA,EAAM,KAAK,QAAQ,MAAM,EAG3E/J,EAAWoT,EACZ,MAAM,kBAAkB,EACxB,IAAI/b,GAAQ85B,EAAgB,KAAKpnB,GAASA,EAAM,KAAO1S,EAAK,EAAE,CAAC,EAC/D,OAAOA,GAAQA,CAAI,EAGlBq6B,EAAYD,EACZ5C,GAAuBzb,EAAMpT,EAAUyxB,CAAe,EACtD,KAGAE,EAAWve,EAAK,IAAI,UAAY,KAGtCA,EAAK,IAAI,SAAW,KAEpB,IAAIwe,EAAkB,EAClBC,EAAoB,EACpBC,EAAiB,EAErB,GAAI9xB,EAAS,SAAW,EAAG,OAE3B,MAAM+xB,EAAY/xB,EAAS,CAAC,EAAE,KAAK,QAC7BmvB,EAAqB4C,EAAU,UAAYA,EAAU,aACrD/C,EAAuB+C,EAAU,WAAaA,EAAU,YACxDnD,EAAYmD,EAAU,MAAQ/C,EAC9BI,EAAa2C,EAAU,OAAS5C,EAChCF,EAAcP,GAAeC,EAAiBC,CAAS,EAG7D,GAAIK,IAAgB,EAAG,CACnB,IAAIO,EAAU,EACVwC,EAAa,EAEjBhyB,EAAS,QAAQ,CAAC+J,EAAOC,IAAU,CAC/B,GAAI0nB,EAAW,CACX,IAAIvB,EAAOnmB,EAAQ0nB,EACfvB,IAAS,GACT6B,EAAa,CAAC7C,EAAqB,IAC5BgB,IAAS,GAChB6B,EAAa,CAAC7C,EAAqB,IAC5BgB,IAAS,EAChB6B,EAAa7C,EAAqB,IAC3BgB,IAAS,EAChB6B,EAAa7C,EAAqB,IAElC6C,EAAa,CAEjC,CAEgBtgB,IACA3H,EAAM,WAAa,KACnBA,EAAM,WAAa,MAGlBA,EAAM,kBACPqmB,GAASrmB,EAAO,EAAGylB,EAAUwC,CAAU,EAK3C,IAAIC,GAFaloB,EAAM,KAAK,QAAQ,OAASolB,IAEZplB,EAAM,iBAAmBA,EAAM,QAAU,GAE1EylB,GAAWyC,CACvB,CAAS,CACT,KAES,CACD,IAAIC,EAAQ,EACRC,EAAQ,EAEZnyB,EAAS,QAAQ,CAAC+J,EAAOC,IAAU,CAC3BA,IAAU0nB,IACVE,EAAkB,GAGlB5nB,IAAU2nB,IACVG,GAAkB,GAGlB/nB,EAAM,kBAAoBA,EAAM,QAAU,KAC1C8nB,GAAqB,GAGzB,MAAMO,EAAcpoB,EAAQ8nB,EAAiBF,EAAkBC,EAEzDxC,EAAS+C,EAAcnD,EACvBK,EAAS,KAAK,MAAM8C,EAAcnD,CAAW,EAE7CM,EAAUF,EAAST,EACnBY,EAAUF,EAASF,EAEnBiD,EAAU,KAAK,KAAK9C,EAAU2C,CAAK,EACnCI,EAAU,KAAK,KAAK9C,EAAU2C,CAAK,EAEzCD,EAAQ3C,EACR4C,EAAQ3C,EAEJ,CAAAzlB,EAAM,mBAEN2H,IACA3H,EAAM,WAAa,KACnBA,EAAM,WAAa,MAGvBqmB,GAASrmB,EAAOwlB,EAASC,EAAS6C,EAASC,CAAO,EAC9D,CAAS,CACT,CACA,EAOMC,GAAuB,CAACxoB,EAAOhC,IACjCA,EAAQ,OAAOjC,GAEPA,EAAO,MAAQA,EAAO,KAAK,GACpBiE,EAAM,KAAOjE,EAAO,KAAK,GAI7B,EACV,EAEC0sB,GAAOziB,EAAW,CACpB,OAAQ+f,GACR,MAAO0B,GACP,IAAK,KACL,KAAM,OACN,aAAc,CAAC,CAAE,KAAApe,KAAW,CACxBA,EAAK,WACA,OAAOjJ,GAAQA,EAAK,kBAAoBA,EAAK,UAAY,GAAKA,EAAK,OAAO,EAC1E,QAAQA,GAAQ,CACbA,EAAK,SAAU,EACfiJ,EAAK,gBAAgBjJ,CAAI,CACzC,CAAa,CACR,EACD,2BAA4BooB,GAC5B,OAAQ,CACJ,KAAM,CAAC,iBAAiB,CAC3B,CACL,CAAC,EAEKE,GAAW,CAAC,CAAE,KAAArf,EAAM,MAAA/S,KAAY,CAClC+S,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgBof,EAAI,CAAC,EAC/DnyB,EAAM,gBAAkB,KACxBA,EAAM,YAAc,EACxB,EAEMqyB,GAAuB,CAAC,CAAE,KAAAtf,EAAM,MAAA/S,EAAO,OAAAyF,CAAM,IAAO,CACjDsN,EAAK,MAAM,kCAAkC,IAClD/S,EAAM,gBAAkB,CACpB,KAAMyF,EAAO,SAAS,UAAYsN,EAAK,IAAI,KAAK,KAAK,QAAQ,KAC7D,IACItN,EAAO,SAAS,UACfsN,EAAK,KAAK,MAAM,IAAMA,EAAK,KAAK,QAAQ,UAAYA,EAAK,KAAK,QAAQ,UAC9E,EACL,EAEMuf,GAAuB,CAAC,CAAE,MAAAtyB,KAAY,CACxCA,EAAM,gBAAkB,IAC5B,EAEMuyB,GAAU1f,GAAY,CACxB,SAAUwf,GACV,aAAcC,EAClB,CAAC,EAEKE,GAAU,CAAC,CAAE,KAAAzf,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,IAAO,CAiB1C,GAfA6qB,GAAQ,CAAE,KAAAxf,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,CAAE,EAGhCqL,EAAK,IAAI,KAAK,gBAAkB/S,EAAM,gBAGlCA,EAAM,aAAe,CAACA,EAAM,WAC5BA,EAAM,YAAc,GAGpB+S,EAAK,QAAQ,QAAQ,MAAQ,GAC7BA,EAAK,OAAS,MAId/S,EAAM,SAAU,CAChB,MAAMyyB,EAAY,KAAK,MAAMzyB,EAAM,QAAQ,EACvCyyB,IAAc1f,EAAK,SACnB/S,EAAM,YAAc,GACpB+S,EAAK,QAAQ,QAAQ,MAAQ,WAC7BA,EAAK,OAAS0f,EAE1B,CACA,EAEMC,GAAehjB,EAAW,CAC5B,OAAQ0iB,GACR,MAAOI,GACP,KAAM,gBACN,OAAQ,CACJ,KAAM,CAAC,WAAY,iBAAiB,EACpC,OAAQ,CAAC,SAAU,YAAY,EAC/B,WAAY,CACR,WAAY,QACf,CACJ,CACL,CAAC,EAEKG,GAAa,CAACppB,EAASpT,EAAMoM,EAAOqwB,EAAe,KAAO,CACxDrwB,EACAuG,EAAKS,EAASpT,EAAMy8B,CAAY,EAEhCrpB,EAAQ,gBAAgBpT,CAAI,CAEpC,EAEM08B,GAAiBC,GAAS,CAE5B,GAAI,GAACA,GAASA,EAAM,QAAU,IAI9B,IAAI,CAEAA,EAAM,MAAQ,EACjB,MAAa,CAAA,CAGd,GAAIA,EAAM,MAAO,CAEb,MAAMC,EAAO9L,GAAgB,MAAM,EAC7B+L,EAAaF,EAAM,WACnBpzB,EAAMozB,EAAM,YAClBC,EAAK,YAAYD,CAAK,EACtBC,EAAK,MAAO,EAGRrzB,EACAszB,EAAW,aAAaF,EAAOpzB,CAAG,EAElCszB,EAAW,YAAYF,CAAK,CAExC,EACA,EAEMG,GAAW,CAAC,CAAE,KAAAlgB,EAAM,MAAA/S,KAAY,CAElC+S,EAAK,QAAQ,GAAK,qBAAqB/S,EAAM,EAAE,GAG/C8I,EAAKiK,EAAK,QAAS,OAAQA,EAAK,MAAM,UAAU,CAAC,EAGjDjK,EAAKiK,EAAK,QAAS,gBAAiB,uBAAuB/S,EAAM,EAAE,EAAE,EAGrE8I,EAAKiK,EAAK,QAAS,kBAAmB,wBAAwB/S,EAAM,EAAE,EAAE,EAGxEkzB,GAAqB,CAAE,KAAAngB,EAAM,OAAQ,CAAE,MAAOA,EAAK,MAAM,yBAAyB,CAAC,EAAI,EACvFogB,GAAoB,CAAE,KAAApgB,EAAM,OAAQ,CAAE,MAAOA,EAAK,MAAM,oBAAoB,CAAC,EAAI,EACjFqgB,GAAsB,CAAE,KAAArgB,EAAM,OAAQ,CAAE,MAAOA,EAAK,MAAM,4BAA4B,CAAC,EAAI,EAC3FsgB,GAAe,CAAE,KAAAtgB,EAAM,EACvBugB,GAAe,CAAE,KAAAvgB,EAAM,OAAQ,CAAE,MAAOA,EAAK,MAAM,cAAc,CAAC,EAAI,EACtEwgB,GAAiB,CAAE,KAAAxgB,EAAM,OAAQ,CAAE,MAAOA,EAAK,MAAM,oBAAoB,CAAC,EAAI,EAG9EA,EAAK,IAAI,aAAe5e,GAAK,CACzB,GAAI,CAAC4e,EAAK,QAAQ,MACd,OAIJ,MAAM3b,EAAQ,MAAM,KAAK2b,EAAK,QAAQ,KAAK,EAAE,IAAIhd,IAC7CA,EAAK,cAAgBA,EAAK,mBACnBA,EACV,EAGD,WAAW,IAAM,CAEbiK,EAAM,OAAO5I,CAAK,EAGlBy7B,GAAe9f,EAAK,OAAO,CAC9B,EAAE,GAAG,CACT,EAEDA,EAAK,QAAQ,iBAAiB,SAAUA,EAAK,IAAI,YAAY,CACjE,EAEMmgB,GAAuB,CAAC,CAAE,KAAAngB,EAAM,OAAAtN,KAAa,CAC1CsN,EAAK,MAAM,iCAAiC,GACjD4f,GAAW5f,EAAK,QAAS,SAAU,CAAC,CAACtN,EAAO,MAAOA,EAAO,MAAQA,EAAO,MAAM,KAAK,GAAG,EAAI,EAAE,CACjG,EAEM0tB,GAAsB,CAAC,CAAE,KAAApgB,EAAM,OAAAtN,KAAa,CAC9CktB,GAAW5f,EAAK,QAAS,WAAYtN,EAAO,KAAK,CACrD,EAEM2tB,GAAwB,CAAC,CAAE,KAAArgB,EAAM,OAAAtN,KAAa,CAChDktB,GAAW5f,EAAK,QAAS,kBAAmBtN,EAAO,KAAK,CAC5D,EAEM4tB,GAAiB,CAAC,CAAE,KAAAtgB,KAAW,CACjC,MAAM0V,EAAa1V,EAAK,MAAM,cAAc,EACtCygB,EAAkBzgB,EAAK,MAAM,kBAAkB,EAC/C0gB,EAAehL,GAAc,CAAC+K,EACpCb,GAAW5f,EAAK,QAAS,WAAY0gB,CAAY,CACrD,EAEMH,GAAiB,CAAC,CAAE,KAAAvgB,EAAM,OAAAtN,KAAa,CAEpCA,EAAO,MAIHsN,EAAK,MAAM,iBAAiB,IAAM,GACvC4f,GAAW5f,EAAK,QAAS,WAAY,EAAI,EAJzC4f,GAAW5f,EAAK,QAAS,WAAY,EAAK,CAMlD,EAEMwgB,GAAmB,CAAC,CAAE,KAAAxgB,EAAM,OAAAtN,KAAa,CAC3CktB,GAAW5f,EAAK,QAAS,UAAW,CAAC,CAACtN,EAAO,MAAOA,EAAO,QAAU,GAAO,GAAKA,EAAO,KAAK,CACjG,EAEMiuB,GAAuB,CAAC,CAAE,KAAA3gB,KAAW,CACvC,KAAM,CAAE,QAAAxJ,CAAO,EAAKwJ,EAEhBA,EAAK,MAAM,iBAAiB,EAAI,GAChC4f,GAAWppB,EAAS,WAAY,EAAK,EACrCopB,GAAWppB,EAAS,OAAQ,EAAK,IAGjCopB,GAAWppB,EAAS,OAAQ,GAAMwJ,EAAK,MAAM,UAAU,CAAC,EAG5BA,EAAK,MAAM,oBAAoB,GAEvDxJ,EAAQ,kBAAkB,EAAE,EAI5BwJ,EAAK,MAAM,cAAc,GACzB4f,GAAWppB,EAAS,WAAY,EAAI,EAGhD,EAEMoqB,GAA4B,CAAC,CAAE,KAAA5gB,KAAW,CAChBA,EAAK,MAAM,oBAAoB,GAE3DA,EAAK,QAAQ,kBAAkBA,EAAK,MAAM,yBAAyB,CAAC,CACxE,EAEM6gB,GAAUlkB,EAAW,CACvB,IAAK,QACL,KAAM,UACN,WAAY,GACZ,iBAAkB,GAClB,WAAY,CACR,KAAM,MACT,EACD,OAAQujB,GACR,QAAS,CAAC,CAAE,KAAAlgB,KAAW,CACnBA,EAAK,QAAQ,oBAAoB,SAAUA,EAAK,IAAI,YAAY,CACnE,EACD,MAAOF,GAAY,CACf,cAAe6gB,GACf,gBAAiBA,GACjB,uBAAwBC,GAExB,iBAAkBN,GAClB,qBAAsBA,GACtB,+BAAgCD,GAChC,uBAAwBD,GACxB,4BAA6BD,GAC7B,uBAAwBK,GACxB,iBAAkBD,EAC1B,CAAK,CACL,CAAC,EAEKO,GAAM,CACR,MAAO,GACP,MAAO,EACX,EAEMC,GAAW,CAAC,CAAE,KAAA/gB,EAAM,MAAA/S,KAAY,CAElC,MAAMqkB,EAAQ4C,GAAgB,OAAO,EACrCne,EAAKub,EAAO,MAAO,qBAAqBrkB,EAAM,EAAE,EAAE,EAGlD8I,EAAKub,EAAO,KAAM,wBAAwBrkB,EAAM,EAAE,EAAE,EAGpD8I,EAAKub,EAAO,cAAe,MAAM,EAGjCtR,EAAK,IAAI,cAAgB5e,GAAK,EACFA,EAAE,UAAY0/B,GAAI,OAAS1/B,EAAE,UAAY0/B,GAAI,SAGrE1/B,EAAE,eAAgB,EAGlB4e,EAAK,IAAI,MAAM,MAAO,EACzB,EAEDA,EAAK,IAAI,YAAc5e,GAAK,CACHA,EAAE,SAAWkwB,GAASA,EAAM,SAASlwB,EAAE,MAAM,GAMlE4e,EAAK,IAAI,MAAM,MAAO,CACzB,EAGDsR,EAAM,iBAAiB,UAAWtR,EAAK,IAAI,aAAa,EACxDA,EAAK,QAAQ,iBAAiB,QAASA,EAAK,IAAI,WAAW,EAG3DghB,GAAiB1P,EAAOrkB,EAAM,OAAO,EAGrC+S,EAAK,YAAYsR,CAAK,EACtBtR,EAAK,IAAI,MAAQsR,CACrB,EAEM0P,GAAmB,CAAC1P,EAAOvwB,IAAU,CACvCuwB,EAAM,UAAYvwB,EAClB,MAAMkgC,EAAY3P,EAAM,cAAc,yBAAyB,EAC/D,OAAI2P,GACAlrB,EAAKkrB,EAAW,WAAY,GAAG,EAE5BlgC,CACX,EAEMmgC,GAAYvkB,EAAW,CACzB,KAAM,aACN,WAAY,GACZ,OAAQokB,GACR,QAAS,CAAC,CAAE,KAAA/gB,KAAW,CACnBA,EAAK,IAAI,MAAM,iBAAiB,UAAWA,EAAK,IAAI,aAAa,EACjEA,EAAK,QAAQ,oBAAoB,QAASA,EAAK,IAAI,WAAW,CACjE,EACD,MAAOF,GAAY,CACf,mBAAoB,CAAC,CAAE,KAAAE,EAAM,OAAAtN,KAAa,CACtCsuB,GAAiBhhB,EAAK,IAAI,MAAOtN,EAAO,KAAK,CAChD,CACT,CAAK,EACD,OAAQ,CACJ,OAAQ,CAAC,UAAW,aAAc,YAAY,EAC9C,WAAY,CACR,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,EACzC,WAAY,SACZ,WAAY,QACf,CACJ,CACL,CAAC,EAEK+V,GAAO9L,EAAW,CACpB,KAAM,YACN,WAAY,GACZ,OAAQ,CACJ,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,SAAS,EAClE,WAAY,CACR,OAAQ,SACR,OAAQ,SACR,WAAY,SACZ,WAAY,SACZ,QAAS,CAAE,KAAM,QAAS,SAAU,GAAK,CAC5C,CACJ,CACL,CAAC,EAEKwkB,GAAU,CAAC,CAAE,KAAAnhB,KAAW,CAC1B,MAAMsU,EAAUtU,EAAK,KAAK,QAAQ,MAAQ,GACpCuU,EAAUvU,EAAK,KAAK,QAAQ,OAAS,GAE3CA,EAAK,IAAI,KAAOA,EAAK,gBACjBA,EAAK,gBAAgByI,GAAM,CACvB,QAAS,EACT,OAAQ,IACR,OAAQ,IACR,WAAY6L,EACZ,WAAYC,CACf,CAAA,CACJ,CACL,EAEM6M,GAAW,CAAC,CAAE,KAAAphB,EAAM,OAAAtN,KAAa,CACnC,GAAI,CAACsN,EAAK,IAAI,KAAM,CAChBmhB,GAAQ,CAAE,KAAAnhB,EAAM,EAChB,MACR,CAEIA,EAAK,IAAI,KAAK,WAAatN,EAAO,SAAS,UAC3CsN,EAAK,IAAI,KAAK,WAAatN,EAAO,SAAS,SAC3CsN,EAAK,IAAI,KAAK,OAAS,EACvBA,EAAK,IAAI,KAAK,OAAS,EACvBA,EAAK,IAAI,KAAK,QAAU,CAC5B,EAEMqhB,GAAW,CAAC,CAAE,KAAArhB,KAAW,CACtBA,EAAK,IAAI,OAGdA,EAAK,IAAI,KAAK,QAAU,EAC5B,EAEMshB,GAAc,CAAC,CAAE,KAAAthB,KAAW,CACzBA,EAAK,IAAI,OAGdA,EAAK,IAAI,KAAK,OAAS,IACvBA,EAAK,IAAI,KAAK,OAAS,IACvBA,EAAK,IAAI,KAAK,QAAU,EAC5B,EAEMuhB,GAAU,CAAC,CAAE,KAAAvhB,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,IAAO,CAC1C6sB,GAAQ,CAAE,KAAAxhB,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,CAAE,EAEhC,KAAM,CAAE,KAAA8T,GAASzI,EAAK,IAElBrL,EAAQ,SAAW,GAAK8T,GAAQA,EAAK,UAAY,IACjDzI,EAAK,gBAAgByI,CAAI,EACzBzI,EAAK,IAAI,KAAO,KAExB,EAEMwhB,GAAU1hB,GAAY,CACxB,SAAUshB,GACV,SAAUE,GACV,aAAcD,EAClB,CAAC,EAEKI,GAAO9kB,EAAW,CACpB,WAAY,GACZ,iBAAkB,GAClB,KAAM,OACN,MAAO4kB,EACX,CAAC,EAEKG,GAAgB,CAAClrB,EAASnS,IAAU,CACtC,GAAI,CAEA,MAAMkiB,EAAe,IAAI,aACzBliB,EAAM,QAAQrB,GAAQ,CACdA,aAAgB,KAChBujB,EAAa,MAAM,IAAIvjB,CAAI,EAE3BujB,EAAa,MAAM,IACf,IAAI,KAAK,CAACvjB,CAAI,EAAGA,EAAK,KAAM,CACxB,KAAMA,EAAK,IACd,CAAA,CACJ,CAEjB,CAAS,EAGDwT,EAAQ,MAAQ+P,EAAa,KAChC,MAAa,CACV,MAAO,EACf,CACI,MAAO,EACX,EAEMob,GAAW,CAAC,CAAE,KAAA3hB,CAAM,IAAMA,EAAK,IAAI,OAAS,GAE5C4hB,GAAW,CAAC5hB,EAAMR,IAAOQ,EAAK,IAAI,OAAOR,CAAE,EAE3CqiB,GAA8B7hB,GAAQ,CACxCA,EAAK,MAAM,kBAAkB,EAAE,QAAQ/b,GAAQ,CACtC+b,EAAK,IAAI,OAAO/b,EAAK,EAAE,GAC5B+b,EAAK,QAAQ,YAAYA,EAAK,IAAI,OAAO/b,EAAK,EAAE,CAAC,CACzD,CAAK,CACL,EAEM69B,GAAkB,CAAC,CAAE,KAAA9hB,KAAW6hB,GAA4B7hB,CAAI,EAEhE+hB,GAAa,CAAC,CAAE,KAAA/hB,EAAM,OAAAtN,KAAa,CAGrC,MAAMsvB,EAAqB,EAFVhiB,EAAK,MAAM,WAAYtN,EAAO,EAAE,EACpB,SAAWiS,GAAW,QACR3E,EAAK,MAAM,0BAA0B,EAC1EiiB,EAAgB/N,GAAgB,OAAO,EAC7C+N,EAAc,KAAOD,EAAqB,OAAS,SACnDC,EAAc,KAAOjiB,EAAK,MAAM,UAAU,EAC1CiiB,EAAc,SAAWjiB,EAAK,MAAM,cAAc,EAClDA,EAAK,IAAI,OAAOtN,EAAO,EAAE,EAAIuvB,EAC7BJ,GAA4B7hB,CAAI,CACpC,EAEMkiB,GAAgB,CAAC,CAAE,KAAAliB,EAAM,OAAAtN,KAAa,CACxC,MAAMyvB,EAAQP,GAAS5hB,EAAMtN,EAAO,EAAE,EAOtC,GANI,CAACyvB,IAGDzvB,EAAO,sBAAwB,OAAMyvB,EAAM,MAAQzvB,EAAO,qBAG1D,CAACsN,EAAK,MAAM,0BAA0B,GAAG,OAE7C,MAAMoiB,EAAWpiB,EAAK,MAAM,WAAYtN,EAAO,EAAE,EACjDgvB,GAAcS,EAAO,CAACC,EAAS,IAAI,CAAC,CACxC,EAEMC,GAAmB,CAAC,CAAE,KAAAriB,EAAM,OAAAtN,KAAa,CAEtCsN,EAAK,MAAM,0BAA0B,GAC1C,WAAW,IAAM,CACb,MAAMmiB,EAAQP,GAAS5hB,EAAMtN,EAAO,EAAE,EACjCyvB,GACLT,GAAcS,EAAO,CAACzvB,EAAO,IAAI,CAAC,CACrC,EAAE,CAAC,CACR,EAEM4vB,GAAiB,CAAC,CAAE,KAAAtiB,KAAW,CACjCA,EAAK,QAAQ,SAAWA,EAAK,MAAM,cAAc,CACrD,EAEMuiB,GAAgB,CAAC,CAAE,KAAAviB,EAAM,OAAAtN,KAAa,CACxC,MAAMyvB,EAAQP,GAAS5hB,EAAMtN,EAAO,EAAE,EACjCyvB,IACDA,EAAM,YAAYA,EAAM,WAAW,YAAYA,CAAK,EACxD,OAAOniB,EAAK,IAAI,OAAOtN,EAAO,EAAE,EACpC,EAIM8vB,GAAiB,CAAC,CAAE,KAAAxiB,EAAM,OAAAtN,KAAa,CACzC,MAAMyvB,EAAQP,GAAS5hB,EAAMtN,EAAO,EAAE,EACjCyvB,IACDzvB,EAAO,QAAU,KAEjByvB,EAAM,gBAAgB,OAAO,EAGzBA,EAAM,MAAQ,SACdA,EAAM,MAAQzvB,EAAO,OAG7BmvB,GAA4B7hB,CAAI,EACpC,EAEMyiB,GAAU3iB,GAAY,CACxB,iBAAkBwiB,GAClB,aAAcP,GACd,cAAeG,GACf,gBAAiBK,GACjB,iBAAkBC,GAClB,mBAAoBH,GACpB,kBAAmBP,GACnB,eAAgBA,EACpB,CAAC,EAEK5sB,GAAOyH,EAAW,CACpB,IAAK,WACL,KAAM,OACN,OAAQglB,GACR,MAAOc,GACP,WAAY,EAChB,CAAC,EAEKC,GAAclsB,GAAY,gBAAiBA,EAAUA,EAAQ,YAAa,EAAG,SAE7EmsB,GAAS,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAM,EACnEC,GAAS,CAAC,MAAO,MAAO,OAAQ,KAAK,EACrC1J,GAAM,CACR,IAAK,iBACL,KAAM,sBACV,EAEM2J,GAAsB,CAACla,EAAY,MACrCA,EAAYA,EAAU,YAAa,EAC/Bga,GAAO,SAASha,CAAS,EAErB,UAAYA,IAAc,MAAQ,OAASA,IAAc,MAAQ,UAAYA,GAGjFia,GAAO,SAASja,CAAS,EAClB,QAAUA,EAGduQ,GAAIvQ,CAAS,GAAK,IAGvBma,GAA2Bvc,GAC7B,IAAI,QAAQ,CAACvlB,EAASC,IAAW,CAE7B,MAAM8hC,EAAQC,GAASzc,CAAY,EACnC,GAAIwc,EAAM,QAAU,CAACtyB,GAAS8V,CAAY,EACtC,OAAOvlB,EAAQ+hC,CAAK,EAGxBE,GAAS1c,CAAY,EAAE,KAAKvlB,CAAO,CAC3C,CAAK,EAKCyP,GAAW8V,GACTA,EAAa,MAAcA,EAAa,MAAM,OAAS,EACpD,GAML0c,GAAW1c,GACb,IAAI,QAAQ,CAACvlB,EAASC,IAAW,CAE7B,MAAMiiC,GAAiB3c,EAAa,MAAQ,MAAM,KAAKA,EAAa,KAAK,EAAI,CAAE,GAG1E,OAAOtiB,GAAQk/B,GAAiBl/B,CAAI,CAAC,EAGrC,IAAIA,GAAQm/B,GAAiBn/B,CAAI,CAAC,EAGvC,GAAI,CAACi/B,EAAc,OAAQ,CAGvBliC,EAAQulB,EAAa,MAAQ,MAAM,KAAKA,EAAa,KAAK,EAAI,EAAE,EAChE,MACZ,CAGQ,QAAQ,IAAI2c,CAAa,EACpB,KAAKG,GAAsB,CAExB,MAAMh/B,EAAQ,CAAE,EAChBg/B,EAAmB,QAAQC,GAAS,CAChCj/B,EAAM,KAAK,MAAMA,EAAOi/B,CAAK,CACjD,CAAiB,EAGDtiC,EACIqD,EACK,OAAOrB,GAAQA,CAAI,EACnB,IAAIA,IACIA,EAAK,gBAAeA,EAAK,cAAgBA,EAAK,oBAC5CA,EACV,CACR,CACJ,CAAA,EACA,MAAM,QAAQ,KAAK,CAChC,CAAK,EAECmgC,GAAmBl/B,GAAQ,CAC7B,GAAIs/B,GAAQt/B,CAAI,EAAG,CACf,MAAMY,EAAQ2+B,GAAWv/B,CAAI,EAC7B,GAAIY,EACA,OAAOA,EAAM,QAAUA,EAAM,WAEzC,CACI,OAAOZ,EAAK,OAAS,MACzB,EAEMm/B,GAAmBn/B,GACrB,IAAI,QAAQ,CAACjD,EAASC,IAAW,CAC7B,GAAIwiC,GAAiBx/B,CAAI,EAAG,CACxBy/B,GAAoBF,GAAWv/B,CAAI,CAAC,EAC/B,KAAKjD,CAAO,EACZ,MAAMC,CAAM,EACjB,MACZ,CAEQD,EAAQ,CAACiD,EAAK,UAAS,CAAE,CAAC,CAClC,CAAK,EAECy/B,GAAsB7+B,GACxB,IAAI,QAAQ,CAAC7D,EAASC,IAAW,CAC7B,MAAMoD,EAAQ,CAAE,EAGhB,IAAIs/B,EAAa,EACbC,EAAc,EAElB,MAAMC,EAAgB,IAAM,CACpBD,IAAgB,GAAKD,IAAe,GACpC3iC,EAAQqD,CAAK,CAEpB,EAGKgB,EAAcy+B,GAAY,CAC5BH,IAEA,MAAMI,EAAkBD,EAAS,aAAc,EAGzCE,EAAY,IAAM,CACpBD,EAAgB,YAAY3+B,GAAW,CACnC,GAAIA,EAAQ,SAAW,EAAG,CACtBu+B,IACAE,EAAe,EACf,MACxB,CAEoBz+B,EAAQ,QAAQP,GAAS,CAEjBA,EAAM,YACNQ,EAAYR,CAAK,GAGjB++B,IAEA/+B,EAAM,KAAK7B,GAAQ,CACf,MAAMihC,EAAgBC,GAAuBlhC,CAAI,EAC7C6B,EAAM,WAAUo/B,EAAc,cAAgBp/B,EAAM,UACxDR,EAAM,KAAK4/B,CAAa,EACxBL,IACAC,EAAe,CAC/C,CAA6B,EAE7B,CAAqB,EAGDG,EAAW,CACd,EAAE/iC,CAAM,CACZ,EAGD+iC,EAAW,CACd,EAGD3+B,EAAYR,CAAK,CACzB,CAAK,EAECq/B,GAAyBlhC,GAAQ,CACnC,GAAIA,EAAK,KAAK,OAAQ,OAAOA,EAC7B,MAAMulB,EAAOvlB,EAAK,iBACZI,EAAOJ,EAAK,KACZO,EAAOs/B,GAAoB5a,GAAyBjlB,EAAK,IAAI,CAAC,EACpE,OAAKO,EAAK,SACVP,EAAOA,EAAK,MAAM,EAAGA,EAAK,KAAMO,CAAI,EACpCP,EAAK,KAAOI,EACZJ,EAAK,iBAAmBulB,GACjBvlB,CACX,EAEMygC,GAAmBx/B,GAAQs/B,GAAQt/B,CAAI,IAAMu/B,GAAWv/B,CAAI,GAAK,CAAA,GAAI,YAErEs/B,GAAUt/B,GAAQ,qBAAsBA,EAExCu/B,GAAav/B,GAAQA,EAAK,iBAAkB,EAK5C++B,GAAWzc,GAAgB,CAC7B,IAAIwc,EAAQ,CAAE,EACd,GAAI,CAGA,GADAA,EAAQoB,GAA6B5d,CAAY,EAC7Cwc,EAAM,OACN,OAAOA,EAEXA,EAAQqB,GAA4B7d,CAAY,CACnD,MAAW,CAEhB,CACI,OAAOwc,CACX,EAEMqB,GAA8B7d,GAAgB,CAChD,IAAIrR,EAAOqR,EAAa,QAAQ,KAAK,EACrC,OAAI,OAAOrR,GAAS,UAAYA,EAAK,OAC1B,CAACA,CAAI,EAET,CAAE,CACb,EAEMivB,GAA+B5d,GAAgB,CACjD,IAAIrR,EAAOqR,EAAa,QAAQ,WAAW,EAC3C,GAAI,OAAOrR,GAAS,UAAYA,EAAK,OAAQ,CACzC,MAAM2U,EAAU3U,EAAK,MAAM,mBAAmB,EAC9C,GAAI2U,EACA,MAAO,CAACA,EAAQ,CAAC,CAAC,CAE9B,CACI,MAAO,CAAE,CACb,EAEMwa,GAAqB,CAAE,EAEvBC,GAAgB,IAAM,CACxB,SAAU,EAAE,MACZ,QAAS,EAAE,MACX,UAAW,EAAE,SAAW,EAAE,OAC1B,SAAU,EAAE,SAAW,EAAE,MAC7B,GAEMC,GAAwB,CAAC/tB,EAASguB,EAAgBC,IAAkB,CACtE,MAAMC,EAAWC,GAAqBH,CAAc,EAE9CI,EAAS,CACX,QAAApuB,EACA,cAAAiuB,EACA,MAAO,KACP,OAAQ,IAAM,CAAE,EAChB,QAAS,IAAM,CAAE,EACjB,OAAQ,IAAM,CAAE,EAChB,OAAQ,IAAM,CAAE,EAChB,OAAQ,IAAM,CAAE,EAChB,UAAW,IAAM,CAAE,CACtB,EAED,OAAAG,EAAO,QAAUF,EAAS,YAAYE,CAAM,EAErCA,CACX,EAEMD,GAAuBnuB,GAAW,CAEpC,MAAMkuB,EAAWL,GAAmB,KAAKpgC,GAAQA,EAAK,UAAYuS,CAAO,EACzE,GAAIkuB,EACA,OAAOA,EAIX,MAAMG,EAAcC,GAAwBtuB,CAAO,EACnD,OAAA6tB,GAAmB,KAAKQ,CAAW,EAC5BA,CACX,EAEMC,GAA0BtuB,GAAW,CACvC,MAAMuuB,EAAU,CAAE,EAEZhlB,EAAS,CACX,UAAAilB,GACA,SAAAC,GACA,UAAAC,GACA,KAAAhK,EACH,EAEKiK,EAAW,CAAE,EAEnBvvB,EAAMmK,EAAQ,CAAC/V,EAAOo7B,IAAkB,CACpCD,EAASn7B,CAAK,EAAIo7B,EAAc5uB,EAASuuB,CAAO,EAChDvuB,EAAQ,iBAAiBxM,EAAOm7B,EAASn7B,CAAK,EAAG,EAAK,CAC9D,CAAK,EAED,MAAM06B,EAAW,CACb,QAAAluB,EACA,YAAaouB,IAETG,EAAQ,KAAKH,CAAM,EAGZ,IAAM,CAETG,EAAQ,OAAOA,EAAQ,QAAQH,CAAM,EAAG,CAAC,EAGrCG,EAAQ,SAAW,IACnBV,GAAmB,OAAOA,GAAmB,QAAQK,CAAQ,EAAG,CAAC,EAEjE9uB,EAAMmK,EAAQ/V,GAAS,CACnBwM,EAAQ,oBAAoBxM,EAAOm7B,EAASn7B,CAAK,EAAG,EAAK,CACjF,CAAqB,EAER,EAER,EAED,OAAO06B,CACX,EAEMW,GAAmB,CAACrlB,EAAMslB,KACtB,qBAAsBtlB,IACxBA,EAAO,UAEJA,EAAK,iBAAiBslB,EAAM,EAAGA,EAAM,CAAC,GAG3CC,GAAgB,CAAC,EAAGv+B,IAAW,CAEjC,MAAMgZ,EAAO0iB,GAAY17B,CAAM,EAIzBw+B,EAAoBH,GAAiBrlB,EAAM,CAC7C,EAAG,EAAE,MAAQ,OAAO,YACpB,EAAG,EAAE,MAAQ,OAAO,WAC5B,CAAK,EAGD,OAAOwlB,IAAsBx+B,GAAUA,EAAO,SAASw+B,CAAiB,CAC5E,EAEA,IAAIC,GAAgB,KAEpB,MAAMC,GAAgB,CAACnf,EAAcof,IAAW,CAE5C,GAAI,CACApf,EAAa,WAAaof,CAC7B,MAAW,CAAA,CAChB,EAEMX,GAAY,CAAChlB,EAAM+kB,IAAY3jC,GAAK,CACtCA,EAAE,eAAgB,EAElBqkC,GAAgBrkC,EAAE,OAElB2jC,EAAQ,QAAQH,GAAU,CACtB,KAAM,CAAE,QAAApuB,EAAS,QAAAovB,CAAO,EAAKhB,EAEzBW,GAAcnkC,EAAGoV,CAAO,IACxBouB,EAAO,MAAQ,QAGfgB,EAAQtB,GAAcljC,CAAC,CAAC,EAEpC,CAAK,CACL,EAEM6jC,GAAW,CAACjlB,EAAM+kB,IAAY3jC,GAAK,CACrCA,EAAE,eAAgB,EAElB,MAAMmlB,EAAenlB,EAAE,aAEvB0hC,GAAyBvc,CAAY,EAAE,KAAK/hB,GAAS,CACjD,IAAIqhC,EAAiB,GAErBd,EAAQ,KAAKH,GAAU,CACnB,KAAM,CAAE,cAAAH,EAAe,QAAAjuB,EAAS,QAAAovB,EAAS,OAAAE,EAAQ,OAAAC,EAAQ,UAAAC,CAAS,EAAKpB,EAGvEc,GAAcnf,EAAc,MAAM,EAGlC,MAAM0f,EAAiBD,EAAUxhC,CAAK,EAGtC,GAAI,CAACyhC,EAAgB,CACjBP,GAAcnf,EAAc,MAAM,EAClC,MAChB,CAGY,GAAIgf,GAAcnkC,EAAGoV,CAAO,EAAG,CAI3B,GAHAqvB,EAAiB,GAGbjB,EAAO,QAAU,KAAM,CACvBA,EAAO,MAAQ,QACfgB,EAAQtB,GAAcljC,CAAC,CAAC,EACxB,MACpB,CAMgB,GAHAwjC,EAAO,MAAQ,OAGXH,GAAiB,CAACwB,EAAgB,CAClCP,GAAcnf,EAAc,MAAM,EAClC,MACpB,CAGgBwf,EAAOzB,GAAcljC,CAAC,CAAC,CACvC,MAEoBqjC,GAAiB,CAACoB,GAClBH,GAAcnf,EAAc,MAAM,EAIlCqe,EAAO,QACPA,EAAO,MAAQ,KACfkB,EAAOxB,GAAcljC,CAAC,CAAC,EAG3C,CAAS,CACT,CAAK,CACL,EAEM85B,GAAO,CAAClb,EAAM+kB,IAAY3jC,GAAK,CACjCA,EAAE,eAAgB,EAElB,MAAMmlB,EAAenlB,EAAE,aAEvB0hC,GAAyBvc,CAAY,EAAE,KAAK/hB,GAAS,CACjDugC,EAAQ,QAAQH,GAAU,CACtB,KAAM,CAAE,cAAAH,EAAe,QAAAjuB,EAAS,OAAA0vB,EAAQ,OAAAJ,EAAQ,UAAAE,CAAS,EAAKpB,EAK9D,GAHAA,EAAO,MAAQ,KAGX,EAAAH,GAAiB,CAACc,GAAcnkC,EAAGoV,CAAO,GAG9C,IAAI,CAACwvB,EAAUxhC,CAAK,EAAG,OAAOshC,EAAOxB,GAAcljC,CAAC,CAAC,EAGrD8kC,EAAO5B,GAAcljC,CAAC,EAAGoD,CAAK,EAC1C,CAAS,CACT,CAAK,CACL,EAEM0gC,GAAY,CAACllB,EAAM+kB,IAAY3jC,GAAK,CAClCqkC,KAAkBrkC,EAAE,QAIxB2jC,EAAQ,QAAQH,GAAU,CACtB,KAAM,CAAE,OAAAkB,CAAM,EAAKlB,EAEnBA,EAAO,MAAQ,KAEfkB,EAAOxB,GAAcljC,CAAC,CAAC,CAC/B,CAAK,CACL,EAEM+kC,GAAe,CAACC,EAAOC,EAAeljB,IAAY,CAEpDijB,EAAM,UAAU,IAAI,kBAAkB,EAGtC,KAAM,CAAE,mBAAAE,EAAoB,sBAAAC,EAAuB,YAAAC,EAAchiC,GAASA,CAAK,EAAK2e,EAG9EyhB,EAASL,GACX6B,EACAE,EAAqB,SAAS,gBAAkBF,EAChDG,CACH,EAGD,IAAIE,EAAY,GACZC,EAAe,GAGnB9B,EAAO,UAAYpgC,GAGR6hC,EAAcG,EAAYhiC,CAAK,CAAC,EAG3CogC,EAAO,OAAS,CAACvsB,EAAU7T,IAAU,CACjC,MAAMmiC,EAAgBH,EAAYhiC,CAAK,EAEvC,GAAI,CAAC6hC,EAAcM,CAAa,EAAG,CAC/BnxB,EAAI,UAAU6C,CAAQ,EACtB,MACZ,CAEQquB,EAAe,YAEflxB,EAAI,OAAOmxB,EAAetuB,CAAQ,CACrC,EAEDusB,EAAO,OAASvsB,GAAY,CACxB7C,EAAI,OAAO6C,CAAQ,CACtB,EAEDusB,EAAO,QAAUvsB,GAAY,CACzBquB,EAAe,YAEflxB,EAAI,YAAY6C,CAAQ,CAC3B,EAEDusB,EAAO,OAASvsB,GAAY,CACxBquB,EAAe,YAEflxB,EAAI,UAAU6C,CAAQ,CACzB,EAED,MAAM7C,EAAM,CACR,kBAAmB,IAAM,CACjBixB,IAAcC,IACdN,EAAM,QAAQ,YAAcM,EAC5BD,EAAYC,EAEnB,EACD,OAAQ,IAAM,CAAE,EAChB,YAAa,IAAM,CAAE,EACrB,OAAQ,IAAM,CAAE,EAChB,UAAW,IAAM,CAAE,EACnB,QAAS,IAAM,CAEX9B,EAAO,QAAS,CACnB,CACJ,EAED,OAAOpvB,CACX,EAEA,IAAIoxB,GAAY,GAChB,MAAMC,GAAc,CAAE,EAEhBC,GAAc,GAAK,CAErB,MAAMC,EAAW,SAAS,cAC1B,GAAIA,GAAY,kBAAkB,KAAKA,EAAS,QAAQ,EAAG,CAEvD,IAAIC,EAAU,GACVxwB,EAAUuwB,EACd,KAAOvwB,IAAY,SAAS,MAAM,CAC9B,GAAIA,EAAQ,UAAU,SAAS,gBAAgB,EAAG,CAC9CwwB,EAAU,GACV,KAChB,CACYxwB,EAAUA,EAAQ,UAC9B,CAEQ,GAAI,CAACwwB,EAAS,MACtB,CAEIlE,GAAyB,EAAE,aAAa,EAAE,KAAKz+B,GAAS,CAE/CA,EAAM,QAKXwiC,GAAY,QAAQ1iB,GAAYA,EAAS9f,CAAK,CAAC,CACvD,CAAK,CACL,EAEM4iC,GAASpxB,GAAM,CAEbgxB,GAAY,SAAShxB,CAAE,IAK3BgxB,GAAY,KAAKhxB,CAAE,EAGf,CAAA+wB,KAIJA,GAAY,GACZ,SAAS,iBAAiB,QAASE,EAAW,GAClD,EAEMI,GAAW/iB,GAAY,CACzBL,GAAY+iB,GAAaA,GAAY,QAAQ1iB,CAAQ,CAAC,EAGlD0iB,GAAY,SAAW,IACvB,SAAS,oBAAoB,QAASC,EAAW,EACjDF,GAAY,GAEpB,EAEMO,GAAe,IAAM,CACvB,MAAMtxB,EAAKxR,GAAS,CAChBmR,EAAI,OAAOnR,CAAK,CACnB,EAEKmR,EAAM,CACR,QAAS,IAAM,CACX0xB,GAASrxB,CAAE,CACd,EACD,OAAQ,IAAM,CAAE,CACnB,EAED,OAAAoxB,GAAOpxB,CAAE,EAEFL,CACX,EAKM4xB,GAAW,CAAC,CAAE,KAAApnB,EAAM,MAAA/S,KAAY,CAClC+S,EAAK,QAAQ,GAAK,uBAAuB/S,EAAM,EAAE,GACjD8I,EAAKiK,EAAK,QAAS,OAAQ,QAAQ,EACnCjK,EAAKiK,EAAK,QAAS,YAAa,QAAQ,EACxCjK,EAAKiK,EAAK,QAAS,gBAAiB,WAAW,CACnD,EAEA,IAAIqnB,GAA8B,KAC9BC,GAA2B,KAE/B,MAAMC,GAAY,CAAE,EAEdC,GAAS,CAACxnB,EAAMynB,IAAY,CAC9BznB,EAAK,QAAQ,YAAcynB,CAC/B,EAEMC,GAAU1nB,GAAQ,CACpBA,EAAK,QAAQ,YAAc,EAC/B,EAEM2nB,GAAe,CAAC3nB,EAAM0I,EAAU4I,IAAU,CAC5C,MAAM1G,EAAQ5K,EAAK,MAAM,iBAAiB,EAC1CwnB,GACIxnB,EACA,GAAGsR,CAAK,IAAI5I,CAAQ,KAAKkC,CAAK,IAC1BA,IAAU,EACJ5K,EAAK,MAAM,+BAA+B,EAC1CA,EAAK,MAAM,6BAA6B,CACjD,EACJ,EAGD,aAAasnB,EAAwB,EACrCA,GAA2B,WAAW,IAAM,CACxCI,GAAQ1nB,CAAI,CACf,EAAE,IAAI,CACX,EAEM4nB,GAAkB5nB,GAAQA,EAAK,QAAQ,WAAW,SAAS,SAAS,aAAa,EAEjF6nB,GAAY,CAAC,CAAE,KAAA7nB,EAAM,OAAAtN,KAAa,CACpC,GAAI,CAACk1B,GAAgB5nB,CAAI,EACrB,OAGJA,EAAK,QAAQ,YAAc,GAC3B,MAAM/b,EAAO+b,EAAK,MAAM,WAAYtN,EAAO,EAAE,EAC7C60B,GAAU,KAAKtjC,EAAK,QAAQ,EAE5B,aAAaojC,EAA2B,EACxCA,GAA8B,WAAW,IAAM,CAC3CM,GAAa3nB,EAAMunB,GAAU,KAAK,IAAI,EAAGvnB,EAAK,MAAM,sBAAsB,CAAC,EAC3EunB,GAAU,OAAS,CACtB,EAAE,GAAG,CACV,EAEMO,GAAc,CAAC,CAAE,KAAA9nB,EAAM,OAAAtN,KAAa,CACtC,GAAI,CAACk1B,GAAgB5nB,CAAI,EACrB,OAGJ,MAAM/b,EAAOyO,EAAO,KACpBi1B,GAAa3nB,EAAM/b,EAAK,SAAU+b,EAAK,MAAM,wBAAwB,CAAC,CAC1E,EAEM+nB,GAAgB,CAAC,CAAE,KAAA/nB,EAAM,OAAAtN,KAAa,CAIxC,MAAMgW,EADO1I,EAAK,MAAM,WAAYtN,EAAO,EAAE,EACvB,SAChB4e,EAAQtR,EAAK,MAAM,oCAAoC,EAE7DwnB,GAAOxnB,EAAM,GAAG0I,CAAQ,IAAI4I,CAAK,EAAE,CACvC,EAEM0W,GAAoB,CAAC,CAAE,KAAAhoB,EAAM,OAAAtN,KAAa,CAE5C,MAAMgW,EADO1I,EAAK,MAAM,WAAYtN,EAAO,EAAE,EACvB,SAChB4e,EAAQtR,EAAK,MAAM,mCAAmC,EAE5DwnB,GAAOxnB,EAAM,GAAG0I,CAAQ,IAAI4I,CAAK,EAAE,CACvC,EAEM2W,GAAY,CAAC,CAAE,KAAAjoB,EAAM,OAAAtN,KAAa,CAEpC,MAAMgW,EADO1I,EAAK,MAAM,WAAYtN,EAAO,EAAE,EACvB,SAItB80B,GAAOxnB,EAAM,GAAGtN,EAAO,OAAO,IAAI,IAAIgW,CAAQ,IAAIhW,EAAO,OAAO,GAAG,EAAE,CACzE,EAEMw1B,GAAYvrB,EAAW,CACzB,OAAQyqB,GACR,WAAY,GACZ,iBAAkB,GAClB,MAAOtnB,GAAY,CACf,cAAe+nB,GACf,gBAAiBC,GACjB,6BAA8BC,GAE9B,0BAA2BC,GAC3B,2BAA4BA,GAE5B,4BAA6BC,GAC7B,0BAA2BA,GAC3B,uBAAwBA,GACxB,gCAAiCA,EACzC,CAAK,EACD,IAAK,OACL,KAAM,WACV,CAAC,EAEKE,GAAW,CAAC3mB,EAAQ+B,EAAY,MAClC/B,EAAO,QAAQ,IAAI,OAAO,GAAG+B,CAAS,IAAK,GAAG,EAAGwT,GAAOA,EAAI,OAAO,CAAC,EAAE,YAAW,CAAE,EAEjFqR,GAAW,CAACC,EAAM/oB,EAAW,GAAIgpB,EAAgB,KAAS,CAC5D,IAAI/oB,EAAO,KAAK,IAAK,EACjByC,EAAU,KAEd,MAAO,IAAIpX,IAAS,CAChB,aAAaoX,CAAO,EAEpB,MAAM+a,EAAO,KAAK,IAAG,EAAKxd,EAEpBzU,EAAK,IAAM,CACbyU,EAAO,KAAK,IAAK,EACjB8oB,EAAK,GAAGz9B,CAAI,CACf,EAEGmyB,EAAOzd,EAIFgpB,IACDtmB,EAAU,WAAWlX,EAAIwU,EAAWyd,CAAI,GAI5CjyB,EAAI,CAEX,CACL,EAEMy9B,GAAkB,IAElBC,GAAU,GAAK,EAAE,eAAgB,EAEjCC,GAAW,CAAC,CAAE,KAAAzoB,EAAM,MAAA/S,KAAY,CAElC,MAAMuS,EAAKQ,EAAK,MAAM,QAAQ,EAC1BR,IACAQ,EAAK,QAAQ,GAAKR,GAItB,MAAMlJ,EAAY0J,EAAK,MAAM,gBAAgB,EACzC1J,GACAA,EACK,MAAM,GAAG,EACT,OAAOlT,GAAQA,EAAK,MAAM,EAC1B,QAAQA,GAAQ,CACb4c,EAAK,QAAQ,UAAU,IAAI5c,CAAI,CAC/C,CAAa,EAIT4c,EAAK,IAAI,MAAQA,EAAK,gBAClBA,EAAK,gBAAgBkhB,GAAW,CAC5B,GAAGj0B,EACH,WAAY,KACZ,QAAS+S,EAAK,MAAM,gBAAgB,CACvC,CAAA,CACJ,EAGDA,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgB2f,GAAc,CAAE,WAAY,IAAM,CAAA,CAAC,EAG7F3f,EAAK,IAAI,MAAQA,EAAK,gBAAgBA,EAAK,gBAAgBsa,GAAO,CAAE,KAAM,YAAc,CAAA,CAAC,EAGzFta,EAAK,IAAI,UAAYA,EAAK,gBAAgBA,EAAK,gBAAgBkoB,GAAW,CAAE,GAAGj7B,CAAO,CAAA,CAAC,EAGvF+S,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgB9K,GAAM,CAAE,GAAGjI,CAAO,CAAA,CAAC,EAI7E+S,EAAK,IAAI,QAAUkU,GAAgB,KAAK,EACxClU,EAAK,IAAI,QAAQ,MAAM,OAAS,OAChCA,EAAK,QAAQ,YAAYA,EAAK,IAAI,OAAO,EAGzCA,EAAK,IAAI,OAAS,KAGlBA,EAAK,MAAM,YAAY,EAClB,OAAOtD,GAAS,CAAC6D,GAAQ7D,EAAM,KAAK,CAAC,EACrC,IAAI,CAAC,CAAE,KAAAtZ,EAAM,MAAArC,KAAY,CACtBif,EAAK,QAAQ,QAAQ5c,CAAI,EAAIrC,CACzC,CAAS,EAGLif,EAAK,IAAI,cAAgB,KACzBA,EAAK,IAAI,aAAeooB,GAAS,IAAM,CACnCpoB,EAAK,IAAI,cAAgB,CAAE,EAC3BA,EAAK,SAAS,iBAAiB,CAClC,EAAE,GAAG,EAGNA,EAAK,IAAI,oBAAsB,KAC/BA,EAAK,IAAI,cAAgB,CAAE,EAG3B,MAAM0oB,EAAW,OAAO,WAAW,oCAAoC,EAAE,QACnEC,EAAmB,iBAAkB,OACvC3oB,EAAK,MAAM,mBAAmB,GAAK2oB,GAAoB,CAACD,IACxD1oB,EAAK,QAAQ,iBAAiB,YAAawoB,GAAS,CAAE,QAAS,GAAO,EACtExoB,EAAK,QAAQ,iBAAiB,eAAgBwoB,EAAO,GAIzD,MAAMI,EAAU5oB,EAAK,MAAM,aAAa,EAExC,GADmB4oB,EAAQ,SAAW,EACtB,CACZ,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,oBACjBA,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,KAAOD,EAAQ,CAAC,EACrBC,EAAK,SAAW,GAChBA,EAAK,OAAS,SACdA,EAAK,IAAM,sBACXA,EAAK,YAAcD,EAAQ,CAAC,EAC5B5oB,EAAK,QAAQ,YAAY6oB,CAAI,EAC7B7oB,EAAK,IAAI,QAAU6oB,CAC3B,CACA,EAEMC,GAAU,CAAC,CAAE,KAAA9oB,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,IAAO,CAc1C,GAZAo0B,GAAQ,CAAE,KAAA/oB,EAAM,MAAA/S,EAAO,QAAA0H,CAAO,CAAE,EAGhCA,EACK,OAAOjC,GAAU,kBAAkB,KAAKA,EAAO,IAAI,CAAC,EACpD,OAAOA,GAAU,CAAC6N,GAAQ7N,EAAO,KAAK,KAAK,CAAC,EAC5C,IAAI,CAAC,CAAE,KAAAnP,EAAM,KAAA2R,KAAW,CACrB,MAAM9R,EAAO+kC,GAAS5kC,EAAK,UAAU,CAAC,EAAE,YAAa,EAAE,GAAG,EAC1Dyc,EAAK,QAAQ,QAAQ5c,CAAI,EAAI8R,EAAK,MAClC8K,EAAK,iBAAkB,CACnC,CAAS,EAEDA,EAAK,KAAK,QAAQ,OAAQ,OAE1BA,EAAK,KAAK,QAAQ,QAAUA,EAAK,IAAI,gBACrCA,EAAK,IAAI,cAAgBA,EAAK,KAAK,QAAQ,MAC3CA,EAAK,IAAI,aAAc,GAI3B,IAAIgpB,EAAShpB,EAAK,IAAI,OACjBgpB,IACDA,EAAShpB,EAAK,IAAI,OAASipB,GAA+BjpB,CAAI,EAG9DA,EAAK,QAAQ,YAAYA,EAAK,IAAI,OAAO,EACzCA,EAAK,IAAI,QAAU,MAIvB,KAAM,CAAE,OAAAkpB,EAAQ,MAAA5X,EAAO,KAAA8N,EAAM,MAAA9E,CAAK,EAAKta,EAAK,IAGxCkpB,GACAA,EAAO,kBAAmB,EAI9B,MAAMhjB,EAAclG,EAAK,MAAM,wBAAwB,EACjDmpB,EAAcnpB,EAAK,MAAM,oBAAoB,EAC7CwS,EAAaxS,EAAK,MAAM,iBAAiB,EACzCopB,EAAWD,EAAcnpB,EAAK,MAAM,eAAe,GAAKuoB,GAAkB,EAC1Ec,EAAgB7W,IAAe4W,EAG/BE,EAAY30B,EAAQ,KAAKjC,GAAUA,EAAO,OAAS,cAAc,EAGvE,GAAI22B,GAAiBC,EAAW,CAE5B,MAAMhX,EAAoBgX,EAAU,KAAK,kBAGzChY,EAAM,QAAU,EAEZ6X,EACA7X,EAAM,WAAa,IAEfgB,IAAsB1O,GAAkB,IACxC0N,EAAM,WAAa,GACZgB,IAAsB1O,GAAkB,OAC/C0N,EAAM,WAAa,GAEnBA,EAAM,WAAa,EAGnC,MAAgB+X,IACR/X,EAAM,QAAU,EAChBA,EAAM,WAAa,EACnBA,EAAM,WAAa,GAGvB,MAAMiY,EAAiBC,GAAwBxpB,CAAI,EAE7CypB,EAAaC,GAAoB1pB,CAAI,EAErC2pB,EAAcrY,EAAM,KAAK,QAAQ,OACjCsY,EAAqB,CAACT,GAAeE,EAAgB,EAAIM,EAEzDE,EAAgBR,EAAgBjK,EAAK,KAAK,QAAQ,UAAY,EAC9D0K,EAAmBtX,IAAe,EAAI,EAAI4M,EAAK,KAAK,QAAQ,aAE5DP,EAAe+K,EAAqBC,EAAgBJ,EAAW,OAASK,EACxEC,EAAeH,EAAqBC,EAAgBJ,EAAW,OAASK,EAM9E,GAHA1K,EAAK,WACD,KAAK,IAAI,EAAGwK,EAAqBxK,EAAK,KAAK,QAAQ,SAAS,EAAImK,EAAe,IAE/ErjB,EAAa,CAIb,MAAM9J,EAAQ4D,EAAK,KAAK,QAAQ,MAC1B3D,EAASD,EAAQ8J,EAGnBA,IAAgBlG,EAAK,IAAI,sBACzBA,EAAK,IAAI,oBAAsBkG,EAC/BlG,EAAK,IAAI,cAAgB,CAAE,GAI/B,MAAMgqB,EAAUhqB,EAAK,IAAI,cACzBgqB,EAAQ,KAAK5tB,CAAK,EAElB,MAAM6tB,EAAc,EACpB,GAAID,EAAQ,OAASC,EAAc,EAAG,CAClC,MAAMpnC,EAAImnC,EAAQ,OACZnyB,EAAShV,EAAI,GACnB,IAAIqnC,EAAU,EACd,QAAS7nC,EAAIQ,EAAGR,GAAKwV,EAAQxV,IAKzB,GAJI2nC,EAAQ3nC,CAAC,IAAM2nC,EAAQ3nC,EAAI,CAAC,GAC5B6nC,IAGAA,GAAWD,EAEX,MAGpB,CAGQ3P,EAAM,SAAW,GACjBA,EAAM,OAASje,EAGf,MAAM8tB,EAEF9tB,EACAutB,GAECE,EAAmBP,EAAe,SAElCF,EAAgBQ,EAAgB,GAEjCJ,EAAW,OAASU,EACpB/K,EAAK,SAAW+K,EAEhB/K,EAAK,SAAW,KAIpBpf,EAAK,OAAS3D,CACtB,SAAe2sB,EAAO,YAAa,CAI3B1O,EAAM,SAAW,GAGjB,MAAM6P,EAEFnB,EAAO,YACPY,GAECE,EAAmBP,EAAe,SAElCF,EAAgBQ,EAAgB,GAGjCJ,EAAW,OAASU,EACpB/K,EAAK,SAAW+K,EAEhB/K,EAAK,SAAW,IAI5B,SAAe4J,EAAO,aAAc,CAI5B,MAAMoB,EAAiBvL,GAAgBmK,EAAO,aACxCqB,EAAc,KAAK,IAAIrB,EAAO,aAAcnK,CAAY,EAC9DvE,EAAM,SAAW,GACjBA,EAAM,OAAS8P,EACTC,EACAA,EAAcd,EAAe,IAAMA,EAAe,OAGxD,MAAMY,EAEFE,EACAT,GAECE,EAAmBP,EAAe,SAElCF,EAAgBQ,EAAgB,GAGjChL,EAAemK,EAAO,cAAgBS,EAAW,OAASU,EAC1D/K,EAAK,SAAW+K,EAEhB/K,EAAK,SAAW,KAIpBpf,EAAK,OAAS,KAAK,IACfgpB,EAAO,aACPe,EAAeR,EAAe,IAAMA,EAAe,MACtD,CACT,KAAW,CAIH,MAAMe,EAAa9X,EAAa,EAAI+W,EAAe,IAAMA,EAAe,OAAS,EACjFjP,EAAM,SAAW,GACjBA,EAAM,OAAS,KAAK,IAAIqP,EAAa9K,EAAeyL,CAAU,EAG9DtqB,EAAK,OAAS,KAAK,IAAI2pB,EAAaI,EAAeO,CAAU,CACrE,CAGQtqB,EAAK,IAAI,SAAWsa,EAAM,gBAC1Bta,EAAK,IAAI,QAAQ,MAAM,UAAY,cAAcsa,EAAM,aAAa,MAC5E,EAEMkP,GAA0BxpB,GAAQ,CACpC,MAAM/b,EAAO+b,EAAK,IAAI,KAAK,WAAW,CAAC,EAAE,WAAW,CAAC,EACrD,OAAO/b,EACD,CACI,IAAKA,EAAK,KAAK,QAAQ,UACvB,OAAQA,EAAK,KAAK,QAAQ,YACxC,EACU,CACI,IAAK,EACL,OAAQ,CACX,CACX,EAEMylC,GAAsB1pB,GAAQ,CAChC,IAAIuqB,EAAS,EACTvB,EAAS,EAGb,MAAMwB,EAAaxqB,EAAK,IAAI,KACtByqB,EAAWD,EAAW,WAAW,CAAC,EAClCzM,EAAkB0M,EAAS,WAAW,OAAO9zB,GAASA,EAAM,KAAK,QAAQ,MAAM,EAC/E/J,EAAWoT,EACZ,MAAM,kBAAkB,EACxB,IAAI/b,GAAQ85B,EAAgB,KAAKpnB,GAASA,EAAM,KAAO1S,EAAK,EAAE,CAAC,EAC/D,OAAOA,GAAQA,CAAI,EAGxB,GAAI2I,EAAS,SAAW,EAAG,MAAO,CAAE,OAAA29B,EAAQ,OAAAvB,CAAQ,EAEpD,MAAMzN,EAAkBkP,EAAS,KAAK,QAAQ,MACxCnM,EAAY7C,GAAuBgP,EAAU79B,EAAU49B,EAAW,eAAe,EAEjF7L,EAAY/xB,EAAS,CAAC,EAAE,KAAK,QAE7BmvB,EAAqB4C,EAAU,UAAYA,EAAU,aACrD/C,EAAuB+C,EAAU,WAAaA,EAAU,YAExDnD,EAAYmD,EAAU,MAAQ/C,EAC9BI,EAAa2C,EAAU,OAAS5C,EAEhC2O,EAAU,OAAOpM,EAAc,KAAeA,GAAa,EAAI,EAAI,EACnEqM,EAAc/9B,EAAS,KAAK+J,GAASA,EAAM,kBAAoBA,EAAM,QAAU,GAAI,EACnF,GACA,EACAi0B,EAAoBh+B,EAAS,OAAS89B,EAAUC,EAChD9O,EAAcP,GAAeC,EAAiBC,CAAS,EAG7D,OAAIK,IAAgB,EAChBjvB,EAAS,QAAQ3I,GAAQ,CACrB,MAAMoY,EAASpY,EAAK,KAAK,QAAQ,OAAS83B,EAC1CiN,GAAU3sB,EACVkuB,GAAUluB,EAASpY,EAAK,OACpC,CAAS,GAID+kC,EAAS,KAAK,KAAK4B,EAAoB/O,CAAW,EAAIG,EACtDuO,EAASvB,GAGN,CAAE,OAAAuB,EAAQ,OAAAvB,CAAQ,CAC7B,EAEMC,GAAiCjpB,GAAQ,CAC3C,MAAM3D,EAAS2D,EAAK,IAAI,eAAiB,KAIzC,MAAO,CACH,aAJiB,SAASA,EAAK,MAAM,UAAW,EAAE,GAAK,KAKvD,YAJgB3D,IAAW,EAAI,KAAOA,CAKzC,CACL,EAEMwuB,GAAkB,CAAC7qB,EAAMxb,IAAU,CACrC,MAAMsmC,EAAe9qB,EAAK,MAAM,mBAAmB,EAC7C+qB,EAAgB/qB,EAAK,MAAM,oBAAoB,EAC/CwS,EAAaxS,EAAK,MAAM,iBAAiB,EAC/C,IAAIopB,EAAWppB,EAAK,MAAM,eAAe,EAGzC,MAAMgrB,EAAmBxmC,EAAM,OAG/B,MAAI,CAACumC,GAAiBC,EAAmB,GACrChrB,EAAK,SAAS,sBAAuB,CACjC,OAAQxb,EACR,MAAO4mB,EAAe,UAAW,EAAG,WAAW,CAC3D,CAAS,EACM,KAIXge,EAAW2B,EAAgB3B,EAAW,EAElC,CAAC2B,GAAiBD,EAEX,GAIS5pB,GAAMkoB,CAAQ,GACf5W,EAAawY,EAAmB5B,GAC/CppB,EAAK,SAAS,sBAAuB,CACjC,OAAQxb,EACR,MAAO4mB,EAAe,UAAW,EAAG,WAAW,CAC3D,CAAS,EACM,IAGJ,GACX,EAEM6f,GAAe,CAAC7L,EAAMxyB,EAAUyL,IAAa,CAC/C,MAAMoyB,EAAWrL,EAAK,WAAW,CAAC,EAClC,OAAO3D,GAAuBgP,EAAU79B,EAAU,CAC9C,KAAMyL,EAAS,UAAYoyB,EAAS,KAAK,QAAQ,KACjD,IACIpyB,EAAS,UACR+mB,EAAK,KAAK,MAAM,IAAMA,EAAK,KAAK,QAAQ,UAAYA,EAAK,KAAK,QAAQ,UACnF,CAAK,CACL,EAKM8L,GAAalrB,GAAQ,CACvB,MAAMmrB,EAAYnrB,EAAK,MAAM,gBAAgB,EACvC0V,EAAa1V,EAAK,MAAM,cAAc,EACtCorB,EAAUD,GAAa,CAACzV,EAC9B,GAAI0V,GAAW,CAACprB,EAAK,IAAI,OAAQ,CAC7B,MAAMkpB,EAAS/C,GACXnmB,EAAK,QACLxb,GAAS,CAEL,MAAM6mC,EAAiBrrB,EAAK,MAAM,sBAAsB,IAAM,IAAM,IAIpE,OADuBA,EAAK,MAAM,qBAAqB,EAEjDxb,EAAM,MACFP,GACIwhB,GAAa,oBAAqBxhB,EAAM,CACpC,MAAO+b,EAAK,KAC9C,CAA+B,EAAE,MAAM1e,GAAUA,IAAW,EAAI,GAAK+pC,EAAepnC,CAAI,CACxF,EACsB,EACT,EACD,CACI,YAAaO,GAAS,CAClB,MAAMiuB,EAAezS,EAAK,MAAM,mBAAmB,EACnD,OAAOxb,EAAM,OAAOP,GACZkrB,GAAOlrB,CAAI,EACJ,CAACwuB,EAAa,SAASxuB,EAAK,KAAK,YAAW,CAAE,EAElD,EACV,CACJ,EACD,mBAAoB+b,EAAK,MAAM,kBAAkB,EACjD,sBAAuBA,EAAK,MAAM,qBAAqB,CACvE,CACS,EAEDkpB,EAAO,OAAS,CAAC1kC,EAAO6T,IAAa,CAGjC,MAAM0lB,EADO/d,EAAK,IAAI,KAAK,WAAW,CAAC,EACV,WAAW,OAAOrJ,GAASA,EAAM,KAAK,QAAQ,MAAM,EAC3E/J,EAAWoT,EACZ,MAAM,kBAAkB,EACxB,IAAI/b,GAAQ85B,EAAgB,KAAKpnB,GAASA,EAAM,KAAO1S,EAAK,EAAE,CAAC,EAC/D,OAAOA,GAAQA,CAAI,EAExBkhB,GAAiB,YAAa3gB,EAAO,CAAE,SAAUwb,EAAK,QAAU,CAAA,EAAE,KAAKhL,GAAS,CAE5E,GAAI61B,GAAgB7qB,EAAMhL,CAAK,EAAG,MAAO,GAGzCgL,EAAK,SAAS,YAAa,CACvB,MAAOhL,EACP,MAAOi2B,GAAajrB,EAAK,IAAI,KAAMpT,EAAUyL,CAAQ,EACrD,kBAAmBuL,GAAkB,IACzD,CAAiB,CACjB,CAAa,EAED5D,EAAK,SAAS,WAAY,CAAE,SAAA3H,CAAQ,CAAE,EAEtC2H,EAAK,SAAS,eAAgB,CAAE,SAAA3H,CAAQ,CAAE,CAC7C,EAED6wB,EAAO,YAAc7wB,GAAY,CAC7B2H,EAAK,SAAS,iBAAkB,CAAE,SAAA3H,CAAQ,CAAE,CAC/C,EAED6wB,EAAO,OAASd,GAAS/vB,GAAY,CACjC2H,EAAK,SAAS,WAAY,CAAE,SAAA3H,CAAQ,CAAE,CAClD,CAAS,EAED6wB,EAAO,UAAY7wB,GAAY,CAC3B2H,EAAK,SAAS,eAAgB,CAAE,SAAA3H,CAAQ,CAAE,CAC7C,EAED2H,EAAK,IAAI,OAASkpB,EAElBlpB,EAAK,IAAI,KAAOA,EAAK,gBAAgBA,EAAK,gBAAgByhB,EAAI,CAAC,CAClE,KAAU,CAAC2J,GAAWprB,EAAK,IAAI,SAC5BA,EAAK,IAAI,OAAO,QAAS,EACzBA,EAAK,IAAI,OAAS,KAClBA,EAAK,gBAAgBA,EAAK,IAAI,IAAI,EAE1C,EAKMsrB,GAAe,CAACtrB,EAAM/S,IAAU,CAClC,MAAMk+B,EAAYnrB,EAAK,MAAM,kBAAkB,EACzC0V,EAAa1V,EAAK,MAAM,cAAc,EACtCorB,EAAUD,GAAa,CAACzV,EAC1B0V,GAAW,CAACprB,EAAK,IAAI,QACrBA,EAAK,IAAI,QAAUA,EAAK,gBACpBA,EAAK,gBAAgB6gB,GAAS,CAC1B,GAAG5zB,EACH,OAAQzI,GAAS,CACb2gB,GAAiB,YAAa3gB,EAAO,CACjC,SAAUwb,EAAK,QACvC,CAAqB,EAAE,KAAKhL,GAAS,CAEb,GAAI61B,GAAgB7qB,EAAMhL,CAAK,EAAG,MAAO,GAGzCgL,EAAK,SAAS,YAAa,CACvB,MAAOhL,EACP,MAAO,GACP,kBAAmB4O,GAAkB,MACjE,CAAyB,CACzB,CAAqB,CACJ,CACjB,CAAa,EACD,CACH,EACM,CAACwnB,GAAWprB,EAAK,IAAI,UAC5BA,EAAK,gBAAgBA,EAAK,IAAI,OAAO,EACrCA,EAAK,IAAI,QAAU,KAE3B,EAKMurB,GAAcvrB,GAAQ,CACxB,MAAMmrB,EAAYnrB,EAAK,MAAM,iBAAiB,EACxC0V,EAAa1V,EAAK,MAAM,cAAc,EACtCorB,EAAUD,GAAa,CAACzV,EAC1B0V,GAAW,CAACprB,EAAK,IAAI,QACrBA,EAAK,IAAI,OAASmnB,GAAc,EAChCnnB,EAAK,IAAI,OAAO,OAASxb,GAAS,CAC9B2gB,GAAiB,YAAa3gB,EAAO,CAAE,SAAUwb,EAAK,QAAU,CAAA,EAAE,KAAKhL,GAAS,CAE5E,GAAI61B,GAAgB7qB,EAAMhL,CAAK,EAAG,MAAO,GAGzCgL,EAAK,SAAS,YAAa,CACvB,MAAOhL,EACP,MAAO,GACP,kBAAmB4O,GAAkB,KACzD,CAAiB,CACjB,CAAa,CACJ,GACM,CAACwnB,GAAWprB,EAAK,IAAI,SAC5BA,EAAK,IAAI,OAAO,QAAS,EACzBA,EAAK,IAAI,OAAS,KAE1B,EAKM+oB,GAAUjpB,GAAY,CACxB,qBAAsB,CAAC,CAAE,KAAAE,EAAM,MAAA/S,KAAY,CACvCq+B,GAAatrB,EAAM/S,CAAK,CAC3B,EACD,mBAAoB,CAAC,CAAE,KAAA+S,KAAW,CAC9BkrB,GAAWlrB,CAAI,CAClB,EACD,oBAAqB,CAAC,CAAE,KAAAA,KAAW,CAC/BurB,GAAYvrB,CAAI,CACnB,EACD,iBAAkB,CAAC,CAAE,KAAAA,EAAM,MAAA/S,KAAY,CACnCi+B,GAAWlrB,CAAI,EACfurB,GAAYvrB,CAAI,EAChBsrB,GAAatrB,EAAM/S,CAAK,EACL+S,EAAK,MAAM,cAAc,EAExCA,EAAK,QAAQ,QAAQ,SAAW,WAGhCA,EAAK,QAAQ,gBAAgB,eAAe,CAEnD,CACL,CAAC,EAEKA,GAAOrD,EAAW,CACpB,KAAM,OACN,KAAM,CAAC,CAAE,KAAAqD,KAAW,CACZA,EAAK,IAAI,UACTA,EAAK,IAAI,cAAgBA,EAAK,IAAI,QAAQ,aAEjD,EACD,OAAQyoB,GACR,MAAOK,GACP,QAAS,CAAC,CAAE,KAAA9oB,KAAW,CACfA,EAAK,IAAI,QACTA,EAAK,IAAI,OAAO,QAAS,EAEzBA,EAAK,IAAI,QACTA,EAAK,IAAI,OAAO,QAAS,EAE7BA,EAAK,QAAQ,oBAAoB,YAAawoB,EAAO,EACrDxoB,EAAK,QAAQ,oBAAoB,eAAgBwoB,EAAO,CAC3D,EACD,OAAQ,CACJ,OAAQ,CAAC,QAAQ,CACpB,CACL,CAAC,EAGKgD,GAAY,CAACC,EAAiB,KAAO,CAEvC,IAAIC,EAAkB,KAGtB,MAAM7lB,EAAiBC,GAAY,EAG7BxI,EAAQ7I,GAEV4O,GAAmBwC,CAAc,EAGjC,CAACnR,GAASiP,GAAoBkC,CAAc,CAAC,EAG7C,CAAClR,GAAS+O,GAAoBmC,CAAc,CAAC,CAChD,EAGDvI,EAAM,SAAS,cAAe,CAAE,QAASmuB,CAAc,CAAE,EAGzD,MAAME,EAAoB,IAAM,CACxB,SAAS,QACbruB,EAAM,SAAS,MAAM,CACxB,EACD,SAAS,iBAAiB,mBAAoBquB,CAAiB,EAG/D,IAAIC,EAAkB,KAClBC,EAAa,GACbC,EAAyB,GACzBC,EAAqB,KACrBC,EAAqB,KACzB,MAAMC,EAAgB,IAAM,CACnBJ,IACDA,EAAa,IAEjB,aAAaD,CAAe,EAC5BA,EAAkB,WAAW,IAAM,CAC/BC,EAAa,GACbE,EAAqB,KACrBC,EAAqB,KACjBF,IACAA,EAAyB,GACzBxuB,EAAM,SAAS,iBAAiB,EAEvC,EAAE,GAAG,CACT,EACD,OAAO,iBAAiB,SAAU2uB,CAAa,EAG/C,MAAMl1B,EAAOiJ,GAAK1C,EAAO,CAAE,GAAIuG,GAAW,EAAI,EAK9C,IAAIrG,EAAY,GACZ0uB,EAAW,GAEf,MAAMC,EAAe,CAOjB,MAAO,IAAM,CAGLN,IACAG,EAAqB,OAAO,WACvBD,IACDA,EAAqBC,GAGrB,CAACF,GAA0BE,IAAuBD,IAClDzuB,EAAM,SAAS,kBAAkB,EACjCwuB,EAAyB,KAI7BI,GAAY1uB,IAEZA,EAAYzG,EAAK,QAAQ,eAAiB,MAI1C,CAAAyG,IAGJzG,EAAK,MAAO,EAGZm1B,EAAWn1B,EAAK,KAAK,QAAQ,OAChC,EAMD,OAAQ+B,GAAM,CAEV,MAAMnE,EAAU2I,EACX,mBAAkB,EAGlB,OAAO5K,GAAU,CAAC,QAAQ,KAAKA,EAAO,IAAI,CAAC,EAG5C8K,GAAa,CAAC7I,EAAQ,SAG1By3B,EAAqBz3B,CAAO,EAG5B6I,EAAYzG,EAAK,OAAO+B,EAAInE,EAASm3B,CAAsB,EAG3DrnB,GAAoBnH,EAAM,MAAM,WAAW,CAAC,EAGxCE,GACAF,EAAM,qBAAsB,EAEnC,CACJ,EAKK+uB,EAAcjpC,GAAQ8R,GAAQ,CAEhC,MAAMlL,EAAQ,CACV,KAAM5G,CACT,EAGD,GAAI,CAAC8R,EACD,OAAOlL,EAiBX,GAbIkL,EAAK,eAAe,OAAO,IAC3BlL,EAAM,MAAQkL,EAAK,MAAQ,CAAE,GAAGA,EAAK,KAAK,EAAK,MAG/CA,EAAK,SACLlL,EAAM,OAAS,CAAE,GAAGkL,EAAK,MAAQ,GAGjCA,EAAK,OACLlL,EAAM,OAASkL,EAAK,MAIpBA,EAAK,OACLlL,EAAM,KAAOkL,EAAK,eACXA,EAAK,MAAQA,EAAK,GAAI,CAC7B,MAAMjR,EAAOiR,EAAK,KAAOA,EAAK,KAAOoI,EAAM,MAAM,WAAYpI,EAAK,EAAE,EACpElL,EAAM,KAAO/F,EAAOugB,GAAcvgB,CAAI,EAAI,IACtD,CAGQ,OAAIiR,EAAK,QACLlL,EAAM,MAAQkL,EAAK,MAAM,IAAIsP,EAAa,GAI1C,WAAW,KAAKphB,CAAI,IACpB4G,EAAM,SAAWkL,EAAK,UAItBA,EAAK,eAAe,QAAQ,GAAKA,EAAK,eAAe,QAAQ,IAC7DlL,EAAM,OAASkL,EAAK,OACpBlL,EAAM,OAASkL,EAAK,QAGjBlL,CACV,EAEKsiC,EAAc,CAChB,YAAaD,EAAY,SAAS,EAElC,SAAUA,EAAY,MAAM,EAE5B,oBAAqBA,EAAY,SAAS,EAE1C,cAAeA,EAAY,UAAU,EACrC,oBAAqBA,EAAY,cAAc,EAC/C,8BAA+BA,EAAY,iBAAiB,EAC5D,cAAeA,EAAY,SAAS,EAEpC,uBAAwB,CAACA,EAAY,OAAO,EAAGA,EAAY,SAAS,CAAC,EAErE,0BAA2B,CAACA,EAAY,OAAO,EAAGA,EAAY,SAAS,CAAC,EAExE,4BAA6B,CAACA,EAAY,OAAO,EAAGA,EAAY,YAAY,CAAC,EAE7E,mBAAoBA,EAAY,aAAa,EAE7C,0BAA2BA,EAAY,kBAAkB,EACzD,iCAAkCA,EAAY,qBAAqB,EACnE,0BAA2BA,EAAY,kBAAkB,EACzD,6BAA8BA,EAAY,aAAa,EACvD,iCAAkCA,EAAY,cAAc,EAC5D,2BAA4BA,EAAY,mBAAmB,EAE3D,gCAAiC,CAACA,EAAY,OAAO,EAAGA,EAAY,aAAa,CAAC,EAElF,gBAAiBA,EAAY,YAAY,EAEzC,iBAAkBA,EAAY,aAAa,EAE3C,kBAAmBA,EAAY,cAAc,EAE7C,kBAAmBA,EAAY,cAAc,CAChD,EAEKE,EAAcviC,GAAS,CAEzB,MAAMwiC,EAAS,CAAE,KAAMC,EAAS,GAAGziC,CAAO,EAC1C,OAAOwiC,EAAO,KACdz1B,EAAK,QAAQ,cACT,IAAI,YAAY,YAAY/M,EAAM,IAAI,GAAI,CAEtC,OAAAwiC,EAGA,QAAS,GACT,WAAY,GACZ,SAAU,EACb,CAAA,CACJ,EAGD,MAAM3/B,EAAS,CAAE,EAGb7C,EAAM,eAAe,OAAO,GAC5B6C,EAAO,KAAK7C,EAAM,KAAK,EAIvBA,EAAM,eAAe,MAAM,GAC3B6C,EAAO,KAAK7C,EAAM,IAAI,EAI1B,MAAM0iC,EAAW,CAAC,OAAQ,QAAS,MAAM,EACzC,OAAO,KAAK1iC,CAAK,EACZ,OAAO9C,GAAO,CAACwlC,EAAS,SAASxlC,CAAG,CAAC,EACrC,QAAQA,GAAO2F,EAAO,KAAK7C,EAAM9C,CAAG,CAAC,CAAC,EAG3CulC,EAAQ,KAAKziC,EAAM,KAAM,GAAG6C,CAAM,EAGlC,MAAMgkB,EAAUvT,EAAM,MAAM,SAAStT,EAAM,KAAK,YAAa,CAAA,EAAE,EAC3D6mB,GACAA,EAAQ,GAAGhkB,CAAM,CAExB,EAEKu/B,EAAuBz3B,GAAW,CAC/BA,EAAQ,QACbA,EACK,OAAOjC,GAAU45B,EAAY55B,EAAO,IAAI,CAAC,EACzC,QAAQA,GAAU,CACf,MAAMqN,EAASusB,EAAY55B,EAAO,IAAI,GACrC,MAAM,QAAQqN,CAAM,EAAIA,EAAS,CAACA,CAAM,GAAG,QAAQwZ,GAAS,CAErD7mB,EAAO,OAAS,gBAChB65B,EAAYhT,EAAM7mB,EAAO,IAAI,CAAC,EAE9B,WAAW,IAAM,CACb65B,EAAYhT,EAAM7mB,EAAO,IAAI,CAAC,CACjC,EAAE,CAAC,CAE5B,CAAiB,CACjB,CAAa,CACR,EAKKqT,EAAa5C,GAAW7F,EAAM,SAAS,cAAe,CAAE,QAAA6F,EAAS,EAEjE0M,EAAUxa,GAASiI,EAAM,MAAM,kBAAmBjI,CAAK,EAEvDs3B,EAAct3B,GAChB,IAAI,QAAQ,CAACrU,EAASC,IAAW,CAC7Bqc,EAAM,SAAS,uBAAwB,CACnC,MAAAjI,EACA,QAASpR,GAAQ,CACbjD,EAAQiD,CAAI,CACf,EACD,QAASzB,GAAS,CACdvB,EAAOuB,CAAK,CACf,CACjB,CAAa,CACb,CAAS,EAECoqC,EAAU,CAAC3lC,EAAQkc,EAAU,CAAE,IACjC,IAAI,QAAQ,CAACniB,EAASC,IAAW,CAC7B4rC,EAAS,CAAC,CAAE,OAAA5lC,EAAQ,QAAAkc,CAAO,CAAE,EAAG,CAAE,MAAOA,EAAQ,KAAO,CAAA,EACnD,KAAK3e,GAASxD,EAAQwD,GAASA,EAAM,CAAC,CAAC,CAAC,EACxC,MAAMvD,CAAM,CAC7B,CAAS,EAEC6rC,EAAiB1lC,GAAOA,EAAI,MAAQA,EAAI,GAExC2M,EAAa,CAACsB,EAAO8N,KAEnB,OAAO9N,GAAU,UAAY,CAACy3B,EAAez3B,CAAK,GAAK,CAAC8N,IACxDA,EAAU9N,EACVA,EAAQ,QAIZiI,EAAM,SAAS,cAAe,CAAE,GAAG6F,EAAS,MAAA9N,CAAK,CAAE,EAG5CiI,EAAM,MAAM,kBAAmBjI,CAAK,IAAM,MAG/Cw3B,EAAW,IAAIjiC,IACjB,IAAI,QAAQ,CAAC5J,EAASC,IAAW,CAC7B,MAAM8rC,EAAU,CAAE,EACZ5pB,EAAU,CAAE,EAGlB,GAAI7C,GAAQ1V,EAAK,CAAC,CAAC,EACfmiC,EAAQ,KAAK,MAAMA,EAASniC,EAAK,CAAC,CAAC,EACnC,OAAO,OAAOuY,EAASvY,EAAK,CAAC,GAAK,CAAA,CAAE,MACjC,CAEH,MAAMoiC,EAAepiC,EAAKA,EAAK,OAAS,CAAC,EACrC,OAAOoiC,GAAiB,UAAY,EAAEA,aAAwB,OAC9D,OAAO,OAAO7pB,EAASvY,EAAK,IAAG,CAAE,EAIrCmiC,EAAQ,KAAK,GAAGniC,CAAI,CACpC,CAEY0S,EAAM,SAAS,YAAa,CACxB,MAAOyvB,EACP,MAAO5pB,EAAQ,MACf,kBAAmBS,GAAkB,IACrC,QAAS5iB,EACT,QAASC,CACzB,CAAa,CACb,CAAS,EAECgiC,EAAW,IAAM3lB,EAAM,MAAM,kBAAkB,EAE/C2vB,EAAc53B,GAChB,IAAI,QAAQ,CAACrU,EAASC,IAAW,CAC7Bqc,EAAM,SAAS,0BAA2B,CACtC,MAAAjI,EACA,QAASpR,GAAQ,CACbjD,EAAQiD,CAAI,CACf,EACD,QAASzB,GAAS,CACdvB,EAAOuB,CAAK,CACf,CACjB,CAAa,CACb,CAAS,EAEC0qC,EAAe,IAAItiC,IAAS,CAC9B,MAAM8J,EAAU,MAAM,QAAQ9J,EAAK,CAAC,CAAC,EAAIA,EAAK,CAAC,EAAIA,EAC7CpG,EAAQkQ,EAAQ,OAASA,EAAUuuB,EAAU,EACnD,OAAO,QAAQ,IAAIz+B,EAAM,IAAImoC,CAAW,CAAC,CAC5C,EAEKQ,EAAe,IAAIviC,IAAS,CAC9B,MAAM8J,EAAU,MAAM,QAAQ9J,EAAK,CAAC,CAAC,EAAIA,EAAK,CAAC,EAAIA,EACnD,GAAI,CAAC8J,EAAQ,OAAQ,CACjB,MAAMrQ,EAAQ4+B,EAAQ,EAAG,OACrBh/B,GACI,EAAEA,EAAK,SAAWygB,EAAW,MAAQzgB,EAAK,SAAW0gB,GAAW,QAChE1gB,EAAK,SAAWygB,EAAW,YAC3BzgB,EAAK,SAAWygB,EAAW,qBAC3BzgB,EAAK,SAAWygB,EAAW,uBAClC,EACD,OAAO,QAAQ,IAAIrgB,EAAM,IAAI4oC,CAAW,CAAC,CACrD,CACQ,OAAO,QAAQ,IAAIv4B,EAAQ,IAAIu4B,CAAW,CAAC,CAC9C,EAEKG,EAAc,IAAIxiC,IAAS,CAC7B,MAAM8J,EAAU,MAAM,QAAQ9J,EAAK,CAAC,CAAC,EAAIA,EAAK,CAAC,EAAIA,EAEnD,IAAIuY,EACA,OAAOzO,EAAQA,EAAQ,OAAS,CAAC,GAAM,SACvCyO,EAAUzO,EAAQ,IAAK,EAChB,MAAM,QAAQ9J,EAAK,CAAC,CAAC,IAC5BuY,EAAUvY,EAAK,CAAC,GAGpB,MAAMvG,EAAQ4+B,EAAU,EAExB,OAAKvuB,EAAQ,OAGSA,EACjB,IAAIW,GAAU8C,GAAS9C,CAAK,EAAKhR,EAAMgR,CAAK,EAAIhR,EAAMgR,CAAK,EAAE,GAAK,KAAQA,CAAM,EAChF,OAAOA,GAASA,CAAK,EAEL,IAAIg4B,GAAKt5B,EAAWs5B,EAAGlqB,CAAO,CAAC,EAPxB,QAAQ,IAAI9e,EAAM,IAAIrB,GAAQ+Q,EAAW/Q,EAAMmgB,CAAO,CAAC,CAAC,CAQvF,EAEKspB,EAAU,CAEZ,GAAGxoB,GAAI,EAGP,GAAGkoB,EAGH,GAAG1oB,GAAgBnG,EAAOuI,CAAc,EAMxC,WAAAE,EAOA,QAAA6mB,EAOA,SAAAC,EAMA,QAAAhd,EAMA,YAAAod,EAMA,YAAAN,EAMA,WAAA54B,EAKA,SAAU,CAACsB,EAAOuB,IAAU0G,EAAM,SAAS,YAAa,CAAE,MAAAjI,EAAO,MAAAuB,EAAO,EAKxE,SAAAqsB,EAKA,aAAAkK,EAKA,YAAAC,EAKA,aAAAF,EAKA,KAAMvb,GAAWrU,EAAM,SAAS,OAAQ,CAAE,QAAAqU,EAAS,EAKnD,OAAQ,IAAM,CAEV,IAAIoO,EAAQhpB,EAAK,QAAQ,cAAc,kBAAkB,EACrDgpB,GACAA,EAAM,MAAO,CAEpB,EAKD,QAAS,IAAM,CAEX0M,EAAQ,KAAK,UAAW11B,EAAK,OAAO,EAIpCuG,EAAM,SAAS,WAAW,EAG1BvG,EAAK,SAAU,EAGf,OAAO,oBAAoB,SAAUk1B,CAAa,EAGlD,SAAS,oBAAoB,mBAAoBN,CAAiB,EAGlEruB,EAAM,SAAS,aAAa,CAC/B,EAKD,aAAc9G,GAAW0J,GAAanJ,EAAK,QAASP,CAAO,EAK3D,YAAaA,GAAW6J,GAAYtJ,EAAK,QAASP,CAAO,EAKzD,SAAUA,GAAWA,EAAQ,YAAYO,EAAK,OAAO,EAKrD,eAAgBP,GAAW,CAEvB0J,GAAanJ,EAAK,QAASP,CAAO,EAGlCA,EAAQ,WAAW,YAAYA,CAAO,EAGtCk1B,EAAkBl1B,CACrB,EAKD,eAAgB,IAAM,CACbk1B,IAKLrrB,GAAYqrB,EAAiB30B,EAAK,OAAO,EAGzCA,EAAK,QAAQ,WAAW,YAAYA,EAAK,OAAO,EAGhD20B,EAAkB,KACrB,EAMD,aAAcl1B,GAAWO,EAAK,UAAYP,GAAWk1B,IAAoBl1B,EAKzE,QAAS,CACL,IAAK,IAAMO,EAAK,OACnB,EAKD,OAAQ,CACJ,IAAK,IAAMuG,EAAM,MAAM,YAAY,CACtC,CACJ,EAGD,OAAAA,EAAM,SAAS,UAAU,EAGlBxH,GAAa22B,CAAO,CAC/B,EAEMa,GAAkB,CAACC,EAAgB,KAAO,CAE5C,MAAM1nB,EAAiB,CAAE,EACzB,OAAAjQ,EAAMkQ,GAAU,EAAI,CAAC5e,EAAKnG,IAAU,CAChC8kB,EAAe3e,CAAG,EAAInG,EAAM,CAAC,CACrC,CAAK,EAGWyqC,GAAU,CAElB,GAAG3lB,EAGH,GAAG0nB,CACX,CAAK,CAIL,EAEMC,GAAuBhsB,GAAUA,EAAO,OAAO,CAAC,EAAE,cAAgBA,EAAO,MAAM,CAAC,EAEhFisB,GAA8BC,GAAiBvF,GAASuF,EAAc,QAAQ,SAAU,EAAE,CAAC,EAE3FC,GAAY,CAACjnC,EAAQknC,IAAgB,CAEvCh4B,EAAMg4B,EAAa,CAACC,EAAUC,IAAY,CACtCl4B,EAAMlP,EAAQ,CAACgP,EAAU3U,IAAU,CAE/B,MAAMgtC,EAAiB,IAAI,OAAOF,CAAQ,EAc1C,GARI,CAHYE,EAAe,KAAKr4B,CAAQ,IAQ5C,OAAOhP,EAAOgP,CAAQ,EAGlBo4B,IAAY,IACZ,OAIJ,GAAIhtB,GAASgtB,CAAO,EAAG,CACnBpnC,EAAOonC,CAAO,EAAI/sC,EAClB,MAChB,CAGY,MAAMuiC,EAAQwK,EAAQ,MAClBlqC,GAASkqC,CAAO,GAAK,CAACpnC,EAAO48B,CAAK,IAClC58B,EAAO48B,CAAK,EAAI,CAAE,GAGtB58B,EAAO48B,CAAK,EAAEkK,GAAqB93B,EAAS,QAAQq4B,EAAgB,EAAE,CAAC,CAAC,EAAIhtC,CACxF,CAAS,EAGG+sC,EAAQ,SACRH,GAAUjnC,EAAOonC,EAAQ,KAAK,EAAGA,EAAQ,OAAO,CAE5D,CAAK,CACL,EAEME,GAAwB,CAACh4B,EAAMi4B,EAAmB,KAAO,CAE3D,MAAM13B,EAAa,CAAE,EACrBX,EAAMI,EAAK,WAAYY,GAAS,CAC5BL,EAAW,KAAKP,EAAK,WAAWY,CAAK,CAAC,CAC9C,CAAK,EAED,MAAMs3B,EAAS33B,EACV,OAAO43B,GAAaA,EAAU,IAAI,EAClC,OAAO,CAAC/mC,EAAK+mC,IAAc,CACxB,MAAMptC,EAAQgV,EAAKC,EAAMm4B,EAAU,IAAI,EAEvC,OAAA/mC,EAAIqmC,GAA4BU,EAAU,IAAI,CAAC,EAC3CptC,IAAUotC,EAAU,KAAO,GAAOptC,EAC/BqG,CACV,EAAE,EAAE,EAGT,OAAAumC,GAAUO,EAAQD,CAAgB,EAE3BC,CACX,EAEME,GAAqB,CAAC53B,EAAS2M,EAAU,KAAO,CAElD,MAAM8qB,EAAmB,CAErB,UAAW,YACX,aAAc,gBACd,YAAa,gBACb,oBAAqB,uBAGrB,UAAW,CACP,MAAO,SACP,QAAS,CACL,WAAY,CACR,MAAO,SACV,EACD,UAAW,CACP,MAAO,QACV,EACD,SAAU,CACN,MAAO,OACV,EACD,WAAY,CACR,MAAO,SACV,EACD,QAAS,CACL,MAAO,MACV,CACJ,CACJ,EAGD,SAAU,GACV,UAAW,EACd,EAGDxoB,GAAa,8BAA+BwoB,CAAgB,EAG5D,MAAMI,EAAgB,CAClB,GAAGlrB,CACN,EAEKmrB,EAAmBN,GACrBx3B,EAAQ,WAAa,WAAaA,EAAQ,cAAc,kBAAkB,EAAIA,EAC9Ey3B,CACH,EAGD,OAAO,KAAKK,CAAgB,EAAE,QAAQpnC,GAAO,CACrCtD,GAAS0qC,EAAiBpnC,CAAG,CAAC,GACzBtD,GAASyqC,EAAcnnC,CAAG,CAAC,IAC5BmnC,EAAcnnC,CAAG,EAAI,CAAE,GAE3B,OAAO,OAAOmnC,EAAcnnC,CAAG,EAAGonC,EAAiBpnC,CAAG,CAAC,GAEvDmnC,EAAcnnC,CAAG,EAAIonC,EAAiBpnC,CAAG,CAErD,CAAK,EAIDmnC,EAAc,OAASlrB,EAAQ,OAAS,CAAE,GAAE,OACxC,MAAM,KAAK3M,EAAQ,iBAAiB,wBAAwB,CAAC,EAAE,IAAIupB,IAAU,CACzE,OAAQA,EAAM,MACd,QAAS,CACL,KAAMA,EAAM,QAAQ,IACvB,CACb,EAAU,CACL,EAGD,MAAMwO,EAAMjB,GAAgBe,CAAa,EAGzC,OAAI73B,EAAQ,OACR,MAAM,KAAKA,EAAQ,KAAK,EAAE,QAAQxT,GAAQ,CACtCurC,EAAI,QAAQvrC,CAAI,CAC5B,CAAS,EAILurC,EAAI,eAAe/3B,CAAO,EAGnB+3B,CACX,EAGMC,GAAc,IAAI5jC,IACpB4J,GAAO5J,EAAK,CAAC,CAAC,EAAIwjC,GAAmB,GAAGxjC,CAAI,EAAI0iC,GAAgB,GAAG1iC,CAAI,EAErE6jC,GAAkB,CAAC,OAAQ,QAAS,QAAQ,EAE5CC,GAAeH,GAAO,CACxB,MAAM/4B,EAAM,CAAE,EAEd,OAAA6O,GAA6BkqB,EAAK/4B,EAAKi5B,EAAe,EAE/Cj5B,CACX,EAOMm5B,GAAkB,CAACntB,EAAQotB,IAC7BptB,EAAO,QAAQ,qBAAsB,CAACqtB,EAAOvL,IAAUsL,EAAatL,CAAK,CAAC,EAExEwL,GAAehkC,GAAM,CACvB,MAAMikC,EAAa,IAAI,KAAK,CAAC,IAAKjkC,EAAG,SAAQ,EAAI,KAAK,EAAG,CACrD,KAAM,wBACd,CAAK,EACKkkC,EAAY,IAAI,gBAAgBD,CAAU,EAC1CE,EAAS,IAAI,OAAOD,CAAS,EAEnC,MAAO,CACH,SAAU,CAACvH,EAAS5xB,IAAO,CAAE,EAC7B,KAAM,CAAC4xB,EAAS5xB,EAAIq5B,IAAiB,CACjC,MAAM1vB,EAAKqE,GAAa,EAExBorB,EAAO,UAAY7tC,GAAK,CAChBA,EAAE,KAAK,KAAOoe,GACd3J,EAAGzU,EAAE,KAAK,OAAO,CAExB,EAED6tC,EAAO,YACH,CACI,GAAAzvB,EACA,QAAAioB,CACH,EACDyH,CACH,CACJ,EACD,UAAW,IAAM,CACbD,EAAO,UAAW,EAClB,IAAI,gBAAgBD,CAAS,CAChC,CACJ,CACL,EAEMG,GAAYnnB,GACd,IAAI,QAAQ,CAAChnB,EAASC,IAAW,CAC7B,MAAMmuC,EAAM,IAAI,MAChBA,EAAI,OAAS,IAAM,CACfpuC,EAAQouC,CAAG,CACd,EACDA,EAAI,QAAUhuC,GAAK,CACfH,EAAOG,CAAC,CACX,EACDguC,EAAI,IAAMpnB,CAClB,CAAK,EAECqnB,GAAa,CAACrsC,EAAMI,IAAS,CAC/B,MAAMksC,EAActsC,EAAK,MAAM,EAAGA,EAAK,KAAMA,EAAK,IAAI,EACtD,OAAAssC,EAAY,iBAAmBtsC,EAAK,iBACpCssC,EAAY,KAAOlsC,EACZksC,CACX,EAEMC,GAAWvsC,GAAQqsC,GAAWrsC,EAAMA,EAAK,IAAI,EAG7CwsC,GAAoB,CAAE,EAGtBC,GAAkBC,GAAU,CAE9B,GAAIF,GAAkB,SAASE,CAAM,EACjC,OAIJF,GAAkB,KAAKE,CAAM,EAG7B,MAAMC,EAAgBD,EAAO,CACzB,UAAAhqB,GACA,MAAO,CACH,KAAAT,EACA,MAAArP,EACA,SAAAkL,GACA,OAAAqO,GACA,kBAAA0G,GACA,gBAAA8Y,GACA,yBAAA1mB,GACA,4BAAAgH,GACA,oBAAA4T,GACA,gBAAAra,GACA,mBAAAT,GACA,YAAAjI,GACA,aAAAgvB,GACA,WAAAnyB,EACA,cAAA6H,GACZ,UAAY2qB,GACA,SAAAI,GACA,WAAAF,GACA,WAAAxmB,GACA,iBAAA1D,GACA,KAAArR,EACA,gCAAAmS,EACH,EACD,MAAO,CACH,iBAAA2P,EACH,CACT,CAAK,EAGDjQ,GAAqBgqB,EAAc,OAAO,CAC9C,EAGMC,GAAc,IAAM,OAAO,UAAU,SAAS,KAAK,OAAO,SAAS,IAAM,qBACzEC,GAAc,IAAM,YAAa,OACjCC,GAAe,IAAM,UAAW,KAAK,UACrCC,GAAqB,IAAM,QAAS,QAAU,oBAAqB,OAAO,IAC1EC,GAAgB,IAAM,oBAAqB,SAC3CC,GAAY,IAAM,gBAAiB,OACnCC,GAAiB,IAAM,aAAe,OAAO,KAAO,CAAE,GACtDC,GAAS,IAAM,eAAe,KAAK,OAAO,UAAU,SAAS,EAE7DC,IAAa,IAAM,CAErB,MAAMC,EAEFn5B,GAAW,GAEX,CAAC04B,GAAa,GAEdI,GAAe,GACfH,GAAa,GACbC,GAAc,GACdC,GAAoB,GACpBE,GAAW,IAEVC,GAAc,GAAMC,MAEzB,MAAO,IAAME,CACjB,GAAI,EAKE7gC,GAAQ,CAEV,KAAM,CAAE,CACZ,EAGMpM,GAAO,WAKP0H,GAAK,IAAM,CAAE,EAInB,IAAIwlC,GAAc,CAAE,EAChBC,GAAWzlC,GACXiS,GAAUjS,GACV0lC,GAAQ1lC,GACR2lC,GAAO3lC,GACP4lC,GAAiB5lC,GACjB6lC,GAAe7lC,GACf8lC,GAAe9lC,GAGnB,GAAIslC,KAAa,CAEbjxB,GACI,IAAM,CACF3P,GAAM,KAAK,QAAQ++B,GAAOA,EAAI,MAAK,CAAE,CACxC,EACDz1B,GAAM,CACFtJ,GAAM,KAAK,QAAQ++B,GAAOA,EAAI,OAAOz1B,CAAE,CAAC,CACpD,CACK,EAGD,MAAMrJ,EAAW,IAAM,CAEnB,SAAS,cACL,IAAI,YAAY,kBAAmB,CAC/B,OAAQ,CACJ,UAAA2gC,GACA,OAAQG,GACR,QAAAxzB,GACA,MAAAyzB,GACA,KAAAC,GACA,eAAAC,GACA,WAAYE,EACf,CACJ,CAAA,CACJ,EAGD,SAAS,oBAAoB,mBAAoBnhC,CAAQ,CAC5D,EAEG,SAAS,aAAe,UAExB,WAAW,IAAMA,EAAU,EAAE,CAAC,EAE9B,SAAS,iBAAiB,mBAAoBA,CAAQ,EAI1D,MAAMohC,EAAoB,IACtBj7B,EAAMkQ,GAAU,EAAI,CAAC5e,EAAKnG,IAAU,CAChCuvC,GAAYppC,CAAG,EAAInG,EAAM,CAAC,CACtC,CAAS,EAMLuvC,GAAc,CAAE,EAChBO,EAAmB,EAGnBN,GAAW,IAAI3lC,IAAS,CACpB,MAAM2jC,EAAMC,GAAY,GAAG5jC,CAAI,EAC/B,OAAA2jC,EAAI,GAAG,UAAWxxB,EAAO,EACzBvN,GAAM,KAAK,KAAK++B,CAAG,EACZG,GAAaH,CAAG,CAC1B,EAGDxxB,GAAU+zB,GAAQ,CAEd,MAAMC,EAAgBvhC,GAAM,KAAK,UAAU++B,GAAOA,EAAI,aAAauC,CAAI,CAAC,EACxE,OAAIC,GAAiB,GAELvhC,GAAM,KAAK,OAAOuhC,EAAe,CAAC,EAAE,CAAC,EAG7C,eAAgB,EAEb,IAGJ,EACV,EAGDP,GAAQQ,GAEiB,MAAM,KAAKA,EAAQ,iBAAiB,IAAI5tC,EAAI,EAAE,CAAC,EAGtC,OAC1B6tC,GAAW,CAACzhC,GAAM,KAAK,KAAK++B,GAAOA,EAAI,aAAa0C,CAAO,CAAC,CAC/D,EAGe,IAAIH,GAAQP,GAASO,CAAI,CAAC,EAI9CL,GAAOK,GAAQ,CACX,MAAMvC,EAAM/+B,GAAM,KAAK,KAAK++B,GAAOA,EAAI,aAAauC,CAAI,CAAC,EACzD,OAAKvC,EAGEG,GAAaH,CAAG,EAFZ,IAGd,EAGDmC,GAAiB,IAAIQ,IAAY,CAE7BA,EAAQ,QAAQzB,EAAe,EAG/BoB,EAAmB,CACtB,EAEDF,GAAe,IAAM,CACjB,MAAMv/B,EAAO,CAAE,EACf,OAAAwE,EAAMkQ,GAAU,EAAI,CAAC5e,EAAKnG,IAAU,CAChCqQ,EAAKlK,CAAG,EAAInG,EAAM,CAAC,CAC/B,CAAS,EACMqQ,CACV,EAEDw/B,GAAex/B,IACPxN,GAASwN,CAAI,IAEb5B,GAAM,KAAK,QAAQ++B,GAAO,CACtBA,EAAI,WAAWn9B,CAAI,CACnC,CAAa,EAGD2U,GAAW3U,CAAI,GAIZu/B,GAAc,EAE7B,CChgTA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,MAAMN,GAAcD,GAAW,EAGzBe,GAAkB,CACtB,aACA,KACA,MACA,SACA,WACA,cACA,eACA,eACA,iBACA,iBACA,SACF,EAGO,MAAMC,WAAiBjkC,GAAM,SAAU,CAC5C,YAAYF,EAAO,CACjB,MAAMA,CAAK,EACX,KAAK,eAAiB,EAC1B,CAGE,mBAAoB,CAMlB,GAJA,KAAK,OAAS,KAAK,SAAS,cAAc,oBAAoB,EAC9D,KAAK,YAAc,KAAK,OAAO,UAAW,EAGtC,CAACojC,GAAa,OAElB,MAAMltB,EAAU,OAAO,OAAO,CAAA,EAAI,KAAK,KAAK,EAG5C,GAAIA,EAAQ,cAAe,CACzB,MAAMtN,EAAKsN,EAAQ,cACnBA,EAAQ,cAAiB3e,GAAU,CACjC,KAAK,eAAiB,GACtBqR,EAAGrR,CAAK,CACT,CACP,CAGI,KAAK,MAAQsY,GAAO,KAAK,OAAQqG,CAAO,EAGxC,OAAO,KAAK,KAAK,KAAK,EACnB,OAAQjc,GAAQ,CAACiqC,GAAgB,SAASjqC,CAAG,CAAC,EAC9C,QAASA,GAAQ,CAChB,KAAKA,CAAG,EAAI,KAAK,MAAMA,CAAG,CAClC,CAAO,CACP,CAGE,sBAAuB,CAErB,GAAI,CAAC,KAAK,MAAO,OAKjB,MAAMmqC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,OAAO,KAAK,MAAM,OAAO,EAC7BA,EAAI,GAAK,MAGT,KAAK,MAAM,QAAS,EACpB,KAAK,MAAQ,OAGb,KAAK,SAAS,OAAO,KAAK,WAAW,CACzC,CAEE,uBAAwB,CACtB,OAAK,KAAK,eAIH,IAHL,KAAK,eAAiB,GACf,GAGb,CAGE,oBAAqB,CAEnB,GAAI,CAAC,KAAK,MAAO,OAEjB,MAAMluB,EAAU,OAAO,OAAO,CAAA,EAAI,KAAK,KAAK,EAG5C,OAAOA,EAAQ,cAGf,KAAK,MAAM,WAAWA,CAAO,CACjC,CAGE,QAAS,CACP,KAAM,CACJ,GAAA3D,EACA,KAAApc,EACA,UAAAkT,EACA,cAAAy0B,EACA,SAAAuG,EACA,cAAAC,EACA,kBAAAC,CACD,EAAG,KAAK,MACT,OAAOn7B,EAAa,cAClB,MACA,CACE,UAAW,oBACX,IAAMG,GAAa,KAAK,SAAWA,CACpC,EACDH,EAAAA,cAAc,QAAS,CACrB,KAAM,OACN,KAAAjT,EACA,GAAAoc,EACA,OAAQgyB,EACR,SAAUzG,EACV,SAAUuG,EACV,UAAWh7B,EACX,QAASi7B,CACV,CAAA,CACF,CACL,CACA,CCjJA;AAAA;AAAA;AAAA;AAAA,GASA,MAAME,GAASzuC,GAAQ,eAAe,KAAKA,EAAK,IAAI,EAE9C0uC,GAAS,CACb,KAAM,MACN,KAAM,MACN,KAAM,WACN,KAAM,MACN,YAAa,IACb,QAAS,KACX,EAEMC,GAAY,CAAC56B,EAAMS,EAAQo6B,EAAS,KACxC76B,EAAK,UAAUS,EAAQo6B,CAAM,EACzBC,GAAY,CAAC96B,EAAMS,EAAQo6B,EAAS,KACxC76B,EAAK,UAAUS,EAAQo6B,CAAM,EAEzBE,GAAsB9uC,GAC1B,IAAI,QAAQ,CAAChC,EAASC,IAAW,CAC/B,MAAMkE,EAAS,IAAI,WACnBA,EAAO,OAAS,SAAS/D,EAAG,CAC1B,MAAM2V,EAAO,IAAI,SAAS3V,EAAE,OAAO,MAAM,EAGzC,GAAIuwC,GAAU56B,EAAM,CAAC,IAAM26B,GAAO,KAAM,CAEtC1wC,EAAQ,EAAE,EACV,MACR,CAEM,MAAM+wC,EAASh7B,EAAK,WACpB,IAAIS,EAAS,EAEb,KAAOA,EAASu6B,GAAQ,CACtB,MAAMC,EAASL,GAAU56B,EAAMS,CAAM,EAIrC,GAHAA,GAAU,EAGNw6B,IAAWN,GAAO,KAAM,CAC1B,GAAIG,GAAU96B,EAAOS,GAAU,CAAG,IAAKk6B,GAAO,KAE5C,MAIF,MAAME,EAASD,GAAU56B,EAAOS,GAAU,CAAC,IAAOk6B,GAAO,KACzDl6B,GAAUq6B,GAAU96B,EAAMS,EAAS,EAAGo6B,CAAM,EAE5C,MAAMK,EAAON,GAAU56B,EAAMS,EAAQo6B,CAAM,EAC3Cp6B,GAAU,EAEV,QAASnV,EAAI,EAAGA,EAAI4vC,EAAM5vC,IAExB,GACEsvC,GAAU56B,EAAMS,EAASnV,EAAI,GAAIuvC,CAAM,IAAMF,GAAO,YACpD,CACA1wC,EAAQ2wC,GAAU56B,EAAMS,EAASnV,EAAI,GAAK,EAAGuvC,CAAM,CAAC,EACpD,MACd,CAEA,KAAe,KAAKI,EAASN,GAAO,WAAaA,GAAO,QAE9C,MAEAl6B,GAAUm6B,GAAU56B,EAAMS,CAAM,EAE1C,CAGMxW,EAAQ,EAAE,CACX,EAGDmE,EAAO,kBAAkBnC,EAAK,MAAM,EAAG,GAAK,IAAI,CAAC,CACrD,CAAG,EAEGiU,GACJ,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,IACxDC,GAAY,IAAMD,GAGlBi7B,GACJ,yTAGF,IAAIC,GACJ,MAAMC,GAAYl7B,GAAS,EAAK,IAAI,MAAU,CAAE,EAChDk7B,GAAU,OAAS,IAChBD,GAAgBC,GAAU,aAAeA,GAAU,cACtDA,GAAU,IAAMF,GAEhB,MAAMG,GAAoC,IAAMF,GAK1CzC,GAAS,CAAC,CAAE,UAAAhqB,EAAW,MAAAN,KAAY,CACvC,KAAM,CAAE,KAAAH,EAAM,OAAAkK,CAAM,EAAK/J,EAGzB,OAAAM,EACE,gBACA,CAACzhB,EAAM,CAAE,MAAAoR,CAAO,IACd,IAAI,QAAQ,CAACrU,EAASC,IAAW,CAE/B,MAAM+B,EAAOiB,EAAK,KAGlB,GACE,CAACkrB,EAAOnsB,CAAI,GACZ,CAACyuC,GAAOzuC,CAAI,GACZ,CAACqS,EAAM,kCAAkC,GACzC,CAACg9B,GAAiC,EAGlC,OAAOrxC,EAAQiD,CAAI,EAIrB6tC,GAAoB9uC,CAAI,EAAE,KAAKsvC,GAAe,CAC5CruC,EAAK,YAAY,OAAQ,CAAE,YAAAquC,CAAW,CAAE,EACxCtxC,EAAQiD,CAAI,CACtB,CAAS,CACF,CAAA,CACJ,EAGM,CACL,QAAS,CAEP,0BAA2B,CAAC,GAAMghB,EAAK,OAAO,CACpD,CACG,CACH,EAGMstB,GACJ,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,IAC1DA,IACF,SAAS,cACP,IAAI,YAAY,wBAAyB,CAAE,OAAQ7C,EAAQ,CAAA,CAC5D,ECrJH;AAAA;AAAA;AAAA;AAAA,GASA,MAAM8C,GAAqBxvC,GAAQ,SAAS,KAAKA,EAAK,IAAI,EAEpDyvC,GAAiB,CAACzwC,EAAG0wC,IAAWC,GAAa3wC,EAAE,EAAI0wC,EAAQ1wC,EAAE,EAAI0wC,CAAM,EAEvEE,GAAY,CAACjnC,EAAGqT,IAAM2zB,GAAahnC,EAAE,EAAIqT,EAAE,EAAGrT,EAAE,EAAIqT,EAAE,CAAC,EAEvD6zB,GAAkB7wC,GAAK,CAC3B,MAAMa,EAAI,KAAK,KAAKb,EAAE,EAAIA,EAAE,EAAIA,EAAE,EAAIA,EAAE,CAAC,EACzC,OAAIa,IAAM,EACD,CACL,EAAG,EACH,EAAG,CACJ,EAEI8vC,GAAa3wC,EAAE,EAAIa,EAAGb,EAAE,EAAIa,CAAC,CACtC,EAEMiwC,GAAe,CAAC9wC,EAAG+wC,EAASzjB,IAAW,CAC3C,MAAM0jB,EAAM,KAAK,IAAID,CAAO,EACtBE,EAAM,KAAK,IAAIF,CAAO,EACtBrxC,EAAIixC,GAAa3wC,EAAE,EAAIstB,EAAO,EAAGttB,EAAE,EAAIstB,EAAO,CAAC,EACrD,OAAOqjB,GACLrjB,EAAO,EAAI0jB,EAAMtxC,EAAE,EAAIuxC,EAAMvxC,EAAE,EAC/B4tB,EAAO,EAAI2jB,EAAMvxC,EAAE,EAAIsxC,EAAMtxC,EAAE,CAChC,CACH,EAEMixC,GAAe,CAAC/d,EAAI,EAAGhzB,EAAI,KAAO,CAAE,EAAAgzB,EAAG,EAAAhzB,IAEvCsxC,GAAiB,CAACnyC,EAAOgpB,EAAMopB,EAAS,EAAGC,IAAS,CACxD,GAAI,OAAOryC,GAAU,SACnB,OAAO,WAAWA,CAAK,EAAIoyC,EAE7B,GAAI,OAAOpyC,GAAU,SACnB,OAAOA,GAASqyC,EAAOrpB,EAAKqpB,CAAI,EAAI,KAAK,IAAIrpB,EAAK,MAAOA,EAAK,MAAM,EAGxE,EAEMspB,GAAkB,CAACC,EAAQvpB,EAAMtS,IAAU,CAC/C,MAAM87B,EAAYD,EAAO,aAAeA,EAAO,WAAa,QACtDE,EAAOF,EAAO,iBAAmBA,EAAO,WAAa,cACrDG,EAASH,EAAO,aAAeA,EAAO,WAAa,cACnDI,EAAcR,GAClBI,EAAO,aAAeA,EAAO,UAC7BvpB,EACAtS,CACD,EACKk8B,EAAUL,EAAO,SAAW,QAC5BM,EAAWN,EAAO,UAAY,QAC9BO,EACJ,OAAON,GAAc,SACjB,GACAA,EAAU,IAAIvxC,GAAKkxC,GAAelxC,EAAG+nB,EAAMtS,CAAK,CAAC,EAAE,KAAK,GAAG,EAC3DgE,EAAU63B,EAAO,SAAW,EAClC,MAAO,CACL,iBAAkBK,EAClB,kBAAmBC,EACnB,eAAgBF,GAAe,EAC/B,mBAAoBG,EACpB,OAAAJ,EACA,KAAAD,EACA,QAAA/3B,CACD,CACH,EAEMvS,GAAYnI,GAASA,GAAS,KAE9B+yC,GAAgB,CAACh8B,EAAMiS,EAAMopB,EAAS,IAAM,CAChD,IAAIz7B,EACFw7B,GAAep7B,EAAK,EAAGiS,EAAMopB,EAAQ,OAAO,GAC5CD,GAAep7B,EAAK,KAAMiS,EAAMopB,EAAQ,OAAO,EAC7Cx7B,EACFu7B,GAAep7B,EAAK,EAAGiS,EAAMopB,EAAQ,QAAQ,GAC7CD,GAAep7B,EAAK,IAAKiS,EAAMopB,EAAQ,QAAQ,EAC7C/2B,EAAQ82B,GAAep7B,EAAK,MAAOiS,EAAMopB,EAAQ,OAAO,EACxD92B,EAAS62B,GAAep7B,EAAK,OAAQiS,EAAMopB,EAAQ,QAAQ,EAC3Dv7B,EAAQs7B,GAAep7B,EAAK,MAAOiS,EAAMopB,EAAQ,OAAO,EACxDt7B,EAASq7B,GAAep7B,EAAK,OAAQiS,EAAMopB,EAAQ,QAAQ,EAE/D,OAAKjqC,GAAUyO,CAAG,IACZzO,GAAUmT,CAAM,GAAKnT,GAAU2O,CAAM,EACvCF,EAAMoS,EAAK,OAAS1N,EAASxE,EAE7BF,EAAME,GAIL3O,GAAUwO,CAAI,IACbxO,GAAUkT,CAAK,GAAKlT,GAAU0O,CAAK,EACrCF,EAAOqS,EAAK,MAAQ3N,EAAQxE,EAE5BF,EAAOE,GAIN1O,GAAUkT,CAAK,IACdlT,GAAUwO,CAAI,GAAKxO,GAAU0O,CAAK,EACpCwE,EAAQ2N,EAAK,MAAQrS,EAAOE,EAE5BwE,EAAQ,GAIPlT,GAAUmT,CAAM,IACfnT,GAAUyO,CAAG,GAAKzO,GAAU2O,CAAM,EACpCwE,EAAS0N,EAAK,OAASpS,EAAME,EAE7BwE,EAAS,GAIN,CACL,EAAG3E,GAAQ,EACX,EAAGC,GAAO,EACV,MAAOyE,GAAS,EAChB,OAAQC,GAAU,CACnB,CACH,EAEM03B,GAAoBC,GACxBA,EACG,IAAI,CAAC1O,EAAO1uB,IAAU,GAAGA,IAAU,EAAI,IAAM,GAAG,IAAI0uB,EAAM,CAAC,IAAIA,EAAM,CAAC,EAAE,EACxE,KAAK,GAAG,EAEP2O,GAAgB,CAACz9B,EAAST,IAC9B,OAAO,KAAKA,CAAI,EAAE,QAAQ7O,GAAOsP,EAAQ,aAAatP,EAAK6O,EAAK7O,CAAG,CAAC,CAAC,EAEjE+O,GAAK,6BACLif,GAAM,CAAC9e,EAAKL,IAAS,CACzB,MAAMS,EAAU,SAAS,gBAAgBP,GAAIG,CAAG,EAChD,OAAIL,GACFk+B,GAAcz9B,EAAST,CAAI,EAEtBS,CACT,EAEMiG,GAAajG,GACjBy9B,GAAcz9B,EAAS,CACrB,GAAGA,EAAQ,KACX,GAAGA,EAAQ,MACf,CAAG,EAEG09B,GAAgB19B,GAAW,CAC/B,MAAM29B,EAAK39B,EAAQ,KAAK,EAAIA,EAAQ,KAAK,MAAQ,GAC3C49B,EAAK59B,EAAQ,KAAK,EAAIA,EAAQ,KAAK,OAAS,GAC5C69B,EAAK79B,EAAQ,KAAK,MAAQ,GAC1B89B,EAAK99B,EAAQ,KAAK,OAAS,GACjC,OAAOy9B,GAAcz9B,EAAS,CAC5B,GAAA29B,EACA,GAAAC,EACA,GAAAC,EACA,GAAAC,EACA,GAAG99B,EAAQ,MACf,CAAG,CACH,EAEM+9B,GAAkB,CACtB,QAAS,gBACT,MAAO,gBACT,EAEMC,GAAc,CAACh+B,EAAS88B,IAAW,CACvCW,GAAcz9B,EAAS,CACrB,GAAGA,EAAQ,KACX,GAAGA,EAAQ,OACX,oBAAqB+9B,GAAgBjB,EAAO,GAAG,GAAK,MACxD,CAAG,CACH,EAEMmB,GAAc,CAClB,KAAM,QACN,OAAQ,SACR,MAAO,KACT,EAEMC,GAAa,CAACl+B,EAAS88B,EAAQvpB,EAAMtS,IAAU,CACnD,MAAMk9B,EAAWzB,GAAeI,EAAO,SAAUvpB,EAAMtS,CAAK,EACtDm9B,EAAatB,EAAO,YAAc,aAClCuB,EAAavB,EAAO,YAAc,SAClCwB,EAAYL,GAAYnB,EAAO,SAAS,GAAK,QAEnDW,GAAcz9B,EAAS,CACrB,GAAGA,EAAQ,KACX,GAAGA,EAAQ,OACX,eAAgB,EAChB,cAAeq+B,EACf,YAAaF,EACb,cAAeC,EACf,cAAeE,CACnB,CAAG,EAGGt+B,EAAQ,OAAS88B,EAAO,OAC1B98B,EAAQ,KAAO88B,EAAO,KACtB98B,EAAQ,YAAc88B,EAAO,KAAK,OAASA,EAAO,KAAO,IAE7D,EAEMyB,GAAa,CAACv+B,EAAS88B,EAAQvpB,EAAMtS,IAAU,CACnDw8B,GAAcz9B,EAAS,CACrB,GAAGA,EAAQ,KACX,GAAGA,EAAQ,OACX,KAAM,MACV,CAAG,EAED,MAAMw+B,EAAOx+B,EAAQ,WAAW,CAAC,EAC3By+B,EAAQz+B,EAAQ,WAAW,CAAC,EAC5Bwe,EAAMxe,EAAQ,WAAW,CAAC,EAE1B8Y,EAAS9Y,EAAQ,KAEjBxP,EAAS,CACb,EAAGwP,EAAQ,KAAK,EAAIA,EAAQ,KAAK,MACjC,EAAGA,EAAQ,KAAK,EAAIA,EAAQ,KAAK,MAClC,EASD,GAPAy9B,GAAce,EAAM,CAClB,GAAI1lB,EAAO,EACX,GAAIA,EAAO,EACX,GAAItoB,EAAO,EACX,GAAIA,EAAO,CACf,CAAG,EAEG,CAACssC,EAAO,eAAgB,OAE5B2B,EAAM,MAAM,QAAU,OACtBjgB,EAAI,MAAM,QAAU,OAEpB,MAAMhzB,EAAI6wC,GAAgB,CACxB,EAAG7rC,EAAO,EAAIsoB,EAAO,EACrB,EAAGtoB,EAAO,EAAIsoB,EAAO,CACzB,CAAG,EAEKzsB,EAAIqwC,GAAe,IAAMnpB,EAAMtS,CAAK,EAE1C,GAAI67B,EAAO,eAAe,QAAQ,aAAa,IAAM,GAAI,CACvD,MAAM4B,EAA0BzC,GAAezwC,EAAGa,CAAC,EAC7CsyC,EAAmBvC,GAAUtjB,EAAQ4lB,CAAuB,EAC5DE,EAActC,GAAaxjB,EAAQ,EAAG6lB,CAAgB,EACtDE,EAAcvC,GAAaxjB,EAAQ,GAAI6lB,CAAgB,EAE7DlB,GAAcgB,EAAO,CACnB,MAAO,iBACP,EAAG,IAAIG,EAAY,CAAC,IAAIA,EAAY,CAAC,KAAK9lB,EAAO,CAAC,IAAIA,EAAO,CAAC,KAC5D+lB,EAAY,CACpB,IAAUA,EAAY,CAAC,EACvB,CAAK,CACL,CAEE,GAAI/B,EAAO,eAAe,QAAQ,WAAW,IAAM,GAAI,CACrD,MAAMgC,EAAwB7C,GAAezwC,EAAG,CAACa,CAAC,EAC5C0yC,EAAiB3C,GAAU5rC,EAAQsuC,CAAqB,EACxDE,EAAY1C,GAAa9rC,EAAQ,EAAGuuC,CAAc,EAClDE,EAAY3C,GAAa9rC,EAAQ,GAAIuuC,CAAc,EAEzDtB,GAAcjf,EAAK,CACjB,MAAO,iBACP,EAAG,IAAIwgB,EAAU,CAAC,IAAIA,EAAU,CAAC,KAAKxuC,EAAO,CAAC,IAAIA,EAAO,CAAC,KACxDyuC,EAAU,CAClB,IAAUA,EAAU,CAAC,EACrB,CAAK,CACL,CACA,EAEMC,GAAa,CAACl/B,EAAS88B,EAAQvpB,EAAMtS,IAAU,CACnDw8B,GAAcz9B,EAAS,CACrB,GAAGA,EAAQ,OACX,KAAM,OACN,EAAGu9B,GACDT,EAAO,OAAO,IAAIhO,IAAU,CAC1B,EAAG4N,GAAe5N,EAAM,EAAGvb,EAAMtS,EAAO,OAAO,EAC/C,EAAGy7B,GAAe5N,EAAM,EAAGvb,EAAMtS,EAAO,QAAQ,CACxD,EAAQ,CACR,CACA,CAAG,CACH,EAEMk+B,GAAc3/B,GAAQs9B,GAAUpe,GAAIlf,EAAM,CAAE,GAAIs9B,EAAO,GAAI,EAE3DsC,GAActC,GAAU,CAC5B,MAAMuC,EAAQ3gB,GAAI,QAAS,CACzB,GAAIoe,EAAO,GACX,iBAAkB,QAClB,kBAAmB,QACnB,QAAS,GACb,CAAG,EACD,OAAAuC,EAAM,OAAS,IAAM,CACnBA,EAAM,aAAa,UAAWvC,EAAO,SAAW,CAAC,CAClD,EACDuC,EAAM,eACJ,+BACA,aACAvC,EAAO,GACR,EACMuC,CACT,EAEMC,GAAaxC,GAAU,CAC3B,MAAMuC,EAAQ3gB,GAAI,IAAK,CACrB,GAAIoe,EAAO,GACX,iBAAkB,QAClB,kBAAmB,OACvB,CAAG,EAEK0B,EAAO9f,GAAI,MAAM,EACvB2gB,EAAM,YAAYb,CAAI,EAEtB,MAAMC,EAAQ/f,GAAI,MAAM,EACxB2gB,EAAM,YAAYZ,CAAK,EAEvB,MAAMjgB,EAAME,GAAI,MAAM,EACtB,OAAA2gB,EAAM,YAAY7gB,CAAG,EAEd6gB,CACT,EAEME,GAAqB,CACzB,MAAOH,GACP,KAAMD,GAAY,MAAM,EACxB,QAASA,GAAY,SAAS,EAC9B,KAAMA,GAAY,MAAM,EACxB,KAAMA,GAAY,MAAM,EACxB,KAAMG,EACR,EAEME,GAAqB,CACzB,KAAMv5B,GACN,QAASy3B,GACT,MAAOM,GACP,KAAME,GACN,KAAMgB,GACN,KAAMX,EACR,EAEMkB,GAAqB,CAAC1yC,EAAM+vC,IAAWyC,GAAmBxyC,CAAI,EAAE+vC,CAAM,EAEtE4C,GAAqB,CAAC1/B,EAASjT,EAAM+vC,EAAQvpB,EAAMtS,IAAU,CAC7DlU,IAAS,SACXiT,EAAQ,KAAOs9B,GAAcR,EAAQvpB,EAAMtS,CAAK,GAElDjB,EAAQ,OAAS68B,GAAgBC,EAAQvpB,EAAMtS,CAAK,EACpDu+B,GAAmBzyC,CAAI,EAAEiT,EAAS88B,EAAQvpB,EAAMtS,CAAK,CACvD,EAEM0+B,GAAc,CAClB,IACA,IACA,OACA,MACA,QACA,SACA,QACA,QACF,EAEMC,GAAqBr1C,GACzB,OAAOA,GAAU,UAAY,IAAI,KAAKA,CAAK,EACvC,WAAWA,CAAK,EAAI,IACpBA,EAGAs1C,GAAgB/C,GAAU,CAC9B,KAAM,CAAC/vC,EAAM0J,CAAK,EAAIqmC,EAEhBx7B,EAAO7K,EAAM,OACf,CAAA,EACAkpC,GAAY,OAAO,CAAC1d,EAAMC,KACxBD,EAAKC,CAAI,EAAI0d,GAAmBnpC,EAAMyrB,CAAI,CAAC,EACpCD,GACN,EAAE,EAET,MAAO,CACLl1B,EACA,CACE,OAAQ,EACR,GAAG0J,EACH,GAAG6K,CACT,CACG,CACH,EAEMw+B,GAAqB,CAAC3qC,EAAGqT,IACzBrT,EAAE,CAAC,EAAE,OAASqT,EAAE,CAAC,EAAE,OACd,EAELrT,EAAE,CAAC,EAAE,OAASqT,EAAE,CAAC,EAAE,OACd,GAEF,EAGHu3B,GAAmB90C,GACvBA,EAAE,MAAM,WAAW,CACjB,KAAM,uBACN,IAAK,MACL,WAAY,GACZ,OAAQ,CACN,KAAM,CAAC,QAAS,SAAU,OAAQ,SAAU,SAAU,OAAO,CAC9D,EACD,MAAO,CAAC,CAAE,KAAAue,EAAM,MAAA/S,KAAY,CAC1B,GAAI,CAACA,EAAM,MAAO,OAElB,KAAM,CAAE,KAAAupC,EAAM,OAAAC,EAAQ,OAAAnD,CAAQ,EAAGrmC,EAE3BypC,EAAYzpC,EAAM,MAClB0pC,EAAa1pC,EAAM,OAEzB,IAAI2pC,EAAYJ,EAAK,MACjBK,EAAaL,EAAK,OAEtB,GAAIC,EAAQ,CACV,KAAM,CAAE,KAAA1sB,CAAI,EAAK0sB,EAEjB,IAAIK,EAAc/sB,GAAQA,EAAK,MAC3BgtB,EAAehtB,GAAQA,EAAK,OAChC,MAAMitB,EAAYP,EAAO,KACnBQ,EAAgBR,EAAO,QAEzBK,GAAe,CAACC,IAAcA,EAAeD,GAC7CC,GAAgB,CAACD,IAAaA,EAAcC,GAEhD,MAAMG,EACJN,EAAYE,GAAeD,EAAaE,EAE1C,GAAI,CAACG,GAAkBA,GAAiBD,EAAgB,CACtD,IAAIE,EAAcL,EAAcF,EAC5BQ,EAAeL,EAAeF,EAElC,GAAIG,IAAc,QAChBJ,EAAYE,EACZD,EAAaE,MACR,CACL,IAAI5D,EACA6D,IAAc,QAChB7D,EAAS,KAAK,IAAIgE,EAAaC,CAAY,EAClCJ,IAAc,YACvB7D,EAAS,KAAK,IAAIgE,EAAaC,CAAY,GAE7CR,EAAYA,EAAYzD,EACxB0D,EAAaA,EAAa1D,CACtC,CACA,CACA,CAEM,MAAMppB,EAAO,CACX,MAAO2sB,EACP,OAAQC,CACT,EAED32B,EAAK,QAAQ,aAAa,QAAS+J,EAAK,KAAK,EAC7C/J,EAAK,QAAQ,aAAa,SAAU+J,EAAK,MAAM,EAE/C,MAAMtS,EAAQ,KAAK,IAAIi/B,EAAYE,EAAWD,EAAaE,CAAU,EAGrE72B,EAAK,QAAQ,UAAY,GAGzB,MAAMq3B,EAAer3B,EAAK,MAAM,iCAAiC,EAGjEszB,EACG,OAAO+D,CAAY,EACnB,IAAIhB,EAAa,EACjB,KAAKC,EAAkB,EACvB,QAAQhD,GAAU,CACjB,KAAM,CAAC/vC,EAAM+zC,CAAQ,EAAIhE,EAGnB98B,EAAUy/B,GAAmB1yC,EAAM+zC,CAAQ,EAGjDpB,GAAmB1/B,EAASjT,EAAM+zC,EAAUvtB,EAAMtS,CAAK,EAGvDuI,EAAK,QAAQ,YAAYxJ,CAAO,CAC1C,CAAS,CACT,CACA,CAAG,EAEG+gC,GAAiB,CAAC3iB,EAAGhzB,KAAO,CAAE,EAAAgzB,EAAG,EAAAhzB,CAAC,GAElC41C,GAAY,CAAC7rC,EAAGqT,IAAMrT,EAAE,EAAIqT,EAAE,EAAIrT,EAAE,EAAIqT,EAAE,EAE1Cy4B,GAAiB,CAAC9rC,EAAGqT,IAAMu4B,GAAe5rC,EAAE,EAAIqT,EAAE,EAAGrT,EAAE,EAAIqT,EAAE,CAAC,EAE9D04B,GAAwB,CAAC/rC,EAAGqT,IAChCw4B,GAAUC,GAAe9rC,EAAGqT,CAAC,EAAGy4B,GAAe9rC,EAAGqT,CAAC,CAAC,EAEhD24B,GAAiB,CAAChsC,EAAGqT,IAAM,KAAK,KAAK04B,GAAsB/rC,EAAGqT,CAAC,CAAC,EAEhE44B,GAAuB,CAAC7F,EAAQ8F,IAAa,CACjD,MAAMlsC,EAAIomC,EAEJ+F,EAAI,mBACJC,EAAIF,EACJG,EAAI,mBAAqBH,EAEzBI,EAAO,KAAK,IAAIH,CAAC,EACjBI,EAAO,KAAK,IAAIH,CAAC,EACjBI,EAAO,KAAK,IAAIH,CAAC,EACjBI,EAAO,KAAK,IAAIJ,CAAC,EACjBK,EAAQ1sC,EAAIssC,EACZj5B,EAAIq5B,EAAQH,EACZI,EAAID,EAAQF,EAElB,OAAOZ,GAAea,EAAOp5B,EAAGo5B,EAAOE,CAAC,CAC1C,EAEMC,GAAqB,CAACzgC,EAAM+/B,IAAa,CAC7C,MAAMW,EAAI1gC,EAAK,MACTxT,EAAIwT,EAAK,OAET2gC,EAAMb,GAAqBY,EAAGX,CAAQ,EACtCa,EAAMd,GAAqBtzC,EAAGuzC,CAAQ,EAEtCc,EAAKpB,GAAez/B,EAAK,EAAI,KAAK,IAAI2gC,EAAI,CAAC,EAAG3gC,EAAK,EAAI,KAAK,IAAI2gC,EAAI,CAAC,CAAC,EAEtEG,EAAKrB,GACTz/B,EAAK,EAAIA,EAAK,MAAQ,KAAK,IAAI4gC,EAAI,CAAC,EACpC5gC,EAAK,EAAI,KAAK,IAAI4gC,EAAI,CAAC,CACxB,EAEKG,EAAKtB,GACTz/B,EAAK,EAAI,KAAK,IAAI4gC,EAAI,CAAC,EACvB5gC,EAAK,EAAIA,EAAK,OAAS,KAAK,IAAI4gC,EAAI,CAAC,CACtC,EAED,MAAO,CACL,MAAOf,GAAegB,EAAIC,CAAE,EAC5B,OAAQjB,GAAegB,EAAIE,CAAE,CAC9B,CACH,EAEMC,GAAsB,CAACC,EAAOC,EAAmBC,EAAO,IAAM,CAClE,MAAMC,EAAmBH,EAAM,OAASA,EAAM,MAG9C,IAAII,EAAc,EACdC,EAAeJ,EACfK,EAAW,EACXC,EAAYJ,EACZI,EAAYF,IACdE,EAAYF,EACZC,EAAWC,EAAYJ,GAGzB,MAAM/F,EAAS,KAAK,IAAIgG,EAAcE,EAAUD,EAAeE,CAAS,EAClEl9B,EAAQ28B,EAAM,OAASE,EAAO9F,EAASkG,GACvCh9B,EAASD,EAAQ48B,EAEvB,MAAO,CACL,MAAO58B,EACP,OAAQC,CACT,CACH,EAEMk9B,GAAyB,CAACC,EAAWC,EAAU5B,EAAU6B,IAAW,CAExE,MAAMvF,EAAKuF,EAAO,EAAI,GAAM,EAAIA,EAAO,EAAIA,EAAO,EAC5CtF,EAAKsF,EAAO,EAAI,GAAM,EAAIA,EAAO,EAAIA,EAAO,EAC5CC,EAAaxF,EAAK,EAAIqF,EAAU,MAChCI,EAAcxF,EAAK,EAAIoF,EAAU,OAGjCK,EAAkBtB,GAAmBkB,EAAU5B,CAAQ,EAG7D,OAAO,KAAK,IACVgC,EAAgB,MAAQF,EACxBE,EAAgB,OAASD,CAC1B,CACH,EAEME,GAAsB,CAACC,EAAW7zB,IAAgB,CACtD,IAAI9J,EAAQ29B,EAAU,MAClB19B,EAASD,EAAQ8J,EACjB7J,EAAS09B,EAAU,SACrB19B,EAAS09B,EAAU,OACnB39B,EAAQC,EAAS6J,GAEnB,MAAM0O,GAAKmlB,EAAU,MAAQ39B,GAAS,GAChCxa,GAAKm4C,EAAU,OAAS19B,GAAU,GAExC,MAAO,CACL,EAAAuY,EACA,EAAAhzB,EACA,MAAAwa,EACA,OAAAC,CACD,CACH,EAEM29B,GAAqB,CAACC,EAAWzD,EAAO,KAAO,CACnD,GAAI,CAAE,KAAAyC,EAAM,SAAApB,EAAU,OAAA6B,EAAQ,YAAAxzB,CAAa,EAAGswB,EAEzCtwB,IAAaA,EAAc+zB,EAAU,OAASA,EAAU,OAE7D,MAAMC,EAAapB,GAAoBmB,EAAW/zB,EAAa+yB,CAAI,EAO7DkB,EAAQ,CAGZ,MAAOD,EAAW,MAClB,OAAQA,EAAW,MAErB,EAEME,EAAc,OAAO5D,EAAK,WAAe,KAAeA,EAAK,WAE7D6D,EAAkBd,GACtBU,EACAH,GAAoBK,EAAOj0B,CAAW,EACtC2xB,EACAuC,EAAcV,EAAS,CAAE,EAAG,GAAK,EAAG,EAAG,CACxC,EAEKjiC,EAAQwhC,EAAOoB,EAGrB,MAAO,CACL,WAAYH,EAAW,MAAQziC,EAC/B,YAAayiC,EAAW,OAASziC,EACjC,MAAO,KAAK,MAAMyiC,EAAW,MAAQziC,CAAK,EAC1C,OAAQ,KAAK,MAAMyiC,EAAW,OAASziC,CAAK,CAC7C,CACH,EAEM6iC,GAA2B,CAC/B,KAAM,SACN,UAAW,GACX,QAAS,IACT,KAAM,EACR,EAGMC,GAAmB94C,GACvBA,EAAE,MAAM,WAAW,CACjB,KAAM,eACN,WAAY,GACZ,OAAQ,CAAE,OAAQ,CAAC,SAAU,QAAQ,CAAG,EACxC,OAAQ,CAAC,CAAE,KAAAue,EAAM,MAAA/S,KAAY,CAC3B+S,EAAK,YAAY/S,EAAM,KAAK,CAClC,CACA,CAAG,EAGGutC,GAA2B/4C,GAC/BA,EAAE,MAAM,WAAW,CACjB,KAAM,uBACN,IAAK,MACL,WAAY,GACZ,OAAQ,CACN,KAAM,CAAC,OAAQ,QAAS,QAAQ,EAChC,OAAQ,CACN,UACA,UACA,aACA,aACA,SACA,SACA,SACD,EACD,WAAY,CACV,QAAS64C,GACT,QAASA,GACT,OAAQA,GACR,OAAQA,GACR,WAAYA,GACZ,WAAYA,GACZ,QAASA,EACjB,CACK,EACD,OAAQ,CAAC,CAAE,KAAAt6B,EAAM,MAAA/S,KAAY,CAC3BA,EAAM,MAAQA,EAAM,MAAM,MAC1BA,EAAM,OAASA,EAAM,MAAM,OAC3B+S,EAAK,IAAI,OAASA,EAAK,gBACrBA,EAAK,gBAAgBu6B,GAAiB94C,CAAC,EAAG,CAAE,MAAOwL,EAAM,KAAO,CAAA,CACjE,CACF,EACD,MAAO,CAAC,CAAE,KAAA+S,EAAM,MAAA/S,KAAY,CAC1B,KAAM,CAAE,KAAAwtC,GAASxtC,EAAM,KACjB,CAAE,OAAAytC,GAAW16B,EAAK,IACxB06B,EAAO,OAASD,EAAK,WAAa,GAAK,EACvCC,EAAO,OAASD,EAAK,SAAW,GAAK,CAC3C,CACA,CAAG,EAGGE,GAAiBl5C,GACrBA,EAAE,MAAM,WAAW,CACjB,KAAM,aACN,IAAK,MACL,WAAY,GACZ,OAAQ,CACN,KAAM,CACJ,OACA,SACA,SACA,QACA,SACA,QACA,YACD,EACD,OAAQ,CAAC,QAAS,SAAU,SAAS,EACrC,WAAY,CACV,QAAS,CAAE,KAAM,QAAS,SAAU,GAAG,CAC/C,CACK,EACD,aAAc,SAAS,CAAE,KAAAue,EAAM,MAAA/S,GAAS,CACjCA,EAAM,aACX+S,EAAK,QAAQ,MAAM,gBAAkB/S,EAAM,WAC5C,EACD,OAAQ,CAAC,CAAE,KAAA+S,EAAM,MAAA/S,KAAY,CAC3B+S,EAAK,IAAI,MAAQA,EAAK,gBACpBA,EAAK,gBACHw6B,GAAyB/4C,CAAC,EAC1B,OAAO,OAAO,CAAA,EAAIwL,CAAK,CACjC,CACO,EAED+S,EAAK,IAAI,aAAe,IAAM,CACxBA,EAAK,IAAI,SACbA,EAAK,IAAI,OAASA,EAAK,gBACrBA,EAAK,gBAAgBu2B,GAAiB90C,CAAC,EAAG,OAAO,OAAO,CAAE,EAAEwL,CAAK,CAAC,CACnE,EACF,EAED+S,EAAK,IAAI,cAAgB,IAAM,CACxBA,EAAK,IAAI,SACdA,EAAK,gBAAgBA,EAAK,IAAI,MAAM,EACpCA,EAAK,IAAI,OAAS,KACnB,EAGD,MAAM46B,EAAwB56B,EAAK,MACjC,0CACD,EACG46B,IAA0B,OAG1BA,IAA0B,OAC5B56B,EAAK,QAAQ,QAAQ,sBAAwB46B,EAI7C56B,EAAK,QAAQ,QAAQ,sBAAwB,QAEhD,EACD,MAAO,CAAC,CAAE,KAAAA,EAAM,MAAA/S,EAAO,eAAAqR,CAAc,IAAO,CAC1C,KAAM,CAAE,KAAAk4B,EAAM,OAAAlD,EAAQ,OAAAmD,EAAQ,MAAAoE,EAAO,MAAAz+B,EAAO,OAAAC,CAAM,EAAKpP,EAEvD+S,EAAK,IAAI,MAAM,KAAOw2B,EAEtB,MAAM2D,EAAQ,CAGZ,MAAA/9B,EACA,OAAAC,EACA,OAAQ,CACN,EAAGD,EAAQ,GACX,EAAGC,EAAS,EACtB,CACO,EAEK08B,EAAQ,CACZ,MAAO/4B,EAAK,IAAI,MAAM,MACtB,OAAQA,EAAK,IAAI,MAAM,MACxB,EAEKsP,EAAS,CACb,EAAGknB,EAAK,OAAO,EAAIuC,EAAM,MACzB,EAAGvC,EAAK,OAAO,EAAIuC,EAAM,MAC1B,EAEK+B,EAAc,CAClB,EAAGX,EAAM,OAAO,EAAIpB,EAAM,MAAQvC,EAAK,OAAO,EAC9C,EAAG2D,EAAM,OAAO,EAAIpB,EAAM,OAASvC,EAAK,OAAO,CAChD,EAEKqB,EAAW,KAAK,GAAK,EAAKrB,EAAK,UAAY,KAAK,GAAK,GAErDuE,EAAkBvE,EAAK,aAAeuC,EAAM,OAASA,EAAM,MAE3DqB,EACJ,OAAO5D,EAAK,WAAe,KAAeA,EAAK,WAE3C6D,EAAkBd,GACtBR,EACAe,GAAoBK,EAAOY,CAAe,EAC1ClD,EACAuC,EAAc5D,EAAK,OAAS,CAAE,EAAG,GAAK,EAAG,EAAG,CAC7C,EAEK/+B,EAAQ++B,EAAK,KAAO6D,EAGtB/G,GAAUA,EAAO,QACnBtzB,EAAK,IAAI,aAAc,EACvBA,EAAK,IAAI,OAAO,MAAQ5D,EACxB4D,EAAK,IAAI,OAAO,OAAS3D,EACzB2D,EAAK,IAAI,OAAO,OAASy2B,EACzBz2B,EAAK,IAAI,OAAO,MAAQ66B,EACxB76B,EAAK,IAAI,OAAO,OAASszB,EACzBtzB,EAAK,IAAI,OAAO,KAAOg6B,GAAmBjB,EAAOvC,CAAI,GAC5Cx2B,EAAK,IAAI,QAClBA,EAAK,IAAI,cAAe,EAI1B,MAAMg7B,EAAYh7B,EAAK,IAAI,MAG3B,GAAI1B,EAAgB,CAClB08B,EAAU,QAAU,KACpBA,EAAU,QAAU,KACpBA,EAAU,WAAa,KACvBA,EAAU,WAAa,KACvBA,EAAU,QAAU,KACpBA,EAAU,OAAS,KACnBA,EAAU,OAAS,KACnB,MACR,CAEMA,EAAU,QAAU1rB,EAAO,EAC3B0rB,EAAU,QAAU1rB,EAAO,EAC3B0rB,EAAU,WAAaF,EAAY,EACnCE,EAAU,WAAaF,EAAY,EACnCE,EAAU,QAAUnD,EACpBmD,EAAU,OAASvjC,EACnBujC,EAAU,OAASvjC,CACzB,CACA,CAAG,EAEGwjC,GAAkBx5C,GACtBA,EAAE,MAAM,WAAW,CACjB,KAAM,gBACN,IAAK,MACL,WAAY,GACZ,OAAQ,CACN,KAAM,CAAC,QAAS,OAAQ,SAAU,SAAU,QAAS,YAAY,EACjE,OAAQ,CAAC,aAAc,SAAU,SAAU,SAAS,EACpD,WAAY,CACV,OAAQ64C,GACR,OAAQA,GACR,WAAYA,GACZ,QAAS,CAAE,KAAM,QAAS,SAAU,GAAG,CAC/C,CACK,EACD,OAAQ,CAAC,CAAE,KAAAt6B,EAAM,MAAA/S,KAAY,CAC3B+S,EAAK,IAAI,KAAOA,EAAK,gBACnBA,EAAK,gBAAgB26B,GAAel5C,CAAC,EAAG,CACtC,GAAIwL,EAAM,GACV,MAAOA,EAAM,MACb,KAAMA,EAAM,KACZ,OAAQA,EAAM,OACd,OAAQA,EAAM,OACd,MAAOA,EAAM,MACb,WAAYA,EAAM,UACnB,CAAA,CACF,CACF,EACD,MAAO,CAAC,CAAE,KAAA+S,EAAM,MAAA/S,EAAO,eAAAqR,CAAc,IAAO,CAC1C,KAAM,CAAE,KAAA48B,GAASl7B,EAAK,IAEhB,CAAE,MAAA+4B,EAAO,KAAAvC,EAAM,OAAAlD,EAAQ,OAAAmD,EAAQ,MAAAoE,CAAK,EAAK5tC,EAW/C,GATAiuC,EAAK,KAAO1E,EACZ0E,EAAK,OAAS5H,EACd4H,EAAK,OAASzE,EACdyE,EAAK,MAAQL,EAGbK,EAAK,QAAU58B,EAAiB,EAAI,EAGhCA,GAAkB0B,EAAK,KAAK,QAAQ,OAAQ,OAGhD,MAAMk5B,EAAmBH,EAAM,OAASA,EAAM,MAC9C,IAAI7yB,EAAcswB,EAAK,aAAe0C,EAGtC,MAAMiC,EAAiBn7B,EAAK,KAAK,MAAM,MACjCo7B,EAAkBp7B,EAAK,KAAK,MAAM,OAExC,IAAIq7B,EAAqBr7B,EAAK,MAAM,0BAA0B,EAC9D,MAAMs7B,EAAmBt7B,EAAK,MAAM,8BAA8B,EAC5Du7B,EAAmBv7B,EAAK,MAAM,8BAA8B,EAE5Dw7B,EAAmBx7B,EAAK,MAAM,wBAAwB,EACtD+qB,EAAgB/qB,EAAK,MAAM,oBAAoB,EAEjDw7B,GAAoB,CAACzQ,IACvBsQ,EAAqBF,EAAiBK,EACtCt1B,EAAcs1B,GAIhB,IAAIC,EACFJ,IAAuB,KACnBA,EACA,KAAK,IACHC,EACA,KAAK,IAAIH,EAAiBj1B,EAAaq1B,CAAgB,CACxD,EAEHG,EAAYD,EAAav1B,EACzBw1B,EAAYP,IACdO,EAAYP,EACZM,EAAaC,EAAYx1B,GAGvBu1B,EAAaL,IACfK,EAAaL,EACbM,EAAYN,EAAkBl1B,GAGhCg1B,EAAK,MAAQQ,EACbR,EAAK,OAASO,CACpB,CACA,CAAG,EAEH,IAAIE,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAoBXC,GAAkB,EAEtB,MAAMC,GAAyBC,GAC7BA,EAAM,MAAM,WAAW,CACrB,KAAM,wBACN,IAAK,MACL,WAAY,GACZ,OAAQ,CAAC,CAAE,KAAA97B,EAAM,MAAA/S,KAAY,CAC3B,IAAI8uC,EAAOJ,GACX,GAAI,SAAS,cAAc,MAAM,EAAG,CAClC,MAAM3zB,EAAM,IAAI,IACd,OAAO,SAAS,KAAK,QAAQ,OAAO,SAAS,KAAM,EAAE,CAC/D,EAAU,KACF+zB,EAAOA,EAAK,QAAQ,WAAY,OAAS/zB,EAAM,GAAG,CAC1D,CAEM4zB,KACA57B,EAAK,QAAQ,UAAU,IACrB,mCAAmC/S,EAAM,MAAM,EAChD,EACD+S,EAAK,QAAQ,UAAY+7B,EAAK,QAAQ,WAAYH,EAAe,CAClE,EACD,OAAQ,CACN,OAAQ,CAAC,SAAS,EAClB,WAAY,CACV,QAAS,CAAE,KAAM,SAAU,KAAM,EAAE,CAC3C,CACA,CACA,CAAG,EAKGI,GAAe,UAAW,CAC9B,KAAK,UAAY,GAAK,CACpB,kBAAkB,EAAE,KAAK,QAAQ,IAAI,EAAE,KAAKtB,GAAU,CACpD,KAAK,YAAY,CAAE,GAAI,EAAE,KAAK,GAAI,QAASA,GAAU,CAACA,CAAM,CAAC,CACnE,CAAK,CACF,CACH,EAKMuB,GAAoB,UAAW,CACnC,KAAK,UAAY,GAAK,CACpB,MAAMC,EAAY,EAAE,KAAK,QAAQ,UAC3BC,EAAS,EAAE,KAAK,QAAQ,YAExBjnC,EAAOgnC,EAAU,KACjBr5C,EAAIqS,EAAK,OAETknC,EAAMD,EAAO,CAAC,EACdE,EAAMF,EAAO,CAAC,EACdG,EAAMH,EAAO,CAAC,EACdI,EAAMJ,EAAO,CAAC,EACdK,EAAML,EAAO,CAAC,EAEdM,EAAMN,EAAO,CAAC,EACdO,EAAMP,EAAO,CAAC,EACdQ,EAAMR,EAAO,CAAC,EACdS,EAAMT,EAAO,CAAC,EACdU,EAAMV,EAAO,CAAC,EAEdW,EAAMX,EAAO,EAAE,EACfY,EAAMZ,EAAO,EAAE,EACfa,EAAMb,EAAO,EAAE,EACfc,EAAMd,EAAO,EAAE,EACfe,EAAMf,EAAO,EAAE,EAEfgB,EAAMhB,EAAO,EAAE,EACfiB,EAAMjB,EAAO,EAAE,EACfkB,EAAMlB,EAAO,EAAE,EACfmB,EAAMnB,EAAO,EAAE,EACfoB,EAAMpB,EAAO,EAAE,EAErB,IAAIvlC,EAAQ,EACVtU,EAAI,EACJT,EAAI,EACJmd,EAAI,EACJrT,EAAI,EAEN,KAAOiL,EAAQ/T,EAAG+T,GAAS,EACzBtU,EAAI4S,EAAK0B,CAAK,EAAI,IAClB/U,EAAIqT,EAAK0B,EAAQ,CAAC,EAAI,IACtBoI,EAAI9J,EAAK0B,EAAQ,CAAC,EAAI,IACtBjL,EAAIuJ,EAAK0B,EAAQ,CAAC,EAAI,IACtB1B,EAAK0B,CAAK,EAAI,KAAK,IACjB,EACA,KAAK,KAAKtU,EAAI85C,EAAMv6C,EAAIw6C,EAAMr9B,EAAIs9B,EAAM3wC,EAAI4wC,EAAMC,GAAO,IAAK,GAAG,CAClE,EACDtnC,EAAK0B,EAAQ,CAAC,EAAI,KAAK,IACrB,EACA,KAAK,KAAKtU,EAAIm6C,EAAM56C,EAAI66C,EAAM19B,EAAI29B,EAAMhxC,EAAIixC,EAAMC,GAAO,IAAK,GAAG,CAClE,EACD3nC,EAAK0B,EAAQ,CAAC,EAAI,KAAK,IACrB,EACA,KAAK,KAAKtU,EAAIw6C,EAAMj7C,EAAIk7C,EAAM/9B,EAAIg+B,EAAMrxC,EAAIsxC,EAAMC,GAAO,IAAK,GAAG,CAClE,EACDhoC,EAAK0B,EAAQ,CAAC,EAAI,KAAK,IACrB,EACA,KAAK,KAAKtU,EAAI66C,EAAMt7C,EAAIu7C,EAAMp+B,EAAIq+B,EAAM1xC,EAAI2xC,EAAMC,GAAO,IAAK,GAAG,CAClE,EAGH,KAAK,YAAY,CAAE,GAAI,EAAE,KAAK,GAAI,QAASrB,GAAa,CACtDA,EAAU,KAAK,MACrB,CAAK,CACF,CACH,EAEMsB,GAAe,CAACx1B,EAAKnS,IAAO,CAChC,IAAIkjC,EAAQ,IAAI,MAChBA,EAAM,OAAS,IAAM,CACnB,MAAM38B,EAAQ28B,EAAM,aACd18B,EAAS08B,EAAM,cACrBA,EAAQ,KACRljC,EAAGuG,EAAOC,CAAM,CACjB,EACD08B,EAAM,IAAM/wB,CACd,EAEM1L,GAAa,CACjB,EAAG,IAAM,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAC1B,EAAGF,GAAS,CAAC,GAAI,EAAG,EAAG,EAAGA,EAAO,CAAC,EAClC,EAAG,CAACA,EAAOC,IAAW,CAAC,GAAI,EAAG,EAAG,GAAID,EAAOC,CAAM,EAClD,EAAG,CAACD,EAAOC,IAAW,CAAC,EAAG,EAAG,EAAG,GAAI,EAAGA,CAAM,EAC7C,EAAG,IAAM,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAC1B,EAAG,CAACD,EAAOC,IAAW,CAAC,EAAG,EAAG,GAAI,EAAGA,EAAQ,CAAC,EAC7C,EAAG,CAACD,EAAOC,IAAW,CAAC,EAAG,GAAI,GAAI,EAAGA,EAAQD,CAAK,EAClD,EAAGA,GAAS,CAAC,EAAG,GAAI,EAAG,EAAG,EAAGA,CAAK,CACpC,EAEMqhC,GAAsB,CAACC,EAAKthC,EAAOC,EAAQi2B,IAAgB,CAE3DA,IAAgB,IAIpBoL,EAAI,UAAU,MAAMA,EAAKphC,GAAWg2B,CAAW,EAAEl2B,EAAOC,CAAM,CAAC,CACjE,EAGMshC,GAAqB,CAACzoC,EAAMkH,EAAOC,EAAQi2B,IAAgB,CAE/Dl2B,EAAQ,KAAK,MAAMA,CAAK,EACxBC,EAAS,KAAK,MAAMA,CAAM,EAG1B,MAAMuhC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQxhC,EACfwhC,EAAO,OAASvhC,EAChB,MAAMqhC,EAAME,EAAO,WAAW,IAAI,EAGlC,OAAItL,GAAe,GAAKA,GAAe,IACrC,CAACl2B,EAAOC,CAAM,EAAI,CAACA,EAAQD,CAAK,GAIlCqhC,GAAoBC,EAAKthC,EAAOC,EAAQi2B,CAAW,EAGnDoL,EAAI,UAAUxoC,EAAM,EAAG,EAAGkH,EAAOC,CAAM,EAEhCuhC,CACT,EAEMC,GAAW76C,GAAQ,SAAS,KAAKA,EAAK,IAAI,GAAK,CAAC,MAAM,KAAKA,EAAK,IAAI,EAEpE86C,GAAY,GACZC,GAAa,GAEbC,GAAwBjF,GAAS,CACrC,MAAM5F,EAAS,KAAK,IAAI2K,GAAY/E,EAAM,MAAOgF,GAAahF,EAAM,MAAM,EAEpE6E,EAAS,SAAS,cAAc,QAAQ,EACxCF,EAAME,EAAO,WAAW,IAAI,EAC5BxhC,EAASwhC,EAAO,MAAQ,KAAK,KAAK7E,EAAM,MAAQ5F,CAAM,EACtD92B,EAAUuhC,EAAO,OAAS,KAAK,KAAK7E,EAAM,OAAS5F,CAAM,EAC/DuK,EAAI,UAAU3E,EAAO,EAAG,EAAG38B,EAAOC,CAAM,EACxC,IAAInH,EAAO,KACX,GAAI,CACFA,EAAOwoC,EAAI,aAAa,EAAG,EAAGthC,EAAOC,CAAM,EAAE,IAC9C,MAAW,CACV,OAAO,IACX,CACE,MAAM,EAAInH,EAAK,OAEf,IAAI5S,EAAI,EACJT,EAAI,EACJmd,EAAI,EACJ3c,EAAI,EAER,KAAOA,EAAI,EAAGA,GAAK,EACjBC,GAAK4S,EAAK7S,CAAC,EAAI6S,EAAK7S,CAAC,EACrBR,GAAKqT,EAAK7S,EAAI,CAAC,EAAI6S,EAAK7S,EAAI,CAAC,EAC7B2c,GAAK9J,EAAK7S,EAAI,CAAC,EAAI6S,EAAK7S,EAAI,CAAC,EAG/B,OAAAC,EAAI27C,GAAa37C,EAAG,CAAC,EACrBT,EAAIo8C,GAAap8C,EAAG,CAAC,EACrBmd,EAAIi/B,GAAaj/B,EAAG,CAAC,EAEd,CAAE,EAAA1c,EAAG,EAAAT,EAAG,EAAAmd,CAAG,CACpB,EAEMi/B,GAAe,CAAC3F,EAAGz1C,IAAM,KAAK,MAAM,KAAK,KAAKy1C,GAAKz1C,EAAI,EAAE,CAAC,EAE1Dq7C,GAAc,CAAC5uB,EAAQtoB,KAC3BA,EAASA,GAAU,SAAS,cAAc,QAAQ,EAClDA,EAAO,MAAQsoB,EAAO,MACtBtoB,EAAO,OAASsoB,EAAO,OACXtoB,EAAO,WAAW,IAAI,EAC9B,UAAUsoB,EAAQ,EAAG,CAAC,EACnBtoB,GAGHm3C,GAAiBjC,GAAa,CAClC,IAAI18B,EACJ,GAAI,CACFA,EAAK,IAAI,UAAU08B,EAAU,MAAOA,EAAU,MAAM,CACrD,MAAW,CAGV18B,EAFe,SAAS,cAAc,QAAQ,EAC3B,WAAW,IAAI,EACzB,gBAAgB08B,EAAU,MAAOA,EAAU,MAAM,CAC9D,CACE,OAAA18B,EAAG,KAAK,IAAI,IAAI,kBAAkB08B,EAAU,IAAI,CAAC,EAC1C18B,CACT,EAEM2vB,GAAYnnB,GAChB,IAAI,QAAQ,CAAChnB,EAASC,IAAW,CAC/B,MAAMmuC,EAAM,IAAI,MAChBA,EAAI,YAAc,YAClBA,EAAI,OAAS,IAAM,CACjBpuC,EAAQouC,CAAG,CACZ,EACDA,EAAI,QAAUhuC,GAAK,CACjBH,EAAOG,CAAC,CACT,EACDguC,EAAI,IAAMpnB,CACd,CAAG,EAEGo2B,GAAyB38C,GAAK,CAElC,MAAM48C,EAAcxC,GAAuBp6C,CAAC,EAEtC68C,EAAYrD,GAAgBx5C,CAAC,EAE7B,CAAE,aAAAqtC,GAAiBrtC,EAAE,MAErB88C,EAAc,CAACv+B,EAAMw+B,EAAQx3C,IACjC,IAAI,QAAQhG,GAAW,CAEhBgf,EAAK,IAAI,YACZA,EAAK,IAAI,UAAYhZ,EAClB,WAAW,IAAI,EACf,aAAa,EAAG,EAAGA,EAAO,MAAOA,EAAO,MAAM,GAInD,MAAMk1C,EAAYiC,GAAen+B,EAAK,IAAI,SAAS,EAEnD,GAAI,CAACw+B,GAAUA,EAAO,SAAW,GAC/B,OAAAx3C,EAAO,WAAW,IAAI,EAAE,aAAak1C,EAAW,EAAG,CAAC,EAC7Cl7C,EAAS,EAGlB,MAAMiuC,EAASH,EAAamN,EAAiB,EAC7ChN,EAAO,KACL,CACE,UAAAiN,EACA,YAAasC,CACd,EACD9zB,GAAY,CAEV1jB,EAAO,WAAW,IAAI,EAAE,aAAa0jB,EAAU,EAAG,CAAC,EAGnDukB,EAAO,UAAW,EAGlBjuC,EAAS,CACV,EACD,CAACk7C,EAAU,KAAK,MAAM,CACvB,CACP,CAAK,EAEGuC,EAAkB,CAACz+B,EAAMg7B,IAAc,CAC3Ch7B,EAAK,gBAAgBg7B,CAAS,EAC9BA,EAAU,MAAM,MAAQ,EACxBA,EAAU,MAAM,OAAS,EACzBA,EAAU,SAAU,CACrB,EAGK0D,EAAa,CAAC,CAAE,KAAA1+B,KAAW,CAC/B,MAAMg7B,EAAYh7B,EAAK,IAAI,OAAO,MAAO,EACzC,OAAAg7B,EAAU,QAAU,EACpBA,EAAU,WAAa,IACvBh7B,EAAK,IAAI,aAAa,KAAKg7B,CAAS,EAC7BA,CACR,EAGK2D,EAAY,CAAC,CAAE,KAAA3+B,EAAM,MAAA/S,EAAO,MAAA8rC,CAAK,IAAO,CAC5C,MAAMv5B,EAAKvS,EAAM,GACXhJ,EAAO+b,EAAK,MAAM,WAAY,CAAE,GAAAR,CAAE,CAAE,EAC1C,GAAI,CAACvb,EAAM,OAEX,MAAMuyC,EAAOvyC,EAAK,YAAY,MAAM,GAAK,CACvC,OAAQ,CACN,EAAG,GACH,EAAG,EACJ,EACD,KAAM,CACJ,WAAY,GACZ,SAAU,EACX,EACD,KAAM,EACN,SAAU,EACV,YAAa,IACd,EAEK26C,EAAa5+B,EAAK,MACtB,6CACD,EAED,IAAIszB,EACAmD,EACAoE,EAAQ,GACR76B,EAAK,MAAM,+BAA+B,IAC5CszB,EAASrvC,EAAK,YAAY,QAAQ,GAAK,CAAE,EACzCwyC,EAASxyC,EAAK,YAAY,QAAQ,EAClC42C,EAAQ,IAIV,MAAMG,EAAYh7B,EAAK,gBACrBA,EAAK,gBAAgBs+B,EAAW,CAC9B,GAAA9+B,EACA,MAAAu5B,EACA,KAAAvC,EACA,OAAAC,EACA,OAAAnD,EACA,MAAAuH,EACA,WAAA+D,EACA,QAAS,EACT,OAAQ,KACR,OAAQ,KACR,WAAY,EACpB,CAAO,EACD5+B,EAAK,WAAW,MACjB,EACDA,EAAK,IAAI,OAAO,KAAKg7B,CAAS,EAG9BA,EAAU,QAAU,EACpBA,EAAU,OAAS,EACnBA,EAAU,OAAS,EACnBA,EAAU,WAAa,EAGvB,WAAW,IAAM,CACfh7B,EAAK,SAAS,yBAA0B,CAAE,GAAAR,CAAE,CAAE,CAC/C,EAAE,GAAG,CACP,EAEKg1B,EAAc,CAAC,CAAE,KAAAx0B,EAAM,MAAA/S,CAAK,IAAO,CACvC,MAAMhJ,EAAO+b,EAAK,MAAM,WAAY,CAAE,GAAI/S,EAAM,GAAI,EACpD,GAAI,CAAChJ,EAAM,OACX,MAAM+2C,EAAYh7B,EAAK,IAAI,OAAOA,EAAK,IAAI,OAAO,OAAS,CAAC,EAC5Dg7B,EAAU,KAAO/2C,EAAK,YAAY,MAAM,EACxC+2C,EAAU,WAAah7B,EAAK,MAC1B,6CACD,EACGA,EAAK,MAAM,+BAA+B,IAC5Cg7B,EAAU,MAAQ,GAClBA,EAAU,OAAS/2C,EAAK,YAAY,QAAQ,EAC5C+2C,EAAU,OAAS/2C,EAAK,YAAY,QAAQ,EAE/C,EAGK46C,EAAwB,CAAC,CAAE,KAAA7+B,EAAM,MAAA/S,EAAO,OAAAyF,CAAM,IAAO,CAKzD,GAHI,CAAC,4BAA4B,KAAKA,EAAO,OAAO,GAAG,GAGnD,CAACsN,EAAK,IAAI,OAAO,OAAQ,OAG7B,MAAM/b,EAAO+b,EAAK,MAAM,WAAY,CAAE,GAAI/S,EAAM,GAAI,EACpD,GAAKhJ,EAGL,IAAI,SAAS,KAAKyO,EAAO,OAAO,GAAG,EAAG,CACpC,MAAMsoC,EAAYh7B,EAAK,IAAI,OAAOA,EAAK,IAAI,OAAO,OAAS,CAAC,EAC5Du+B,EAAYv+B,EAAMtN,EAAO,OAAO,MAAOsoC,EAAU,KAAK,EACtD,MACN,CAEI,GAAI,qBAAqB,KAAKtoC,EAAO,OAAO,GAAG,EAAG,CAChD,MAAM8jC,EAAOvyC,EAAK,YAAY,MAAM,EAC9B80C,EAAQ/4B,EAAK,IAAI,OAAOA,EAAK,IAAI,OAAO,OAAS,CAAC,EAGxD,GACEw2B,GACAA,EAAK,aACLuC,EAAM,MACNA,EAAM,KAAK,aACX,KAAK,IAAIvC,EAAK,YAAcuC,EAAM,KAAK,WAAW,EAAI,KACtD,CACA,MAAMiC,EAAY0D,EAAW,CAAE,KAAA1+B,EAAM,EACrC2+B,EAAU,CAAE,KAAA3+B,EAAM,MAAA/S,EAAO,MAAOixC,GAAYlD,EAAU,KAAK,EAAG,CACtE,MAGQxG,EAAY,CAAE,KAAAx0B,EAAM,MAAA/S,EAAO,CAEnC,EACG,EAEK6xC,EAAuB97C,GAAQ,CAInC,MAAM+7C,EADY,OAAO,UAAU,UACP,MAAM,qBAAqB,EACjDC,EAAiBD,EAAY,SAASA,EAAU,CAAC,CAAC,EAAI,KAC5D,OAAIC,IAAmB,MAAQA,GAAkB,GAAW,GAErD,sBAAuB,QAAUnB,GAAS76C,CAAI,CACtD,EAKKi8C,EAA4B,CAAC,CAAE,KAAAj/B,EAAM,MAAA/S,CAAK,IAAO,CACrD,KAAM,CAAE,GAAAuS,CAAE,EAAKvS,EAGThJ,EAAO+b,EAAK,MAAM,WAAYR,CAAE,EACtC,GAAI,CAACvb,EAAM,OAGX,MAAMi7C,EAAU,IAAI,gBAAgBj7C,EAAK,IAAI,EAG7Cu5C,GAAa0B,EAAS,CAAC9iC,EAAOC,IAAW,CAEvC2D,EAAK,SAAS,mCAAoC,CAChD,GAAAR,EACA,MAAApD,EACA,OAAAC,CACR,CAAO,CACP,CAAK,CACF,EAEK8iC,EAAc,CAAC,CAAE,KAAAn/B,EAAM,MAAA/S,CAAK,IAAO,CACvC,KAAM,CAAE,GAAAuS,CAAE,EAAKvS,EAGThJ,EAAO+b,EAAK,MAAM,WAAYR,CAAE,EACtC,GAAI,CAACvb,EAAM,OAGX,MAAMi7C,EAAU,IAAI,gBAAgBj7C,EAAK,IAAI,EAGvCm7C,EAAsB,IAAM,CAEhCjQ,GAAU+P,CAAO,EAAE,KAAKG,CAAkB,CAC3C,EAGKA,EAAqBnD,GAAa,CAEtC,IAAI,gBAAgBgD,CAAO,EAK3B,MAAM5M,GADOruC,EAAK,YAAY,MAAM,GAAK,CAAE,GAClB,aAAe,GAGxC,GAAI,CAAE,MAAAmY,EAAO,OAAAC,CAAM,EAAK6/B,EAGxB,GAAI,CAAC9/B,GAAS,CAACC,EAAQ,OAEnBi2B,GAAe,GAAKA,GAAe,IACrC,CAACl2B,EAAOC,CAAM,EAAI,CAACA,EAAQD,CAAK,GAKlC,MAAMkjC,EAAqB,KAAK,IAAI,EAAG,OAAO,iBAAmB,GAAI,EAQ/DC,EAHav/B,EAAK,MAAM,+BAA+B,EAG5Bs/B,EAG3BE,EAAoBnjC,EAASD,EAG7BqjC,EAAwBz/B,EAAK,KAAK,QAAQ,MAC1C0/B,EAAyB1/B,EAAK,KAAK,QAAQ,OAEjD,IAAI25B,EAAa8F,EACb7F,EAAcD,EAAa6F,EAE3BA,EAAoB,GACtB7F,EAAa,KAAK,IAAIv9B,EAAOqjC,EAAwBF,CAAW,EAChE3F,EAAcD,EAAa6F,IAE3B5F,EAAc,KAAK,IAAIv9B,EAAQqjC,EAAyBH,CAAW,EACnE5F,EAAaC,EAAc4F,GAI7B,MAAMG,GAAehC,GACnBzB,EACAvC,EACAC,EACAtH,CACD,EAGKsN,GAAO,IAAM,CAEjB,MAAM3B,GAAej+B,EAAK,MACxB,iDACV,EACYg+B,GAAsB,IAAI,EAC1B,KACJ/5C,EAAK,YAAY,QAASg6C,GAAc,EAAI,EAGxC,UAAW/B,GACbA,EAAU,MAAO,EAInBl8B,EAAK,IAAI,cAAc,QAAU,EAGjC2+B,EAAU,CAAE,KAAA3+B,EAAM,MAAA/S,EAAO,MAAO0yC,EAAY,CAAE,CAC/C,EAGKnB,GAASv6C,EAAK,YAAY,QAAQ,EACpCu6C,GACFD,EAAYv+B,EAAMw+B,GAAQmB,EAAY,EAAE,KAAKC,EAAI,EAEjDA,GAAM,CAET,EAGD,GAAId,EAAqB76C,EAAK,IAAI,EAAG,CAEnC,MAAMgrC,EAASH,EAAakN,EAAY,EAExC/M,EAAO,KACL,CACE,KAAMhrC,EAAK,IACZ,EACD47C,GAAe,CAMb,GAJA5Q,EAAO,UAAW,EAId,CAAC4Q,EAAa,CAChBT,EAAqB,EACrB,MACZ,CAGUC,EAAmBQ,CAAW,CACxC,CACO,CACP,MAEMT,EAAqB,CAExB,EAKKU,EAAiB,CAAC,CAAE,KAAA9/B,KAAW,CAEnC,MAAM+4B,EAAQ/4B,EAAK,IAAI,OAAOA,EAAK,IAAI,OAAO,OAAS,CAAC,EACxD+4B,EAAM,WAAa,EACnBA,EAAM,OAAS,EACfA,EAAM,OAAS,EACfA,EAAM,QAAU,CACjB,EAKKgH,EAAiB,CAAC,CAAE,KAAA//B,KAAW,CACnCA,EAAK,IAAI,cAAc,QAAU,EACjCA,EAAK,IAAI,aAAa,QAAU,EAChCA,EAAK,IAAI,eAAe,QAAU,CACnC,EAEKggC,EAAgB,CAAC,CAAE,KAAAhgC,KAAW,CAClCA,EAAK,IAAI,cAAc,QAAU,IACjCA,EAAK,IAAI,aAAa,QAAU,CACjC,EAEKigC,EAAwB,CAAC,CAAE,KAAAjgC,KAAW,CAC1CA,EAAK,IAAI,cAAc,QAAU,IACjCA,EAAK,IAAI,eAAe,QAAU,CACnC,EAKKlD,EAAS,CAAC,CAAE,KAAAkD,KAAW,CAE3BA,EAAK,IAAI,OAAS,CAAE,EAGpBA,EAAK,IAAI,UAAY,KAGrBA,EAAK,IAAI,aAAe,CAAE,EAG1BA,EAAK,IAAI,cAAgBA,EAAK,gBAC5BA,EAAK,gBAAgBq+B,EAAa,CAChC,QAAS,EACT,OAAQ,MACT,CAAA,CACF,EAEDr+B,EAAK,IAAI,eAAiBA,EAAK,gBAC7BA,EAAK,gBAAgBq+B,EAAa,CAChC,QAAS,EACT,OAAQ,SACT,CAAA,CACF,EAEDr+B,EAAK,IAAI,aAAeA,EAAK,gBAC3BA,EAAK,gBAAgBq+B,EAAa,CAChC,QAAS,EACT,OAAQ,SACT,CAAA,CACF,CACF,EAED,OAAO58C,EAAE,MAAM,WAAW,CACxB,KAAM,wBACN,OAAAqb,EACA,OAAQ,CAAC,QAAQ,EACjB,KAAM,CAAC,QAAQ,EACf,QAAS,CAAC,CAAE,KAAAkD,KAAW,CAErBA,EAAK,IAAI,OAAO,QAAQg7B,GAAa,CACnCA,EAAU,MAAM,MAAQ,EACxBA,EAAU,MAAM,OAAS,CACjC,CAAO,CACF,EACD,aAAc,CAAC,CAAE,KAAAh7B,KAAW,CAC1BA,EAAK,IAAI,OAAO,QAAQg7B,GAAa,CACnCA,EAAU,MAAQ,EAC1B,CAAO,CACF,EACD,MAAOv5C,EAAE,MAAM,YACb,CAEE,uBAAwBq+C,EACxB,mCAAoCb,EACpC,iCAAkCE,EAClC,yBAA0BN,EAG1B,0BAA2BmB,EAC3B,gCAAiCA,EACjC,uBAAwBA,EACxB,6BAA8BC,EAC9B,0BAA2BF,EAC3B,2BAA4BA,CAC7B,EACD,CAAC,CAAE,KAAA//B,CAAI,IAAO,CAEZ,MAAMkgC,EAAgBlgC,EAAK,IAAI,aAAa,OAC1Cg7B,GAAaA,EAAU,UAAY,CACpC,EAGDh7B,EAAK,IAAI,aAAeA,EAAK,IAAI,aAAa,OAC5Cg7B,GAAaA,EAAU,QAAU,CAClC,EAGDkF,EAAc,QAAQlF,GAAayD,EAAgBz+B,EAAMg7B,CAAS,CAAC,EACnEkF,EAAc,OAAS,CAC/B,CACA,CACA,CAAG,CACH,EAKMxQ,GAASoM,GAAS,CACtB,KAAM,CAAE,UAAAp2B,EAAW,MAAAN,CAAK,EAAK02B,EACvB,CAAE,KAAA72B,EAAM,YAAAnF,EAAa,OAAAqP,CAAQ,EAAG/J,EAGhC+6B,EAAmB/B,GAAuBtC,CAAK,EAGrD,OAAAp2B,EAAU,cAAe06B,GAAW,CAElC,KAAM,CAAE,GAAAC,EAAI,KAAAtpC,EAAM,MAAA1B,CAAO,EAAG+qC,EAG5B,GAAI,CAACC,EAAG,MAAM,GAAK,CAAChrC,EAAM,yBAAyB,EAAG,OAGtD,MAAMukB,EAAc,CAAC,CAAE,KAAA5Z,EAAM,MAAA/S,CAAK,IAAO,CACvC,KAAM,CAAE,GAAAuS,CAAE,EAAKvS,EACThJ,EAAOoR,EAAM,WAAYmK,CAAE,EAGjC,GAAI,CAACvb,GAAQ,CAACkrB,EAAOlrB,EAAK,IAAI,GAAKA,EAAK,SAAU,OAGlD,MAAMjB,EAAOiB,EAAK,KAMlB,GAHI,CAACuuC,GAAmBxvC,CAAI,GAGxB,CAACqS,EAAM,+BAA+B,EAAEpR,CAAI,EAAG,OAInD,MAAMq8C,EAA4B,sBAAwB,QAAU,IAC9DC,EAAqBlrC,EAAM,iCAAiC,EAClE,GACE,CAACirC,GACAC,GAAsBv9C,EAAK,KAAOu9C,EAEnC,OAGFvgC,EAAK,IAAI,aAAejJ,EAAK,gBAC3BA,EAAK,gBAAgBopC,EAAkB,CAAE,GAAA3gC,CAAI,CAAA,CAC9C,EAGD,MAAM67B,EAAqBr7B,EAAK,MAAM,0BAA0B,EAC5Dq7B,GACFr7B,EAAK,SAAS,0BAA2B,CACvC,GAAI/b,EAAK,GACT,OAAQo3C,CAClB,CAAS,EAIH,MAAMrmC,EACJ,CAACsrC,GACDt9C,EAAK,KAAOqS,EAAM,iDAAiD,EACrE2K,EAAK,SAAS,qCAAsC,CAAE,GAAAR,CAAE,EAAIxK,CAAK,CAClE,EAEKwrC,EAAc,CAACxgC,EAAM/S,IAAU,CACnC,GAAI,CAAC+S,EAAK,IAAI,aAAc,OAE5B,GAAI,CAAE,GAAAR,CAAE,EAAKvS,EAGb,MAAMhJ,EAAO+b,EAAK,MAAM,WAAY,CAAE,GAAAR,CAAE,CAAE,EAC1C,GAAI,CAACvb,EAAM,OAGX,MAAMu3C,EAAmBx7B,EAAK,MAAM,wBAAwB,EACtDygC,EAAuBzgC,EAAK,MAAM,6BAA6B,EAC/D0gC,EAAc1gC,EAAK,MAAM,0BAA0B,EACzD,GAAIw7B,GAAoBiF,GAAwBC,EAAa,OAG7D,GAAI,CAAE,WAAA/G,EAAY,YAAAC,CAAa,EAAG55B,EAAK,IACvC,GAAI,CAAC25B,GAAc,CAACC,EAAa,OAGjC,MAAM0B,EAAmBt7B,EAAK,MAAM,8BAA8B,EAC5Du7B,EAAmBv7B,EAAK,MAAM,8BAA8B,EAI5DsyB,GADOruC,EAAK,YAAY,MAAM,GAAK,CAAE,GAClB,aAAe,GAOxC,GAJIquC,GAAe,GAAKA,GAAe,IACrC,CAACqH,EAAYC,CAAW,EAAI,CAACA,EAAaD,CAAU,GAGlD,CAACkE,GAAS55C,EAAK,IAAI,GAAK+b,EAAK,MAAM,2BAA2B,EAAG,CACnE,MAAMmzB,EAAS,KAAOwG,EACtBA,GAAcxG,EACdyG,GAAezG,CACvB,CAGM,MAAM+F,EAAmBU,EAAcD,EAGjCgH,GACH18C,EAAK,YAAY,MAAM,GAAK,CAAE,GAAE,aAAei1C,EAGlD,IAAI0H,EAAmB,KAAK,IAC1BtF,EACA,KAAK,IAAI1B,EAAa2B,CAAgB,CACvC,EACD,MAAM/f,EAAYxb,EAAK,KAAK,QAAQ,MAC9B6gC,EAAgB,KAAK,IACzBrlB,EAAYmlB,EACZC,CACD,EAGD5gC,EAAK,SAAS,0BAA2B,CACvC,GAAI/b,EAAK,GACT,OAAQ48C,CAChB,CAAO,CACF,EAEKC,EAAgB,CAAC,CAAE,KAAA9gC,KAAW,CAElCA,EAAK,IAAI,cAAgB,EAC1B,EAEK6+B,EAAwB,CAAC,CAAE,KAAA7+B,EAAM,OAAAtN,CAAM,IAAO,CAC9CA,EAAO,OAAO,MAAQ,SAG1BsN,EAAK,IAAI,cAAgB,GAC1B,EAEK+gC,EAA0B,CAAC,CAAE,KAAA/gC,EAAM,OAAAtN,CAAM,IAAO,CAEpDsN,EAAK,IAAI,WAAatN,EAAO,MAC7BsN,EAAK,IAAI,YAActN,EAAO,OAG9BsN,EAAK,IAAI,cAAgB,GACzBA,EAAK,IAAI,kBAAoB,GAG7BA,EAAK,SAAS,MAAM,CACrB,EAGDjJ,EAAK,eACH+I,EACE,CACE,gBAAiBghC,EACjB,gBAAiBA,EACjB,cAAelnB,EACf,iCAAkCmnB,EAClC,yBAA0BlC,CAC3B,EACD,CAAC,CAAE,KAAA7+B,EAAM,MAAA/S,KAAY,CAEd+S,EAAK,IAAI,eAGVA,EAAK,KAAK,QAAQ,SAGlBA,EAAK,IAAI,gBACXwgC,EAAYxgC,EAAM/S,CAAK,EACvB+S,EAAK,IAAI,cAAgB,IAGvBA,EAAK,IAAI,oBAEX,sBAAsB,IAAM,CAG1B,sBAAsB,IAAM,CAC1BA,EAAK,SAAS,mCAAoC,CAChD,GAAI/S,EAAM,EAC5B,CAAiB,CACjB,CAAe,CACf,CAAa,EAED+S,EAAK,IAAI,kBAAoB,KAEzC,CACA,CACK,CACL,CAAG,EAGM,CACL,QAAS,CAEP,kBAAmB,CAAC,GAAMiF,EAAK,OAAO,EAGtC,uBAAwB,CAAC,IAAM,GAAMA,EAAK,QAAQ,EAGlD,mBAAoB,CAAC,KAAMA,EAAK,GAAG,EAGnC,sBAAuB,CAAC,GAAIA,EAAK,GAAG,EAGpC,sBAAuB,CAAC,IAAKA,EAAK,GAAG,EAGrC,wBAAyB,CAAC,KAAMA,EAAK,GAAG,EAGxC,uBAAwB,CAAC,EAAGA,EAAK,GAAG,EAGpC,oBAAqB,CAAC,GAAOA,EAAK,OAAO,EAGzC,sCAAuC,CAAC,IAASA,EAAK,GAAG,EAGzD,kCAAmC,CAAC,KAAMA,EAAK,MAAM,EAGrD,uCAAwC,CAAC,GAAOA,EAAK,OAAO,EAG5D,uBAAwB,CAAC,GAAMA,EAAK,OAAO,EAG3C,yBAA0B,CAAC,IAAM,GAAMA,EAAK,QAAQ,CAC1D,CACG,CACH,EAGM/N,GACJ,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,IAC1DA,IACF,SAAS,cACP,IAAI,YAAY,wBAAyB,CAAE,OAAQw4B,EAAQ,CAAA,CAC5D,EC93DH;AAAA;AAAA;AAAA;AAAA,GAQA,MAAMsR,GAAgB,UAAW,CAE7B,KAAK,UAAY5/C,GAAK,CAClB6/C,EAAQ7/C,EAAE,KAAK,QAASspB,GAAY,CAChC,KAAK,YAAY,CAAE,GAAItpB,EAAE,KAAK,GAAI,QAASspB,EAAU,CACjE,CAAS,CACJ,EAGD,MAAMu2B,EAAU,CAAC99B,EAAStN,IAAO,CAC7B,KAAM,CAAE,KAAA7S,CAAI,EAAKmgB,EAEXhe,EAAS,IAAI,WACnBA,EAAO,UAAY,IAAM,CACrB0Q,EAAG1Q,EAAO,OAAO,QAAQ,QAAS,EAAE,EAAE,QAAQ,OAAQ,EAAE,CAAC,CAC5D,EACDA,EAAO,cAAcnC,CAAI,CAC5B,CACL,EAEM0sC,GAAS,CAAC,CAAE,UAAAhqB,EAAW,MAAAN,KAAY,CAErC,KAAM,CAAE,KAAAH,EAAM,aAAA6pB,EAAc,YAAAhvB,EAAa,OAAAqP,CAAQ,EAAG/J,EAE9C87B,EAAS,CAAC,CAAE,KAAA99C,EAAM,KAAAJ,CAAM,IAC1B,IAAI,QAAQhC,GAAW,CACnB,MAAMiuC,EAASH,EAAakS,EAAa,EACzC/R,EAAO,KAAK,CAAE,KAAAjsC,CAAI,EAAIkS,GAAQ,CAC1BlU,EAAQ,CAAE,KAAAoC,EAAM,KAAA8R,EAAM,EACtB+5B,EAAO,UAAW,CAClC,CAAa,CACb,CAAS,EAGCkS,EAAc,CAAE,EACtB,OAAAz7B,EAAU,kBAAmB,CAACzhB,EAAM,CAAE,MAAAoR,CAAK,IAAO,CACzCA,EAAM,uBAAuB,IAElCpR,EAAK,OACD,4BACA,IAAMk9C,EAAYl9C,EAAK,EAAE,GAAKk9C,EAAYl9C,EAAK,EAAE,EAAE,IACtD,EACDA,EAAK,OACD,uBACA,IACIk9C,EAAYl9C,EAAK,EAAE,GAAK,QAAQA,EAAK,QAAQ,WAAWk9C,EAAYl9C,EAAK,EAAE,EAAE,IAAI,EACxF,EACT,CAAK,EAEDyhB,EACI,wBACA,CAACuM,EAAqB,CAAE,MAAA5c,CAAO,IAC3B,IAAI,QAAQrU,GAAW,CACnBA,EAAQqU,EAAM,uBAAuB,CAAC,CACzC,CAAA,CACR,EAEDqQ,EACI,0BACA,CAAC1iB,EAAM,CAAE,KAAAiB,EAAM,MAAAoR,CAAO,IAClB,IAAI,QAAQrU,GAAW,CAEnB,GAAI,CAACqU,EAAM,uBAAuB,GAAM,CAAC8Z,EAAOnsB,CAAI,GAAK,CAAC,MAAM,QAAQA,CAAI,EACxE,OAAOhC,EAAQgC,CAAI,EAIvBm+C,EAAYl9C,EAAK,EAAE,EAAI,CACnB,SAAUA,EAAK,YAAa,EAC5B,KAAM,IACT,EAGD,QAAQ,KACHjB,aAAgB,KAAO,CAAC,CAAE,KAAM,KAAM,KAAAA,EAAM,EAAIA,GAAM,IAAIk+C,CAAM,CACrF,EAAkB,KAAKE,GAAa,CAChBD,EAAYl9C,EAAK,EAAE,EAAE,KACjBjB,aAAgB,KAAOo+C,EAAU,CAAC,EAAE,KAAOA,EAC/CpgD,EAAQgC,CAAI,CAChC,CAAiB,CACJ,CAAA,CACR,EAGD0iB,EAAU,cAAe06B,GAAW,CAEhC,KAAM,CAAE,GAAAC,EAAI,KAAAtpC,EAAM,MAAA1B,CAAO,EAAG+qC,EAGxB,CAACC,EAAG,cAAc,GAAK,CAAChrC,EAAM,uBAAuB,GAIzD0B,EAAK,eACD+I,EAAY,CACR,mBAAoB,CAAC,CAAE,KAAAE,EAAM,OAAAtN,KAAa,CAEtC,GAAI2C,EAAM,UAAU,EAChB,OAGJ,MAAMpR,EAAOoR,EAAM,WAAY3C,EAAO,EAAE,EACxC,GAAI,CAACzO,EAAM,OAGX,MAAMo9C,EAAQF,EAAYl9C,EAAK,EAAE,EAC3BgoB,EAAWo1B,EAAM,SACjBnsC,EAAOmsC,EAAM,KAGbtgD,EAAQ,KAAK,UAAU,CACzB,GAAIkD,EAAK,GACT,KAAMA,EAAK,KAAK,KAChB,KAAMA,EAAK,KAAK,KAChB,KAAMA,EAAK,KAAK,KAChB,SAAUgoB,EACV,KAAA/W,CACxB,CAAqB,EAGG8K,EAAK,IAAI,KACTA,EAAK,IAAI,KAAK,MAAQjf,EAItBif,EAAK,SAAS,mBAAoB,CAC9B,GAAI/b,EAAK,GACT,MAAAlD,CAC5B,CAAyB,CAER,EACD,gBAAiB,CAAC,CAAE,OAAA2R,KAAa,CAC7B,MAAMzO,EAAOoR,EAAM,WAAY3C,EAAO,EAAE,EACnCzO,GACL,OAAOk9C,EAAYl9C,EAAK,EAAE,CAC7B,CACJ,CAAA,CACJ,CACT,CAAK,EAEM,CACH,QAAS,CAEL,gBAAiB,CAAC,GAAMghB,EAAK,OAAO,CACvC,CACJ,CACL,EAGM/N,GAAY,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,IAC1EA,IACA,SAAS,cAAc,IAAI,YAAY,wBAAyB,CAAE,OAAQw4B,EAAM,CAAE,CAAC,ECtJvFgB,GAAe4Q,GAA0BC,GAAoCC,EAA0B,EACvG,MAAMC,GAAmB,IAErBxtC,EAAA,IAAA7G,EAAA,SAAA,CAEE,eAACgkC,GAAS,CAAA,cAAe,GAAM,aAAc,GAAM,UAAS,EAAA,CAAC,CAC/D,CAAA,ECXEsQ,GAAiB,IAEnB1tC,EAAA,KAACK,GAAI,CAAA,UAAU,yBACb,SAAA,CAAAJ,EAAAA,IAACK,IAAI,GAAI,EAAG,GAAI,EACd,gBAACF,GACC,CAAA,SAAA,CAAAH,EAAAA,IAAC0tC,GACC,CAAA,SAAA1tC,MAACI,GAAI,CAAA,UAAU,qBACb,SAACJ,EAAAA,IAAAK,GAAA,CACC,SAACL,MAAA2tC,GAAA,CAAU,GAAG,KAAK,SAAkB,qBAAA,CAAA,CACvC,CACF,CAAA,EACF,EACA3tC,EAAAA,IAAC4tC,GAAS,CAAA,UAAU,OAClB,SAAA5tC,EAAA,IAACP,GAAA,CACC,KAAK,mBACL,KAAK,sCACL,UAAU,2EAAA,CAAA,CAEd,CAAA,CAAA,CAAA,CACF,CACF,CAAA,QACCY,GAAI,CAAA,GAAI,EAAG,GAAI,EACd,gBAACF,GACC,CAAA,SAAA,CAAAH,EAAAA,IAAC0tC,GACC,CAAA,SAAA1tC,MAACI,GAAI,CAAA,UAAU,qBACb,SAACJ,EAAAA,IAAAK,GAAA,CACC,SAACL,MAAA2tC,GAAA,CAAU,GAAG,KAAK,SAAgB,mBAAA,CAAA,CACrC,CACF,CAAA,EACF,QACCC,GAAS,CAAA,UAAU,OAClB,SAAA5tC,EAAA,IAACwtC,KAAiB,CACpB,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,ECpCE/tC,GAAe,IAGfM,EAAA,KAAA5G,WAAA,CAAA,SAAA,CAAC6G,EAAAA,IAAA6tC,GAAA,CAAa,MAAM,cAAe,CAAA,QAClCJ,GAAe,CAAA,CAAA,CAAA,EAClB","x_google_ignoreList":[0,1,2,3,4,5,8,9,10,11,12]}