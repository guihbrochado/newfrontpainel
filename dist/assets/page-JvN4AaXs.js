import{r as a,j as t,g as y}from"./index-BCS0cig_.js";import{C as I}from"./ComponentContainerCard-Cb_e9E7o.js";import{A as g}from"./Alert-DNG6lhNR.js";import{F as r}from"./Form-Bfo2v19v.js";import{B as T}from"./Button-DeQEhl8G.js";import{T as E}from"./Table-2xNl8ZEB.js";import"./hook-8yLRWsFC.js";import"./extends-CF3RwP-h.js";import"./Anchor-DDbQbNtO.js";import"./Button-BN2bDLjf.js";import"./FormCheck-DCqVgo34.js";import"./FormContext-C2U0W2FA.js";import"./FormCheckInput-DMKv9iTc.js";import"./ElementChildren-D4oQkQsm.js";import"./FormControl-DyBytbGT.js";import"./FormLabel-D8w_mrTU.js";import"./FormSelect-DmuEe_mQ.js";const A=(o,s)=>s===0?"0%":(o/s*100).toFixed(2)+"%",f=o=>{if(!o)return"N/A";const s=new Date(o),i=String(s.getDate()).padStart(2,"0"),d=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear();return`${i}/${d}/${l}`},H=()=>{const[o,s]=a.useState([]),[i,d]=a.useState(""),[l,v]=a.useState(""),[c,C]=a.useState(""),[h,p]=a.useState(""),[x,j]=a.useState(""),[D,m]=a.useState(!1),S="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api",u=async()=>{m(!0);const e=localStorage.getItem("token");console.log("Parâmetros enviados:",{startDate:i,endDate:l,position:c});try{const n=await y.get(`${S}/banners/reports`,{params:{start_date:i,end_date:l,position:c,timestamp:new Date().getTime()},headers:{Authorization:`Bearer ${e}`,"Cache-Control":"no-cache"}});console.log("Dados recebidos:",n.data),s(n.data.data),j(n.data.message||""),p("")}catch(n){p("Erro ao carregar os relatórios."),console.error("Erro na requisição:",n),j("")}m(!1)};return a.useEffect(()=>{u()},[]),t.jsxs(I,{title:"Análises de Banners",children:[h&&t.jsx(g,{variant:"danger",children:h}),x&&!h&&t.jsx(g,{variant:"info",children:x})," ",t.jsx(r,{className:"mb-3",children:t.jsxs("div",{className:"d-flex gap-2",children:[t.jsxs(r.Group,{controlId:"startDate",children:[t.jsx(r.Label,{children:"Data Inicial"}),t.jsx(r.Control,{type:"date",value:i,onChange:e=>d(e.target.value)})]}),t.jsxs(r.Group,{controlId:"endDate",children:[t.jsx(r.Label,{children:"Data Final"}),t.jsx(r.Control,{type:"date",value:l,onChange:e=>v(e.target.value)})]}),t.jsxs(r.Group,{controlId:"position",children:[t.jsx(r.Label,{children:"Posição"}),t.jsxs(r.Control,{as:"select",value:c,onChange:e=>C(e.target.value),children:[t.jsx("option",{value:"",children:"Todas"}),t.jsx("option",{value:"topo",children:"Topo"}),t.jsx("option",{value:"lateral",children:"Lateral"}),t.jsx("option",{value:"entre_conteudos",children:"Entre Conteúdos"}),t.jsx("option",{value:"rodape",children:"Rodapé"})]})]}),t.jsx(T,{variant:"primary",className:"align-self-end",onClick:u,children:"Filtrar"})]})}),D?t.jsx("p",{children:"Carregando..."}):t.jsxs(E,{striped:!0,bordered:!0,hover:!0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Título"}),t.jsx("th",{children:"Posição"}),t.jsx("th",{children:"Clique Total"}),t.jsx("th",{children:"Impressões"}),t.jsx("th",{children:"CTR (%)"}),t.jsx("th",{children:"Data Inicial"}),t.jsx("th",{children:"Data Final"})]})}),t.jsx("tbody",{children:o.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"text-center",children:"Nenhum dado encontrado."})}):o.map((e,n)=>t.jsxs("tr",{children:[t.jsx("td",{children:e.id}),t.jsx("td",{children:e.title}),t.jsx("td",{children:e.position}),t.jsx("td",{children:e.clicks}),t.jsx("td",{children:e.views}),t.jsx("td",{children:A(e.clicks,e.views)}),t.jsx("td",{children:f(e.start_date)}),t.jsx("td",{children:f(e.end_date)})]},n))})]})]})};export{H as default};
//# sourceMappingURL=page-JvN4AaXs.js.map
