import{r as W,o as ei,P as j,j as F,C as on,R as Dt,d as be,L as Vn,c as Hn,e as qn,f as Wn}from"./index-BCS0cig_.js";import{P as ls}from"./PageMetaData-wG5U-ou6.js";import{I as kn}from"./IconifyIcon-JVia4Tlw.js";function Je(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,o)}c((r=r.apply(e,t||[])).next())})}function et(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(u){return o([c,u])}}function o(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function jn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Yn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var cs=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ut(e,t){var n=us(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function us(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=cs.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var ds=[".DS_Store","Thumbs.db"];function fs(e){return Je(this,void 0,void 0,function(){return et(this,function(t){return vt(e)&&ps(e.dataTransfer)?[2,hs(e.dataTransfer,e.type)]:Es(e)?[2,ms(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,gs(e)]:[2,[]]})})}function ps(e){return vt(e)}function Es(e){return vt(e)&&vt(e.target)}function vt(e){return typeof e=="object"&&e!==null}function ms(e){return ln(e.target.files).map(function(t){return ut(t)})}function gs(e){return Je(this,void 0,void 0,function(){var t;return et(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return ut(r)})]}})})}function hs(e,t){return Je(this,void 0,void 0,function(){var n,r;return et(this,function(i){switch(i.label){case 0:return e.items?(n=ln(e.items).filter(function(s){return s.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(Is))]):[3,2];case 1:return r=i.sent(),[2,$n(ti(r))];case 2:return[2,$n(ln(e.files).map(function(s){return ut(s)}))]}})})}function $n(e){return e.filter(function(t){return ds.indexOf(t.name)===-1})}function ln(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function Is(e){if(typeof e.webkitGetAsEntry!="function")return zn(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ni(t):zn(e)}function ti(e){return e.reduce(function(t,n){return Yn(Yn([],jn(t),!1),jn(Array.isArray(n)?ti(n):[n]),!1)},[])}function zn(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=ut(t);return Promise.resolve(n)}function _s(e){return Je(this,void 0,void 0,function(){return et(this,function(t){return[2,e.isDirectory?ni(e):Ts(e)]})})}function ni(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function s(){var a=this;t.readEntries(function(l){return Je(a,void 0,void 0,function(){var o,c,u;return et(this,function(d){switch(d.label){case 0:if(l.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return o=d.sent(),n(o),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(l.map(_s)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(l){r(l)})}s()})}function Ts(e){return Je(this,void 0,void 0,function(){return et(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var s=ut(i,e.fullPath);n(s)},function(i){r(i)})})]})})}var Rs=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(a){var l=a.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0};function Xn(e){return Ds(e)||Os(e)||ii(e)||ys()}function ys(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ds(e){if(Array.isArray(e))return cn(e)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qn(Object(n),!0).forEach(function(r){ri(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return ws(e)||Ss(e,t)||ii(e,t)||As()}function As(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(e,t){if(e){if(typeof e=="string")return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}}function cn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ss(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,l;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(o){s=!0,l=o}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function ws(e){if(Array.isArray(e))return e}var vs="file-invalid-type",bs="file-too-large",Ps="file-too-small",Ms="too-many-files",Cs=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:vs,message:"File type must be ".concat(n)}},Zn=function(t){return{code:bs,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Jn=function(t){return{code:Ps,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Ls={code:Ms,message:"Too many files"};function si(e,t){var n=e.type==="application/x-moz-file"||Rs(e,t);return[n,n?null:Cs(t)]}function ai(e,t,n){if(Ne(e.size))if(Ne(t)&&Ne(n)){if(e.size>n)return[!1,Zn(n)];if(e.size<t)return[!1,Jn(t)]}else{if(Ne(t)&&e.size<t)return[!1,Jn(t)];if(Ne(n)&&e.size>n)return[!1,Zn(n)]}return[!0,null]}function Ne(e){return e!=null}function Ns(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,s=e.multiple,a=e.maxFiles,l=e.validator;return!s&&t.length>1||s&&a>=1&&t.length>a?!1:t.every(function(o){var c=si(o,n),u=lt(c,1),d=u[0],E=ai(o,r,i),g=lt(E,1),f=g[0],h=l?l(o):null;return d&&f&&!h})}function bt(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function mt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function er(e){e.preventDefault()}function Gs(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Fs(e){return e.indexOf("Edge/")!==-1}function xs(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Gs(e)||Fs(e)}function Re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.some(function(l){return!bt(r)&&l&&l.apply(void 0,[r].concat(s)),bt(r)})}}function Us(){return"showOpenFilePicker"in window}function Bs(e){if(Ne(e)){var t=Object.entries(e).filter(function(n){var r=lt(n,2),i=r[0],s=r[1],a=!0;return oi(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(s)||!s.every(li))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(n,r){var i=lt(r,2),s=i[0],a=i[1];return Kn(Kn({},n),{},ri({},s,a))},{});return[{description:"Files",accept:t}]}return e}function Vs(e){if(Ne(e))return Object.entries(e).reduce(function(t,n){var r=lt(n,2),i=r[0],s=r[1];return[].concat(Xn(t),[i],Xn(s))},[]).filter(function(t){return oi(t)||li(t)}).join(",")}function Hs(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function qs(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function oi(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function li(e){return/^.*\.[\w]+$/.test(e)}var Ws=["children"],ks=["open"],js=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Ys=["refKey","onChange","onClick"];function $s(e){return Qs(e)||Xs(e)||ci(e)||zs()}function zs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xs(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qs(e){if(Array.isArray(e))return un(e)}function Kt(e,t){return Js(e)||Zs(e,t)||ci(e,t)||Ks()}function Ks(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(e,t){if(e){if(typeof e=="string")return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}}function un(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zs(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,l;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(o){s=!0,l=o}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function Js(e){if(Array.isArray(e))return e}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(r){dn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){if(e==null)return{};var n=ea(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ea(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Gt=W.forwardRef(function(e,t){var n=e.children,r=Pt(e,Ws),i=ta(r),s=i.open,a=Pt(i,ks);return W.useImperativeHandle(t,function(){return{open:s}},[s]),ei.createElement(W.Fragment,null,n(Y(Y({},a),{},{open:s})))});Gt.displayName="Dropzone";var ui={disabled:!1,getFilesFromEvent:fs,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Gt.defaultProps=ui;Gt.propTypes={children:j.func,accept:j.objectOf(j.arrayOf(j.string)),multiple:j.bool,preventDropOnDocument:j.bool,noClick:j.bool,noKeyboard:j.bool,noDrag:j.bool,noDragEventsBubbling:j.bool,minSize:j.number,maxSize:j.number,maxFiles:j.number,disabled:j.bool,getFilesFromEvent:j.func,onFileDialogCancel:j.func,onFileDialogOpen:j.func,useFsAccessApi:j.bool,autoFocus:j.bool,onDragEnter:j.func,onDragLeave:j.func,onDragOver:j.func,onDrop:j.func,onDropAccepted:j.func,onDropRejected:j.func,onError:j.func,validator:j.func};var fn={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ta(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Y(Y({},ui),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,s=t.maxSize,a=t.minSize,l=t.multiple,o=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,E=t.onDrop,g=t.onDropAccepted,f=t.onDropRejected,h=t.onFileDialogCancel,I=t.onFileDialogOpen,T=t.useFsAccessApi,p=t.autoFocus,m=t.preventDropOnDocument,y=t.noClick,D=t.noKeyboard,v=t.noDrag,N=t.noDragEventsBubbling,A=t.onError,w=t.validator,G=W.useMemo(function(){return Vs(n)},[n]),M=W.useMemo(function(){return Bs(n)},[n]),C=W.useMemo(function(){return typeof I=="function"?I:nr},[I]),q=W.useMemo(function(){return typeof h=="function"?h:nr},[h]),O=W.useRef(null),x=W.useRef(null),R=W.useReducer(na,fn),S=Kt(R,2),L=S[0],b=S[1],H=L.isFocused,k=L.isFileDialogActive,he=W.useRef(typeof window<"u"&&window.isSecureContext&&T&&Us()),Me=function(){!he.current&&k&&setTimeout(function(){if(x.current){var U=x.current.files;U.length||(b({type:"closeDialog"}),q())}},300)};W.useEffect(function(){return window.addEventListener("focus",Me,!1),function(){window.removeEventListener("focus",Me,!1)}},[x,k,q,he]);var te=W.useRef([]),ke=function(U){O.current&&O.current.contains(U.target)||(U.preventDefault(),te.current=[])};W.useEffect(function(){return m&&(document.addEventListener("dragover",er,!1),document.addEventListener("drop",ke,!1)),function(){m&&(document.removeEventListener("dragover",er),document.removeEventListener("drop",ke))}},[O,m]),W.useEffect(function(){return!r&&p&&O.current&&O.current.focus(),function(){}},[O,p,r]);var V=W.useCallback(function(P){A?A(P):console.error(P)},[A]),J=W.useCallback(function(P){P.preventDefault(),P.persist(),pt(P),te.current=[].concat($s(te.current),[P.target]),mt(P)&&Promise.resolve(i(P)).then(function(U){if(!(bt(P)&&!N)){var Q=U.length,ie=Q>0&&Ns({files:U,accept:G,minSize:a,maxSize:s,multiple:l,maxFiles:o,validator:w}),ue=Q>0&&!ie;b({isDragAccept:ie,isDragReject:ue,isDragActive:!0,type:"setDraggedFiles"}),c&&c(P)}}).catch(function(U){return V(U)})},[i,c,V,N,G,a,s,l,o,w]),fe=W.useCallback(function(P){P.preventDefault(),P.persist(),pt(P);var U=mt(P);if(U&&P.dataTransfer)try{P.dataTransfer.dropEffect="copy"}catch{}return U&&d&&d(P),!1},[d,N]),De=W.useCallback(function(P){P.preventDefault(),P.persist(),pt(P);var U=te.current.filter(function(ie){return O.current&&O.current.contains(ie)}),Q=U.indexOf(P.target);Q!==-1&&U.splice(Q,1),te.current=U,!(U.length>0)&&(b({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),mt(P)&&u&&u(P))},[O,u,N]),ee=W.useCallback(function(P,U){var Q=[],ie=[];P.forEach(function(ue){var nt=si(ue,G),$e=Kt(nt,2),kt=$e[0],jt=$e[1],Yt=ai(ue,a,s),Et=Kt(Yt,2),$t=Et[0],zt=Et[1],Xt=w?w(ue):null;if(kt&&$t&&!Xt)Q.push(ue);else{var Qt=[jt,zt];Xt&&(Qt=Qt.concat(Xt)),ie.push({file:ue,errors:Qt.filter(function(os){return os})})}}),(!l&&Q.length>1||l&&o>=1&&Q.length>o)&&(Q.forEach(function(ue){ie.push({file:ue,errors:[Ls]})}),Q.splice(0)),b({acceptedFiles:Q,fileRejections:ie,type:"setFiles"}),E&&E(Q,ie,U),ie.length>0&&f&&f(ie,U),Q.length>0&&g&&g(Q,U)},[b,l,G,a,s,o,E,g,f,w]),Ae=W.useCallback(function(P){P.preventDefault(),P.persist(),pt(P),te.current=[],mt(P)&&Promise.resolve(i(P)).then(function(U){bt(P)&&!N||ee(U,P)}).catch(function(U){return V(U)}),b({type:"reset"})},[i,ee,V,N]),je=W.useCallback(function(){if(he.current){b({type:"openDialog"}),C();var P={multiple:l,types:M};window.showOpenFilePicker(P).then(function(U){return i(U)}).then(function(U){ee(U,null),b({type:"closeDialog"})}).catch(function(U){Hs(U)?(q(U),b({type:"closeDialog"})):qs(U)?(he.current=!1,x.current?(x.current.value=null,x.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):V(U)});return}x.current&&(b({type:"openDialog"}),C(),x.current.value=null,x.current.click())},[b,C,q,T,ee,V,M,l]),Fn=W.useCallback(function(P){!O.current||!O.current.isEqualNode(P.target)||(P.key===" "||P.key==="Enter"||P.keyCode===32||P.keyCode===13)&&(P.preventDefault(),je())},[O,je]),xn=W.useCallback(function(){b({type:"focus"})},[]),Un=W.useCallback(function(){b({type:"blur"})},[]),Bn=W.useCallback(function(){y||(xs()?setTimeout(je,0):je())},[y,je]),Ye=function(U){return r?null:U},Wt=function(U){return D?null:Ye(U)},ft=function(U){return v?null:Ye(U)},pt=function(U){N&&U.stopPropagation()},is=W.useMemo(function(){return function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=P.refKey,Q=U===void 0?"ref":U,ie=P.role,ue=P.onKeyDown,nt=P.onFocus,$e=P.onBlur,kt=P.onClick,jt=P.onDragEnter,Yt=P.onDragOver,Et=P.onDragLeave,$t=P.onDrop,zt=Pt(P,js);return Y(Y(dn({onKeyDown:Wt(Re(ue,Fn)),onFocus:Wt(Re(nt,xn)),onBlur:Wt(Re($e,Un)),onClick:Ye(Re(kt,Bn)),onDragEnter:ft(Re(jt,J)),onDragOver:ft(Re(Yt,fe)),onDragLeave:ft(Re(Et,De)),onDrop:ft(Re($t,Ae)),role:typeof ie=="string"&&ie!==""?ie:"presentation"},Q,O),!r&&!D?{tabIndex:0}:{}),zt)}},[O,Fn,xn,Un,Bn,J,fe,De,Ae,D,v,r]),ss=W.useCallback(function(P){P.stopPropagation()},[]),as=W.useMemo(function(){return function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=P.refKey,Q=U===void 0?"ref":U,ie=P.onChange,ue=P.onClick,nt=Pt(P,Ys),$e=dn({accept:G,multiple:l,type:"file",style:{display:"none"},onChange:Ye(Re(ie,Ae)),onClick:Ye(Re(ue,ss)),tabIndex:-1},Q,x);return Y(Y({},$e),nt)}},[x,n,l,Ae,r]);return Y(Y({},L),{},{isFocused:H&&!r,getRootProps:is,getInputProps:as,rootRef:O,inputRef:x,open:Ye(je)})}function na(e,t){switch(t.type){case"focus":return Y(Y({},e),{},{isFocused:!0});case"blur":return Y(Y({},e),{},{isFocused:!1});case"openDialog":return Y(Y({},fn),{},{isFileDialogActive:!0});case"closeDialog":return Y(Y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Y(Y({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Y(Y({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Y({},fn);default:return e}}function nr(){}function ra(e=!0){const[t,n]=W.useState([]),r=(a,l)=>{let o=a;e&&(a.map(c=>Object.assign(c,{preview:c.type.split("/")[0]==="image"?URL.createObjectURL(c):null,formattedSize:i(c.size)})),o=[...t],o.push(...a),n(o)),l&&l(o)},i=(a,l=2)=>{if(a===0)return"0 Bytes";const o=1024,c=l<0?0:l,u=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(o));return parseFloat((a/Math.pow(o,d)).toFixed(c))+" "+u[d]};return{selectedFiles:t,handleAcceptedFiles:r,removeFile:a=>{const l=[...t];l.splice(l.indexOf(a),1),n(l)}}}const ia=({showPreview:e=!0,onFileUpload:t,icon:n,extraText:r,text:i})=>{const{selectedFiles:s,handleAcceptedFiles:a,removeFile:l}=ra(e);return F.jsxs(F.Fragment,{children:[F.jsx(Gt,{onDrop:o=>a(o,t),children:({getRootProps:o,getInputProps:c})=>F.jsx("div",{className:"dropzone d-flex justify-content-center align-items-center",style:{height:"250px"},children:F.jsxs("div",{className:"dz-message needsclick",...o(),children:[F.jsx("input",{...c()}),n&&F.jsx(kn,{icon:n,className:"text-muted h1"}),F.jsx("h3",{children:i}),F.jsx("span",{className:"text-muted fs-13",children:r})]})})}),F.jsx("div",{className:"dropzone-previews mt-3",children:(s||[]).map((o,c)=>{const u=o.name.substr(o.name.lastIndexOf(".")+1);return F.jsx(on,{className:"mt-1 mb-0 shadow-none border",children:F.jsx("div",{className:"p-2",children:F.jsxs(Dt,{className:"align-items-center",children:[o.preview&&F.jsx(be,{xs:"auto",children:F.jsx("img",{"data-dz-thumbnail":"",className:"thumb-xl rounded rounded bg-light",alt:o.name,src:o.preview})}),!o.preview&&F.jsx(be,{xs:"auto",children:F.jsx("div",{className:"avatar-sm",children:F.jsx("span",{className:"avatar-title bg-primary rounded",children:u.toUpperCase()})})}),F.jsxs(be,{className:"ps-0",children:[F.jsx(Vn,{to:"",className:"text-muted fw-bold",children:o.name}),F.jsx("p",{className:"mb-0",children:F.jsx("strong",{children:o.formattedSize})})]}),F.jsx(be,{className:"text-end",children:F.jsx(Vn,{to:"",className:"btn btn-link btn-lg text-muted shadow-none",children:F.jsx(kn,{icon:"fa6-solid:x",className:"text-danger",onClick:()=>l(o)})})})]})})},c+"-file")})})]})};/*!
 * FilePond 4.31.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const sa=e=>e instanceof HTMLElement,aa=(e,t=[],n=[])=>{const r={...e},i=[],s=[],a=()=>({...r}),l=()=>{const f=[...i];return i.length=0,f},o=()=>{const f=[...s];s.length=0,f.forEach(({type:h,data:I})=>{c(h,I)})},c=(f,h,I)=>{if(I&&!document.hidden){s.push({type:f,data:h});return}g[f]&&g[f](h),i.push({type:f,data:h})},u=(f,...h)=>E[f]?E[f](...h):null,d={getState:a,processActionQueue:l,processDispatchQueue:o,dispatch:c,query:u};let E={};t.forEach(f=>{E={...f(r),...E}});let g={};return n.forEach(f=>{g={...f(c,u,r),...g}}),d},oa=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},$=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Pe=e=>{const t={};return $(e,n=>{oa(t,n,e[n])}),t},K=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},la="http://www.w3.org/2000/svg",ca=["svg","path"],rr=e=>ca.includes(e),Mt=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=rr(e)?document.createElementNS(la,e):document.createElement(e);return t&&(rr(e)?K(r,"class",t):r.className=t),$(n,(i,s)=>{K(r,i,s)}),r},ua=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},da=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),fa=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),pa=typeof window<"u"&&typeof window.document<"u",di=()=>pa,Ea=di()?Mt("svg"):{},ma="children"in Ea?e=>e.children.length:e=>e.childNodes.length,fi=(e,t,n,r)=>{const i=n[0]||e.left,s=n[1]||e.top,a=i+e.width,l=s+e.height*(r[1]||1),o={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:s,right:a,bottom:l}};return t.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{ir(o.inner,{...c.inner}),ir(o.outer,{...c.outer})}),sr(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,sr(o.outer),o},ir=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},sr=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Ge=e=>typeof e=="number",ga=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,ha=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,s=0,a=!1;const c=Pe({interpolate:(u,d)=>{if(a)return;if(!(Ge(r)&&Ge(i))){a=!0,s=0;return}const E=-(i-r)*e;s+=E/n,i+=s,s*=t,ga(i,r,s)||d?(i=r,s=0,a=!0,c.onupdate(i),c.oncomplete(i)):c.onupdate(i)},target:{set:u=>{if(Ge(u)&&!Ge(i)&&(i=u),r===null&&(r=u,i=u),r=u,i===r||typeof r>"u"){a=!0,s=0,c.onupdate(i),c.oncomplete(i);return}a=!1},get:()=>r},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return c},Ia=e=>e<.5?2*e*e:-1+(4-2*e)*e,_a=({duration:e=500,easing:t=Ia,delay:n=0}={})=>{let r=null,i,s,a=!0,l=!1,o=null;const u=Pe({interpolate:(d,E)=>{a||o===null||(r===null&&(r=d),!(d-r<n)&&(i=d-r-n,i>=e||E?(i=1,s=l?0:1,u.onupdate(s*o),u.oncomplete(s*o),a=!0):(s=i/e,u.onupdate((i>=0?t(l?1-s:s):0)*o))))},target:{get:()=>l?0:o,set:d=>{if(o===null){o=d,u.onupdate(d),u.oncomplete(d);return}d<o?(o=1,l=!0):(l=!1,o=d),a=!1,r=null}},resting:{get:()=>a},onupdate:d=>{},oncomplete:d=>{}});return u},ar={spring:ha,tween:_a},Ta=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,s=typeof r=="object"?{...r}:{};return ar[i]?ar[i](s):null},On=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(s=>{let a=s,l=()=>n[s],o=c=>n[s]=c;typeof s=="object"&&(a=s.key,l=s.getter||l,o=s.setter||o),!(i[a]&&!r)&&(i[a]={get:l,set:o})})})},Ra=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},s=[];return $(e,(a,l)=>{const o=Ta(l);if(!o)return;o.onupdate=u=>{t[a]=u},o.target=i[a],On([{key:a,setter:u=>{o.target!==u&&(o.target=u)},getter:()=>t[a]}],[n,r],t,!0),s.push(o)}),{write:a=>{let l=document.hidden,o=!0;return s.forEach(c=>{c.resting||(o=!1),c.interpolate(a,l)}),o},destroy:()=>{}}},ya=e=>(t,n)=>{e.addEventListener(t,n)},Oa=e=>(t,n)=>{e.removeEventListener(t,n)},Da=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:s})=>{const a=[],l=ya(s.element),o=Oa(s.element);return r.on=(c,u)=>{a.push({type:c,fn:u}),l(c,u)},r.off=(c,u)=>{a.splice(a.findIndex(d=>d.type===c&&d.fn===u),1),o(c,u)},{write:()=>!0,destroy:()=>{a.forEach(c=>{o(c.type,c.fn)})}}},Aa=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{On(e,n,t)},se=e=>e!=null,Sa={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},wa=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const s={...t},a={};On(e,[n,r],t);const l=()=>[t.translateX||0,t.translateY||0],o=()=>[t.scaleX||0,t.scaleY||0],c=()=>i.rect?fi(i.rect,i.childViews,l(),o()):null;return n.rect={get:c},r.rect={get:c},e.forEach(u=>{t[u]=typeof s[u]>"u"?Sa[u]:s[u]}),{write:()=>{if(va(a,t))return ba(i.element,t),Object.assign(a,{...t}),!0},destroy:()=>{}}},va=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},ba=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:s,scaleY:a,rotateX:l,rotateY:o,rotateZ:c,originX:u,originY:d,width:E,height:g})=>{let f="",h="";(se(u)||se(d))&&(h+=`transform-origin: ${u||0}px ${d||0}px;`),se(n)&&(f+=`perspective(${n}px) `),(se(r)||se(i))&&(f+=`translate3d(${r||0}px, ${i||0}px, 0) `),(se(s)||se(a))&&(f+=`scale3d(${se(s)?s:1}, ${se(a)?a:1}, 1) `),se(c)&&(f+=`rotateZ(${c}rad) `),se(l)&&(f+=`rotateX(${l}rad) `),se(o)&&(f+=`rotateY(${o}rad) `),f.length&&(h+=`transform:${f};`),se(t)&&(h+=`opacity:${t};`,t===0&&(h+="visibility:hidden;"),t<1&&(h+="pointer-events:none;")),se(g)&&(h+=`height:${g}px;`),se(E)&&(h+=`width:${E}px;`);const I=e.elementCurrentStyle||"";(h.length!==I.length||h!==I)&&(e.style.cssText=h,e.elementCurrentStyle=h)},Pa={styles:wa,listeners:Da,animations:Ra,apis:Aa},or=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),Z=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:s=()=>{},destroy:a=()=>{},filterFrameActionsForChild:l=(g,f)=>f,didCreateView:o=()=>{},didWriteView:c=()=>{},ignoreRect:u=!1,ignoreRectUpdate:d=!1,mixins:E=[]}={})=>(g,f={})=>{const h=Mt(e,`filepond--${t}`,n),I=window.getComputedStyle(h,null),T=or();let p=null,m=!1;const y=[],D=[],v={},N={},A=[i],w=[r],G=[a],M=()=>h,C=()=>y.concat(),q=()=>v,O=V=>(J,fe)=>J(V,fe),x=()=>p||(p=fi(T,y,[0,0],[1,1]),p),R=()=>I,S=()=>{p=null,y.forEach(fe=>fe._read()),!(d&&T.width&&T.height)&&or(T,h,I);const J={root:te,props:f,rect:T};w.forEach(fe=>fe(J))},L=(V,J,fe)=>{let De=J.length===0;return A.forEach(ee=>{ee({props:f,root:te,actions:J,timestamp:V,shouldOptimize:fe})===!1&&(De=!1)}),D.forEach(ee=>{ee.write(V)===!1&&(De=!1)}),y.filter(ee=>!!ee.element.parentNode).forEach(ee=>{ee._write(V,l(ee,J),fe)||(De=!1)}),y.forEach((ee,Ae)=>{ee.element.parentNode||(te.appendChild(ee.element,Ae),ee._read(),ee._write(V,l(ee,J),fe),De=!1)}),m=De,c({props:f,root:te,actions:J,timestamp:V}),De},b=()=>{D.forEach(V=>V.destroy()),G.forEach(V=>{V({root:te,props:f})}),y.forEach(V=>V._destroy())},H={element:{get:M},style:{get:R},childViews:{get:C}},k={...H,rect:{get:x},ref:{get:q},is:V=>t===V,appendChild:ua(h),createChildView:O(g),linkView:V=>(y.push(V),V),unlinkView:V=>{y.splice(y.indexOf(V),1)},appendChildView:da(h,y),removeChildView:fa(h,y),registerWriter:V=>A.push(V),registerReader:V=>w.push(V),registerDestroyer:V=>G.push(V),invalidateLayout:()=>h.layoutCalculated=!1,dispatch:g.dispatch,query:g.query},he={element:{get:M},childViews:{get:C},rect:{get:x},resting:{get:()=>m},isRectIgnored:()=>u,_read:S,_write:L,_destroy:b},Me={...H,rect:{get:()=>T}};Object.keys(E).sort((V,J)=>V==="styles"?1:J==="styles"?-1:0).forEach(V=>{const J=Pa[V]({mixinConfig:E[V],viewProps:f,viewState:N,viewInternalAPI:k,viewExternalAPI:he,view:Pe(Me)});J&&D.push(J)});const te=Pe(k);s({root:te,props:f});const ke=ma(h);return y.forEach((V,J)=>{te.appendChild(V.element,ke+J)}),o(te),Pe(he)},Ma=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],s=1e3/n;let a=null,l=null,o=null,c=null;const u=()=>{document.hidden?(o=()=>window.setTimeout(()=>d(performance.now()),s),c=()=>window.clearTimeout(l)):(o=()=>window.requestAnimationFrame(d),c=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{c&&c(),u(),d(performance.now())});const d=E=>{l=o(d),a||(a=E);const g=E-a;g<=s||(a=E-g%s,i.readers.forEach(f=>f()),i.writers.forEach(f=>f(E)))};return u(),d(performance.now()),{pause:()=>{c(l)}}},oe=(e,t)=>({root:n,props:r,actions:i=[],timestamp:s,shouldOptimize:a})=>{i.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:r,action:l.data,timestamp:s,shouldOptimize:a})),t&&t({root:n,props:r,actions:i,timestamp:s,shouldOptimize:a})},lr=(e,t)=>t.parentNode.insertBefore(e,t),cr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Ft=e=>Array.isArray(e),Se=e=>e==null,Ca=e=>e.trim(),xt=e=>""+e,La=(e,t=",")=>Se(e)?[]:Ft(e)?e:xt(e).split(t).map(Ca).filter(n=>n.length),pi=e=>typeof e=="boolean",Ei=e=>pi(e)?e:e==="true",ae=e=>typeof e=="string",mi=e=>Ge(e)?e:ae(e)?xt(e).replace(/[a-z]+/gi,""):0,At=e=>parseInt(mi(e),10),ur=e=>parseFloat(mi(e)),tt=e=>Ge(e)&&isFinite(e)&&Math.floor(e)===e,dr=(e,t=1e3)=>{if(tt(e))return e;let n=xt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),At(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),At(n)*t):At(n)},Fe=e=>typeof e=="function",Na=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},fr={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Ga=e=>{const t={};return t.url=ae(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},$(fr,n=>{t[n]=Fa(n,e[n],fr[n],t.timeout,t.headers)}),t.process=e.process||ae(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Fa=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const s={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(ae(t))return s.url=t,s;if(Object.assign(s,t),ae(s.headers)){const a=s.headers.split(/:(.+)/);s.headers={header:a[0],value:a[1]}}return s.withCredentials=Ei(s.withCredentials),s},xa=e=>Ga(e),Ua=e=>e===null,re=e=>typeof e=="object"&&e!==null,Ba=e=>re(e)&&ae(e.url)&&re(e.process)&&re(e.revert)&&re(e.restore)&&re(e.fetch),pn=e=>Ft(e)?"array":Ua(e)?"null":tt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Ba(e)?"api":typeof e,Va=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Ha={array:La,boolean:Ei,int:e=>pn(e)==="bytes"?dr(e):At(e),number:ur,float:ur,bytes:dr,string:e=>Fe(e)?e:xt(e),function:e=>Na(e),serverapi:xa,object:e=>{try{return JSON.parse(Va(e))}catch{return null}}},qa=(e,t)=>Ha[t](e),gi=(e,t,n)=>{if(e===t)return e;let r=pn(e);if(r!==n){const i=qa(e,n);if(r=pn(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},Wa=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=gi(r,e,t)}}},ka=e=>{const t={};return $(e,n=>{const r=e[n];t[n]=Wa(r[0],r[1])}),Pe(t)},ja=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:ka(e)}),Ut=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Ya=(e,t)=>{const n={};return $(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Ut(r,"_").toUpperCase()}`,{value:i})}}}),n},$a=e=>(t,n,r)=>{const i={};return $(e,s=>{const a=Ut(s,"_").toUpperCase();i[`SET_${a}`]=l=>{try{r.options[s]=l.value}catch{}t(`DID_SET_${a}`,{value:r.options[s]})}}),i},za=e=>t=>{const n={};return $(e,r=>{n[`GET_${Ut(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},ge={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Dn=()=>Math.random().toString(36).substring(2,11),An=(e,t)=>e.splice(t,1),Xa=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Bt=()=>{const e=[],t=(r,i)=>{An(e,e.findIndex(s=>s.event===r&&(s.cb===i||!i)))},n=(r,i,s)=>{e.filter(a=>a.event===r).map(a=>a.cb).forEach(a=>Xa(()=>a(...i),s))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...s)=>{t(r,i),i(...s)}})},off:t}},hi=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Qa=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],le=e=>{const t={};return hi(e,t,Qa),t},Ka=e=>{e.forEach((t,n)=>{t.released&&An(e,n)})},B={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ne={INPUT:1,LIMBO:2,LOCAL:3},Ii=e=>/[^0-9]+/.exec(e),_i=()=>Ii(1.1.toLocaleString())[0],Za=()=>{const e=_i(),t=1e3.toLocaleString();return t!=="1000"?Ii(t)[0]:e==="."?",":"."},_={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Sn=[],Ie=(e,t,n)=>new Promise((r,i)=>{const s=Sn.filter(l=>l.key===e).map(l=>l.cb);if(s.length===0){r(t);return}const a=s.shift();s.reduce((l,o)=>l.then(c=>o(c,n)),a(t,n)).then(l=>r(l)).catch(l=>i(l))}),qe=(e,t,n)=>Sn.filter(r=>r.key===e).map(r=>r.cb(t,n)),Ja=(e,t)=>Sn.push({key:e,cb:t}),eo=e=>Object.assign(ze,e),Ct=()=>({...ze}),to=e=>{$(e,(t,n)=>{ze[t]&&(ze[t][0]=gi(n,ze[t][0],ze[t][1]))})},ze={id:[null,_.STRING],name:["filepond",_.STRING],disabled:[!1,_.BOOLEAN],className:[null,_.STRING],required:[!1,_.BOOLEAN],captureMethod:[null,_.STRING],allowSyncAcceptAttribute:[!0,_.BOOLEAN],allowDrop:[!0,_.BOOLEAN],allowBrowse:[!0,_.BOOLEAN],allowPaste:[!0,_.BOOLEAN],allowMultiple:[!1,_.BOOLEAN],allowReplace:[!0,_.BOOLEAN],allowRevert:[!0,_.BOOLEAN],allowRemove:[!0,_.BOOLEAN],allowProcess:[!0,_.BOOLEAN],allowReorder:[!1,_.BOOLEAN],allowDirectoriesOnly:[!1,_.BOOLEAN],storeAsFile:[!1,_.BOOLEAN],forceRevert:[!1,_.BOOLEAN],maxFiles:[null,_.INT],checkValidity:[!1,_.BOOLEAN],itemInsertLocationFreedom:[!0,_.BOOLEAN],itemInsertLocation:["before",_.STRING],itemInsertInterval:[75,_.INT],dropOnPage:[!1,_.BOOLEAN],dropOnElement:[!0,_.BOOLEAN],dropValidation:[!1,_.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],_.ARRAY],instantUpload:[!0,_.BOOLEAN],maxParallelUploads:[2,_.INT],allowMinimumUploadDuration:[!0,_.BOOLEAN],chunkUploads:[!1,_.BOOLEAN],chunkForce:[!1,_.BOOLEAN],chunkSize:[5e6,_.INT],chunkRetryDelays:[[500,1e3,3e3],_.ARRAY],server:[null,_.SERVER_API],fileSizeBase:[1e3,_.INT],labelFileSizeBytes:["bytes",_.STRING],labelFileSizeKilobytes:["KB",_.STRING],labelFileSizeMegabytes:["MB",_.STRING],labelFileSizeGigabytes:["GB",_.STRING],labelDecimalSeparator:[_i(),_.STRING],labelThousandsSeparator:[Za(),_.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',_.STRING],labelInvalidField:["Field contains invalid files",_.STRING],labelFileWaitingForSize:["Waiting for size",_.STRING],labelFileSizeNotAvailable:["Size not available",_.STRING],labelFileCountSingular:["file in list",_.STRING],labelFileCountPlural:["files in list",_.STRING],labelFileLoading:["Loading",_.STRING],labelFileAdded:["Added",_.STRING],labelFileLoadError:["Error during load",_.STRING],labelFileRemoved:["Removed",_.STRING],labelFileRemoveError:["Error during remove",_.STRING],labelFileProcessing:["Uploading",_.STRING],labelFileProcessingComplete:["Upload complete",_.STRING],labelFileProcessingAborted:["Upload cancelled",_.STRING],labelFileProcessingError:["Error during upload",_.STRING],labelFileProcessingRevertError:["Error during revert",_.STRING],labelTapToCancel:["tap to cancel",_.STRING],labelTapToRetry:["tap to retry",_.STRING],labelTapToUndo:["tap to undo",_.STRING],labelButtonRemoveItem:["Remove",_.STRING],labelButtonAbortItemLoad:["Abort",_.STRING],labelButtonRetryItemLoad:["Retry",_.STRING],labelButtonAbortItemProcessing:["Cancel",_.STRING],labelButtonUndoItemProcessing:["Undo",_.STRING],labelButtonRetryItemProcessing:["Retry",_.STRING],labelButtonProcessItem:["Upload",_.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',_.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',_.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',_.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',_.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',_.STRING],oninit:[null,_.FUNCTION],onwarning:[null,_.FUNCTION],onerror:[null,_.FUNCTION],onactivatefile:[null,_.FUNCTION],oninitfile:[null,_.FUNCTION],onaddfilestart:[null,_.FUNCTION],onaddfileprogress:[null,_.FUNCTION],onaddfile:[null,_.FUNCTION],onprocessfilestart:[null,_.FUNCTION],onprocessfileprogress:[null,_.FUNCTION],onprocessfileabort:[null,_.FUNCTION],onprocessfilerevert:[null,_.FUNCTION],onprocessfile:[null,_.FUNCTION],onprocessfiles:[null,_.FUNCTION],onremovefile:[null,_.FUNCTION],onpreparefile:[null,_.FUNCTION],onupdatefiles:[null,_.FUNCTION],onreorderfiles:[null,_.FUNCTION],beforeDropFile:[null,_.FUNCTION],beforeAddFile:[null,_.FUNCTION],beforeRemoveFile:[null,_.FUNCTION],beforePrepareFile:[null,_.FUNCTION],stylePanelLayout:[null,_.STRING],stylePanelAspectRatio:[null,_.STRING],styleItemPanelAspectRatio:[null,_.STRING],styleButtonRemoveItemPosition:["left",_.STRING],styleButtonProcessItemPosition:["right",_.STRING],styleLoadIndicatorPosition:["right",_.STRING],styleProgressIndicatorPosition:["right",_.STRING],styleButtonRemoveItemAlign:[!1,_.BOOLEAN],files:[[],_.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],_.ARRAY]},xe=(e,t)=>Se(t)?e[0]||null:tt(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),Ti=e=>{if(Se(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},_e=e=>e.filter(t=>!t.archived),no={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let gt=null;const ro=()=>{if(gt===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,gt=t.files.length===1}catch{gt=!1}return gt},io=[B.LOAD_ERROR,B.PROCESSING_ERROR,B.PROCESSING_REVERT_ERROR],so=[B.LOADING,B.PROCESSING,B.PROCESSING_QUEUED,B.INIT],ao=[B.PROCESSING_COMPLETE],oo=e=>io.includes(e.status),lo=e=>so.includes(e.status),co=e=>ao.includes(e.status),pr=e=>re(e.options.server)&&(re(e.options.server.process)||Fe(e.options.server.process)),uo=e=>({GET_STATUS:()=>{const t=_e(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:s,READY:a}=no;return t.length===0?n:t.some(oo)?r:t.some(lo)?i:t.some(co)?a:s},GET_ITEM:t=>xe(e.items,t),GET_ACTIVE_ITEM:t=>xe(_e(e.items),t),GET_ACTIVE_ITEMS:()=>_e(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=xe(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=xe(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:Ti(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>_e(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>_e(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&ro()&&!pr(e),IS_ASYNC:()=>pr(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),fo=e=>{const t=_e(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Ri=(e,t,n)=>Math.max(Math.min(n,e),t),po=(e,t,n)=>e.splice(t,0,n),Eo=(e,t,n)=>Se(t)?null:typeof n>"u"?(e.push(t),t):(n=Ri(n,0,e.length),po(e,n,t),t),En=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),dt=e=>`${e}`.split("/").pop().split("?").shift(),Vt=e=>e.split(".").pop(),mo=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},rt=(e,t="")=>(t+e).slice(-t.length),yi=(e=new Date)=>`${e.getFullYear()}-${rt(e.getMonth()+1,"00")}-${rt(e.getDate(),"00")}_${rt(e.getHours(),"00")}-${rt(e.getMinutes(),"00")}-${rt(e.getSeconds(),"00")}`,Ze=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),ae(t)||(t=yi()),t&&r===null&&Vt(t)?i.name=t:(r=r||mo(i.type),i.name=t+(r?"."+r:"")),i},go=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Oi=(e,t)=>{const n=go();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},ho=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Oi(n,t)},Di=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Io=e=>e.split(",")[1].replace(/\s/g,""),_o=e=>atob(Io(e)),To=e=>{const t=Di(e),n=_o(e);return ho(n,t)},Ro=(e,t,n)=>Ze(To(e),t,null,n),yo=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Oo=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Do=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,wn=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=yo(r);if(i){t.name=i;continue}const s=Oo(r);if(s){t.size=s;continue}const a=Do(r);if(a){t.source=a;continue}}return t},Ao=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const l=t.source;a.fire("init",l),l instanceof File?a.fire("load",l):l instanceof Blob?a.fire("load",Ze(l,l.name)):En(l)?a.fire("load",Ro(l)):s(l)},s=l=>{if(!e){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,o=>{t.duration=Date.now()-t.timestamp,t.complete=!0,o instanceof Blob&&(o=Ze(o,o.name||dt(l))),a.fire("load",o instanceof Blob?o:o?o.body:null)},o=>{a.fire("error",typeof o=="string"?{type:"error",code:0,body:o}:o)},(o,c,u)=>{if(u&&(t.size=u),t.duration=Date.now()-t.timestamp,!o){t.progress=null;return}t.progress=c/u,a.fire("progress",t.progress)},()=>{a.fire("abort")},o=>{const c=wn(typeof o=="string"?o:o.headers);a.fire("meta",{size:t.size||c.size,filename:c.name,source:c.source})})},a={...Bt(),setSource:l=>t.source=l,getProgress:n,abort:r,load:i};return a},Er=e=>/GET|HEAD/.test(e),Ue=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,a.abort()}};let i=!1,s=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),Er(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const a=new XMLHttpRequest,l=Er(n.method)?a:a.upload;return l.onprogress=o=>{i||r.onprogress(o.lengthComputable,o.loaded,o.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||s||(s=!0,r.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?r.onload(a):r.onerror(a)},a.onerror=()=>r.onerror(a),a.onabort=()=>{i=!0,r.onabort()},a.ontimeout=()=>r.ontimeout(a),a.open(n.method,t,!0),tt(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(o=>{const c=unescape(encodeURIComponent(n.headers[o]));a.setRequestHeader(o,c)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(e),r},z=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),Be=e=>t=>{e(z("error",0,"Timeout",t.getAllResponseHeaders()))},mr=e=>/\?/.test(e),at=(...e)=>{let t="";return e.forEach(n=>{t+=mr(t)&&mr(n)?n.replace(/\?/,"&"):n}),t},Zt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,s,a,l,o,c)=>{const u=Ue(i,at(e,t.url),{...t,responseType:"blob"});return u.onload=d=>{const E=d.getAllResponseHeaders(),g=wn(E).name||dt(i);s(z("load",d.status,t.method==="HEAD"?null:Ze(n(d.response),g),E))},u.onerror=d=>{a(z("error",d.status,r(d.response)||d.statusText,d.getAllResponseHeaders()))},u.onheaders=d=>{c(z("headers",d.status,null,d.getAllResponseHeaders()))},u.ontimeout=Be(a),u.onprogress=l,u.onabort=o,u}},pe={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},So=(e,t,n,r,i,s,a,l,o,c,u)=>{const d=[],{chunkTransferId:E,chunkServer:g,chunkSize:f,chunkRetryDelays:h}=u,I={serverId:E,aborted:!1},T=t.ondata||(O=>O),p=t.onload||((O,x)=>x==="HEAD"?O.getResponseHeader("Upload-Offset"):O.response),m=t.onerror||(O=>null),y=O=>{const x=new FormData;re(i)&&x.append(n,JSON.stringify(i));const R=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},S={...t,headers:R},L=Ue(T(x),at(e,t.url),S);L.onload=b=>O(p(b,S.method)),L.onerror=b=>a(z("error",b.status,m(b.response)||b.statusText,b.getAllResponseHeaders())),L.ontimeout=Be(a)},D=O=>{const x=at(e,g.url,I.serverId),S={headers:typeof t.headers=="function"?t.headers(I.serverId):{...t.headers},method:"HEAD"},L=Ue(null,x,S);L.onload=b=>O(p(b,S.method)),L.onerror=b=>a(z("error",b.status,m(b.response)||b.statusText,b.getAllResponseHeaders())),L.ontimeout=Be(a)},v=Math.floor(r.size/f);for(let O=0;O<=v;O++){const x=O*f,R=r.slice(x,x+f,"application/offset+octet-stream");d[O]={index:O,size:R.size,offset:x,data:R,file:r,progress:0,retries:[...h],status:pe.QUEUED,error:null,request:null,timeout:null}}const N=()=>s(I.serverId),A=O=>O.status===pe.QUEUED||O.status===pe.ERROR,w=O=>{if(I.aborted)return;if(O=O||d.find(A),!O){d.every(H=>H.status===pe.COMPLETE)&&N();return}O.status=pe.PROCESSING,O.progress=null;const x=g.ondata||(H=>H),R=g.onerror||(H=>null),S=at(e,g.url,I.serverId),L=typeof g.headers=="function"?g.headers(O):{...g.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":O.offset,"Upload-Length":r.size,"Upload-Name":r.name},b=O.request=Ue(x(O.data),S,{...g,headers:L});b.onload=()=>{O.status=pe.COMPLETE,O.request=null,C()},b.onprogress=(H,k,he)=>{O.progress=H?k:null,M()},b.onerror=H=>{O.status=pe.ERROR,O.request=null,O.error=R(H.response)||H.statusText,G(O)||a(z("error",H.status,R(H.response)||H.statusText,H.getAllResponseHeaders()))},b.ontimeout=H=>{O.status=pe.ERROR,O.request=null,G(O)||Be(a)(H)},b.onabort=()=>{O.status=pe.QUEUED,O.request=null,o()}},G=O=>O.retries.length===0?!1:(O.status=pe.WAITING,clearTimeout(O.timeout),O.timeout=setTimeout(()=>{w(O)},O.retries.shift()),!0),M=()=>{const O=d.reduce((R,S)=>R===null||S.progress===null?null:R+S.progress,0);if(O===null)return l(!1,0,0);const x=d.reduce((R,S)=>R+S.size,0);l(!0,O,x)},C=()=>{d.filter(x=>x.status===pe.PROCESSING).length>=1||w()},q=()=>{d.forEach(O=>{clearTimeout(O.timeout),O.request&&O.request.abort()})};return I.serverId?D(O=>{I.aborted||(d.filter(x=>x.offset<O).forEach(x=>{x.status=pe.COMPLETE,x.progress=x.size}),C())}):y(O=>{I.aborted||(c(O),I.serverId=O,C())}),{abort:()=>{I.aborted=!0,q()}}},wo=(e,t,n,r)=>(i,s,a,l,o,c,u)=>{if(!i)return;const d=r.chunkUploads,E=d&&i.size>r.chunkSize,g=d&&(E||r.chunkForce);if(i instanceof Blob&&g)return So(e,t,n,i,s,a,l,o,c,u,r);const f=t.ondata||(D=>D),h=t.onload||(D=>D),I=t.onerror||(D=>null),T=typeof t.headers=="function"?t.headers(i,s)||{}:{...t.headers},p={...t,headers:T};var m=new FormData;re(s)&&m.append(n,JSON.stringify(s)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(D=>{m.append(n,D.file,D.name===null?D.file.name:`${D.name}${D.file.name}`)});const y=Ue(f(m),at(e,t.url),p);return y.onload=D=>{a(z("load",D.status,h(D.response),D.getAllResponseHeaders()))},y.onerror=D=>{l(z("error",D.status,I(D.response)||D.statusText,D.getAllResponseHeaders()))},y.ontimeout=Be(l),y.onprogress=o,y.onabort=c,y},vo=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!ae(t.url)?null:wo(e,t,n,r),it=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return(i,s)=>s();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,s,a)=>{const l=Ue(i,e+t.url,t);return l.onload=o=>{s(z("load",o.status,n(o.response),o.getAllResponseHeaders()))},l.onerror=o=>{a(z("error",o.status,r(o.response)||o.statusText,o.getAllResponseHeaders()))},l.ontimeout=Be(a),l}},Ai=(e=0,t=1)=>e+Math.random()*(t-e),bo=(e,t=1e3,n=0,r=25,i=250)=>{let s=null;const a=Date.now(),l=()=>{let o=Date.now()-a,c=Ai(r,i);o+c>t&&(c=o+c-t);let u=o/t;if(u>=1||document.hidden){e(1);return}e(u),s=setTimeout(l,c)};return t>0&&l(),{clear:()=>{clearTimeout(s)}}},Po=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(u,d)=>{const E=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},g=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=bo(f=>{n.perceivedProgress=f,n.perceivedDuration=Date.now()-n.timestamp,E(),n.response&&n.perceivedProgress===1&&!n.complete&&g()},r?Ai(750,1500):0),n.request=e(u,d,f=>{n.response=re(f)?f:{type:"load",code:200,body:`${f}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&g()},f=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",re(f)?f:{type:"error",code:0,body:`${f}`})},(f,h,I)=>{n.duration=Date.now()-n.timestamp,n.progress=f?h/I:null,E()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},f=>{c.fire("transfer",f)})},s=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{s(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,o=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...Bt(),process:i,abort:s,getProgress:l,getDuration:o,reset:a};return c},Si=e=>e.substring(0,e.lastIndexOf("."))||e,Mo=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||En(e)?t[0]=e.name||yi():En(e)?(t[1]=e.length,t[2]=Di(e)):ae(e)&&(t[0]=dt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Ve=e=>!!(e instanceof File||e instanceof Blob&&e.name),wi=e=>{if(!re(e))return e;const t=Ft(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&re(r)?wi(r):r}return t},Co=(e=null,t=null,n=null)=>{const r=Dn(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?B.PROCESSING_COMPLETE:B.INIT,activeLoader:null,activeProcessor:null};let s=null;const a={},l=A=>i.status=A,o=(A,...w)=>{i.released||i.frozen||v.fire(A,...w)},c=()=>Vt(i.file.name),u=()=>i.file.type,d=()=>i.file.size,E=()=>i.file,g=(A,w,G)=>{if(i.source=A,v.fireSync("init"),i.file){v.fireSync("load-skip");return}i.file=Mo(A),w.on("init",()=>{o("load-init")}),w.on("meta",M=>{i.file.size=M.size,i.file.filename=M.filename,M.source&&(e=ne.LIMBO,i.serverFileReference=M.source,i.status=B.PROCESSING_COMPLETE),o("load-meta")}),w.on("progress",M=>{l(B.LOADING),o("load-progress",M)}),w.on("error",M=>{l(B.LOAD_ERROR),o("load-request-error",M)}),w.on("abort",()=>{l(B.INIT),o("load-abort")}),w.on("load",M=>{i.activeLoader=null;const C=O=>{i.file=Ve(O)?O:i.file,e===ne.LIMBO&&i.serverFileReference?l(B.PROCESSING_COMPLETE):l(B.IDLE),o("load")},q=O=>{i.file=M,o("load-meta"),l(B.LOAD_ERROR),o("load-file-error",O)};if(i.serverFileReference){C(M);return}G(M,C,q)}),w.setSource(A),i.activeLoader=w,w.load()},f=()=>{i.activeLoader&&i.activeLoader.load()},h=()=>{if(i.activeLoader){i.activeLoader.abort();return}l(B.INIT),o("load-abort")},I=(A,w)=>{if(i.processingAborted){i.processingAborted=!1;return}if(l(B.PROCESSING),s=null,!(i.file instanceof Blob)){v.on("load",()=>{I(A,w)});return}A.on("load",C=>{i.transferId=null,i.serverFileReference=C}),A.on("transfer",C=>{i.transferId=C}),A.on("load-perceived",C=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=C,l(B.PROCESSING_COMPLETE),o("process-complete",C)}),A.on("start",()=>{o("process-start")}),A.on("error",C=>{i.activeProcessor=null,l(B.PROCESSING_ERROR),o("process-error",C)}),A.on("abort",C=>{i.activeProcessor=null,i.serverFileReference=C,l(B.IDLE),o("process-abort"),s&&s()}),A.on("progress",C=>{o("process-progress",C)});const G=C=>{i.archived||A.process(C,{...a})},M=console.error;w(i.file,G,M),i.activeProcessor=A},T=()=>{i.processingAborted=!1,l(B.PROCESSING_QUEUED)},p=()=>new Promise(A=>{if(!i.activeProcessor){i.processingAborted=!0,l(B.IDLE),o("process-abort"),A();return}s=()=>{A()},i.activeProcessor.abort()}),m=(A,w)=>new Promise((G,M)=>{const C=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(C===null){G();return}A(C,()=>{i.serverFileReference=null,i.transferId=null,G()},q=>{if(!w){G();return}l(B.PROCESSING_REVERT_ERROR),o("process-revert-error"),M(q)}),l(B.IDLE),o("process-revert")}),y=(A,w,G)=>{const M=A.split("."),C=M[0],q=M.pop();let O=a;M.forEach(x=>O=O[x]),JSON.stringify(O[q])!==JSON.stringify(w)&&(O[q]=w,o("metadata-update",{key:C,value:a[C],silent:G}))},v={id:{get:()=>r},origin:{get:()=>e,set:A=>e=A},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Si(i.file.name)},fileExtension:{get:c},fileType:{get:u},fileSize:{get:d},file:{get:E},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:A=>wi(A?a[A]:a),setMetadata:(A,w,G)=>{if(re(A)){const M=A;return Object.keys(M).forEach(C=>{y(C,M[C],w)}),A}return y(A,w,G),w},extend:(A,w)=>N[A]=w,abortLoad:h,retryLoad:f,requestProcessing:T,abortProcessing:p,load:g,process:I,revert:m,...Bt(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived},setFile:A=>i.file=A},N=Pe(v);return N},Lo=(e,t)=>Se(t)?0:ae(t)?e.findIndex(n=>n.id===t):-1,gr=(e,t)=>{const n=Lo(e,t);if(!(n<0))return e[n]||null},hr=(e,t,n,r,i,s)=>{const a=Ue(null,e,{method:"GET",responseType:"blob"});return a.onload=l=>{const o=l.getAllResponseHeaders(),c=wn(o).name||dt(e);t(z("load",l.status,Ze(l.response,c),o))},a.onerror=l=>{n(z("error",l.status,l.statusText,l.getAllResponseHeaders()))},a.onheaders=l=>{s(z("headers",l.status,null,l.getAllResponseHeaders()))},a.ontimeout=Be(n),a.onprogress=r,a.onabort=i,a},Ir=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),No=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Ir(location.href)!==Ir(e),ht=e=>(...t)=>Fe(e)?e(...t):e,Go=e=>!Ve(e.file),Jt=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:_e(t.items)})},0)},_r=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),en=(e,t)=>{e.items.sort((n,r)=>t(le(n),le(r)))},Ee=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...s}={})=>{const a=xe(e.items,n);if(!a){i({error:z("error",0,"Item not found"),file:null});return}t(a,r,i,s||{})},Fo=(e,t,n)=>({ABORT_ALL:()=>{_e(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(a=>({source:a.source?a.source:a,options:a.options}));let s=_e(n.items);s.forEach(a=>{i.find(l=>l.source===a.source||l.source===a.file)||e("REMOVE_ITEM",{query:a,remove:!1})}),s=_e(n.items),i.forEach((a,l)=>{s.find(o=>o.source===a.source||o.file===a.source)||e("ADD_ITEM",{...a,interactionMethod:ge.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:s})=>{s.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=gr(n.items,r);if(!t("IS_ASYNC")){Ie("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:t,action:i,change:s}).then(u=>{const d=t("GET_BEFORE_PREPARE_FILE");d&&(u=d(a,u)),u&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:a,success:E=>{e("DID_PREPARE_OUTPUT",{id:r,file:E})}},!0)});return}a.origin===ne.LOCAL&&e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},o=u=>{a.revert(it(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(u?l:()=>{}).catch(()=>{})},c=u=>{a.abortProcessing().then(u?l:()=>{})};if(a.status===B.PROCESSING_COMPLETE)return o(n.options.instantUpload);if(a.status===B.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:i})=>{const s=xe(n.items,r);if(!s)return;const a=n.items.indexOf(s);i=Ri(i,0,n.items.length-1),a!==i&&n.items.splice(i,0,n.items.splice(a,1)[0])},SORT:({compare:r})=>{en(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:s,success:a=()=>{},failure:l=()=>{}})=>{let o=i;if(i===-1||typeof i>"u"){const g=t("GET_ITEM_INSERT_LOCATION"),f=t("GET_TOTAL_ITEMS");o=g==="before"?0:f}const c=t("GET_IGNORED_FILES"),u=g=>Ve(g)?!c.includes(g.name.toLowerCase()):!Se(g),E=r.filter(u).map(g=>new Promise((f,h)=>{e("ADD_ITEM",{interactionMethod:s,source:g.source||g,success:f,failure:h,index:o++,options:g.options||{}})}));Promise.all(E).then(a).catch(l)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:s,success:a=()=>{},failure:l=()=>{},options:o={}})=>{if(Se(r)){l({error:z("error",0,"No source"),file:null});return}if(Ve(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!fo(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const p=z("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:p}),l({error:p,file:null});return}const T=_e(n.items)[0];if(T.status===B.PROCESSING_COMPLETE||T.status===B.PROCESSING_REVERT_ERROR){const p=t("GET_FORCE_REVERT");if(T.revert(it(n.options.server.url,n.options.server.revert),p).then(()=>{p&&e("ADD_ITEM",{source:r,index:i,interactionMethod:s,success:a,failure:l,options:o})}).catch(()=>{}),p)return}e("REMOVE_ITEM",{query:T.id})}const c=o.type==="local"?ne.LOCAL:o.type==="limbo"?ne.LIMBO:ne.INPUT,u=Co(c,c===ne.INPUT?null:r,o.file);Object.keys(o.metadata||{}).forEach(T=>{u.setMetadata(T,o.metadata[T])}),qe("DID_CREATE_ITEM",u,{query:t,dispatch:e});const d=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=d==="before"?-1:n.items.length),Eo(n.items,u,i),Fe(d)&&r&&en(n,d);const E=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:E})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:E})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:E})}),u.on("load-progress",T=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:E,progress:T})}),u.on("load-request-error",T=>{const p=ht(n.options.labelFileLoadError)(T);if(T.code>=400&&T.code<500){e("DID_THROW_ITEM_INVALID",{id:E,error:T,status:{main:p,sub:`${T.code} (${T.body})`}}),l({error:T,file:le(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:E,error:T,status:{main:p,sub:n.options.labelTapToRetry}})}),u.on("load-file-error",T=>{e("DID_THROW_ITEM_INVALID",{id:E,error:T.status,status:T.status}),l({error:T.status,file:le(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:E})}),u.on("load-skip",()=>{u.on("metadata-update",T=>{Ve(u.file)&&e("DID_UPDATE_ITEM_METADATA",{id:E,change:T})}),e("COMPLETE_LOAD_ITEM",{query:E,item:u,data:{source:r,success:a}})}),u.on("load",()=>{const T=p=>{if(!p){e("REMOVE_ITEM",{query:E});return}u.on("metadata-update",m=>{e("DID_UPDATE_ITEM_METADATA",{id:E,change:m})}),Ie("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(m=>{const y=t("GET_BEFORE_PREPARE_FILE");y&&(m=y(u,m));const D=()=>{e("COMPLETE_LOAD_ITEM",{query:E,item:u,data:{source:r,success:a}}),Jt(e,n)};if(m){e("REQUEST_PREPARE_OUTPUT",{query:E,item:u,success:v=>{e("DID_PREPARE_OUTPUT",{id:E,file:v}),D()}},!0);return}D()})};Ie("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{_r(t("GET_BEFORE_ADD_FILE"),le(u)).then(T)}).catch(p=>{if(!p||!p.error||!p.status)return T(!1);e("DID_THROW_ITEM_INVALID",{id:E,error:p.error,status:p.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:E})}),u.on("process-progress",T=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:E,progress:T})}),u.on("process-error",T=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:E,error:T,status:{main:ht(n.options.labelFileProcessingError)(T),sub:n.options.labelTapToRetry}})}),u.on("process-revert-error",T=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:E,error:T,status:{main:ht(n.options.labelFileProcessingRevertError)(T),sub:n.options.labelTapToRetry}})}),u.on("process-complete",T=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:E,error:null,serverFileReference:T}),e("DID_DEFINE_VALUE",{id:E,value:T})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:E})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:E}),e("DID_DEFINE_VALUE",{id:E,value:null})}),e("DID_ADD_ITEM",{id:E,index:i,interactionMethod:s}),Jt(e,n);const{url:g,load:f,restore:h,fetch:I}=n.options.server||{};u.load(r,Ao(c===ne.INPUT?ae(r)&&No(r)&&I?Zt(g,I):hr:c===ne.LIMBO?Zt(g,h):Zt(g,f)),(T,p,m)=>{Ie("LOAD_FILE",T,{query:t}).then(p).catch(m)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:s=()=>{}})=>{const a={error:z("error",0,"Item not found"),file:null};if(r.archived)return s(a);Ie("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(l=>{Ie("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:r}).then(o=>{if(r.archived)return s(a);i(o)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:s,source:a}=i,l=t("GET_ITEM_INSERT_LOCATION");if(Fe(l)&&a&&en(n,l),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===ne.INPUT?null:a}),s(le(r)),r.origin===ne.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===ne.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:a}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||a});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:Ee(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:Ee(n,(r,i,s)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:a=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:a}),i({file:r,output:a})},failure:s},!0)}),REQUEST_ITEM_PROCESSING:Ee(n,(r,i,s)=>{if(!(r.status===B.IDLE||r.status===B.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:s}),o=()=>document.hidden?l():setTimeout(l,32);r.status===B.PROCESSING_COMPLETE||r.status===B.PROCESSING_REVERT_ERROR?r.revert(it(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(o).catch(()=>{}):r.status===B.PROCESSING&&r.abortProcessing().then(o);return}r.status!==B.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:s},!0))}),PROCESS_ITEM:Ee(n,(r,i,s)=>{const a=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",B.PROCESSING).length===a){n.processingQueue.push({id:r.id,success:i,failure:s});return}if(r.status===B.PROCESSING)return;const o=()=>{const u=n.processingQueue.shift();if(!u)return;const{id:d,success:E,failure:g}=u,f=xe(n.items,d);if(!f||f.archived){o();return}e("PROCESS_ITEM",{query:d,success:E,failure:g},!0)};r.onOnce("process-complete",()=>{i(le(r)),o();const u=n.options.server;if(n.options.instantUpload&&r.origin===ne.LOCAL&&Fe(u.remove)){const g=()=>{};r.origin=ne.LIMBO,n.options.server.remove(r.source,g,g)}t("GET_ITEMS_BY_STATUS",B.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",u=>{s({error:u,file:le(r)}),o()});const c=n.options;r.process(Po(vo(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,d,E)=>{Ie("PREPARE_OUTPUT",u,{query:t,item:r}).then(g=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:g}),d(g)}).catch(E)})}),RETRY_ITEM_PROCESSING:Ee(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:Ee(n,r=>{_r(t("GET_BEFORE_REMOVE_FILE"),le(r)).then(i=>{i&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:Ee(n,r=>{r.release()}),REMOVE_ITEM:Ee(n,(r,i,s,a)=>{const l=()=>{const c=r.id;gr(n.items,c).archive(),e("DID_REMOVE_ITEM",{error:null,id:c,item:r}),Jt(e,n),i(le(r))},o=n.options.server;r.origin===ne.LOCAL&&o&&Fe(o.remove)&&a.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),o.remove(r.source,()=>l(),c=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:z("error",0,c,null),status:{main:ht(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((a.revert&&r.origin!==ne.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(it(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:Ee(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:Ee(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ee(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:r})},s=t("GET_BEFORE_REMOVE_FILE");if(!s)return i(!0);const a=s(le(r));if(a==null)return i(!0);if(typeof a=="boolean")return i(a);typeof a.then=="function"&&a.then(i)}),REVERT_ITEM_PROCESSING:Ee(n,r=>{r.revert(it(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Go(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),s=xo.filter(l=>i.includes(l));[...s,...Object.keys(r).filter(l=>!s.includes(l))].forEach(l=>{e(`SET_${Ut(l,"_").toUpperCase()}`,{value:r[l]})})}}),xo=["server"],vn=e=>e,we=e=>document.createElement(e),X=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Tr=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},Uo=(e,t,n,r,i,s)=>{const a=Tr(e,t,n,i),l=Tr(e,t,n,r);return["M",a.x,a.y,"A",n,n,0,s,0,l.x,l.y].join(" ")},Bo=(e,t,n,r,i)=>{let s=1;return i>r&&i-r<=.5&&(s=0),r>i&&r-i>=.5&&(s=0),Uo(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,s)},Vo=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=Mt("svg");e.ref.path=Mt("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Ho=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(K(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,s=0;t.spin?(i=0,s=.5):(i=0,s=t.progress);const a=Bo(r,r,r-n,i,s);K(e.ref.path,"d",a),K(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},Rr=Z({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Vo,write:Ho,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),qo=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Wo=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,K(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},vi=Z({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:qo,write:Wo}),bi=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:s="KB",labelMegabytes:a="MB",labelGigabytes:l="GB"}=r;e=Math.round(Math.abs(e));const o=n,c=n*n,u=n*n*n;return e<o?`${e} ${i}`:e<c?`${Math.floor(e/o)} ${s}`:e<u?`${yr(e/c,1,t)} ${a}`:`${yr(e/u,2,t)} ${l}`},yr=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),ko=({root:e,props:t})=>{const n=we("span");n.className="filepond--file-info-main",K(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=we("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,X(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),X(n,vn(e.query("GET_ITEM_NAME",t.id)))},mn=({root:e,props:t})=>{X(e.ref.fileSize,bi(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),X(e.ref.fileName,vn(e.query("GET_ITEM_NAME",t.id)))},Or=({root:e,props:t})=>{if(tt(e.query("GET_ITEM_SIZE",t.id))){mn({root:e,props:t});return}X(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},jo=Z({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:mn,DID_UPDATE_ITEM_META:mn,DID_THROW_ITEM_LOAD_ERROR:Or,DID_THROW_ITEM_INVALID:Or}),didCreateView:e=>{qe("CREATE_VIEW",{...e,view:e})},create:ko,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Pi=e=>Math.round(e*100),Yo=({root:e})=>{const t=we("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=we("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Mi({root:e,action:{progress:null}})},Mi=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Pi(t.progress)}%`;X(e.ref.main,n),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},$o=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Pi(t.progress)}%`;X(e.ref.main,n),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},zo=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Xo=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Qo=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Dr=({root:e})=>{X(e.ref.main,""),X(e.ref.sub,"")},st=({root:e,action:t})=>{X(e.ref.main,t.status.main),X(e.ref.sub,t.status.sub)},Ko=Z({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Dr,DID_REVERT_ITEM_PROCESSING:Dr,DID_REQUEST_ITEM_PROCESSING:zo,DID_ABORT_ITEM_PROCESSING:Xo,DID_COMPLETE_ITEM_PROCESSING:Qo,DID_UPDATE_ITEM_PROCESS_PROGRESS:$o,DID_UPDATE_ITEM_LOAD_PROGRESS:Mi,DID_THROW_ITEM_LOAD_ERROR:st,DID_THROW_ITEM_INVALID:st,DID_THROW_ITEM_PROCESSING_ERROR:st,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:st,DID_THROW_ITEM_REMOVE_ERROR:st}),didCreateView:e=>{qe("CREATE_VIEW",{...e,view:e})},create:Yo,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),gn={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},hn=[];$(gn,e=>{hn.push(e)});const de=e=>{if(In(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Zo=e=>e.ref.buttonAbortItemLoad.rect.element.width,It=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Jo=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),el=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),tl=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),In=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),nl={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:el},processProgressIndicator:{opacity:0,align:tl},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ar={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{translateX:de}},tn={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Xe={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:In},info:{translateX:de},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:In},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1,translateX:de}},DID_LOAD_ITEM:Ar,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de}},DID_START_ITEM_PROCESSING:tn,DID_REQUEST_ITEM_PROCESSING:tn,DID_UPDATE_ITEM_PROCESS_PROGRESS:tn,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:de}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ar},rl=Z({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),il=({root:e,props:t})=>{const n=Object.keys(gn).reduce((f,h)=>(f[h]={...gn[h]},f),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),s=e.query("GET_ALLOW_REMOVE"),a=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),o=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;o?a&&!i?u=f=>!/RevertItemProcessing/.test(f):!a&&i?u=f=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(f):!a&&!i&&(u=f=>!/Process/.test(f)):u=f=>!/Process/.test(f);const d=u?hn.filter(u):hn.concat();if(l&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),o&&!i){const f=Xe.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=Jo,f.info.translateY=It,f.status.translateY=It,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(o&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(f=>{Xe[f].status.translateY=It}),Xe.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Zo),c&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const f=Xe.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=de,f.status.translateY=It,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),$(n,(f,h)=>{const I=e.createChildView(vi,{label:e.query(h.label),icon:e.query(h.icon),opacity:0});d.includes(f)&&e.appendChildView(I),h.disabled&&(I.element.setAttribute("disabled","disabled"),I.element.setAttribute("hidden","hidden")),I.element.dataset.align=e.query(`GET_STYLE_${h.align}`),I.element.classList.add(h.className),I.on("click",T=>{T.stopPropagation(),!h.disabled&&e.dispatch(h.action,{query:r})}),e.ref[`button${f}`]=I}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(rl)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(jo,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Ko,{id:r}));const E=e.appendChildView(e.createChildView(Rr,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));E.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=E;const g=e.appendChildView(e.createChildView(Rr,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));g.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=g,e.ref.activeStyles=[]},sl=({root:e,actions:t,props:n})=>{al({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Xe[i.type]);if(r){e.ref.activeStyles=[];const i=Xe[r.type];$(nl,(s,a)=>{const l=e.ref[s];$(a,(o,c)=>{const u=i[s]&&typeof i[s][o]<"u"?i[s][o]:c;e.ref.activeStyles.push({control:l,key:o,value:u})})})}e.ref.activeStyles.forEach(({control:i,key:s,value:a})=>{i[s]=typeof a=="function"?a(e):a})},al=oe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ol=Z({create:il,write:sl,didCreateView:e=>{qe("CREATE_VIEW",{...e,view:e})},name:"file"}),ll=({root:e,props:t})=>{e.ref.fileName=we("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ol,{id:t.id})),e.ref.data=!1},cl=({root:e,props:t})=>{X(e.ref.fileName,vn(e.query("GET_ITEM_NAME",t.id)))},ul=Z({create:ll,ignoreRect:!0,write:oe({DID_LOAD_ITEM:cl}),didCreateView:e=>{qe("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Sr={type:"spring",damping:.6,mass:7},dl=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Sr},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Sr},styles:["translateY"]}}].forEach(n=>{fl(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},fl=(e,t,n)=>{const r=Z({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},pl=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=pi(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},Ci=Z({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:pl,create:dl,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),El=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},wr={type:"spring",stiffness:.75,damping:.45,mass:10},vr="spring",br={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},ml=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(ul,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Ci,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const s={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const a=El(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:a});const l=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),t.dragOffset={x:d.pageX-s.x,y:d.pageY-s.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:a})},o=d=>{d.isPrimary&&(t.dragOffset={x:d.pageX-s.x,y:d.pageY-s.y},u())},c=()=>{u()},u=()=>{document.removeEventListener("pointercancel",c),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",o),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:a}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",c),document.addEventListener("pointermove",l),document.addEventListener("pointerup",o)};e.element.addEventListener("pointerdown",n)},gl=oe({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),hl=oe({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>br[a.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=br[n.currentState]||"");const s=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");s?r||(e.height=e.rect.element.width*s):(gl({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Il=Z({create:ml,write:hl,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:vr,scaleY:vr,translateX:wr,translateY:wr,opacity:{type:"tween",duration:150}}}});var bn=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Pn=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let s=null;if(i===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,o=l.marginLeft+l.marginRight,c=l.width+o,u=bn(r,c);if(u===1){for(let g=0;g<i;g++){const f=t[g],h=f.rect.outer.top+f.rect.element.height*.5;if(n.top<h)return g}return i}const d=l.marginTop+l.marginBottom,E=l.height+d;for(let g=0;g<i;g++){const f=g%u,h=Math.floor(g/u),I=f*c,T=h*E,p=T-l.marginTop,m=I+c,y=T+E+l.marginBottom;if(n.top<y&&n.top>p){if(n.left<m)return g;g!==i-1?s=g:s=null}}return s!==null?s:i},_t={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)}},_l=({root:e})=>{K(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Tl=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const s=Date.now();let a=s,l=1;if(i!==ge.NONE){l=0;const o=e.query("GET_ITEM_INSERT_INTERVAL"),c=s-e.ref.lastItemSpanwDate;a=c<o?s+(o-c):s}e.ref.lastItemSpanwDate=a,e.appendChildView(e.createChildView(Il,{spawnDate:a,id:n,opacity:l,interactionMethod:i}),r)},Pr=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Rl(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Rl=(e,t,n,r,i)=>{e.interactionMethod===ge.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===ge.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===ge.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===ge.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},yl=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},nn=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,Ol=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Dl=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),s=e.childViews.find(I=>I.id===n),a=e.childViews.length,l=r.getItemIndex(i);if(!s)return;const o={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},c=nn(s),u=Ol(s);let d=Math.floor(e.rect.outer.width/u);d>a&&(d=a);const E=Math.floor(a/d+1);_t.setHeight=c*E,_t.setWidth=u*d;var g={y:Math.floor(o.y/c),x:Math.floor(o.x/u),getGridIndex:function(){return o.y>_t.getHeight||o.y<0||o.x>_t.getWidth||o.x<0?l:this.y*d+this.x},getColIndex:function(){const T=e.query("GET_ACTIVE_ITEMS"),p=e.childViews.filter(M=>M.rect.element.height),m=T.map(M=>p.find(C=>C.id===M.id)),y=m.findIndex(M=>M===s),D=nn(s),v=m.length;let N=v,A=0,w=0,G=0;for(let M=0;M<v;M++)if(A=nn(m[M]),G=w,w=G+A,o.y<w){if(y>M){if(o.y<G+D){N=M;break}continue}N=M;break}return N}};const f=d>1?g.getGridIndex():g.getColIndex();e.dispatch("MOVE_ITEM",{query:s,index:f});const h=r.getIndex();if(h===void 0||h!==f){if(r.setIndex(f),h===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:f})}},Al=oe({DID_ADD_ITEM:Tl,DID_REMOVE_ITEM:yl,DID_DRAG_ITEM:Dl}),Sl=({root:e,props:t,actions:n,shouldOptimize:r})=>{Al({root:e,props:t,actions:n});const{dragCoordinates:i}=t,s=e.rect.element.width,a=e.childViews.filter(m=>m.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(m=>a.find(y=>y.id===m.id)).filter(m=>m),o=i?Pn(e,l,i):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,d=0,E=0;if(l.length===0)return;const g=l[0].rect.element,f=g.marginTop+g.marginBottom,h=g.marginLeft+g.marginRight,I=g.width+h,T=g.height+f,p=bn(s,I);if(p===1){let m=0,y=0;l.forEach((D,v)=>{if(o){let w=v-o;w===-2?y=-f*.25:w===-1?y=-f*.75:w===0?y=f*.75:w===1?y=f*.25:y=0}r&&(D.translateX=null,D.translateY=null),D.markedForRemoval||Pr(D,0,m+y);let A=(D.rect.element.height+f)*(D.markedForRemoval?D.opacity:1);m+=A})}else{let m=0,y=0;l.forEach((D,v)=>{v===o&&(u=1),v===c&&(E+=1),D.markedForRemoval&&D.opacity<.5&&(d-=1);const N=v+E+u+d,A=N%p,w=Math.floor(N/p),G=A*I,M=w*T,C=Math.sign(G-m),q=Math.sign(M-y);m=G,y=M,!D.markedForRemoval&&(r&&(D.translateX=null,D.translateY=null),Pr(D,G,M,C,q))})}},wl=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),vl=Z({create:_l,write:Sl,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:wl,mixins:{apis:["dragCoordinates"]}}),bl=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(vl)),t.dragCoordinates=null,t.overflowing=!1},Pl=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Ml=({props:e})=>{e.dragCoordinates=null},Cl=oe({DID_DRAG:Pl,DID_END_DRAG:Ml}),Ll=({root:e,props:t,actions:n})=>{if(Cl({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Nl=Z({create:bl,write:Ll,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Te=(e,t,n,r="")=>{n?K(e,t,r):e.removeAttribute(t)},Gl=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=we("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Fl=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,K(e.element,"name",e.query("GET_NAME")),K(e.element,"aria-controls",`filepond--assistant-${t.id}`),K(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Li({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Ni({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Gi({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),_n({root:e}),Fi({root:e,action:{value:e.query("GET_REQUIRED")}}),xi({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),Gl(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},Li=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Te(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},Ni=({root:e,action:t})=>{Te(e.element,"multiple",t.value)},Gi=({root:e,action:t})=>{Te(e.element,"webkitdirectory",t.value)},_n=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Te(e.element,"disabled",r)},Fi=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Te(e.element,"required",!0):Te(e.element,"required",!1)},xi=({root:e,action:t})=>{Te(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Mr=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Te(t,"required",!1),Te(t,"name",!1)):(Te(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Te(t,"required",!0))},xl=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Ul=Z({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Fl,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:oe({DID_LOAD_ITEM:Mr,DID_REMOVE_ITEM:Mr,DID_THROW_ITEM_INVALID:xl,DID_SET_DISABLED:_n,DID_SET_ALLOW_BROWSE:_n,DID_SET_ALLOW_DIRECTORIES_ONLY:Gi,DID_SET_ALLOW_MULTIPLE:Ni,DID_SET_ACCEPTED_FILE_TYPES:Li,DID_SET_CAPTURE_METHOD:xi,DID_SET_REQUIRED:Fi})}),Cr={ENTER:13,SPACE:32},Bl=({root:e,props:t})=>{const n=we("label");K(n,"for",`filepond--browser-${t.id}`),K(n,"id",`filepond--drop-label-${t.id}`),K(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Cr.ENTER||r.keyCode===Cr.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Ui(n,t.caption),e.appendChild(n),e.ref.label=n},Ui=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&K(n,"tabindex","0"),t},Vl=Z({name:"drop-label",ignoreRect:!0,create:Bl,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:oe({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Ui(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Hl=Z({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),ql=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Hl,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Wl=({root:e,action:t})=>{if(!e.ref.blob){ql({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},kl=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},jl=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Yl=({root:e,props:t,actions:n})=>{$l({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},$l=oe({DID_DRAG:Wl,DID_DROP:jl,DID_END_DRAG:kl}),zl=Z({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Yl}),Bi=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Xl=({root:e})=>e.ref.fields={},Ht=(e,t)=>e.ref.fields[t],Mn=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Lr=({root:e})=>Mn(e),Ql=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===ne.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),s=we("input");s.type=i?"file":"hidden",s.name=e.query("GET_NAME"),s.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=s,Mn(e)},Kl=({root:e,action:t})=>{const n=Ht(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Bi(n,[r.file])},Zl=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Ht(e,t.id);n&&Bi(n,[t.file])},0)},Jl=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},ec=({root:e,action:t})=>{const n=Ht(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},tc=({root:e,action:t})=>{const n=Ht(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),Mn(e))},nc=oe({DID_SET_DISABLED:Jl,DID_ADD_ITEM:Ql,DID_LOAD_ITEM:Kl,DID_REMOVE_ITEM:ec,DID_DEFINE_VALUE:tc,DID_PREPARE_OUTPUT:Zl,DID_REORDER_ITEMS:Lr,DID_SORT_ITEMS:Lr}),rc=Z({tag:"fieldset",name:"data",create:Xl,write:nc,ignoreRect:!0}),ic=e=>"getRootNode"in e?e.getRootNode():document,sc=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],ac=["css","csv","html","txt"],oc={zip:"zip|compressed",epub:"application/epub+zip"},Vi=(e="")=>(e=e.toLowerCase(),sc.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):ac.includes(e)?"text/"+e:oc[e]||""),Cn=e=>new Promise((t,n)=>{const r=mc(e);if(r.length&&!lc(e))return t(r);cc(e).then(t)}),lc=e=>e.files?e.files.length>0:!1,cc=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>uc(i)).map(i=>dc(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const s=[];i.forEach(a=>{s.push.apply(s,a)}),t(s.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),uc=e=>{if(Hi(e)){const t=Ln(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},dc=e=>new Promise((t,n)=>{if(Ec(e)){fc(Ln(e)).then(t).catch(n);return}t([e.getAsFile()])}),fc=e=>new Promise((t,n)=>{const r=[];let i=0,s=0;const a=()=>{s===0&&i===0&&t(r)},l=o=>{i++;const c=o.createReader(),u=()=>{c.readEntries(d=>{if(d.length===0){i--,a();return}d.forEach(E=>{E.isDirectory?l(E):(s++,E.file(g=>{const f=pc(g);E.fullPath&&(f._relativePath=E.fullPath),r.push(f),s--,a()}))}),u()},n)};u()};l(e)}),pc=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=Vi(Vt(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},Ec=e=>Hi(e)&&(Ln(e)||{}).isDirectory,Hi=e=>"webkitGetAsEntry"in e,Ln=e=>e.webkitGetAsEntry(),mc=e=>{let t=[];try{if(t=hc(e),t.length)return t;t=gc(e)}catch{}return t},gc=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},hc=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Lt=[],He=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Ic=(e,t,n)=>{const r=_c(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},_c=e=>{const t=Lt.find(r=>r.element===e);if(t)return t;const n=Tc(e);return Lt.push(n),n},Tc=e=>{const t=[],n={dragenter:yc,dragover:Oc,dragleave:Ac,drop:Dc},r={};$(n,(s,a)=>{r[s]=a(e,t),e.addEventListener(s,r[s],!1)});const i={element:e,addListener:s=>(t.push(s),()=>{t.splice(t.indexOf(s),1),t.length===0&&(Lt.splice(Lt.indexOf(i),1),$(n,a=>{e.removeEventListener(a,r[a],!1)}))})};return i},Rc=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Nn=(e,t)=>{const n=ic(t),r=Rc(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let qi=null;const Tt=(e,t)=>{try{e.dropEffect=t}catch{}},yc=(e,t)=>n=>{n.preventDefault(),qi=n.target,t.forEach(r=>{const{element:i,onenter:s}=r;Nn(n,i)&&(r.state="enter",s(He(n)))})},Oc=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Cn(r).then(i=>{let s=!1;t.some(a=>{const{filterElement:l,element:o,onenter:c,onexit:u,ondrag:d,allowdrop:E}=a;Tt(r,"copy");const g=E(i);if(!g){Tt(r,"none");return}if(Nn(n,o)){if(s=!0,a.state===null){a.state="enter",c(He(n));return}if(a.state="over",l&&!g){Tt(r,"none");return}d(He(n))}else l&&!s&&Tt(r,"none"),a.state&&(a.state=null,u(He(n)))})})},Dc=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Cn(r).then(i=>{t.forEach(s=>{const{filterElement:a,element:l,ondrop:o,onexit:c,allowdrop:u}=s;if(s.state=null,!(a&&!Nn(n,l))){if(!u(i))return c(He(n));o(He(n),i)}})})},Ac=(e,t)=>n=>{qi===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(He(n))})},Sc=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:s=u=>u}=n,a=Ic(e,r?document.documentElement:e,i);let l="",o="";a.allowdrop=u=>t(s(u)),a.ondrop=(u,d)=>{const E=s(d);if(!t(E)){c.ondragend(u);return}o="drag-drop",c.onload(E,u)},a.ondrag=u=>{c.ondrag(u)},a.onenter=u=>{o="drag-over",c.ondragstart(u)},a.onexit=u=>{o="drag-exit",c.ondragend(u)};const c={updateHopperState:()=>{l!==o&&(e.dataset.hopperState=o,l=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return c};let Tn=!1;const Ke=[],Wi=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Cn(e.clipboardData).then(n=>{n.length&&Ke.forEach(r=>r(n))})},wc=e=>{Ke.includes(e)||(Ke.push(e),!Tn&&(Tn=!0,document.addEventListener("paste",Wi)))},vc=e=>{An(Ke,Ke.indexOf(e)),Ke.length===0&&(document.removeEventListener("paste",Wi),Tn=!1)},bc=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{vc(e)},onload:()=>{}};return wc(e),t},Pc=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,K(e.element,"role","status"),K(e.element,"aria-live","polite"),K(e.element,"aria-relevant","additions")};let Nr=null,Gr=null;const rn=[],qt=(e,t)=>{e.element.textContent=t},Mc=e=>{e.element.textContent=""},ki=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");qt(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Gr),Gr=setTimeout(()=>{Mc(e)},1500)},ji=e=>e.element.parentNode.contains(document.activeElement),Cc=({root:e,action:t})=>{if(!ji(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);rn.push(n.filename),clearTimeout(Nr),Nr=setTimeout(()=>{ki(e,rn.join(", "),e.query("GET_LABEL_FILE_ADDED")),rn.length=0},750)},Lc=({root:e,action:t})=>{if(!ji(e))return;const n=t.item;ki(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Nc=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");qt(e,`${r} ${i}`)},Fr=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");qt(e,`${r} ${i}`)},Rt=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;qt(e,`${t.status.main} ${r} ${t.status.sub}`)},Gc=Z({create:Pc,ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Cc,DID_REMOVE_ITEM:Lc,DID_COMPLETE_ITEM_PROCESSING:Nc,DID_ABORT_ITEM_PROCESSING:Fr,DID_REVERT_ITEM_PROCESSING:Fr,DID_THROW_ITEM_REMOVE_ERROR:Rt,DID_THROW_ITEM_LOAD_ERROR:Rt,DID_THROW_ITEM_INVALID:Rt,DID_THROW_ITEM_PROCESSING_ERROR:Rt}),tag:"span",name:"assistant"}),Yi=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),$i=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...s)=>{clearTimeout(i);const a=Date.now()-r,l=()=>{r=Date.now(),e(...s)};a<t?n||(i=setTimeout(l,t-a)):l()}},Fc=1e6,Nt=e=>e.preventDefault(),xc=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(o=>o.length).forEach(o=>{e.element.classList.add(o)}),e.ref.label=e.appendChildView(e.createChildView(Vl,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Nl,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Ci,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Gc,{...t})),e.ref.data=e.appendChildView(e.createChildView(rc,{...t})),e.ref.measure=we("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(o=>!Se(o.value)).map(({name:o,value:c})=>{e.element.dataset[o]=c}),e.ref.widthPrevious=null,e.ref.widthUpdated=$i(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&s&&!i&&(e.element.addEventListener("touchmove",Nt,{passive:!1}),e.element.addEventListener("gesturestart",Nt));const a=e.query("GET_CREDITS");if(a.length===2){const o=document.createElement("a");o.className="filepond--credits",o.setAttribute("aria-hidden","true"),o.href=a[0],o.tabindex=-1,o.target="_blank",o.rel="noopener noreferrer",o.textContent=a[1],e.element.appendChild(o),e.ref.credits=o}},Uc=({root:e,props:t,actions:n})=>{if(Wc({root:e,props:t,actions:n}),n.filter(v=>/^DID_SET_STYLE_/.test(v.type)).filter(v=>!Se(v.data.value)).map(({type:v,data:N})=>{const A=Yi(v.substring(8).toLowerCase(),"_");e.element.dataset[A]=N.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Hc(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:s,list:a,panel:l}=e.ref;i&&i.updateHopperState();const o=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),d=c?e.query("GET_MAX_FILES")||Fc:1,E=u===d,g=n.find(v=>v.type==="DID_ADD_ITEM");if(E&&g){const v=g.data.interactionMethod;s.opacity=0,c?s.translateY=-40:v===ge.API?s.translateX=40:v===ge.BROWSE?s.translateY=40:s.translateY=30}else E||(s.opacity=1,s.translateX=0,s.translateY=0);const f=Bc(e),h=Vc(e),I=s.rect.element.height,T=!c||E?0:I,p=E?a.rect.element.marginTop:0,m=u===0?0:a.rect.element.marginBottom,y=T+p+h.visual+m,D=T+p+h.bounds+m;if(a.translateY=Math.max(0,T-a.rect.element.marginTop)-f.top,o){const v=e.rect.element.width,N=v*o;o!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=o,e.ref.updateHistory=[]);const A=e.ref.updateHistory;A.push(v);const w=2;if(A.length>w*2){const M=A.length,C=M-10;let q=0;for(let O=M;O>=C;O--)if(A[O]===A[O-2]&&q++,q>=w)return}l.scalable=!1,l.height=N;const G=N-T-(m-f.bottom)-(E?p:0);h.visual>G?a.overflow=G:a.overflow=null,e.height=N}else if(r.fixedHeight){l.scalable=!1;const v=r.fixedHeight-T-(m-f.bottom)-(E?p:0);h.visual>v?a.overflow=v:a.overflow=null}else if(r.cappedHeight){const v=y>=r.cappedHeight,N=Math.min(r.cappedHeight,y);l.scalable=!0,l.height=v?N:N-f.top-f.bottom;const A=N-T-(m-f.bottom)-(E?p:0);y>r.cappedHeight&&h.visual>A?a.overflow=A:a.overflow=null,e.height=Math.min(r.cappedHeight,D-f.top-f.bottom)}else{const v=u>0?f.top+f.bottom:0;l.scalable=!0,l.height=Math.max(I,y-v),e.height=Math.max(I,D-v)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},Bc=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Vc=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],s=i.childViews.filter(p=>p.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(p=>s.find(m=>m.id===p.id)).filter(p=>p);if(a.length===0)return{visual:t,bounds:n};const l=i.rect.element.width,o=Pn(i,a,r.dragCoordinates),c=a[0].rect.element,u=c.marginTop+c.marginBottom,d=c.marginLeft+c.marginRight,E=c.width+d,g=c.height+u,f=typeof o<"u"&&o>=0?1:0,h=a.find(p=>p.markedForRemoval&&p.opacity<.45)?-1:0,I=a.length+f+h,T=bn(l,E);return T===1?a.forEach(p=>{const m=p.rect.element.height+u;n+=m,t+=m*p.opacity}):(n=Math.ceil(I/T)*g,t=n),{visual:t,bounds:n}},Hc=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Gn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let s=e.query("GET_MAX_FILES");const a=t.length;return!r&&a>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:z("warning",0,"Max files")}),!0):(s=r?s:1,!r&&n?!1:tt(s)&&i+a>s?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:z("warning",0,"Max files")}),!0):!1)},qc=(e,t,n)=>{const r=e.childViews[0];return Pn(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},xr=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=Sc(e.element,s=>{const a=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?s.every(o=>qe("ALLOW_HOPPER_ITEM",o,{query:e.query}).every(c=>c===!0)&&a(o)):!0},{filterItems:s=>{const a=e.query("GET_IGNORED_FILES");return s.filter(l=>Ve(l)?!a.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(s,a)=>{const o=e.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(u=>o.find(d=>d.id===u.id)).filter(u=>u);Ie("ADD_ITEMS",s,{dispatch:e.dispatch}).then(u=>{if(Gn(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:qc(e.ref.list,c,a),interactionMethod:ge.DROP})}),e.dispatch("DID_DROP",{position:a}),e.dispatch("DID_END_DRAG",{position:a})},i.ondragstart=s=>{e.dispatch("DID_START_DRAG",{position:s})},i.ondrag=$i(s=>{e.dispatch("DID_DRAG",{position:s})}),i.ondragend=s=>{e.dispatch("DID_END_DRAG",{position:s})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(zl))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Ur=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ul,{...t,onload:s=>{Ie("ADD_ITEMS",s,{dispatch:e.dispatch}).then(a=>{if(Gn(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:ge.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Br=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=bc(),e.ref.paster.onload=i=>{Ie("ADD_ITEMS",i,{dispatch:e.dispatch}).then(s=>{if(Gn(e,s))return!1;e.dispatch("ADD_ITEMS",{items:s,index:-1,interactionMethod:ge.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Wc=oe({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Ur(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{xr(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Br(e)},DID_SET_DISABLED:({root:e,props:t})=>{xr(e),Br(e),Ur(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),kc=Z({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:xc,write:Uc,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Nt),e.element.removeEventListener("gesturestart",Nt)},mixins:{styles:["height"]}}),jc=(e={})=>{let t=null;const n=Ct(),r=aa(ja(n),[uo,za(n)],[Fo,$a(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let s=null,a=!1,l=!1,o=null,c=null;const u=()=>{a||(a=!0),clearTimeout(s),s=setTimeout(()=>{a=!1,o=null,c=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const d=kc(r,{id:Dn()});let E=!1,g=!1;const f={_read:()=>{a&&(c=window.innerWidth,o||(o=c),!l&&c!==o&&(r.dispatch("DID_START_RESIZE"),l=!0)),g&&E&&(E=d.element.offsetParent===null),!E&&(d._read(),g=d.rect.element.hidden)},_write:R=>{const S=r.processActionQueue().filter(L=>!/^SET_/.test(L.type));E&&!S.length||(p(S),E=d._write(R,S,l),Ka(r.query("GET_ITEMS")),E&&r.processDispatchQueue())}},h=R=>S=>{const L={type:R};if(!S)return L;if(S.hasOwnProperty("error")&&(L.error=S.error?{...S.error}:null),S.status&&(L.status={...S.status}),S.file&&(L.output=S.file),S.source)L.file=S.source;else if(S.item||S.id){const b=S.item?S.item:r.query("GET_ITEM",S.id);L.file=b?le(b):null}return S.items&&(L.items=S.items.map(le)),/progress/.test(R)&&(L.progress=S.progress),S.hasOwnProperty("origin")&&S.hasOwnProperty("target")&&(L.origin=S.origin,L.target=S.target),L},I={DID_DESTROY:h("destroy"),DID_INIT:h("init"),DID_THROW_MAX_FILES:h("warning"),DID_INIT_ITEM:h("initfile"),DID_START_ITEM_LOAD:h("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:h("addfileprogress"),DID_LOAD_ITEM:h("addfile"),DID_THROW_ITEM_INVALID:[h("error"),h("addfile")],DID_THROW_ITEM_LOAD_ERROR:[h("error"),h("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[h("error"),h("removefile")],DID_PREPARE_OUTPUT:h("preparefile"),DID_START_ITEM_PROCESSING:h("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:h("processfileprogress"),DID_ABORT_ITEM_PROCESSING:h("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:h("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:h("processfiles"),DID_REVERT_ITEM_PROCESSING:h("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[h("error"),h("processfile")],DID_REMOVE_ITEM:h("removefile"),DID_UPDATE_ITEMS:h("updatefiles"),DID_ACTIVATE_ITEM:h("activatefile"),DID_REORDER_ITEMS:h("reorderfiles")},T=R=>{const S={pond:x,...R};delete S.type,d.element.dispatchEvent(new CustomEvent(`FilePond:${R.type}`,{detail:S,bubbles:!0,cancelable:!0,composed:!0}));const L=[];R.hasOwnProperty("error")&&L.push(R.error),R.hasOwnProperty("file")&&L.push(R.file);const b=["type","error","file"];Object.keys(R).filter(k=>!b.includes(k)).forEach(k=>L.push(R[k])),x.fire(R.type,...L);const H=r.query(`GET_ON${R.type.toUpperCase()}`);H&&H(...L)},p=R=>{R.length&&R.filter(S=>I[S.type]).forEach(S=>{const L=I[S.type];(Array.isArray(L)?L:[L]).forEach(b=>{S.type==="DID_INIT_ITEM"?T(b(S.data)):setTimeout(()=>{T(b(S.data))},0)})})},m=R=>r.dispatch("SET_OPTIONS",{options:R}),y=R=>r.query("GET_ACTIVE_ITEM",R),D=R=>new Promise((S,L)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:R,success:b=>{S(b)},failure:b=>{L(b)}})}),v=(R,S={})=>new Promise((L,b)=>{w([{source:R,options:S}],{index:S.index}).then(H=>L(H&&H[0])).catch(b)}),N=R=>R.file&&R.id,A=(R,S)=>(typeof R=="object"&&!N(R)&&!S&&(S=R,R=void 0),r.dispatch("REMOVE_ITEM",{...S,query:R}),r.query("GET_ACTIVE_ITEM",R)===null),w=(...R)=>new Promise((S,L)=>{const b=[],H={};if(Ft(R[0]))b.push.apply(b,R[0]),Object.assign(H,R[1]||{});else{const k=R[R.length-1];typeof k=="object"&&!(k instanceof Blob)&&Object.assign(H,R.pop()),b.push(...R)}r.dispatch("ADD_ITEMS",{items:b,index:H.index,interactionMethod:ge.API,success:S,failure:L})}),G=()=>r.query("GET_ACTIVE_ITEMS"),M=R=>new Promise((S,L)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:R,success:b=>{S(b)},failure:b=>{L(b)}})}),C=(...R)=>{const S=Array.isArray(R[0])?R[0]:R,L=S.length?S:G();return Promise.all(L.map(D))},q=(...R)=>{const S=Array.isArray(R[0])?R[0]:R;if(!S.length){const L=G().filter(b=>!(b.status===B.IDLE&&b.origin===ne.LOCAL)&&b.status!==B.PROCESSING&&b.status!==B.PROCESSING_COMPLETE&&b.status!==B.PROCESSING_REVERT_ERROR);return Promise.all(L.map(M))}return Promise.all(S.map(M))},O=(...R)=>{const S=Array.isArray(R[0])?R[0]:R;let L;typeof S[S.length-1]=="object"?L=S.pop():Array.isArray(R[0])&&(L=R[1]);const b=G();return S.length?S.map(k=>Ge(k)?b[k]?b[k].id:null:k).filter(k=>k).map(k=>A(k,L)):Promise.all(b.map(k=>A(k,L)))},x={...Bt(),...f,...Ya(r,n),setOptions:m,addFile:v,addFiles:w,getFile:y,processFile:M,prepareFile:D,removeFile:A,moveFile:(R,S)=>r.dispatch("MOVE_ITEM",{query:R,index:S}),getFiles:G,processFiles:q,removeFiles:O,prepareFiles:C,sort:R=>r.dispatch("SORT",{compare:R}),browse:()=>{var R=d.element.querySelector("input[type=file]");R&&R.click()},destroy:()=>{x.fire("destroy",d.element),r.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:R=>lr(d.element,R),insertAfter:R=>cr(d.element,R),appendTo:R=>R.appendChild(d.element),replaceElement:R=>{lr(d.element,R),R.parentNode.removeChild(R),t=R},restoreElement:()=>{t&&(cr(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:R=>d.element===R||t===R,element:{get:()=>d.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Pe(x)},zi=(e={})=>{const t={};return $(Ct(),(r,i)=>{t[r]=i[0]}),jc({...t,...e})},Yc=e=>e.charAt(0).toLowerCase()+e.slice(1),$c=e=>Yi(e.replace(/^data-/,"")),Xi=(e,t)=>{$(t,(n,r)=>{$(e,(i,s)=>{const a=new RegExp(n);if(!a.test(i)||(delete e[i],r===!1))return;if(ae(r)){e[r]=s;return}const o=r.group;re(r)&&!e[o]&&(e[o]={}),e[o][Yc(i.replace(a,""))]=s}),r.mapping&&Xi(e[r.group],r.mapping)})},zc=(e,t={})=>{const n=[];$(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,s)=>{const a=K(e,s.name);return i[$c(s.name)]=a===s.name?!0:a,i},{});return Xi(r,t),r},Xc=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};qe("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=zc(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(a=>{re(i[a])?(re(r[a])||(r[a]={}),Object.assign(r[a],i[a])):r[a]=i[a]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const s=zi(r);return e.files&&Array.from(e.files).forEach(a=>{s.addFile(a)}),s.replaceElement(e),s},Qc=(...e)=>sa(e[0])?Xc(...e):zi(...e),Kc=["fire","_read","_write"],Vr=e=>{const t={};return hi(e,t,Kc),t},Zc=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Jc=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,s)=>{},post:(i,s,a)=>{const l=Dn();r.onmessage=o=>{o.data.id===l&&s(o.data.message)},r.postMessage({id:l,message:i},a)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},eu=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Qi=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},tu=e=>Qi(e,e.name),Hr=[],nu=e=>{if(Hr.includes(e))return;Hr.push(e);const t=e({addFilter:Ja,utils:{Type:_,forin:$,isString:ae,isFile:Ve,toNaturalFileSize:bi,replaceInString:Zc,getExtensionFromFilename:Vt,getFilenameWithoutExtension:Si,guesstimateMimeType:Vi,getFileFromBlob:Ze,getFilenameFromURL:dt,createRoute:oe,createWorker:Jc,createView:Z,createItemAPI:le,loadImage:eu,copyFile:tu,renameFile:Qi,createBlob:Oi,applyFilterChain:Ie,text:X,getNumericAspectRatioFromString:Ti},views:{fileActionButton:vi}});eo(t.options)},ru=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",iu=()=>"Promise"in window,su=()=>"slice"in Blob.prototype,au=()=>"URL"in window&&"createObjectURL"in window.URL,ou=()=>"visibilityState"in document,lu=()=>"performance"in window,cu=()=>"supports"in(window.CSS||{}),uu=()=>/MSIE|Trident/.test(window.navigator.userAgent),Rn=(()=>{const e=di()&&!ru()&&ou()&&iu()&&su()&&au()&&lu()&&(cu()||uu());return()=>e})(),ve={apps:[]},du="filepond",We=()=>{};let qr={},St=We,sn=We,Wr=We,kr=We,yn=We,jr=We,Yr=We;if(Rn()){Ma(()=>{ve.apps.forEach(n=>n._read())},n=>{ve.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Rn,create:St,destroy:sn,parse:Wr,find:kr,registerPlugin:yn,setOptions:Yr}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>$(Ct(),(n,r)=>{qr[n]=r[1]});qr={},t(),St=(...n)=>{const r=Qc(...n);return r.on("destroy",sn),ve.apps.push(r),Vr(r)},sn=n=>{const r=ve.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(ve.apps.splice(r,1)[0].restoreElement(),!0):!1},Wr=n=>Array.from(n.querySelectorAll(`.${du}`)).filter(s=>!ve.apps.find(a=>a.isAttachedTo(s))).map(s=>St(s)),kr=n=>{const r=ve.apps.find(i=>i.isAttachedTo(n));return r?Vr(r):null},yn=(...n)=>{n.forEach(nu),t()},jr=()=>{const n={};return $(Ct(),(r,i)=>{n[r]=i[0]}),n},Yr=n=>(re(n)&&(ve.apps.forEach(r=>{r.setOptions(n)}),to(n)),jr())}/*!
 * react-filepond v7.1.2
 * A handy FilePond adapter component for React
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const fu=Rn(),pu=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];class Eu extends ei.Component{constructor(t){super(t),this.allowFilesSync=!0}componentDidMount(){if(this._input=this._element.querySelector('input[type="file"]'),this._inputClone=this._input.cloneNode(),!fu)return;const t=Object.assign({},this.props);if(t.onupdatefiles){const n=t.onupdatefiles;t.onupdatefiles=r=>{this.allowFilesSync=!1,n(r)}}this._pond=St(this._input,t),Object.keys(this._pond).filter(n=>!pu.includes(n)).forEach(n=>{this[n]=this._pond[n]})}componentWillUnmount(){if(!this._pond)return;const t=document.createElement("div");t.append(this._pond.element),t.id="foo",this._pond.destroy(),this._pond=void 0,this._element.append(this._inputClone)}shouldComponentUpdate(){return this.allowFilesSync?!0:(this.allowFilesSync=!0,!1)}componentDidUpdate(){if(!this._pond)return;const t=Object.assign({},this.props);delete t.onupdatefiles,this._pond.setOptions(t)}render(){const{id:t,name:n,className:r,allowMultiple:i,required:s,captureMethod:a,acceptedFileTypes:l}=this.props;return W.createElement("div",{className:"filepond--wrapper",ref:o=>this._element=o},W.createElement("input",{type:"file",name:n,id:t,accept:l,multiple:i,required:s,className:r,capture:a}))}}/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const mu=e=>/^image\/jpeg/.test(e.type),Ce={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},Le=(e,t,n=!1)=>e.getUint16(t,n),$r=(e,t,n=!1)=>e.getUint32(t,n),gu=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=function(i){const s=new DataView(i.target.result);if(Le(s,0)!==Ce.JPEG){t(-1);return}const a=s.byteLength;let l=2;for(;l<a;){const o=Le(s,l);if(l+=2,o===Ce.APP1){if($r(s,l+=2)!==Ce.EXIF)break;const c=Le(s,l+=6)===Ce.TIFF;l+=$r(s,l+4,c);const u=Le(s,l,c);l+=2;for(let d=0;d<u;d++)if(Le(s,l+d*12,c)===Ce.Orientation){t(Le(s,l+d*12+8,c));return}}else{if((o&Ce.Unknown)!==Ce.Unknown)break;l+=Le(s,l)}}t(-1)},r.readAsArrayBuffer(e.slice(0,64*1024))}),hu=typeof window<"u"&&typeof window.document<"u",Iu=()=>hu,_u="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Ki;const wt=Iu()?new Image:{};wt.onload=()=>Ki=wt.naturalWidth>wt.naturalHeight;wt.src=_u;const Tu=()=>Ki,Zi=({addFilter:e,utils:t})=>{const{Type:n,isFile:r}=t;return e("DID_LOAD_ITEM",(i,{query:s})=>new Promise((a,l)=>{const o=i.file;if(!r(o)||!mu(o)||!s("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!Tu())return a(i);gu(o).then(c=>{i.setMetadata("exif",{orientation:c}),a(i)})})),{options:{allowImageExifOrientation:[!0,n.BOOLEAN]}}},Ru=typeof window<"u"&&typeof window.document<"u";Ru&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Zi}));/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const yu=e=>/^image/.test(e.type),zr=(e,t)=>ct(e.x*t,e.y*t),Xr=(e,t)=>ct(e.x+t.x,e.y+t.y),Ou=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ct(e.x/t,e.y/t)},yt=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),s=ct(e.x-n.x,e.y-n.y);return ct(n.x+r*s.x-i*s.y,n.y+i*s.x+r*s.y)},ct=(e=0,t=0)=>({x:e,y:t}),ce=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},Du=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",s=e.borderColor||e.lineColor||"transparent",a=ce(e.borderWidth||e.lineWidth,t,n),l=e.lineCap||"round",o=e.lineJoin||"round",c=typeof r=="string"?"":r.map(d=>ce(d,t,n)).join(","),u=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":o,"stroke-width":a||0,"stroke-dasharray":c,stroke:s,fill:i,opacity:u}},me=e=>e!=null,Au=(e,t,n=1)=>{let r=ce(e.x,t,n,"width")||ce(e.left,t,n,"width"),i=ce(e.y,t,n,"height")||ce(e.top,t,n,"height"),s=ce(e.width,t,n,"width"),a=ce(e.height,t,n,"height"),l=ce(e.right,t,n,"width"),o=ce(e.bottom,t,n,"height");return me(i)||(me(a)&&me(o)?i=t.height-a-o:i=o),me(r)||(me(s)&&me(l)?r=t.width-s-l:r=l),me(s)||(me(r)&&me(l)?s=t.width-r-l:s=0),me(a)||(me(i)&&me(o)?a=t.height-i-o:a=0),{x:r||0,y:i||0,width:s||0,height:a||0}},Su=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),Oe=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),wu="http://www.w3.org/2000/svg",Qe=(e,t)=>{const n=document.createElementNS(wu,e);return t&&Oe(n,t),n},vu=e=>Oe(e,{...e.rect,...e.styles}),bu=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return Oe(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},Pu={contain:"xMidYMid meet",cover:"xMidYMid slice"},Mu=(e,t)=>{Oe(e,{...e.rect,...e.styles,preserveAspectRatio:Pu[t.fit]||"none"})},Cu={left:"start",center:"middle",right:"end"},Lu=(e,t,n,r)=>{const i=ce(t.fontSize,n,r),s=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",l=Cu[t.textAlign]||"start";Oe(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":i,"font-family":s,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Nu=(e,t,n,r)=>{Oe(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],s=e.childNodes[1],a=e.childNodes[2],l=e.rect,o={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Oe(i,{x1:l.x,y1:l.y,x2:o.x,y2:o.y}),!t.lineDecoration)return;s.style.display="none",a.style.display="none";const c=Ou({x:o.x-l.x,y:o.y-l.y}),u=ce(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const d=zr(c,u),E=Xr(l,d),g=yt(l,2,E),f=yt(l,-2,E);Oe(s,{style:"display:block;",d:`M${g.x},${g.y} L${l.x},${l.y} L${f.x},${f.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const d=zr(c,-u),E=Xr(o,d),g=yt(o,2,E),f=yt(o,-2,E);Oe(a,{style:"display:block;",d:`M${g.x},${g.y} L${o.x},${o.y} L${f.x},${f.y}`})}},Gu=(e,t,n,r)=>{Oe(e,{...e.styles,fill:"none",d:Su(t.points.map(i=>({x:ce(i.x,n,r,"width"),y:ce(i.y,n,r,"height")})))})},Ot=e=>t=>Qe(e,{id:t.id}),Fu=e=>{const t=Qe("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},xu=e=>{const t=Qe("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Qe("line");t.appendChild(n);const r=Qe("path");t.appendChild(r);const i=Qe("path");return t.appendChild(i),t},Uu={image:Fu,rect:Ot("rect"),ellipse:Ot("ellipse"),text:Ot("text"),path:Ot("path"),line:xu},Bu={rect:vu,ellipse:bu,image:Mu,text:Lu,path:Gu,line:Nu},Vu=(e,t)=>Uu[e](t),Hu=(e,t,n,r,i)=>{t!=="path"&&(e.rect=Au(n,r,i)),e.styles=Du(n,r,i),Bu[t](e,n,r,i)},qu=["x","y","left","top","right","bottom","width","height"],Wu=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,ku=e=>{const[t,n]=e,r=n.points?{}:qu.reduce((i,s)=>(i[s]=Wu(n[s]),i),{});return[t,{zIndex:0,...n,...r}]},ju=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Yu=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:s}=n,a=n.width,l=n.height;let o=r.width,c=r.height;if(i){const{size:g}=i;let f=g&&g.width,h=g&&g.height;const I=i.mode,T=i.upscale;f&&!h&&(h=f),h&&!f&&(f=h);const p=o<f&&c<h;if(!p||p&&T){let m=f/o,y=h/c;if(I==="force")o=f,c=h;else{let D;I==="cover"?D=Math.max(m,y):I==="contain"&&(D=Math.min(m,y)),o=o*D,c=c*D}}}const u={width:a,height:l};t.element.setAttribute("width",u.width),t.element.setAttribute("height",u.height);const d=Math.min(a/o,l/c);t.element.innerHTML="";const E=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");s.filter(E).map(ku).sort(ju).forEach(g=>{const[f,h]=g,I=Vu(f,h);Hu(I,f,h,u,d),t.element.appendChild(I)})}}),ot=(e,t)=>({x:e,y:t}),$u=(e,t)=>e.x*t.x+e.y*t.y,Qr=(e,t)=>ot(e.x-t.x,e.y-t.y),zu=(e,t)=>$u(Qr(e,t),Qr(e,t)),Kr=(e,t)=>Math.sqrt(zu(e,t)),Zr=(e,t)=>{const n=e,r=1.5707963267948966,i=t,s=1.5707963267948966-t,a=Math.sin(r),l=Math.sin(i),o=Math.sin(s),c=Math.cos(s),u=n/a,d=u*l,E=u*o;return ot(c*d,c*E)},Xu=(e,t)=>{const n=e.width,r=e.height,i=Zr(n,t),s=Zr(r,t),a=ot(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),l=ot(e.x+e.width+Math.abs(s.y),e.y+Math.abs(s.x)),o=ot(e.x-Math.abs(s.y),e.y+e.height-Math.abs(s.x));return{width:Kr(a,l),height:Kr(a,o)}},Qu=(e,t,n=1)=>{const r=e.height/e.width;let i=1,s=t,a=1,l=r;l>s&&(l=s,a=l/r);const o=Math.max(i/a,s/l),c=e.width/(n*o*a),u=c*t;return{width:c,height:u}},Ji=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,s=r.y>.5?1-r.y:r.y,a=i*2*e.width,l=s*2*e.height,o=Xu(t,n);return Math.max(o.width/a,o.height/l)},es=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,s=(e.height-r)*.5;return{x:i,y:s,width:n,height:r}},Ku=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:s}=t;s||(s=e.height/e.width);const a=Qu(e,s,n),l={width:a.width,height:a.height},o=typeof t.scaleToFit>"u"||t.scaleToFit,c=Ji(e,es(l,s),r,o?i:{x:.5,y:.5}),u=n*c;return{widthFloat:a.width/u,heightFloat:a.height/u,width:Math.round(a.width/u),height:Math.round(a.height/u)}},ye={type:"spring",stiffness:.5,damping:.45,mass:10},Zu=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Ju=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:ye,originY:ye,scaleX:ye,scaleY:ye,translateX:ye,translateY:ye,rotateZ:ye}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Zu(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),ed=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Ju(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Yu(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:s,resize:a,dirty:l,width:o,height:c}=n;t.ref.image.crop=i;const u={width:o,height:c,center:{x:o*.5,y:c*.5}},d={width:t.ref.image.width,height:t.ref.image.height},E={x:i.center.x*d.width,y:i.center.y*d.height},g={x:u.center.x-d.width*i.center.x,y:u.center.y-d.height*i.center.y},f=Math.PI*2+i.rotation%(Math.PI*2),h=i.aspectRatio||d.height/d.width,I=typeof i.scaleToFit>"u"||i.scaleToFit,T=Ji(d,es(u,h),f,I?i.center:{x:.5,y:.5}),p=i.zoom*T;s&&s.length?(t.ref.createMarkup(),t.ref.markup.width=o,t.ref.markup.height=c,t.ref.markup.resize=a,t.ref.markup.dirty=l,t.ref.markup.markup=s,t.ref.markup.crop=Ku(d,i)):t.ref.markup&&t.ref.destroyMarkup();const m=t.ref.image;if(r){m.originX=null,m.originY=null,m.translateX=null,m.translateY=null,m.rotateZ=null,m.scaleX=null,m.scaleY=null;return}m.originX=E.x,m.originY=E.y,m.translateX=g.x,m.translateY=g.y,m.rotateZ=f,m.scaleX=p,m.scaleY=p}}),td=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:ye,scaleY:ye,translateY:ye,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(ed(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:s,crop:a,markup:l,resize:o,dirty:c}=n;if(i.crop=a,i.markup=l,i.resize=o,i.dirty=c,i.opacity=r?0:1,r||t.rect.element.hidden)return;const u=s.height/s.width;let d=a.aspectRatio||u;const E=t.rect.inner.width,g=t.rect.inner.height;let f=t.query("GET_IMAGE_PREVIEW_HEIGHT");const h=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),I=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),T=t.query("GET_PANEL_ASPECT_RATIO"),p=t.query("GET_ALLOW_MULTIPLE");T&&!p&&(f=E*T,d=T);let m=f!==null?f:Math.max(h,Math.min(E*d,I)),y=m/d;y>E&&(y=E,m=y*d),m>g&&(m=g,y=g/d),i.width=y,i.height=m}});let nd=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Jr=0;const rd=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=nd;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}Jr++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,Jr)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),id=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},sd=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,s=n[0],a=n[1],l=n[2],o=n[3],c=n[4],u=n[5],d=n[6],E=n[7],g=n[8],f=n[9],h=n[10],I=n[11],T=n[12],p=n[13],m=n[14],y=n[15],D=n[16],v=n[17],N=n[18],A=n[19];let w=0,G=0,M=0,C=0,q=0;for(;w<i;w+=4)G=r[w]/255,M=r[w+1]/255,C=r[w+2]/255,q=r[w+3]/255,r[w]=Math.max(0,Math.min((G*s+M*a+C*l+q*o+c)*255,255)),r[w+1]=Math.max(0,Math.min((G*u+M*d+C*E+q*g+f)*255,255)),r[w+2]=Math.max(0,Math.min((G*h+M*I+C*T+q*p+m)*255,255)),r[w+3]=Math.max(0,Math.min((G*y+M*D+C*v+q*N+A)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},ad=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},od={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},ld=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,od[r](t,n))},cd=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const s=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),ld(s,t,n,r),s.drawImage(e,0,0,t,n),i},ts=e=>/^image/.test(e.type)&&!/svg/.test(e.type),ud=10,dd=10,fd=e=>{const t=Math.min(ud/e.width,dd/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),s=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,s);let a=null;try{a=r.getImageData(0,0,i,s).data}catch{return null}const l=a.length;let o=0,c=0,u=0,d=0;for(;d<l;d+=4)o+=a[d]*a[d],c+=a[d+1]*a[d+1],u+=a[d+2]*a[d+2];return o=an(o,l),c=an(c,l),u=an(u,l),{r:o,g:c,b:u}},an=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),pd=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Ed=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},md=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),gd=e=>{const t=rd(e),n=td(e),{createWorker:r}=e.utils,i=(p,m,y)=>new Promise(D=>{p.ref.imageData||(p.ref.imageData=y.getContext("2d").getImageData(0,0,y.width,y.height));const v=Ed(p.ref.imageData);if(!m||m.length!==20)return y.getContext("2d").putImageData(v,0,0),D();const N=r(sd);N.post({imageData:v,colorMatrix:m},A=>{y.getContext("2d").putImageData(A,0,0),N.terminate(),D()},[v.data.buffer])}),s=(p,m)=>{p.removeChildView(m),m.image.width=1,m.image.height=1,m._destroy()},a=({root:p})=>{const m=p.ref.images.shift();return m.opacity=0,m.translateY=-15,p.ref.imageViewBin.push(m),m},l=({root:p,props:m,image:y})=>{const D=m.id,v=p.query("GET_ITEM",{id:D});if(!v)return;const N=v.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},A=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let w,G,M=!1;p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(w=v.getMetadata("markup")||[],G=v.getMetadata("resize"),M=!0);const C=p.appendChildView(p.createChildView(n,{id:D,image:y,crop:N,resize:G,markup:w,dirty:M,background:A,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),p.childViews.length);p.ref.images.push(C),C.opacity=1,C.scaleX=1,C.scaleY=1,C.translateY=0,setTimeout(()=>{p.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:D})},250)},o=({root:p,props:m})=>{const y=p.query("GET_ITEM",{id:m.id});if(!y)return;const D=p.ref.images[p.ref.images.length-1];D.crop=y.getMetadata("crop"),D.background=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(D.dirty=!0,D.resize=y.getMetadata("resize"),D.markup=y.getMetadata("markup"))},c=({root:p,props:m,action:y})=>{if(!/crop|filter|markup|resize/.test(y.change.key)||!p.ref.images.length)return;const D=p.query("GET_ITEM",{id:m.id});if(D){if(/filter/.test(y.change.key)){const v=p.ref.images[p.ref.images.length-1];i(p,y.change.value,v.image);return}if(/crop|markup|resize/.test(y.change.key)){const v=D.getMetadata("crop"),N=p.ref.images[p.ref.images.length-1];if(v&&v.aspectRatio&&N.crop&&N.crop.aspectRatio&&Math.abs(v.aspectRatio-N.crop.aspectRatio)>1e-5){const A=a({root:p});l({root:p,props:m,image:pd(A.image)})}else o({root:p,props:m})}}},u=p=>{const y=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),D=y?parseInt(y[1]):null;return D!==null&&D<=58?!1:"createImageBitmap"in window&&ts(p)},d=({root:p,props:m})=>{const{id:y}=m,D=p.query("GET_ITEM",y);if(!D)return;const v=URL.createObjectURL(D.file);ad(v,(N,A)=>{p.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:y,width:N,height:A})})},E=({root:p,props:m})=>{const{id:y}=m,D=p.query("GET_ITEM",y);if(!D)return;const v=URL.createObjectURL(D.file),N=()=>{md(v).then(A)},A=w=>{URL.revokeObjectURL(v);const M=(D.getMetadata("exif")||{}).orientation||-1;let{width:C,height:q}=w;if(!C||!q)return;M>=5&&M<=8&&([C,q]=[q,C]);const O=Math.max(1,window.devicePixelRatio*.75),R=p.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*O,S=q/C,L=p.rect.element.width,b=p.rect.element.height;let H=L,k=H*S;S>1?(H=Math.min(C,L*R),k=H*S):(k=Math.min(q,b*R),H=k/S);const he=cd(w,H,k,M),Me=()=>{const ke=p.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?fd(data):null;D.setMetadata("color",ke,!0),"close"in w&&w.close(),p.ref.overlayShadow.opacity=1,l({root:p,props:m,image:he})},te=D.getMetadata("filter");te?i(p,te,he).then(Me):Me()};if(u(D.file)){const w=r(id);w.post({file:D.file},G=>{if(w.terminate(),!G){N();return}A(G)})}else N()},g=({root:p})=>{const m=p.ref.images[p.ref.images.length-1];m.translateY=0,m.scaleX=1,m.scaleY=1,m.opacity=1},f=({root:p})=>{p.ref.overlayShadow.opacity=1,p.ref.overlayError.opacity=0,p.ref.overlaySuccess.opacity=0},h=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlayError.opacity=1},I=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlaySuccess.opacity=1},T=({root:p})=>{p.ref.images=[],p.ref.imageData=null,p.ref.imageViewBin=[],p.ref.overlayShadow=p.appendChildView(p.createChildView(t,{opacity:0,status:"idle"})),p.ref.overlaySuccess=p.appendChildView(p.createChildView(t,{opacity:0,status:"success"})),p.ref.overlayError=p.appendChildView(p.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:T,styles:["height"],apis:["height"],destroy:({root:p})=>{p.ref.images.forEach(m=>{m.image.width=1,m.image.height=1})},didWriteView:({root:p})=>{p.ref.images.forEach(m=>{m.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:g,DID_IMAGE_PREVIEW_CONTAINER_CREATE:d,DID_FINISH_CALCULATE_PREVIEWSIZE:E,DID_UPDATE_ITEM_METADATA:c,DID_THROW_ITEM_LOAD_ERROR:h,DID_THROW_ITEM_PROCESSING_ERROR:h,DID_THROW_ITEM_INVALID:h,DID_COMPLETE_ITEM_PROCESSING:I,DID_START_ITEM_PROCESSING:f,DID_REVERT_ITEM_PROCESSING:f},({root:p})=>{const m=p.ref.imageViewBin.filter(y=>y.opacity===0);p.ref.imageViewBin=p.ref.imageViewBin.filter(y=>y.opacity>0),m.forEach(y=>s(p,y)),m.length=0})})},ns=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:s}=n,a=gd(e);return t("CREATE_VIEW",l=>{const{is:o,view:c,query:u}=l;if(!o("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const d=({root:I,props:T})=>{const{id:p}=T,m=u("GET_ITEM",p);if(!m||!s(m.file)||m.archived)return;const y=m.file;if(!yu(y)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(m))return;const D="createImageBitmap"in(window||{}),v=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!D&&v&&y.size>v)return;I.ref.imagePreview=c.appendChildView(c.createChildView(a,{id:p}));const N=I.query("GET_IMAGE_PREVIEW_HEIGHT");N&&I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:m.id,height:N});const A=!D&&y.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");I.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:p},A)},E=(I,T)=>{if(!I.ref.imagePreview)return;let{id:p}=T;const m=I.query("GET_ITEM",{id:p});if(!m)return;const y=I.query("GET_PANEL_ASPECT_RATIO"),D=I.query("GET_ITEM_PANEL_ASPECT_RATIO"),v=I.query("GET_IMAGE_PREVIEW_HEIGHT");if(y||D||v)return;let{imageWidth:N,imageHeight:A}=I.ref;if(!N||!A)return;const w=I.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),G=I.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=(m.getMetadata("exif")||{}).orientation||-1;if(C>=5&&C<=8&&([N,A]=[A,N]),!ts(m.file)||I.query("GET_IMAGE_PREVIEW_UPSCALE")){const L=2048/N;N*=L,A*=L}const q=A/N,O=(m.getMetadata("crop")||{}).aspectRatio||q;let x=Math.max(w,Math.min(A,G));const R=I.rect.element.width,S=Math.min(R*O,x);I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:m.id,height:S})},g=({root:I})=>{I.ref.shouldRescale=!0},f=({root:I,action:T})=>{T.change.key==="crop"&&(I.ref.shouldRescale=!0)},h=({root:I,action:T})=>{I.ref.imageWidth=T.width,I.ref.imageHeight=T.height,I.ref.shouldRescale=!0,I.ref.shouldDrawPreview=!0,I.dispatch("KICK")};c.registerWriter(i({DID_RESIZE_ROOT:g,DID_STOP_RESIZE:g,DID_LOAD_ITEM:d,DID_IMAGE_PREVIEW_CALCULATE_SIZE:h,DID_UPDATE_ITEM_METADATA:f},({root:I,props:T})=>{I.ref.imagePreview&&(I.rect.element.hidden||(I.ref.shouldRescale&&(E(I,T),I.ref.shouldRescale=!1),I.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{I.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:T.id})})}),I.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},hd=typeof window<"u"&&typeof window.document<"u";hd&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ns}));/*!
 * FilePondPluginFileEncode 2.1.14
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Id=function(){self.onmessage=t=>{e(t.data.message,n=>{self.postMessage({id:t.data.id,message:n})})};const e=(t,n)=>{const{file:r}=t,i=new FileReader;i.onloadend=()=>{n(i.result.replace("data:","").replace(/^.+,/,""))},i.readAsDataURL(r)}},rs=({addFilter:e,utils:t})=>{const{Type:n,createWorker:r,createRoute:i,isFile:s}=t,a=({name:o,file:c})=>new Promise(u=>{const d=r(Id);d.post({file:c},E=>{u({name:o,data:E}),d.terminate()})}),l=[];return e("DID_CREATE_ITEM",(o,{query:c})=>{c("GET_ALLOW_FILE_ENCODE")&&(o.extend("getFileEncodeBase64String",()=>l[o.id]&&l[o.id].data),o.extend("getFileEncodeDataURL",()=>l[o.id]&&`data:${o.fileType};base64,${l[o.id].data}`))}),e("SHOULD_PREPARE_OUTPUT",(o,{query:c})=>new Promise(u=>{u(c("GET_ALLOW_FILE_ENCODE"))})),e("COMPLETE_PREPARE_OUTPUT",(o,{item:c,query:u})=>new Promise(d=>{if(!u("GET_ALLOW_FILE_ENCODE")||!s(o)&&!Array.isArray(o))return d(o);l[c.id]={metadata:c.getMetadata(),data:null},Promise.all((o instanceof Blob?[{name:null,file:o}]:o).map(a)).then(E=>{l[c.id].data=o instanceof Blob?E[0].data:E,d(o)})})),e("CREATE_VIEW",o=>{const{is:c,view:u,query:d}=o;!c("file-wrapper")||!d("GET_ALLOW_FILE_ENCODE")||u.registerWriter(i({DID_PREPARE_OUTPUT:({root:E,action:g})=>{if(d("IS_ASYNC"))return;const f=d("GET_ITEM",g.id);if(!f)return;const h=l[f.id],I=h.metadata,T=h.data,p=JSON.stringify({id:f.id,name:f.file.name,type:f.file.type,size:f.file.size,metadata:I,data:T});E.ref.data?E.ref.data.value=p:E.dispatch("DID_DEFINE_VALUE",{id:f.id,value:p})},DID_REMOVE_ITEM:({action:E})=>{const g=d("GET_ITEM",E.id);g&&delete l[g.id]}}))}),{options:{allowFileEncode:[!0,n.BOOLEAN]}}},_d=typeof window<"u"&&typeof window.document<"u";_d&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:rs}));yn(rs,Zi,ns);const Td=()=>F.jsx(F.Fragment,{children:F.jsx(Eu,{allowMultiple:!0,allowReorder:!0,allowDrop:!0})}),Rd=()=>F.jsxs(Dt,{className:"justify-content-center",children:[F.jsx(be,{md:6,lg:6,children:F.jsxs(on,{children:[F.jsx(Hn,{children:F.jsx(Dt,{className:"align-items-center",children:F.jsx(be,{children:F.jsx(qn,{as:"h4",children:"Custom File Upload"})})})}),F.jsx(Wn,{className:"pt-0",children:F.jsx(ia,{icon:"fa6-solid:upload",text:"Drop files here or click to upload.",extraText:"(This is just a demo dropzone. Selected files are not actually uploaded.)"})})]})}),F.jsx(be,{md:6,lg:6,children:F.jsxs(on,{children:[F.jsx(Hn,{children:F.jsx(Dt,{className:"align-items-center",children:F.jsx(be,{children:F.jsx(qn,{as:"h4",children:"File-pond Upload"})})})}),F.jsx(Wn,{className:"pt-0",children:F.jsx(Td,{})})]})})]}),Ad=()=>F.jsxs(F.Fragment,{children:[F.jsx(ls,{title:"File Uploads"}),F.jsx(Rd,{})]});export{Ad as default};
//# sourceMappingURL=page-JzuuSBXn.js.map
