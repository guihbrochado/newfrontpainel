import{b as y,l as L,r as d,j as e,R as S,d as k,g as A}from"./index-BCS0cig_.js";import{C as B}from"./ComponentContainerCard-Cb_e9E7o.js";import{P as N}from"./PageMetaData-wG5U-ou6.js";import{A as u}from"./Alert-DNG6lhNR.js";import{F as t}from"./Form-Bfo2v19v.js";import{B as D}from"./Button-DeQEhl8G.js";import"./hook-8yLRWsFC.js";import"./extends-CF3RwP-h.js";import"./Anchor-DDbQbNtO.js";import"./Button-BN2bDLjf.js";import"./FormCheck-DCqVgo34.js";import"./FormContext-C2U0W2FA.js";import"./FormCheckInput-DMKv9iTc.js";import"./ElementChildren-D4oQkQsm.js";import"./FormControl-DyBytbGT.js";import"./FormLabel-D8w_mrTU.js";import"./FormSelect-DmuEe_mQ.js";const O=()=>{const{user:h}=y(),v=L(),[a,C]=d.useState({title:"",description:"",image:null,link:"",position:"",status:"ativo"}),[p,x]=d.useState(null),[j,g]=d.useState(null),b="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api",r=m=>{const{name:o,value:l,files:s}=m.target;C(c=>({...c,[o]:s&&s.length>0?s[0]:l}))},f=async m=>{var l,s,c;m.preventDefault(),x(null),g(null);const o=new FormData;o.append("title",a.title),o.append("description",a.description),a.image&&o.append("image",a.image),o.append("url",a.link),o.append("position",a.position),o.append("is_active",a.status==="ativo"?"1":"0");for(let[i,n]of o.entries())console.log(`${i}: ${n instanceof File?n.name:n}`);try{const i=localStorage.getItem("token"),n=await A.post(`${b}/banners`,o,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}});console.log("Resposta do servidor:",n.data),g("Banner criado com sucesso!"),setTimeout(()=>v("/admin/banners"),2e3)}catch(i){const n=i;console.error("Erro ao criar banner:",(l=n.response)==null?void 0:l.data),x(((c=(s=n.response)==null?void 0:s.data)==null?void 0:c.message)||"Erro ao criar banner.")}};return!h||h.role!=="Administrador"?e.jsx(u,{variant:"danger",children:p||"Acesso negado."}):e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Criar Banner"}),e.jsx(S,{className:"justify-content-center",children:e.jsx(k,{md:12,lg:12,children:e.jsxs(B,{title:"Criar Banner",children:[p&&e.jsx(u,{variant:"danger",children:p}),j&&e.jsx(u,{variant:"success",children:j}),e.jsxs(t,{onSubmit:f,children:[e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Título"}),e.jsx(t.Control,{type:"text",name:"title",value:a.title,onChange:r})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Descrição"}),e.jsx(t.Control,{type:"text",name:"description",value:a.description,onChange:r})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Imagem"}),e.jsx(t.Control,{type:"file",name:"image",accept:"image/*",onChange:r,required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Link"}),e.jsx(t.Control,{type:"url",name:"link",value:a.link,onChange:r})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Posição"}),e.jsxs(t.Control,{as:"select",name:"position",value:a.position,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma posição"}),e.jsx("option",{value:"topo",children:"Topo"}),e.jsx("option",{value:"lateral",children:"Lateral"}),e.jsx("option",{value:"entre_conteudos",children:"Entre Conteúdos"}),e.jsx("option",{value:"rodape",children:"Rodapé"})]})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Status"}),e.jsxs(t.Control,{as:"select",name:"status",value:a.status,onChange:r,children:[e.jsx("option",{value:"ativo",children:"Ativo"}),e.jsx("option",{value:"inativo",children:"Inativo"})]})]}),e.jsx(D,{variant:"primary",type:"submit",children:"Criar Banner"})]})]})})})]})};export{O as default};
//# sourceMappingURL=page-Cs8uh12v.js.map
