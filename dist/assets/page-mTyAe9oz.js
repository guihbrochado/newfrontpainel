import{r as a,j as e,C as b,c as v,R as j,d as i,e as E,f as N,g as S,I as C,L as D}from"./index-UUiNTc0V.js";import{_ as P}from"./react-apexcharts.min-CeZx1-bE.js";import{D as A,a as z,b as L,c as f}from"./Dropdown-DyAbvVHF.js";import{P as M}from"./ProgressBar-SSuzN7IN.js";import{B as R}from"./Button-BLYS8AP-.js";import{P as T}from"./PageMetaData-D364TxUJ.js";import"./DataKey-COGXBUcQ.js";import"./SSRProvider-IAODh1YM.js";import"./usePrevious-BWb-eAjs.js";import"./NavContext-BRvIv2qI.js";import"./useWindow-DJtzQdYK.js";import"./mergeOptionsWithPopperConfig-Cbe8MKVx.js";import"./Button-CuaOUBT4.js";import"./hook-QqkXmZtl.js";import"./extends-CF3RwP-h.js";import"./Anchor-CMDYpN7l.js";import"./InputGroupContext-Bpo_VHnx.js";import"./NavbarContext-BmmKdPPR.js";import"./ElementChildren-9All9Wte.js";const k=()=>{const[l,x]=a.useState({total:0,mes:0,semana:0,hoje:0}),[c,h]=a.useState(!0),[d,m]=a.useState(null),[r,n]=a.useState([]),[g,p]=a.useState([]);a.useEffect(()=>{async function s(){var t,u;try{const[w,y]=await Promise.all([S.get("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/posts-total"),S.get("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/posts-por-mes")]);w.data.status==="success"&&x(w.data.data),y.data.status==="success"&&(n(y.data.data.labels),p(y.data.data.values))}catch(w){m(((u=(t=w.response)==null?void 0:t.data)==null?void 0:u.message)||"Erro ao carregar os dados.")}finally{h(!1)}}s()},[]);const o={chart:{height:270,type:"bar",toolbar:{show:!1}},colors:["#22c55e"],plotOptions:{bar:{borderRadius:6,columnWidth:"40%",distributed:!0}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#8997bd"]}},xaxis:{categories:r},yaxis:{labels:{formatter:s=>`${s}`}},grid:{strokeDashArray:2.5},legend:{show:!1}};return e.jsxs(b,{children:[e.jsx(v,{children:e.jsx(j,{className:"align-items-center",children:e.jsx(i,{children:e.jsx(E,{children:"Publicações por mês"})})})}),e.jsx(N,{className:"pt-0",children:c?e.jsx("p",{children:"Carregando..."}):d?e.jsx("p",{className:"text-danger",children:d}):e.jsxs(e.Fragment,{children:[e.jsx(P,{height:270,options:o,series:[{name:"Publicações",data:g}],type:"bar"}),e.jsx(j,{className:"mt-4",children:[{title:"TOTAL",stat:l.total},{title:"NESTE MÊS",stat:l.mes},{title:"NESSA SEMANA",stat:l.semana},{title:"TOTAL HOJE",stat:l.hoje}].map((s,t)=>e.jsx(i,{md:6,lg:3,children:e.jsx(b,{className:"shadow-none border mb-3",children:e.jsxs(N,{className:"text-center",children:[e.jsx("span",{className:"fs-18 fw-semibold",children:s.stat}),e.jsx("h6",{className:"text-uppercase text-muted mt-2 m-0",children:s.title})]})})},t))})]})})]})},O=()=>{const[l,x]=a.useState([]),[c,h]=a.useState(!0),[d,m]=a.useState(null);return a.useEffect(()=>{async function r(){try{const n=await S.get("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/posts-most-viewed");n.data.status==="success"&&x(n.data.data)}catch{m("Erro ao carregar os posts mais visualizados.")}finally{h(!1)}}r()},[]),e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs(j,{className:"align-items-center",children:[e.jsx(i,{children:e.jsx(E,{children:"Mais Visualizados"})}),e.jsx(i,{xs:"auto",children:e.jsxs(A,{children:[e.jsxs(z,{className:"btn bt btn-light",children:[e.jsx("i",{className:"icofont-calendar fs-5 me-1"}),"No mês",e.jsx("i",{className:"ms-1 icofont-caret-down"})]}),e.jsxs(L,{align:"end",children:[e.jsx(f,{href:"#",children:"Hoje"}),e.jsx(f,{href:"#",children:"Última Semana"}),e.jsx(f,{href:"#",children:"Último Mês"}),e.jsx(f,{href:"#",children:"Esse Ano"})]})]})})]})}),e.jsx(N,{className:"pt-0",children:c?e.jsx("p",{children:"Carregando..."}):d?e.jsx("p",{className:"text-danger",children:d}):e.jsx("div",{className:"table-responsive",children:e.jsx("table",{className:"table mb-0",children:e.jsx("tbody",{children:l.map((r,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:r.image,className:"me-2 align-self-center thumb-md",alt:"..."}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[e.jsx("h6",{className:"m-0 text-truncate",children:r.title}),e.jsxs("small",{className:"text-muted",children:["Por ",r.author]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(M,{variant:"primary",now:r.progress,className:"w-100",style:{height:5}}),e.jsxs("small",{className:"flex-shrink-1 ms-1",children:[r.progress.toFixed(1),"%"]})]})]})]})}),e.jsx("td",{className:"px-0 text-end",children:e.jsxs("span",{className:"text-body ps-2 align-self-center text-end",children:[r.views," visualizações"]})})]},n))})})})})]})},I=()=>{const[l,x]=a.useState([]),[c,h]=a.useState([]),[d,m]=a.useState(!0),[r,n]=a.useState(null),g=async()=>{try{m(!0),n(null);const o=await fetch("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/posts/most-viewed-categories");if(!o.ok)throw new Error("Erro ao buscar categorias");const s=await o.json();if(s.status==="success")x(s.data.map(t=>t.name)),h(s.data.map(t=>t.total));else throw new Error(s.message||"Erro ao carregar categorias")}catch(o){n(o instanceof Error?o.message:"Erro desconhecido")}finally{m(!1)}};a.useEffect(()=>{g()},[]);const p={series:[{name:"Itens",data:c}],chart:{type:"bar",height:275,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:6,horizontal:!0,distributed:!0,barHeight:"85%"}},dataLabels:{enabled:!0,formatter:function(o,s){return l[s.dataPointIndex]},style:{colors:["#22c55e"],fontWeight:400,fontSize:"13px"}},xaxis:{categories:l},colors:["rgba(34, 197, 94, 0.45)","rgba(34, 197, 94, 0.4)","rgba(34, 197, 94, 0.35)","rgba(34, 197, 94, 0.3)","rgba(34, 197, 94, 0.25)","rgba(34, 197, 94, 0.2)","rgba(34, 197, 94, 0.15)","rgba(34, 197, 94, 0.1)"],legend:{show:!1}};return e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs(j,{className:"align-items-center",children:[e.jsx(i,{children:e.jsx(E,{children:"Categorias mais Visualizadas"})}),e.jsx(i,{xs:"auto",children:e.jsx("div",{className:"text-center",children:e.jsxs("h6",{className:"text-uppercase text-muted mt-1 m-0",children:[e.jsx("span",{className:"fs-16 fw-semibold",children:l.length})," Categorias"]})})})]})}),e.jsx(N,{className:"pt-0",children:d?e.jsx("div",{className:"text-center py-3",children:"Carregando..."}):r?e.jsx("div",{className:"text-center py-3 text-danger",children:r}):l.length===0?e.jsx("div",{className:"text-center py-3",children:"Nenhuma categoria encontrada"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{height:265,options:p,series:p.series,type:"bar"}),e.jsx("div",{className:"text-center",children:e.jsxs(R,{type:"button",variant:"primary",className:"mx-auto icons-center gap-1",children:["Ver Mais ",e.jsx(C,{icon:"fa6-solid:arrow-right-long"})]})})]})})]})},V=()=>{var o;const[l,x]=a.useState([]),[c,h]=a.useState("month"),[d,m]=a.useState(!0),[r,n]=a.useState(null),g=async s=>{try{m(!0),n(null),console.log(`Buscando autores para período: ${s}`);const t=await fetch(`https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/posts/top-authors?period=${s}`);if(!t.ok)throw console.error("Erro na resposta da API:",t),new Error("Erro ao buscar autores");const u=await t.json();if(console.log("Dados recebidos:",u),u.status==="success")x(u.data);else throw new Error(u.message||"Erro ao carregar dados")}catch(t){n(t instanceof Error?t.message:"Erro desconhecido"),console.error("Erro ao buscar autores:",t)}finally{m(!1)}};a.useEffect(()=>{g(c)},[c]);const p=[{label:"Hoje",value:"today"},{label:"Última Semana",value:"week"},{label:"No Mês",value:"month"},{label:"Esse Ano",value:"year"}];return e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs(j,{className:"align-items-center",children:[e.jsx(i,{children:e.jsx(E,{children:"Autores que mais publicam"})}),e.jsx(i,{xs:"auto",children:e.jsxs(A,{children:[e.jsxs(z,{className:"btn btn-light",children:[e.jsx("i",{className:"icofont-calendar fs-5 me-1"}),((o=p.find(s=>s.value===c))==null?void 0:o.label)||"No Mês",e.jsx(C,{icon:"la:angle-down",className:"ms-1"})]}),e.jsx(L,{align:"end",children:p.map(s=>e.jsx(f,{onClick:()=>h(s.value),active:c===s.value,children:s.label},s.value))})]})})]})}),e.jsx(N,{className:"pt-0",children:d?e.jsx("div",{className:"text-center py-3",children:"Carregando..."}):r?e.jsx("div",{className:"text-center py-3 text-danger",children:r}):l.length===0?e.jsx("div",{className:"text-center py-3",children:"Nenhum autor encontrado para este período."}):e.jsx("div",{className:"table-responsive",children:e.jsx("table",{className:"table mb-0",children:e.jsx("tbody",{children:l.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:s.image,height:36,className:"me-2 align-self-center rounded",alt:s.name}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[e.jsx("h6",{className:"m-0 text-truncate",children:s.name}),e.jsxs(D,{to:`/colunista/${s.id}`,className:"font-12 text-muted text-decoration-underline",children:["#",s.id]})]})]})}),e.jsx("td",{className:"px-0 text-end",children:e.jsx("span",{className:"text-primary ps-2 align-self-center text-end",children:s.amount})})]},t))})})})})]})},re=()=>e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Relatório"}),e.jsx(j,{children:e.jsx(i,{md:12,lg:12,children:e.jsx(k,{})})}),e.jsxs(j,{className:"justify-content-center",children:[e.jsx(i,{md:6,lg:6,children:e.jsx(O,{})}),e.jsx(i,{md:6,lg:6,children:e.jsx(V,{})}),e.jsx(i,{md:12,lg:12,children:e.jsx(I,{})})]})]});export{re as default};
//# sourceMappingURL=page-mTyAe9oz.js.map
