import{r as a,j as e,C as f,c as E,R as g,d as i,e as v,f as b,g as S,L as A}from"./index-BCS0cig_.js";import{_ as C}from"./react-apexcharts.min-DZllWa0y.js";import{P as L}from"./ProgressBar-D14r5WHA.js";import{P as R}from"./PageMetaData-wG5U-ou6.js";import"./ElementChildren-D4oQkQsm.js";const z=()=>{const[c,u]=a.useState({total:0,mes:0,semana:0,hoje:0}),[x,j]=a.useState(!0),[o,d]=a.useState(null),[m,t]=a.useState([]),[l,p]=a.useState([]),n="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api";a.useEffect(()=>{async function s(){var h,P;try{const[N,w]=await Promise.all([S.get(`${n}/posts-total`),S.get(`${n}/posts-por-mes`)]);N.data.status==="success"&&u(N.data.data),w.data.status==="success"&&(t(w.data.data.labels),p(w.data.data.values))}catch(N){d(((P=(h=N.response)==null?void 0:h.data)==null?void 0:P.message)||"Erro ao carregar os dados.")}finally{j(!1)}}s()},[]);const r={chart:{height:270,type:"bar",toolbar:{show:!1}},colors:["#22c55e"],plotOptions:{bar:{borderRadius:6,columnWidth:"40%",distributed:!0}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#8997bd"]}},xaxis:{categories:m},yaxis:{labels:{formatter:s=>`${s}`}},grid:{strokeDashArray:2.5},legend:{show:!1}};return e.jsxs(f,{children:[e.jsx(E,{children:e.jsx(g,{className:"align-items-center",children:e.jsx(i,{children:e.jsx(v,{children:"Publicações por mês"})})})}),e.jsx(b,{className:"pt-0",children:x?e.jsx("p",{children:"Carregando..."}):o?e.jsx("p",{className:"text-danger",children:o}):e.jsxs(e.Fragment,{children:[e.jsx(C,{height:270,options:r,series:[{name:"Publicações",data:l}],type:"bar"}),e.jsx(g,{className:"mt-4",children:[{title:"TOTAL",stat:c.total},{title:"NESTE MÊS",stat:c.mes},{title:"NESSA SEMANA",stat:c.semana},{title:"TOTAL HOJE",stat:c.hoje}].map((s,h)=>e.jsx(i,{md:6,lg:3,children:e.jsx(f,{className:"shadow-none border mb-3",children:e.jsxs(b,{className:"text-center",children:[e.jsx("span",{className:"fs-18 fw-semibold",children:s.stat}),e.jsx("h6",{className:"text-uppercase text-muted mt-2 m-0",children:s.title})]})})},h))})]})})]})},y="/assets/user-B0grYou3.png",T=()=>{const[c,u]=a.useState([]),[x,j]=a.useState(!0),[o,d]=a.useState(null),m="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api";return a.useEffect(()=>{async function t(){try{const l=await S.get(`${m}/posts-most-viewed`);l.data.status==="success"&&u(l.data.data)}catch{d("Erro ao carregar os posts mais visualizados.")}finally{j(!1)}}t()},[]),e.jsxs(f,{children:[e.jsx(E,{children:e.jsx(g,{className:"align-items-center",children:e.jsx(i,{children:e.jsx(v,{children:"Mais Visualizados"})})})}),e.jsx(b,{className:"pt-0",children:x?e.jsx("p",{children:"Carregando..."}):o?e.jsx("p",{className:"text-danger",children:o}):e.jsx("div",{className:"table-responsive",children:e.jsx("table",{className:"table mb-0",children:e.jsx("tbody",{children:c.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:t.image&&t.image.trim()!==""?t.image:y,className:"me-2 align-self-center thumb-md",alt:t.title,onError:p=>p.currentTarget.src=y}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[e.jsx("h6",{className:"m-0 text-truncate",children:t.title}),e.jsxs("small",{className:"text-muted",children:["Por ",t.author]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(L,{variant:"primary",now:t.progress,className:"w-100",style:{height:5}}),e.jsxs("small",{className:"flex-shrink-1 ms-1",children:[t.progress.toFixed(1),"%"]})]})]})]})}),e.jsx("td",{className:"px-0 text-end",children:e.jsxs("span",{className:"text-body ps-2 align-self-center text-end",children:[t.views," visualizações"]})})]},l))})})})})]})},$=()=>{const[c,u]=a.useState([]),[x,j]=a.useState([]),[o,d]=a.useState(!0),[m,t]=a.useState(null),l="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api",p=async()=>{try{d(!0),t(null);const r=await fetch(`${l}/posts/most-viewed-categories`);if(!r.ok)throw new Error("Erro ao buscar categorias");const s=await r.json();if(s.status==="success")u(s.data.map(h=>h.name)),j(s.data.map(h=>h.total));else throw new Error(s.message||"Erro ao carregar categorias")}catch(r){t(r instanceof Error?r.message:"Erro desconhecido")}finally{d(!1)}};a.useEffect(()=>{p()},[]);const n={series:[{name:"Itens",data:x}],chart:{type:"bar",height:275,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:6,horizontal:!0,distributed:!0,barHeight:"85%"}},dataLabels:{enabled:!0,formatter:function(r,s){return c[s.dataPointIndex]},style:{colors:["#22c55e"],fontWeight:400,fontSize:"13px"}},xaxis:{categories:c},colors:["rgba(34, 197, 94, 0.45)","rgba(34, 197, 94, 0.4)","rgba(34, 197, 94, 0.35)","rgba(34, 197, 94, 0.3)","rgba(34, 197, 94, 0.25)","rgba(34, 197, 94, 0.2)","rgba(34, 197, 94, 0.15)","rgba(34, 197, 94, 0.1)"],legend:{show:!1}};return e.jsxs(f,{children:[e.jsx(E,{children:e.jsxs(g,{className:"align-items-center",children:[e.jsx(i,{children:e.jsx(v,{children:"Categorias mais Visualizadas"})}),e.jsx(i,{xs:"auto",children:e.jsx("div",{className:"text-center",children:e.jsxs("h6",{className:"text-uppercase text-muted mt-1 m-0",children:[e.jsx("span",{className:"fs-16 fw-semibold",children:c.length})," Categorias"]})})})]})}),e.jsx(b,{className:"pt-0",children:o?e.jsx("div",{className:"text-center py-3",children:"Carregando..."}):m?e.jsx("div",{className:"text-center py-3 text-danger",children:m}):c.length===0?e.jsx("div",{className:"text-center py-3",children:"Nenhuma categoria encontrada"}):e.jsxs(e.Fragment,{children:[e.jsx(C,{height:265,options:n,series:n.series,type:"bar"}),e.jsx("div",{className:"text-center"})]})})]})},I=()=>{const[c,u]=a.useState([]),[x,j]=a.useState("month"),[o,d]=a.useState(!0),[m,t]=a.useState(null),l="https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api",p=async n=>{try{d(!0),t(null),console.log(`Buscando autores para período: ${n}`);const r=await fetch(`${l}/posts/top-authors?period=${n}`);if(!r.ok)throw console.error("Erro na resposta da API:",r),new Error("Erro ao buscar autores");const s=await r.json();if(console.log("Dados recebidos:",s),s.status==="success")u(s.data);else throw new Error(s.message||"Erro ao carregar dados")}catch(r){t(r instanceof Error?r.message:"Erro desconhecido"),console.error("Erro ao buscar autores:",r)}finally{d(!1)}};return a.useEffect(()=>{p(x)},[x]),e.jsxs(f,{children:[e.jsx(E,{children:e.jsx(g,{className:"align-items-center",children:e.jsx(i,{children:e.jsx(v,{children:"Autores que mais publicam"})})})}),e.jsx(b,{className:"pt-0",children:o?e.jsx("div",{className:"text-center py-3",children:"Carregando..."}):m?e.jsx("div",{className:"text-center py-3 text-danger",children:m}):c.length===0?e.jsx("div",{className:"text-center py-3",children:"Nenhum autor encontrado para este período."}):e.jsx("div",{className:"table-responsive",children:e.jsx("table",{className:"table mb-0",children:e.jsx("tbody",{children:c.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:n.image&&n.image.trim()!==""?n.image:y,height:36,className:"me-2 align-self-center rounded",alt:n.name,onError:s=>s.currentTarget.src=y}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[e.jsx("h6",{className:"m-0 text-truncate",children:n.name}),e.jsxs(A,{to:`/colunista/${n.id}`,className:"font-12 text-muted text-decoration-underline",children:["#",n.id]})]})]})}),e.jsx("td",{className:"px-0 text-end",children:e.jsx("span",{className:"text-primary ps-2 align-self-center text-end",children:n.amount})})]},r))})})})})]})},V=()=>e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Relatório"}),e.jsx(g,{children:e.jsx(i,{md:12,lg:12,children:e.jsx(z,{})})}),e.jsxs(g,{className:"justify-content-center",children:[e.jsx(i,{md:6,lg:6,children:e.jsx(T,{})}),e.jsx(i,{md:6,lg:6,children:e.jsx(I,{})}),e.jsx(i,{md:12,lg:12,children:e.jsx($,{})})]})]});export{V as default};
//# sourceMappingURL=page-B30OdubS.js.map
