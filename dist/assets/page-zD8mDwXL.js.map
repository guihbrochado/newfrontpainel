{"version":3,"file":"page-zD8mDwXL.js","sources":["../../src/app/(admin)/dashboard/banners-analytics/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Table, Alert, Form, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport ComponentContainerCard from \"@/components/ComponentContainerCard\";\n\nconst calculateCTR = (clicks: number, views: number) => {\n  if (views === 0) return \"0%\";\n  return ((clicks / views) * 100).toFixed(2) + \"%\";\n};\n\nconst BannersAnalytics = () => {\n  const [reportData, setReportData] = useState([]);\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [position, setPosition] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchReport();\n  }, []);\n\n  const fetchReport = async () => {\n    setLoading(true);\n    const token = localStorage.getItem(\"token\");\n\n    try {\n      const response = await axios.get(\"https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/banners/reports\", {\n        params: { start_date: startDate, end_date: endDate, position },\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      setReportData(response.data.data);\n      setError(\"\");\n    } catch (err) {\n      setError(\"Erro ao carregar os relatórios.\");\n    }\n    setLoading(false);\n  };\n\n  return (\n    <ComponentContainerCard title=\"Análises de Banners\">\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      {/* Filtros */}\n      <Form className=\"mb-3\">\n        <div className=\"d-flex gap-2\">\n          <Form.Group controlId=\"startDate\">\n            <Form.Label>Data Inicial</Form.Label>\n            <Form.Control\n              type=\"date\"\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n            />\n          </Form.Group>\n\n          <Form.Group controlId=\"endDate\">\n            <Form.Label>Data Final</Form.Label>\n            <Form.Control\n              type=\"date\"\n              value={endDate}\n              onChange={(e) => setEndDate(e.target.value)}\n            />\n          </Form.Group>\n\n          <Form.Group controlId=\"position\">\n            <Form.Label>Posição</Form.Label>\n            <Form.Control as=\"select\" value={position} onChange={(e) => setPosition(e.target.value)}>\n              <option value=\"\">Todas</option>\n              <option value=\"topo\">Topo</option>\n              <option value=\"lateral\">Lateral</option>\n              <option value=\"entre_conteudos\">Entre Conteúdos</option>\n              <option value=\"rodape\">Rodapé</option>\n            </Form.Control>\n          </Form.Group>\n\n          <Button variant=\"primary\" className=\"align-self-end\" onClick={fetchReport}>\n            Filtrar\n          </Button>\n        </div>\n      </Form>\n\n      {/* Tabela de Relatórios */}\n      {loading ? (\n        <p>Carregando...</p>\n      ) : (\n        <Table striped bordered hover>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Título</th>\n              <th>Posição</th>\n              <th>Clique Total</th>\n              <th>Impressões</th>\n              <th>CTR (%)</th>\n              <th>Data Inicial</th>\n              <th>Data Final</th>\n            </tr>\n          </thead>\n          <tbody>\n            {reportData.map((banner, idx) => (\n              <tr key={idx}>\n                <td>{banner.id}</td>\n                <td>{banner.title}</td>\n                <td>{banner.position}</td>\n                <td>{banner.clicks}</td>\n                <td>{banner.views}</td>\n                <td>{calculateCTR(banner.clicks, banner.views)}</td>\n                <td>{banner.start_date || \"N/A\"}</td>\n                <td>{banner.end_date || \"N/A\"}</td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </ComponentContainerCard>\n  );\n};\n\nexport default BannersAnalytics;\n"],"names":["calculateCTR","clicks","views","BannersAnalytics","reportData","setReportData","useState","startDate","setStartDate","endDate","setEndDate","position","setPosition","error","setError","loading","setLoading","useEffect","fetchReport","token","response","axios","jsxs","ComponentContainerCard","jsx","Alert","Form","Button","Table","banner","idx"],"mappings":"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"}