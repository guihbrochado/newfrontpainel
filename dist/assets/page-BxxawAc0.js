import{r as i,j as e,R as y,d as C}from"./index-BCS0cig_.js";import{k as I}from"./data-Cwpf2RNN.js";import{c as O,d as U,o as D}from"./index.esm-hLFWM5zR.js";import{c as v}from"./clsx-B-dksMZM.js";import{u as E}from"./index.esm-2DaaO1Fk.js";import{m as F}from"./apps-7rVv-XUJ.js";import{T as K}from"./TextFormInput-DXbP9q29.js";import{I as n}from"./IconifyIcon-JVia4Tlw.js";import{S as w}from"./SimplebarReactClient-oNc3R5pp.js";import{a as p,t as g}from"./date-WLc5EZBr.js";import{a as L}from"./avatar-1-BO000dvc.js";import{a as R}from"./avatar-10-B1FJbhiE.js";import{O as u,T as j}from"./OverlayTrigger-DgHDCC5g.js";import{T as M,a as V,b as B}from"./TabPane-DvozKMnb.js";import{u as f}from"./other-Dje2SsZM.js";import{N as $}from"./Nav-BtlBT8an.js";import{N as b}from"./NavItem-DHgsDGUD.js";import{N}from"./NavLink-DQORK055.js";import{P as q}from"./PageMetaData-wG5U-ou6.js";import"./products-Bsi0yyVD.js";import"./avatar-2-HWf29V0S.js";import"./avatar-3-CWF5YbYz.js";import"./avatar-4-BIM0t6XN.js";import"./avatar-5-BuQv4wS1.js";import"./avatar-6-UroM5mc-.js";import"./avatar-7-BVfp9bJ_.js";import"./avatar-8-Stif89Jp.js";import"./avatar-9-Pb2h4EL1.js";import"./FormContext-C2U0W2FA.js";import"./FormLabel-D8w_mrTU.js";import"./FormControl-DyBytbGT.js";import"./throttle-DHp0GA15.js";import"./useWindow-BOkGfrdz.js";import"./hook-8yLRWsFC.js";import"./extends-CF3RwP-h.js";import"./mergeOptionsWithPopperConfig-Bfs5GLKd.js";import"./hasClass-BYYRATLY.js";import"./NoopTransition-C1r8Fpoq.js";import"./SSRProvider-Dxj6v2Pp.js";import"./NavItem-YjHbLWYX.js";import"./NavContext-3NvzG64K.js";import"./Button-BN2bDLjf.js";import"./DataKey-COGXBUcQ.js";import"./french_flag-25D52b-n.js";import"./chatgpt-B6JRjYGz.js";import"./slack-uSnaw-Vs.js";import"./gitlab-qJGS6fLj.js";import"./Nav-B2YCnUUH.js";import"./NavbarContext-Ds3JXl9o.js";import"./Anchor-DDbQbNtO.js";const S=i.createContext(void 0),A=()=>{const s=i.useContext(S);if(!s)throw new Error("useChatContext can only be used within ChatProvider");return s},G=({children:s})=>{const[t,a]=i.useState(),r=async l=>{const m=await I(l);m&&a(m)};return i.useEffect(()=>{r("101")},[]),e.jsx(S.Provider,{value:{activeChat:t,changeActiveChat:r},children:s})},H=()=>{const s=i.useRef(null);return i.useEffect(()=>{var t;(t=s==null?void 0:s.current)!=null&&t.scrollIntoView&&s.current.scrollIntoView({behavior:"smooth"})}),e.jsx("div",{ref:s})},z=({message:s,toUser:t})=>{const a=s.from.id===t.id;return e.jsxs("div",{className:v("d-flex",{"flex-row-reverse":a}),children:[e.jsx("img",{src:s.from.avatar,alt:"user-avatar",className:"rounded-circle thumb-md"}),e.jsxs("div",{className:v("chat-box w-100",a?"me-1 reverse":"ms-1"),children:[e.jsx("div",{className:"user-chat",children:e.jsx("p",{children:s.message})}),e.jsx("div",{className:"chat-time",children:g(new Date(s.sentOn))})]})]})},J=()=>{const{activeChat:s}=A(),[t,a]=i.useState([]),r=O({newMessage:U().required("Please enter message")}),{reset:l,handleSubmit:m,control:h}=E({resolver:D(r)}),[c]=i.useState({id:"103",name:"Gilbert Chicoine",avatar:R,handle:"@gilbert",role:"User",source:"Direct",status:"Active",email:"jamesbridge@teleworm.us",lastMessage:"Hey! Okay, thank you for letting me know. See you!",lastActivity:p(1),phoneNo:"456 9595 9594",activityStatus:"typing"}),k=i.useCallback(()=>{s&&a(F.filter(o=>o.to.id===c.id&&o.from.id===s.id||c.id===o.from.id&&o.to.id===s.id))},[s,c]);i.useEffect(()=>{k()},[s]);const P=o=>{if(s){const d=[...t];d.push({id:(t.length+1).toString(),from:c,to:s,message:o.newMessage??"",sentOn:p(.1)}),setTimeout(()=>{const x=[...d];x.push({id:(t.length+1).toString(),from:s,to:c,message:o.newMessage??"",sentOn:p(.1)}),a(x)},1e3),a(d),l()}};if(s){const{name:o,lastActivity:d}=s;return e.jsxs("div",{className:"chat-box-right",children:[e.jsxs("div",{className:"p-3 d-flex justify-content-between align-items-center card-bg rounded",children:[e.jsxs("div",{role:"button",className:"d-flex align-self-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.avatar??L,alt:"user",className:"rounded-circle thumb-lg"})}),e.jsx("div",{className:"flex-grow-1 ms-2 align-self-center",children:e.jsxs("div",{children:[e.jsx("h6",{className:"my-0 fw-medium text-dark fs-14",children:o}),e.jsxs("p",{className:"text-muted mb-0",children:["Last seen: ",g(new Date(d))]})]})})]}),e.jsxs("div",{className:"d-none d-sm-inline-block align-self-center mb-1",children:[e.jsx(u,{placement:"top",overlay:e.jsx(j,{className:"tooltip-primary",children:"Call"}),children:e.jsx("span",{role:"button",className:"fs-22 me-2 text-muted",children:e.jsx(n,{icon:"iconoir:phone"})})}),e.jsx(u,{placement:"top",overlay:e.jsx(j,{className:"tooltip-primary",children:"Video call"}),children:e.jsx("span",{role:"button",className:"fs-22 me-2 text-muted",children:e.jsx(n,{icon:"iconoir:video-camera"})})}),e.jsx(u,{placement:"top",overlay:e.jsx(j,{className:"tooltip-primary",children:"Delete"}),children:e.jsx("span",{role:"button",className:"fs-22 me-2 text-muted",children:e.jsx(n,{icon:"iconoir:trash"})})}),e.jsx("span",{role:"button",className:"fs-22 text-muted",children:e.jsx(n,{icon:"iconoir:menu-scale"})})]})]}),e.jsx(w,{className:"chat-body",children:e.jsxs("div",{className:"chat-detail",children:[t.map(x=>e.jsx(z,{message:x,toUser:c},x.id)),e.jsx(H,{})]})}),e.jsx("div",{className:"chat-footer",children:e.jsxs("form",{className:"d-flex",onSubmit:m(P),children:[e.jsx(K,{containerClassName:"w-100",name:"newMessage",control:h,placeholder:"Type something here...",noValidate:!0}),e.jsx("div",{className:"text-end",children:e.jsxs("div",{className:"chat-features icons-center flex-nowrap",children:[e.jsxs("div",{className:"d-none d-sm-inline-flex ",children:[e.jsx("span",{role:"button",children:e.jsx(n,{icon:"iconoir:camera"})}),e.jsx("span",{role:"button",children:e.jsx(n,{icon:"iconoir:attachment"})}),e.jsx("span",{role:"button",children:e.jsx(n,{icon:"iconoir:microphone"})})]}),e.jsx("button",{type:"submit",role:"button",className:"btn p-0 text-primary",children:e.jsx(n,{icon:"iconoir:send-solid"})})]})})]})})]})}},T=({id:s,avatar:t,activityStatus:a,lastActivity:r,lastMessage:l,name:m,unreadCount:h})=>{const{changeActiveChat:c}=A();return e.jsx("div",{onClick:()=>c(s),className:"p-2 border-dashed border-theme-color rounded mb-2",children:e.jsx("div",{role:"button",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:t,alt:"avatar",className:"thumb-lg rounded-circle"}),e.jsx("span",{className:"position-absolute bottom-0 end-0",children:e.jsx(n,{icon:"fa6-solid:circle",className:v("fs-10 border-2 border-theme-color",a!=="offline"?"text-success":"text-secondary")})})]}),e.jsxs("div",{className:"flex-grow-1 ms-2 text-truncate align-self-center",children:[e.jsxs("h6",{className:"my-0 fw-medium text-dark fs-14",children:[m,e.jsx("small",{className:"float-end text-muted fs-11",children:g(new Date(r))})]}),e.jsxs("p",{className:"text-muted mb-0",children:[a==="typing"?e.jsx("span",{className:"text-primary",children:"Typing..."}):l,h&&e.jsx("span",{className:"badge float-end rounded text-white bg-success ",children:h})]})]})]})})})},Q=({chats:s})=>e.jsx(M,{eventKey:"Active",className:"fade",role:"tabpanel",children:s.filter(t=>t.activityStatus!=="offline").map(t=>e.jsx(T,{...t},t.id))}),W=({chats:s})=>e.jsx(M,{eventKey:"Messages",className:"fade",role:"tabpanel",children:e.jsx(y,{children:e.jsx(C,{children:s.map(t=>e.jsx(T,{...t},t.id))})})}),X=()=>{const[s,t]=i.useState(f),a=r=>{t(r?f.filter(l=>l.name.toLowerCase().indexOf(r.toLowerCase())>=0):f)};return e.jsx("div",{className:"chat-box-left",children:e.jsxs(V,{mountOnEnter:!0,defaultActiveKey:"Messages",children:[e.jsxs($,{justify:!0,variant:"tabs",children:[e.jsx(b,{role:"presentation",children:e.jsx(N,{as:"span",className:"py-2",eventKey:"Messages",role:"button",children:"Messages"})}),e.jsx(b,{role:"presentation",children:e.jsx(N,{as:"span",className:"py-2",eventKey:"Active",role:"button",children:"Active"})})]}),e.jsx("div",{className:"chat-search p-3",children:e.jsx("div",{className:"p-1 bg-light rounded rounded-pill",children:e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("button",{type:"button",className:"btn btn-link text-secondary",children:e.jsx(n,{icon:"fa6-solid:magnifying-glass"})})}),e.jsx("input",{type:"search",placeholder:"Searching..",onChange:r=>a(r.target.value),"aria-describedby":"button-addon2",className:"form-control border-0 bg-light"})]})})}),e.jsx(w,{className:"chat-body-left px-3",children:e.jsxs(B,{children:[e.jsx(W,{chats:s}),e.jsx(Q,{chats:s})]})})]})})},Je=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Chat"}),e.jsx(y,{children:e.jsx(C,{xs:12,children:e.jsxs(G,{children:[e.jsx(X,{}),e.jsx(J,{})]})})})]});export{Je as default};
//# sourceMappingURL=page-BxxawAc0.js.map
