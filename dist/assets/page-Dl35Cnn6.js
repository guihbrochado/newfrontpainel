import{r as m,i as A,j as e,k as U,P as d,g as v}from"./index-UUiNTc0V.js";import{A as C}from"./Alert-CmRbplvD.js";import{F as o}from"./Form-QbBLU92o.js";import{B as y}from"./Button-BLYS8AP-.js";import"./hook-QqkXmZtl.js";import"./extends-CF3RwP-h.js";import"./Anchor-CMDYpN7l.js";import"./Button-CuaOUBT4.js";import"./FormCheck-CUEJfWsW.js";import"./FormContext-n6TyEwzp.js";import"./FormCheckInput-CTZsx7Pk.js";import"./ElementChildren-9All9Wte.js";import"./FormControl-CuFy3YGR.js";import"./FormLabel-GeQA8Xa_.js";import"./FormSelect-DLxzYE-u.js";d.string,d.bool,d.bool,d.bool,d.bool;const b=m.forwardRef(({bsPrefix:r,className:i,fluid:p=!1,rounded:u=!1,roundedCircle:s=!1,thumbnail:n=!1,...h},f)=>(r=A(r,"img"),e.jsx("img",{ref:f,...h,className:U(i,p&&`${r}-fluid`,u&&"rounded",s&&"rounded-circle",n&&`${r}-thumbnail`)})));b.displayName="Image";const S=r=>{const p=/[A-Z]/.test(r),u=/[a-z]/.test(r),s=/\d/.test(r);return r.length<8?"A senha deve ter pelo menos 8 caracteres.":p?u?s?null:"A senha deve conter pelo menos um n√∫mero.":"A senha deve conter pelo menos uma letra min√∫scula.":"A senha deve conter pelo menos uma letra mai√∫scula."},T=()=>{const[r,i]=m.useState({name:"",email:"",password:"",role:"Usu√°rio Restrito",profile_photo:null}),[p,u]=m.useState(null),[s,n]=m.useState(""),[h,f]=m.useState(""),[x,g]=m.useState("");m.useEffect(()=>{(async()=>{const l=localStorage.getItem("token");try{const a=await v.get("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/user",{headers:{Authorization:`Bearer ${l}`}});console.log(a.data),f(a.data.role),a.data.role!=="Administrador"&&g("üö´ Voc√™ n√£o tem permiss√£o para criar usu√°rios!")}catch{g("Erro ao carregar permiss√µes.")}})()},[]);const c=t=>{if(t.target.name==="profile_photo"){const l=t.target.files[0];i({...r,profile_photo:l});const a=new FileReader;a.onloadend=()=>u(a.result),a.readAsDataURL(l)}else i({...r,[t.target.name]:t.target.value})},w=async t=>{t.preventDefault();const l=S(r.password);if(l){n(`üö´ ${l}`);return}if(h!=="Administrador"){n("üö´ Apenas administradores podem criar usu√°rios.");return}const a=new FormData;a.append("name",r.name),a.append("email",r.email),a.append("password",r.password),a.append("role",r.role),r.profile_photo&&a.append("profile_photo",r.profile_photo);try{const j=await v.post("https://webapp396758.ip-45-33-113-78.cloudezapp.io/public/api/users",a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});console.log(j.data),n("‚úÖ Usu√°rio criado com sucesso!"),i({name:"",email:"",password:"",role:"Usu√°rio Restrito",profile_photo:null}),u(null)}catch{n("üö´ Erro ao criar usu√°rio.")}};return x?e.jsx(C,{variant:"danger",children:x}):e.jsxs("div",{children:[e.jsx("h2",{children:"üÜï Criar Usu√°rio"}),s&&e.jsx(C,{variant:s.startsWith("‚úÖ")?"success":"danger",children:s}),e.jsxs(o,{onSubmit:w,children:[e.jsxs(o.Group,{controlId:"name",children:[e.jsx(o.Label,{children:"Nome"}),e.jsx(o.Control,{type:"text",name:"name",value:r.name,onChange:c,required:!0})]}),e.jsxs(o.Group,{controlId:"email",children:[e.jsx(o.Label,{children:"Email"}),e.jsx(o.Control,{type:"email",name:"email",value:r.email,onChange:c,required:!0})]}),e.jsxs(o.Group,{controlId:"password",children:[e.jsx(o.Label,{children:"Senha"}),e.jsx(o.Control,{type:"password",name:"password",value:r.password,onChange:t=>{i({...r,[t.target.name]:t.target.value}),s.startsWith("üö´")&&s!=="üö´ Apenas administradores podem criar usu√°rios."&&n("")},required:!0}),e.jsx(o.Text,{className:"text-muted",children:"A senha deve ter pelo menos 8 caracteres, incluindo uma letra mai√∫scula, uma letra min√∫scula e um n√∫mero."})]}),e.jsxs(o.Group,{controlId:"role",children:[e.jsx(o.Label,{children:"Tipo de Usu√°rio"}),e.jsxs(o.Control,{as:"select",name:"role",value:r.role,onChange:c,required:!0,children:[e.jsx("option",{value:"Administrador",children:"Administrador"}),e.jsx("option",{value:"Editor",children:"Editor"}),e.jsx("option",{value:"Colunista",children:"Colunista"}),e.jsx("option",{value:"Usu√°rio Restrito",children:"Usu√°rio Restrito"})]})]}),e.jsxs(o.Group,{controlId:"profile_photo",children:[e.jsx(o.Label,{children:"Foto de Perfil"}),e.jsx(o.Control,{type:"file",name:"profile_photo",onChange:c,accept:"image/*"})]}),p&&e.jsx("div",{className:"text-center mt-2",children:e.jsx(b,{src:p,alt:"Pr√©via da Foto",roundedCircle:!0,width:100})}),e.jsx(y,{variant:"success",type:"submit",className:"mt-3",children:"Criar Usu√°rio"})]})]})};export{T as default};
//# sourceMappingURL=page-Dl35Cnn6.js.map
